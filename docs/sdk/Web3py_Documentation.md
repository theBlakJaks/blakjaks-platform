---
author: Author name not set
contributor: unknown
date: "2026-02-03T22:57:27Z"
description: unknown
identifier: unknown
language: en
publisher: Author name not set
rights: 2016-2025, The Ethereum Foundation
title: web3.py
---

[]{#index.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#index.xhtml#gm .section}
# gm

![Banner Image](./_banner-snek.jpg)

**web3.py** is a Python library for interacting with Ethereum.

It's commonly found in [decentralized apps
(dapps)](https://ethereum.org/en/dapps/){.reference .external}[
\[https://ethereum.org/en/dapps/\]]{.link-target} to help with sending
transactions, interacting with smart contracts, reading block data, and
a variety of other use cases.

For project updates, follow
[\@EthereumPython](https://twitter.com/EthereumPython){.reference
.external}[ \[https://twitter.com/EthereumPython\]]{.link-target} and
sign up for new post notifications on the
[blog](https://snakecharmers.ethereum.org/){.reference .external}[
\[https://snakecharmers.ethereum.org/\]]{.link-target}.

::: {#index.xhtml#getting-started .section}
## Getting Started

::: {.admonition .note}
Note

ðŸ‘‹ Brand new to Ethereum?

0.  Don't travel alone! Join the Ethereum Python Community
    [Discord](https://discord.gg/GHryRvPB84){.reference .external}[
    \[https://discord.gg/GHryRvPB84\]]{.link-target}.

1.  Read this [blog post
    series](https://snakecharmers.ethereum.org/a-developers-guide-to-ethereum-pt-1){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/a-developers-guide-to-ethereum-pt-1\]]{.link-target}
    for a gentle introduction to Ethereum blockchain concepts.

2.  The [[Overview]{.std .std-ref}](#overview.xhtml#overview){.reference
    .internal} page will give you a quick idea of what else web3.py can
    do.

3.  Try building a little something!
:::

-   Ready to code? â†’ [[Quickstart]{.std
    .std-ref}](#quickstart.xhtml#quickstart){.reference .internal}

-   Quick tour? â†’ [[Overview]{.std
    .std-ref}](#overview.xhtml#overview){.reference .internal}

-   Synchronous help? â†’
    [Discord](https://discord.gg/GHryRvPB84){.reference .external}[
    \[https://discord.gg/GHryRvPB84\]]{.link-target}

-   Asynchronous help? â†’
    [StackExchange](https://ethereum.stackexchange.com/questions/tagged/web3.py){.reference
    .external}[
    \[https://ethereum.stackexchange.com/questions/tagged/web3.py\]]{.link-target}

-   Report a bug? â†’
    [Github](https://github.com/ethereum/web3.py/issues){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues\]]{.link-target}

-   Want to help us? â†’ [[Contribute]{.std
    .std-ref}](#contributing.xhtml#contributing){.reference .internal}

-   Looking for inspiration? â†’ [[Resources and Learning Material]{.std
    .std-ref}](#resources.xhtml#resources){.reference .internal}
:::

::: {#index.xhtml#table-of-contents .section}
## Table of Contents

::: {.toctree-wrapper .compound}
[Intro]{.caption-text}

-   [Quickstart](#quickstart.xhtml){.reference .internal}
-   [Overview](#overview.xhtml){.reference .internal}
-   [Release Notes](#release_notes.xhtml){.reference .internal}
:::

::: {.toctree-wrapper .compound}
[Guides]{.caption-text}

-   [Providers](#providers.xhtml){.reference .internal}
-   [Accounts](#web3.eth.account.xhtml){.reference .internal}
-   [Transactions](#transactions.xhtml){.reference .internal}
-   [Contracts](#web3.contract.xhtml){.reference .internal}
-   [Events and Logs](#filters.xhtml){.reference .internal}
-   [Event Subscriptions](#subscriptions.xhtml){.reference .internal}
-   [Middleware](#middleware.xhtml){.reference .internal}
-   [Formatters](#formatters.xhtml){.reference .internal}
-   [Web3 Internals](#internals.xhtml){.reference .internal}
-   [Ethereum Name Service (ENS)](#ens_overview.xhtml){.reference
    .internal}
-   [Troubleshooting](#troubleshooting.xhtml){.reference .internal}
-   [Migration Guide](#migration.xhtml){.reference .internal}
:::

::: {.toctree-wrapper .compound}
[API]{.caption-text}

-   [Web3 API](#web3.main.xhtml){.reference .internal}
-   [web3.eth API](#web3.eth.xhtml){.reference .internal}
-   [Beacon API](#web3.beacon.xhtml){.reference .internal}
-   [Net API](#web3.net.xhtml){.reference .internal}
-   [Geth API](#web3.geth.xhtml){.reference .internal}
-   [Tracing API](#web3.tracing.xhtml){.reference .internal}
-   [Utils](#web3.utils.xhtml){.reference .internal}
-   [Gas Price API](#gas_price.xhtml){.reference .internal}
-   [ENS API](#ens.xhtml){.reference .internal}
-   [Constants](#constants.xhtml){.reference .internal}
:::

::: {.toctree-wrapper .compound}
[Community]{.caption-text}

-   [Resources and Learning Material](#resources.xhtml){.reference
    .internal}
-   [Contributing](#contributing.xhtml){.reference .internal}
-   [Code of Conduct](#code_of_conduct.xhtml){.reference .internal}
:::
:::

::: {#index.xhtml#indices-and-tables .section}
## Indices and tables

-   [[Index]{.std .std-ref}](#genindex.xhtml){.reference .internal}

-   [[Module Index]{.std .std-ref}](#py-modindex.xhtml){.reference
    .internal}

-   [[Search Page]{.std .std-ref}](search.xhtml){.reference .internal}
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#quickstart.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#quickstart.xhtml#quickstart .section}
[]{#quickstart.xhtml#id1}

# Quickstart

```{=html}
<nav class="contents local" id="contents">
```
-   [Installation](#quickstart.xhtml#installation){#quickstart.xhtml#id2
    .reference .internal}

-   [Using Web3](#quickstart.xhtml#using-web3){#quickstart.xhtml#id3
    .reference .internal}

    -   [Test
        Provider](#quickstart.xhtml#test-provider){#quickstart.xhtml#id4
        .reference .internal}

    -   [Local
        Providers](#quickstart.xhtml#local-providers){#quickstart.xhtml#id5
        .reference .internal}

    -   [Remote
        Providers](#quickstart.xhtml#remote-providers){#quickstart.xhtml#id6
        .reference .internal}

-   [Getting Blockchain
    Info](#quickstart.xhtml#getting-blockchain-info){#quickstart.xhtml#id7
    .reference .internal}

```{=html}
</nav>
```
::: {.admonition .note}
Note

All code starting with a [`$`{.docutils .literal .notranslate}]{.pre} is
meant to run on your terminal. All code starting with a [`>>>`{.docutils
.literal .notranslate}]{.pre} is meant to run in a python interpreter,
like [ipython](https://pypi.org/project/ipython/){.reference .external}[
\[https://pypi.org/project/ipython/\]]{.link-target}.
:::

::: {#quickstart.xhtml#installation .section}
## [Installation](#quickstart.xhtml#id2){.toc-backref role="doc-backlink"}

web3.py can be installed (preferably in a [[virtualenv]{.std
.std-ref}](#troubleshooting.xhtml#setup-environment){.reference
.internal}) using [`pip`{.docutils .literal .notranslate}]{.pre} as
follows:

::: {.highlight-shell .notranslate}
::: highlight
    $ pip install web3
:::
:::

::: {.admonition .note}
Note

If you run into problems during installation, you might have a broken
environment. See the troubleshooting guide to [[setting up a clean
environment]{.std
.std-ref}](#troubleshooting.xhtml#setup-environment){.reference
.internal}.
:::
:::

::: {#quickstart.xhtml#using-web3 .section}
## [Using Web3](#quickstart.xhtml#id3){.toc-backref role="doc-backlink"}

This library depends on a connection to an Ethereum node. We call these
connections *Providers* and there are several ways to configure them.
The full details can be found in the [[Providers]{.std
.std-ref}](#providers.xhtml#providers){.reference .internal}
documentation. This Quickstart guide will highlight a couple of the most
common use cases.

::: {#quickstart.xhtml#test-provider .section}
### [Test Provider](#quickstart.xhtml#id4){.toc-backref role="doc-backlink"}

If you're just learning the ropes or doing some quick prototyping, you
can use a test provider,
[eth-tester](https://github.com/ethereum/eth-tester){.reference
.external}[ \[https://github.com/ethereum/eth-tester\]]{.link-target}.
This provider includes some accounts prepopulated with test ether and
instantly includes each transaction into a block. web3.py makes this
test provider available via [`EthereumTesterProvider`{.docutils .literal
.notranslate}]{.pre}.

::: {.admonition .note}
Note

The [`EthereumTesterProvider`{.docutils .literal .notranslate}]{.pre}
requires additional dependencies. Install them via [`pip`{.docutils
.literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`install`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`"web3[tester]"`{.docutils .literal .notranslate}]{.pre},
then import and instantiate the provider as seen below.
:::

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3 import Web3, EthereumTesterProvider
    >>> w3 = Web3(EthereumTesterProvider())
    >>> w3.is_connected()
    True
:::
:::
:::

::: {#quickstart.xhtml#local-providers .section}
### [Local Providers](#quickstart.xhtml#id5){.toc-backref role="doc-backlink"}

The hardware requirements are
[steep](https://ethereum.org/en/developers/docs/nodes-and-clients/run-a-node/#top){.reference
.external}[
\[https://ethereum.org/en/developers/docs/nodes-and-clients/run-a-node/#top\]]{.link-target},
but the safest way to interact with Ethereum is to run an Ethereum
client on your own hardware. For locally run nodes, an IPC connection is
the most secure option, but HTTP and websocket configurations are also
available. By default, the popular [Geth
client](https://geth.ethereum.org/){.reference .external}[
\[https://geth.ethereum.org/\]]{.link-target} exposes port
[`8545`{.docutils .literal .notranslate}]{.pre} to serve HTTP requests
and [`8546`{.docutils .literal .notranslate}]{.pre} for websocket
requests. Connecting to this local node can be done as follows:

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3 import Web3, AsyncWeb3

    # IPCProvider:
    >>> w3 = Web3(Web3.IPCProvider('./path/to/filename.ipc'))
    >>> w3.is_connected()
    True

    # HTTPProvider:
    >>> w3 = Web3(Web3.HTTPProvider('http://127.0.0.1:8545'))
    >>> w3.is_connected()
    True

    # AsyncHTTPProvider:
    >>> w3 = AsyncWeb3(AsyncWeb3.AsyncHTTPProvider('http://127.0.0.1:8545'))
    >>> await w3.is_connected()
    True

    # -- Persistent Connection Providers -- #

    # WebSocketProvider:
    >>> w3 = await AsyncWeb3(AsyncWeb3.WebSocketProvider('ws://127.0.0.1:8546'))
    >>> await w3.is_connected()
    True

    # AsyncIPCProvider:
    >>> w3 = await AsyncWeb3(AsyncWeb3.AsyncIPCProvider('./path/to/filename.ipc'))
    >>> await w3.is_connected()
    True
:::
:::
:::

::: {#quickstart.xhtml#remote-providers .section}
### [Remote Providers](#quickstart.xhtml#id6){.toc-backref role="doc-backlink"}

The quickest way to interact with the Ethereum blockchain is to use a
[remote node
provider](https://ethereum.org/en/developers/docs/nodes-and-clients/nodes-as-a-service/#popular-node-services){.reference
.external}[
\[https://ethereum.org/en/developers/docs/nodes-and-clients/nodes-as-a-service/#popular-node-services\]]{.link-target}.
You can connect to a remote node by specifying the endpoint, just like
the previous local node example:

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3 import Web3, AsyncWeb3

    >>> w3 = Web3(Web3.HTTPProvider('https://<your-provider-url>'))

    >>> w3 = AsyncWeb3(AsyncWeb3.AsyncHTTPProvider('https://<your-provider-url>'))

    >>> w3 = await AsyncWeb3(AsyncWeb3.WebSocketProvider('wss://<your-provider-url>'))
:::
:::

This endpoint is provided by the remote node service, typically after
you create an account.
:::
:::

::: {#quickstart.xhtml#getting-blockchain-info .section}
[]{#quickstart.xhtml#first-w3-use}

## [Getting Blockchain Info](#quickstart.xhtml#id7){.toc-backref role="doc-backlink"}

It's time to start using web3.py! Once properly configured, the
[`w3`{.docutils .literal .notranslate}]{.pre} instance will allow you to
interact with the Ethereum blockchain. Try getting all the information
about the latest block:

::: {.highlight-python .notranslate}
::: highlight
    >>> w3.eth.get_block('latest')
    {'difficulty': 1,
     'gasLimit': 6283185,
     'gasUsed': 0,
     'hash': HexBytes('0x53b983fe73e16f6ed8178f6c0e0b91f23dc9dad4cb30d0831f178291ffeb8750'),
     'logsBloom': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'),
     'miner': '0x0000000000000000000000000000000000000000',
     'mixHash': HexBytes('0x0000000000000000000000000000000000000000000000000000000000000000'),
     'nonce': HexBytes('0x0000000000000000'),
     'number': 0,
     'parentHash': HexBytes('0x0000000000000000000000000000000000000000000000000000000000000000'),
     'proofOfAuthorityData': HexBytes('0x0000000000000000000000000000000000000000000000000000000000000000dddc391ab2bf6701c74d0c8698c2e13355b2e4150000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'),
     'receiptsRoot': HexBytes('0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421'),
     'sha3Uncles': HexBytes('0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347'),
     'size': 622,
     'stateRoot': HexBytes('0x1f5e460eb84dc0606ab74189dbcfe617300549f8f4778c3c9081c119b5b5d1c1'),
     'timestamp': 0,
     'totalDifficulty': 1,
     'transactions': [],
     'transactionsRoot': HexBytes('0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421'),
     'uncles': []}
:::
:::

web3.py can help you read block data, sign and send transactions, deploy
and interact with contracts, and a number of other features.

A few suggestions from here:

-   The [[Overview]{.doc}](#overview.xhtml){.reference .internal} page
    provides a summary of web3.py's features.

-   The [[`w3.eth`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth "web3.eth.Eth"){.reference
    .internal} API contains the most frequently used methods.

-   A guide to [[Contracts]{.std
    .std-ref}](#web3.contract.xhtml#contracts){.reference .internal}
    includes deployment and usage examples.

-   The nuances of
    [[Transactions]{.doc}](#transactions.xhtml){.reference .internal}
    are explained in another guide.

::: {.admonition .note}
Note

It is recommended that your development environment have the
[`PYTHONWARNINGS=default`{.docutils .literal .notranslate}]{.pre}
environment variable set. Some deprecation warnings will not show up
without this variable being set.
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#overview.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#overview.xhtml#overview .section}
[]{#overview.xhtml#id1}

# Overview

The purpose of this page is to give you a sense of everything web3.py
can do and to serve as a quick reference guide. You'll find a summary of
each feature with links to learn more.

::: {#overview.xhtml#configuration .section}
## Configuration

After installing web3.py (via [`pip`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`install`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`web3`{.docutils .literal .notranslate}]{.pre}), you'll
need to configure a provider endpoint and any middleware you want to use
beyond the defaults.

::: {#overview.xhtml#providers .section}
### Providers

[[Providers]{.doc}](#providers.xhtml){.reference .internal} are how
web3.py connects to a blockchain. The library comes with the following
built-in providers:

-   [[`HTTPProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.rpc.HTTPProvider "web3.providers.rpc.HTTPProvider"){.reference
    .internal} for connecting to http and https based JSON-RPC servers.

-   [[`IPCProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.ipc.IPCProvider "web3.providers.ipc.IPCProvider"){.reference
    .internal} for connecting to ipc socket based JSON-RPC servers.

-   [[`LegacyWebSocketProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.legacy_websocket.LegacyWebSocketProvider "web3.providers.legacy_websocket.LegacyWebSocketProvider"){.reference
    .internal} (deprecated) for connecting to websocket based JSON-RPC
    servers.

-   [`AsyncHTTPProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre} for connecting to http and https based JSON-RPC
    servers asynchronously.

-   [[`AsyncIPCProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.AsyncIPCProvider "web3.providers.persistent.AsyncIPCProvider"){.reference
    .internal} for connecting to ipc socket based JSON-RPC servers
    asynchronously via a persistent connection.

-   [[`WebSocketProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.WebSocketProvider "web3.providers.persistent.WebSocketProvider"){.reference
    .internal} for connecting to websocket based JSON-RPC servers
    asynchronously via a persistent connection.

::: {#overview.xhtml#examples .section}
#### Examples

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3 import Web3, AsyncWeb3

    # IPCProvider:
    >>> w3 = Web3(Web3.IPCProvider('./path/to/filename.ipc'))
    >>> w3.is_connected()
    True

    # HTTPProvider:
    >>> w3 = Web3(Web3.HTTPProvider('http://127.0.0.1:8545'))
    >>> w3.is_connected()
    True

    # AsyncHTTPProvider:
    >>> w3 = AsyncWeb3(AsyncWeb3.AsyncHTTPProvider('http://127.0.0.1:8545'))
    >>> await w3.is_connected()
    True

    # -- Persistent Connection Providers -- #

    # WebSocketProvider:
    >>> w3 = await AsyncWeb3(AsyncWeb3.WebSocketProvider('ws://127.0.0.1:8546'))
    >>> await w3.is_connected()
    True

    # AsyncIPCProvider
    >>> w3 = await AsyncWeb3(AsyncWeb3.AsyncIPCProvider('./path/to/filename.ipc'))
    >>> await w3.is_connected()
    True
:::
:::

For more context, see the
[[Providers]{.doc}](#providers.xhtml){.reference .internal}
documentation.
:::
:::

::: {#overview.xhtml#middleware .section}
### Middleware

Your web3.py instance may be further configured via
[[Middleware]{.doc}](#middleware.xhtml){.reference .internal}.

web3.py middleware is described using an onion metaphor, where each
layer of middleware may affect both the incoming request and outgoing
response from your provider. The documentation includes a
[[visualization]{.std
.std-ref}](#middleware.xhtml#modifying-middleware){.reference .internal}
of this idea.

Several middleware are [[included by default]{.std
.std-ref}](#middleware.xhtml#default-middleware){.reference .internal}.
You may add to ([[`add`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#middleware.xhtml#Web3.middleware_onion.add "Web3.middleware_onion.add"){.reference
.internal}, [[`inject`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#middleware.xhtml#Web3.middleware_onion.inject "Web3.middleware_onion.inject"){.reference
.internal}, [[`replace`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#middleware.xhtml#Web3.middleware_onion.replace "Web3.middleware_onion.replace"){.reference
.internal}) or disable ([[`remove`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#middleware.xhtml#Web3.middleware_onion.remove "Web3.middleware_onion.remove"){.reference
.internal}, [[`clear`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#middleware.xhtml#Web3.middleware_onion.clear "Web3.middleware_onion.clear"){.reference
.internal}) any of these middleware.
:::
:::

::: {#overview.xhtml#accounts-and-private-keys .section}
## Accounts and Private Keys

Private keys are required to approve any transaction made on your
behalf. The manner in which your key is secured will determine how you
create and send transactions in web3.py.

A local node, like [Geth](https://geth.ethereum.org/){.reference
.external}[ \[https://geth.ethereum.org/\]]{.link-target}, may manage
your keys for you. You can reference those keys using the
[[`web3.eth.accounts`{.xref .py .py-attr .docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.accounts "web3.eth.Eth.accounts"){.reference
.internal} property.

A hosted node, like [Infura](https://infura.io/){.reference .external}[
\[https://infura.io/\]]{.link-target}, will have no knowledge of your
keys. In this case, you'll need to have your private key available
locally for signing transactions.

Full documentation on the distinction between keys can be found
[[here]{.std .std-ref}](#web3.eth.account.xhtml#eth-account){.reference
.internal}. The separate guide to
[[Transactions]{.doc}](#transactions.xhtml){.reference .internal} may
also help clarify how to manage keys.
:::

::: {#overview.xhtml#base-api .section}
## Base API

The [[Web3]{.std .std-ref}](#web3.main.xhtml#web3-base){.reference
.internal} class includes a number of convenient utility functions:

::: {#overview.xhtml#encoding-and-decoding-helpers .section}
### Encoding and Decoding Helpers

-   [[`Web3.is_encodable()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.w3.is_encodable "web3.w3.is_encodable"){.reference
    .internal}

-   [[`Web3.to_bytes()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3.to_bytes "web3.Web3.to_bytes"){.reference
    .internal}

-   [[`Web3.to_hex()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3.to_hex "web3.Web3.to_hex"){.reference
    .internal}

-   [[`Web3.to_int()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3.to_int "web3.Web3.to_int"){.reference
    .internal}

-   [[`Web3.to_json()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3.to_json "web3.Web3.to_json"){.reference
    .internal}

-   [[`Web3.to_text()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3.to_text "web3.Web3.to_text"){.reference
    .internal}
:::

::: {#overview.xhtml#address-helpers .section}
### Address Helpers

-   [[`Web3.is_address()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3.is_address "web3.Web3.is_address"){.reference
    .internal}

-   [[`Web3.is_checksum_address()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3.is_checksum_address "web3.Web3.is_checksum_address"){.reference
    .internal}

-   [[`Web3.to_checksum_address()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3.to_checksum_address "web3.Web3.to_checksum_address"){.reference
    .internal}
:::

::: {#overview.xhtml#currency-conversions .section}
### Currency Conversions

-   [[`Web3.from_wei()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3.from_wei "web3.Web3.from_wei"){.reference
    .internal}

-   [[`Web3.to_wei()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3.to_wei "web3.Web3.to_wei"){.reference
    .internal}
:::

::: {#overview.xhtml#cryptographic-hashing .section}
### Cryptographic Hashing

-   [[`Web3.keccak()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3.keccak "web3.Web3.keccak"){.reference
    .internal}

-   [[`Web3.solidity_keccak()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3.solidity_keccak "web3.Web3.solidity_keccak"){.reference
    .internal}
:::
:::

::: {#overview.xhtml#web3-eth-api .section}
## web3.eth API

The most commonly used APIs for interacting with Ethereum can be found
under the [[web3.eth API]{.std
.std-ref}](#web3.eth.xhtml#web3-eth){.reference .internal} namespace.

::: {#overview.xhtml#fetching-data .section}
### Fetching Data

Viewing account balances ([[`get_balance`{.xref .py .py-meth .docutils
.literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_balance "web3.eth.Eth.get_balance"){.reference
.internal}), transactions ([[`get_transaction`{.xref .py .py-meth
.docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_transaction "web3.eth.Eth.get_transaction"){.reference
.internal}), and block data ([[`get_block`{.xref .py .py-meth .docutils
.literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_block "web3.eth.Eth.get_block"){.reference
.internal}) are some of the most common starting points in web3.py.

::: {#overview.xhtml#api .section}
#### API

-   [[`web3.eth.get_balance()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_balance "web3.eth.Eth.get_balance"){.reference
    .internal}

-   [[`web3.eth.get_block()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_block "web3.eth.Eth.get_block"){.reference
    .internal}

-   [[`web3.eth.get_block_transaction_count()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_block_transaction_count "web3.eth.Eth.get_block_transaction_count"){.reference
    .internal}

-   [[`web3.eth.get_code()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_code "web3.eth.Eth.get_code"){.reference
    .internal}

-   [[`web3.eth.get_proof()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_proof "web3.eth.Eth.get_proof"){.reference
    .internal}

-   [[`web3.eth.get_storage_at()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_storage_at "web3.eth.Eth.get_storage_at"){.reference
    .internal}

-   [[`web3.eth.get_transaction()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_transaction "web3.eth.Eth.get_transaction"){.reference
    .internal}

-   [[`web3.eth.get_transaction_by_block()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_transaction_by_block "web3.eth.Eth.get_transaction_by_block"){.reference
    .internal}

-   [[`web3.eth.get_transaction_count()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_transaction_count "web3.eth.Eth.get_transaction_count"){.reference
    .internal}

-   [[`web3.eth.get_uncle_by_block()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_uncle_by_block "web3.eth.Eth.get_uncle_by_block"){.reference
    .internal}

-   [[`web3.eth.get_uncle_count()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_uncle_count "web3.eth.Eth.get_uncle_count"){.reference
    .internal}
:::
:::

::: {#overview.xhtml#sending-transactions .section}
### Sending Transactions

The most common use cases will be satisfied with
[[`send_transaction`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
.internal} or the combination of [[`sign_transaction`{.xref .py .py-meth
.docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.sign_transaction "web3.eth.Eth.sign_transaction"){.reference
.internal} and [[`send_raw_transaction`{.xref .py .py-meth .docutils
.literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_raw_transaction "web3.eth.Eth.send_raw_transaction"){.reference
.internal}. For more context, see the full guide to
[[Transactions]{.doc}](#transactions.xhtml){.reference .internal}.

::: {.admonition .note}
Note

If interacting with a smart contract, a dedicated API exists. See the
next section, [[Contracts]{.std
.std-ref}](#overview.xhtml#overview-contracts){.reference .internal}.
:::

::: {#overview.xhtml#id2 .section}
#### API

-   [[`web3.eth.send_transaction()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
    .internal}

-   [[`web3.eth.sign_transaction()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.sign_transaction "web3.eth.Eth.sign_transaction"){.reference
    .internal}

-   [[`web3.eth.send_raw_transaction()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_raw_transaction "web3.eth.Eth.send_raw_transaction"){.reference
    .internal}

-   [[`web3.eth.replace_transaction()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.replace_transaction "web3.eth.Eth.replace_transaction"){.reference
    .internal}

-   [[`web3.eth.modify_transaction()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.modify_transaction "web3.eth.Eth.modify_transaction"){.reference
    .internal}

-   [[`web3.eth.wait_for_transaction_receipt()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.wait_for_transaction_receipt "web3.eth.Eth.wait_for_transaction_receipt"){.reference
    .internal}

-   [[`web3.eth.get_transaction_receipt()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_transaction_receipt "web3.eth.Eth.get_transaction_receipt"){.reference
    .internal}

-   [[`web3.eth.sign()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.sign "web3.eth.Eth.sign"){.reference
    .internal}

-   [[`web3.eth.sign_typed_data()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.sign_typed_data "web3.eth.Eth.sign_typed_data"){.reference
    .internal}

-   [[`web3.eth.estimate_gas()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.estimate_gas "web3.eth.Eth.estimate_gas"){.reference
    .internal}

-   [[`web3.eth.generate_gas_price()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.generate_gas_price "web3.eth.Eth.generate_gas_price"){.reference
    .internal}

-   [[`web3.eth.set_gas_price_strategy()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.set_gas_price_strategy "web3.eth.Eth.set_gas_price_strategy"){.reference
    .internal}
:::
:::
:::

::: {#overview.xhtml#contracts .section}
[]{#overview.xhtml#overview-contracts}

## Contracts

web3.py can help you deploy, read from, or execute functions on a
deployed contract.

Deployment requires that the contract already be compiled, with its
bytecode and ABI available. This compilation step can be done within
[Remix](http://remix.ethereum.org/){.reference .external}[
\[http://remix.ethereum.org/\]]{.link-target} or one of the many
contract development frameworks, such as
[Ape](https://docs.apeworx.io/ape/stable/index.html){.reference
.external}[
\[https://docs.apeworx.io/ape/stable/index.html\]]{.link-target}.

Once the contract object is instantiated, calling [`transact`{.docutils
.literal .notranslate}]{.pre} on the [[`constructor`{.xref .py .py-meth
.docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.constructor "web3.contract.Contract.constructor"){.reference
.internal} method will deploy an instance of the contract:

::: {.highlight-python .notranslate}
::: highlight
    >>> ExampleContract = w3.eth.contract(abi=abi, bytecode=bytecode)
    >>> tx_hash = ExampleContract.constructor().transact()
    >>> tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
    >>> tx_receipt.contractAddress
    '0x8a22225eD7eD460D7ee3842bce2402B9deaD23D3'
:::
:::

Once a deployed contract is loaded into a Contract object, the functions
of that contract are available on the [`functions`{.docutils .literal
.notranslate}]{.pre} namespace:

::: {.highlight-python .notranslate}
::: highlight
    >>> deployed_contract = w3.eth.contract(address=tx_receipt.contractAddress, abi=abi)
    >>> deployed_contract.functions.myFunction(42).transact()
:::
:::

If you want to read data from a contract (or see the result of
transaction locally, without executing it on the network), you can use
the [[`ContractFunction.call`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction.call "web3.contract.ContractFunction.call"){.reference
.internal} method, or the more concise [[`ContractCaller`{.xref .py
.py-attr .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractCaller "web3.contract.ContractCaller"){.reference
.internal} syntax:

::: {.highlight-python .notranslate}
::: highlight
    # Using ContractFunction.call
    >>> deployed_contract.functions.getMyValue().call()
    42

    # Using ContractCaller
    >>> deployed_contract.caller().getMyValue()
    42
:::
:::

For more, see the full [[Contracts]{.std
.std-ref}](#web3.contract.xhtml#contracts){.reference .internal}
documentation.

::: {#overview.xhtml#id3 .section}
### API

-   [[`web3.eth.contract()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.contract "web3.eth.Eth.contract"){.reference
    .internal}

-   [[`Contract.address`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.address "web3.contract.Contract.address"){.reference
    .internal}

-   [[`Contract.abi`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.abi "web3.contract.Contract.abi"){.reference
    .internal}

-   [[`Contract.bytecode`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.bytecode "web3.contract.Contract.bytecode"){.reference
    .internal}

-   [[`Contract.bytecode_runtime`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.bytecode_runtime "web3.contract.Contract.bytecode_runtime"){.reference
    .internal}

-   [[`Contract.functions`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.functions "web3.contract.Contract.functions"){.reference
    .internal}

-   [[`Contract.events`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.events "web3.contract.Contract.events"){.reference
    .internal}

-   [[`Contract.fallback`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.fallback.call "web3.contract.Contract.fallback.call"){.reference
    .internal}

-   [[`Contract.constructor()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.constructor "web3.contract.Contract.constructor"){.reference
    .internal}

-   [[`Contract.encode_abi()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.encode_abi "web3.contract.Contract.encode_abi"){.reference
    .internal}

-   [[`web3.contract.ContractFunction`{.xref .py .py-attr .docutils
    .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
    .internal}

-   [`web3.contract.ContractEvents`{.xref .py .py-attr .docutils
    .literal .notranslate}]{.pre}
:::
:::

::: {#overview.xhtml#events-logs-and-filters .section}
## Events, Logs, and Filters

If you want to react to new blocks being mined or specific events being
emitted by a contract, you can leverage [`get_logs`{.docutils .literal
.notranslate}]{.pre}, subscriptions, or filters.

See the [[Events and Logs]{.doc}](#filters.xhtml){.reference .internal}
guide for more information.

::: {#overview.xhtml#id4 .section}
### API

-   [[`web3.eth.subscribe()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.subscribe "web3.eth.Eth.subscribe"){.reference
    .internal}

-   [[`web3.eth.filter()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.filter "web3.eth.Eth.filter"){.reference
    .internal}

-   [[`web3.eth.get_filter_changes()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_filter_changes "web3.eth.Eth.get_filter_changes"){.reference
    .internal}

-   [[`web3.eth.get_filter_logs()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_filter_logs "web3.eth.Eth.get_filter_logs"){.reference
    .internal}

-   [[`web3.eth.uninstall_filter()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.uninstall_filter "web3.eth.Eth.uninstall_filter"){.reference
    .internal}

-   [[`web3.eth.get_logs()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_logs "web3.eth.Eth.get_logs"){.reference
    .internal}

-   [[`Contract.events.your_event_name.create_filter()`{.xref .py
    .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.events.your_event_name.create_filter "web3.contract.Contract.events.your_event_name.create_filter"){.reference
    .internal}

-   [[`Contract.events.your_event_name.build_filter()`{.xref .py
    .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.events.your_event_name.build_filter "web3.contract.Contract.events.your_event_name.build_filter"){.reference
    .internal}

-   [[`Filter.get_new_entries()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.Filter.get_new_entries "web3.utils.filters.Filter.get_new_entries"){.reference
    .internal}

-   [[`Filter.get_all_entries()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.Filter.get_all_entries "web3.utils.filters.Filter.get_all_entries"){.reference
    .internal}

-   [[`Filter.format_entry()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.Filter.format_entry "web3.utils.filters.Filter.format_entry"){.reference
    .internal}

-   [[`Filter.is_valid_entry()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.Filter.is_valid_entry "web3.utils.filters.Filter.is_valid_entry"){.reference
    .internal}
:::
:::

::: {#overview.xhtml#net-api .section}
## Net API

Some basic network properties are available on the [`web3.net`{.docutils
.literal .notranslate}]{.pre} object:

-   [[`web3.net.listening`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#web3.net.xhtml#web3.net.listening "web3.net.listening"){.reference
    .internal}

-   [[`web3.net.peer_count`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#web3.net.xhtml#web3.net.peer_count "web3.net.peer_count"){.reference
    .internal}

-   [[`web3.net.version`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}](#web3.net.xhtml#web3.net.version "web3.net.version"){.reference
    .internal}
:::

::: {#overview.xhtml#ens .section}
## ENS

[Ethereum Name Service (ENS)](https://ens.domains/){.reference
.external}[ \[https://ens.domains/\]]{.link-target} provides the
infrastructure for human-readable addresses. If an address is registered
with the ENS registry, the domain name can be used in place of the
address itself. For example, the registered domain name
[`ethereum.eth`{.docutils .literal .notranslate}]{.pre} will resolve to
the address [`0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe`{.docutils
.literal .notranslate}]{.pre}. web3.py has support for ENS, documented
[[here]{.std .std-ref}](#ens_overview.xhtml#ens-overview){.reference
.internal}.
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#release_notes.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#release_notes.xhtml#release-notes .section}
# Release Notes

v7 Breaking Changes Summary

:   See the [[v7 Migration Guide]{.std
    .std-ref}](#migration.xhtml#migrating-v6-to-v7){.reference
    .internal}

::: {#release_notes.xhtml#web3-py-v7-14-1-2026-02-03 .section}
## web3.py v7.14.1 (2026-02-03)

::: {#release_notes.xhtml#bugfixes .section}
### Bugfixes

-   Wrap timeout in ClientTimeout for AsyncBeacon post request
    ([#3784](https://github.com/ethereum/web3.py/issues/3784){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3784\]]{.link-target})

-   Fix [`HTTPProvider`{.docutils .literal .notranslate}]{.pre} to share
    an explicitly provided [`session`{.docutils .literal
    .notranslate}]{.pre} across all threads, rather than only the
    creating thread.
    ([#3800](https://github.com/ethereum/web3.py/issues/3800){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3800\]]{.link-target})

-   Fix TypedDict field names to use camelCase
    ([`validatorIndex`{.docutils .literal .notranslate}]{.pre},
    [`yParity`{.docutils .literal .notranslate}]{.pre}) matching
    JSON-RPC conventions and formatter outputs.
    ([#3801](https://github.com/ethereum/web3.py/issues/3801){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3801\]]{.link-target})

-   Exclude type checking in Sphinx module and submodules
    ([#3803](https://github.com/ethereum/web3.py/issues/3803){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3803\]]{.link-target})
:::

::: {#release_notes.xhtml#improved-documentation .section}
### Improved Documentation

-   Added documentation for formatters explaining how they work, what
    the default formatters do, and how to customize them.
    ([#2994](https://github.com/ethereum/web3.py/issues/2994){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2994\]]{.link-target})
:::

::: {#release_notes.xhtml#internal-changes-for-web3-py-contributors .section}
### Internal Changes - for web3.py Contributors

-   Upgrade geth version in CI
    ([#3787](https://github.com/ethereum/web3.py/issues/3787){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3787\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-14-0-2025-10-16 .section}
## web3.py v7.14.0 (2025-10-16)

::: {#release_notes.xhtml#id1 .section}
### Bugfixes

-   Fix tests flakiness due to slow data generation from hypothesis
    triggering a timeout.
    ([#3730](https://github.com/ethereum/web3.py/issues/3730){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3730\]]{.link-target})

-   Fix [`topics`{.docutils .literal .notranslate}]{.pre} type for
    [`LogsSubscription`{.docutils .literal .notranslate}]{.pre} to
    reflect AND / OR nested list conditions on log filters.
    ([#3748](https://github.com/ethereum/web3.py/issues/3748){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3748\]]{.link-target})

-   Make `<cite>`{=html}AsyncWeb3`</cite>`{=html} with respect to the
    provider it is instantiated with, fixing static type issues.
    ([#3761](https://github.com/ethereum/web3.py/issues/3761){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3761\]]{.link-target})
:::

::: {#release_notes.xhtml#id2 .section}
### Improved Documentation

-   Update a few broken links
    ([#3746](https://github.com/ethereum/web3.py/issues/3746){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3746\]]{.link-target})

-   Fix indentation in the code block in "An introduction to
    subscriptions"
    ([#3752](https://github.com/ethereum/web3.py/issues/3752){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3752\]]{.link-target})
:::

::: {#release_notes.xhtml#features .section}
### Features

-   Add the [`TopicFilter`{.docutils .literal .notranslate}]{.pre} type
    to better describe the cases for filtering logs by topics.
    ([#3748](https://github.com/ethereum/web3.py/issues/3748){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3748\]]{.link-target})
:::

::: {#release_notes.xhtml#id3 .section}
### Internal Changes - for web3.py Contributors

-   Resolve the DeprecationWarning for the usage of
    `<cite>`{=html}datetime.datetime.utcnow()`</cite>`{=html}
    ([#3751](https://github.com/ethereum/web3.py/issues/3751){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3751\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-13-0-2025-08-04 .section}
## web3.py v7.13.0 (2025-08-04)

::: {#release_notes.xhtml#id4 .section}
### Bugfixes

-   Raise [`BadResponseFormat`{.docutils .literal .notranslate}]{.pre}
    from within [`FormattingMiddleware`{.docutils .literal
    .notranslate}]{.pre} if the raw response is not a dict.
    ([#3735](https://github.com/ethereum/web3.py/issues/3735){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3735\]]{.link-target})
:::

::: {#release_notes.xhtml#id5 .section}
### Improved Documentation

-   Fix broken link to external [`eth_gasPrice`{.docutils .literal
    .notranslate}]{.pre} documentation.
    ([#3717](https://github.com/ethereum/web3.py/issues/3717){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3717\]]{.link-target})
:::

::: {#release_notes.xhtml#id6 .section}
### Features

-   Support parallelization of subscription handling globally via the
    subscription manager [`parallelize`{.docutils .literal
    .notranslate}]{.pre} flag, and on a per-subscription basis via the
    [`parallelize`{.docutils .literal .notranslate}]{.pre} flag on the
    subscription itself.
    ([#3709](https://github.com/ethereum/web3.py/issues/3709){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3709\]]{.link-target})
:::

::: {#release_notes.xhtml#id7 .section}
### Internal Changes - for web3.py Contributors

-   Update integration test suite fixture to test against geth
    [`v1.16.2`{.docutils .literal .notranslate}]{.pre}.
    ([#3738](https://github.com/ethereum/web3.py/issues/3738){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3738\]]{.link-target})

-   Add missing async tests for [`FormattingMiddleware`{.docutils
    .literal .notranslate}]{.pre} as a sanity check.
    ([#3735](https://github.com/ethereum/web3.py/issues/3735){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3735\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-12-1-2025-07-14 .section}
## web3.py v7.12.1 (2025-07-14)

::: {#release_notes.xhtml#id8 .section}
### Bugfixes

-   Fix [`AutoProvider`{.docutils .literal .notranslate}]{.pre} batching
    setup by adding a proxy batch request.
    ([#3712](https://github.com/ethereum/web3.py/issues/3712){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3712\]]{.link-target})
:::

::: {#release_notes.xhtml#id9 .section}
### Internal Changes - for web3.py Contributors

-   Update integrations tests to use geth [`v1.16.0`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3727](https://github.com/ethereum/web3.py/issues/3727){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3727\]]{.link-target})
:::

::: {#release_notes.xhtml#miscellaneous-changes .section}
### Miscellaneous Changes

-   [#3698](https://github.com/ethereum/web3.py/issues/3698){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3698\]]{.link-target},
    [#3710](https://github.com/ethereum/web3.py/issues/3710){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3710\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#web3-py-v7-12-0-2025-05-22 .section}
## web3.py v7.12.0 (2025-05-22)

::: {#release_notes.xhtml#id10 .section}
### Bugfixes

-   Thread safety for batching and better consistency with
    [`PersistentConnectionProvider`{.docutils .literal
    .notranslate}]{.pre} implementations:

    > <div>
    >
    > -   Make request batching threadsafe by using
    >     [`contextvars.ContextVar`{.docutils .literal
    >     .notranslate}]{.pre} rather than a global flag for setting the
    >     batching state.
    >
    > -   Deterministically match responses with request ids for
    >     [`PersistentConnectionProvider`{.docutils .literal
    >     .notranslate}]{.pre} batch requests.
    >     ([#3705](https://github.com/ethereum/web3.py/issues/3705){.reference
    >     .external}[
    >     \[https://github.com/ethereum/web3.py/issues/3705\]]{.link-target})
    >
    > </div>
:::

::: {#release_notes.xhtml#deprecations .section}
### Deprecations

-   Deprecate [`ens_encode_name`{.docutils .literal .notranslate}]{.pre}
    in favor of [`dns_encode_name`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3700](https://github.com/ethereum/web3.py/issues/3700){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3700\]]{.link-target})
:::

::: {#release_notes.xhtml#id11 .section}
### Features

-   Introduce [`ens.utils.dns_encode_name`{.docutils .literal
    .notranslate}]{.pre} as a rename of the current
    [`ens_encode_name`{.docutils .literal .notranslate}]{.pre}, for
    consistency across other language implementations and with the ENS
    docs. Returns [`HexBytes`{.docutils .literal .notranslate}]{.pre}
    instead of [`bytes`{.docutils .literal .notranslate}]{.pre}.
    ([#3700](https://github.com/ethereum/web3.py/issues/3700){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3700\]]{.link-target})
:::

::: {#release_notes.xhtml#id12 .section}
### Internal Changes - for web3.py Contributors

-   Update some types in [`web3._utils.method_formatters`{.docutils
    .literal .notranslate}]{.pre}
    ([#3669](https://github.com/ethereum/web3.py/issues/3669){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3669\]]{.link-target})

-   Fix issues and start running the core tests with
    `<cite>`{=html}pytest-xdist`</cite>`{=html}, effectively reducing
    the CI test times by \~75-80%.
    ([#3705](https://github.com/ethereum/web3.py/issues/3705){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3705\]]{.link-target})
:::

::: {#release_notes.xhtml#performance-improvements .section}
### Performance Improvements

-   optimize message formatting for logging
    ([#3643](https://github.com/ethereum/web3.py/issues/3643){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3643\]]{.link-target})

-   Optimize web3.\_utils.decorators.reject_recursive_repeats
    ([#3668](https://github.com/ethereum/web3.py/issues/3668){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3668\]]{.link-target})

-   optimize Method.method_selector_function
    ([#3696](https://github.com/ethereum/web3.py/issues/3696){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3696\]]{.link-target})

-   optimize map_abi_data
    ([#3697](https://github.com/ethereum/web3.py/issues/3697){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3697\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-11-1-2025-05-12 .section}
## web3.py v7.11.1 (2025-05-12)

::: {#release_notes.xhtml#id13 .section}
### Bugfixes

-   Fix contract event [`FilterParams`{.docutils .literal
    .notranslate}]{.pre} to validate and normalize [`address`{.docutils
    .literal .notranslate}]{.pre} parameters.
    ([#3618](https://github.com/ethereum/web3.py/issues/3618){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3618\]]{.link-target})

-   Properly handle [`PersistentConnectionClosedOK`{.docutils .literal
    .notranslate}]{.pre} for
    [`subscription_manager.handle_subscriptions()`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3690](https://github.com/ethereum/web3.py/issues/3690){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3690\]]{.link-target})
:::

::: {#release_notes.xhtml#id14 .section}
### Deprecations

-   Deprecate eth.get_uncle\* methods. Will be removed in v8.
    ([#3683](https://github.com/ethereum/web3.py/issues/3683){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3683\]]{.link-target})
:::

::: {#release_notes.xhtml#id15 .section}
### Internal Changes - for web3.py Contributors

-   Re-compile test contracts with new Solidity [`v0.8.30`{.docutils
    .literal .notranslate}]{.pre} and re-generate integration test
    fixture to test against latest geth [`v1.15.11`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3692](https://github.com/ethereum/web3.py/issues/3692){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3692\]]{.link-target})

-   Remove old test fixtures when generating a new test fixture.
    ([#3693](https://github.com/ethereum/web3.py/issues/3693){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3693\]]{.link-target})

-   Address some flaky tests due to a geth bug in state synchronization.
    ([#3695](https://github.com/ethereum/web3.py/issues/3695){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3695\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-11-0-2025-04-29 .section}
## web3.py v7.11.0 (2025-04-29)

::: {#release_notes.xhtml#id16 .section}
### Bugfixes

-   Checks that [`PersistentConnectionProvider`{.docutils .literal
    .notranslate}]{.pre} response cache value is a dict before
    attempting to access it like one. Also adds checks to
    [`make_batch_request`{.docutils .literal .notranslate}]{.pre} to
    make sure it is in batching mode before being called and is not
    after.
    ([#3642](https://github.com/ethereum/web3.py/issues/3642){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3642\]]{.link-target})

-   Moves base providers' [`_is_batching`{.docutils .literal
    .notranslate}]{.pre} and [`_batch_request_func_cache`{.docutils
    .literal .notranslate}]{.pre} from class to instance attrs to help
    with thread safety.
    ([#3661](https://github.com/ethereum/web3.py/issues/3661){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3661\]]{.link-target})
:::

::: {#release_notes.xhtml#id17 .section}
### Features

-   Support for Prague network upgrade, mainly
    [`requests_hash`{.docutils .literal .notranslate}]{.pre} and
    [`authorization_list`{.docutils .literal .notranslate}]{.pre}
    formatters. Add support for serializing
    [`SignedSetCodeTransaction`{.docutils .literal .notranslate}]{.pre}
    (`<cite>`{=html}eth-account`</cite>`{=html} pydantic model) directly
    added to transaction dicts.
    ([#3659](https://github.com/ethereum/web3.py/issues/3659){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3659\]]{.link-target})

-   Allow setting the [`request_information_cache_size`{.docutils
    .literal .notranslate}]{.pre} for
    [`PersistentConnectionProvider`{.docutils .literal
    .notranslate}]{.pre} implementations.
    ([#3662](https://github.com/ethereum/web3.py/issues/3662){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3662\]]{.link-target})
:::

::: {#release_notes.xhtml#id18 .section}
### Internal Changes - for web3.py Contributors

-   Update some outdated TODO notes in code & remove old un-tested
    uncles tests as no longer relevant post-merge.
    ([#3605](https://github.com/ethereum/web3.py/issues/3605){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3605\]]{.link-target})

-   Run each integration test in isolation and parallelize, instead of
    running them all within a single `<cite>`{=html}geth`</cite>`{=html}
    (for example) process. This prevents muddied test contexts.
    ([#3659](https://github.com/ethereum/web3.py/issues/3659){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3659\]]{.link-target})

-   Bound hypothesis integers in some tests to a max of uint256 value
    ([#3665](https://github.com/ethereum/web3.py/issues/3665){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3665\]]{.link-target})

-   AsyncENS tests were xfailing for the wrong reason.
    ([#3675](https://github.com/ethereum/web3.py/issues/3675){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3675\]]{.link-target})
:::

::: {#release_notes.xhtml#id19 .section}
### Performance Improvements

-   Optimize performance for:

    -   web3.\_utils.utility_methods.all_in_dict

    -   web3.\_utils.utility_methods.any_in_dict

    -   web3.\_utils.utility_methods.none_in_dict
        ([#3667](https://github.com/ethereum/web3.py/issues/3667){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/issues/3667\]]{.link-target})

-   optimize web3.\_utils.rpc_abi.apply_abi_formatters_to_dict
    ([#3671](https://github.com/ethereum/web3.py/issues/3671){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3671\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-10-0-2025-03-27 .section}
## web3.py v7.10.0 (2025-03-27)

::: {#release_notes.xhtml#id20 .section}
### Miscellaneous Changes

-   [#3653](https://github.com/ethereum/web3.py/issues/3653){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3653\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#web3-py-v7-9-0-2025-03-12 .section}
## web3.py v7.9.0 (2025-03-12)

::: {#release_notes.xhtml#id21 .section}
### Bugfixes

-   Prevent mutating list of subscriptions when unsubscribing via the
    [`subscription_manager`{.docutils .literal .notranslate}]{.pre} by
    iterating over a copy of the provided list.
    ([#3604](https://github.com/ethereum/web3.py/issues/3604){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3604\]]{.link-target})

-   Batching can now be used with the AutoProvider
    ([#3607](https://github.com/ethereum/web3.py/issues/3607){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3607\]]{.link-target})
:::

::: {#release_notes.xhtml#id22 .section}
### Improved Documentation

-   Update and clean up Contributing docs.
    ([#3610](https://github.com/ethereum/web3.py/issues/3610){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3610\]]{.link-target})
:::

::: {#release_notes.xhtml#id23 .section}
### Features

-   Add [`use_text_frames`{.docutils .literal .notranslate}]{.pre} flag
    for [`WebSocketProvider`{.docutils .literal .notranslate}]{.pre} to
    work around websocket servers that don't support binary frames
    ([#3619](https://github.com/ethereum/web3.py/issues/3619){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3619\]]{.link-target})

-   Sync and async support for [`eth_simulateV1`{.docutils .literal
    .notranslate}]{.pre} RPC method.
    ([#3622](https://github.com/ethereum/web3.py/issues/3622){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3622\]]{.link-target})
:::

::: {#release_notes.xhtml#id24 .section}
### Internal Changes - for web3.py Contributors

-   Renames a test so pytest finds it.
    ([#3606](https://github.com/ethereum/web3.py/issues/3606){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3606\]]{.link-target})

-   Merge template, replacing [`bumpversion`{.docutils .literal
    .notranslate}]{.pre} with [`bump-my-version`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3610](https://github.com/ethereum/web3.py/issues/3610){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3610\]]{.link-target})

-   Update integration test fixture to use latest geth version
    [`v1.15.5`{.docutils .literal .notranslate}]{.pre}.
    ([#3636](https://github.com/ethereum/web3.py/issues/3636){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3636\]]{.link-target})

-   Use [`-U`{.docutils .literal .notranslate}]{.pre} to install latest
    `<cite>`{=html}py-geth`</cite>`{=html} version for CI geth steps.
    This is usually a requirement if we're missing the binary for the
    newly-generated fixture geth version.
    ([#3637](https://github.com/ethereum/web3.py/issues/3637){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3637\]]{.link-target})

-   Re-compile test contracts with newly released Solidity
    [`v0.8.29`{.docutils .literal .notranslate}]{.pre}.
    ([#3640](https://github.com/ethereum/web3.py/issues/3640){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3640\]]{.link-target})
:::

::: {#release_notes.xhtml#id25 .section}
### Miscellaneous Changes

-   [#3623](https://github.com/ethereum/web3.py/issues/3623){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3623\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#web3-py-v7-8-0-2025-02-03 .section}
## web3.py v7.8.0 (2025-02-03)

::: {#release_notes.xhtml#breaking-changes .section}
### Breaking Changes

-   The bugfix to match [`unsubscribe`{.docutils .literal
    .notranslate}]{.pre} to [`subscribe`{.docutils .literal
    .notranslate}]{.pre} for multiple subscriptions breaks the function
    signature for [`unsubscribe`{.docutils .literal
    .notranslate}]{.pre}, changing the [`subscription`{.docutils
    .literal .notranslate}]{.pre} argument to [`subscriptions`{.docutils
    .literal .notranslate}]{.pre}.
    ([#3585](https://github.com/ethereum/web3.py/issues/3585){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3585\]]{.link-target})
:::

::: {#release_notes.xhtml#id26 .section}
### Bugfixes

-   Handle the case when a single RPC error response is returned for a
    batch request, instead of always expecting a list of responses.
    ([#3585](https://github.com/ethereum/web3.py/issues/3585){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3585\]]{.link-target})

-   Don't raise on non-unique default subscription labels (no label
    provided). Only raise if a non-unique custom label is explicitly set
    for a subscription.
    ([#3594](https://github.com/ethereum/web3.py/issues/3594){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3594\]]{.link-target})

-   Fix bugs related to subscription manager: [`run_forever`{.docutils
    .literal .notranslate}]{.pre} can start with [`0`{.docutils .literal
    .notranslate}]{.pre} subscriptions and remains alive,
    [`unsubscribe`{.docutils .literal .notranslate}]{.pre} accepts
    single or multiple subs as objects or hexstrs,
    [`subscribe`{.docutils .literal .notranslate}]{.pre} for many subs
    returns a list of hexstr ids.
    ([#3595](https://github.com/ethereum/web3.py/issues/3595){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3595\]]{.link-target})

-   Fix issue where [`.values()`{.docutils .literal .notranslate}]{.pre}
    raised a [`KeyError`{.docutils .literal .notranslate}]{.pre} in
    [`NamedTupledOnion`{.docutils .literal .notranslate}]{.pre}
    ([#3596](https://github.com/ethereum/web3.py/issues/3596){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3596\]]{.link-target})
:::

::: {#release_notes.xhtml#id27 .section}
### Improved Documentation

-   Include [`topic`{.docutils .literal .notranslate}]{.pre} attribute
    in [`ContractEvent`{.docutils .literal .notranslate}]{.pre} docs.
    ([#3586](https://github.com/ethereum/web3.py/issues/3586){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3586\]]{.link-target})

-   Introduce Event Subscriptions docs guide
    ([#3600](https://github.com/ethereum/web3.py/issues/3600){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3600\]]{.link-target})
:::

::: {#release_notes.xhtml#id28 .section}
### Features

-   New [`Beacon`{.docutils .literal .notranslate}]{.pre} and
    [`AsyncBeacon`{.docutils .literal .notranslate}]{.pre} endpoints:
    [`get_peer_count`{.docutils .literal .notranslate}]{.pre},
    [`get_attester_duties`{.docutils .literal .notranslate}]{.pre},
    [`get_block_proposer_duties`{.docutils .literal
    .notranslate}]{.pre}, [`get_sync_committee_duties`{.docutils
    .literal .notranslate}]{.pre}, and
    [`get_attestation_rewards`{.docutils .literal .notranslate}]{.pre}.
    ([#3504](https://github.com/ethereum/web3.py/issues/3504){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3504\]]{.link-target})
:::

::: {#release_notes.xhtml#id29 .section}
### Internal Changes - for web3.py Contributors

-   Move duplicate code into [`BaseContract`{.docutils .literal
    .notranslate}]{.pre} class from [`Contract`{.docutils .literal
    .notranslate}]{.pre} and [`AsyncContract`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3579](https://github.com/ethereum/web3.py/issues/3579){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3579\]]{.link-target})

-   Address flaky tests in CI runs.
    ([#3583](https://github.com/ethereum/web3.py/issues/3583){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3583\]]{.link-target})

-   Update copyright year from 2024 to 2025 in the LICENSE file.
    ([#3592](https://github.com/ethereum/web3.py/issues/3592){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3592\]]{.link-target})
:::

::: {#release_notes.xhtml#id30 .section}
### Performance Improvements

-   Avoid unnecessary extra call to resolver when resolving an ENS
    address with no [`coin_type`{.docutils .literal .notranslate}]{.pre}
    specified (default).
    ([#3584](https://github.com/ethereum/web3.py/issues/3584){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3584\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-7-0-2025-01-15 .section}
## web3.py v7.7.0 (2025-01-15)

::: {#release_notes.xhtml#id31 .section}
### Bugfixes

-   Add a [`disconnect`{.docutils .literal .notranslate}]{.pre} method
    to the AsyncHTTPProvider that closes all sessions and clears the
    cache
    ([#3557](https://github.com/ethereum/web3.py/issues/3557){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3557\]]{.link-target})

-   Fix a bug related to building the ipc path for connecting to a geth
    [`--dev`{.docutils .literal .notranslate}]{.pre} instance via
    [`web3.auto.gethdev`{.docutils .literal .notranslate}]{.pre}.
    ([#3576](https://github.com/ethereum/web3.py/issues/3576){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3576\]]{.link-target})
:::

::: {#release_notes.xhtml#id32 .section}
### Features

-   Add a subscription manager to persistent connection providers, with
    support for handler methods for [`eth_subscribe`{.docutils .literal
    .notranslate}]{.pre} subscriptions.
    ([#3554](https://github.com/ethereum/web3.py/issues/3554){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3554\]]{.link-target})

-   Implement a [`topic`{.docutils .literal .notranslate}]{.pre}
    property for contract events to retrieve the topic for the event.
    ([#3578](https://github.com/ethereum/web3.py/issues/3578){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3578\]]{.link-target})
:::

::: {#release_notes.xhtml#id33 .section}
### Miscellaneous Changes

-   [#3546](https://github.com/ethereum/web3.py/issues/3546){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3546\]]{.link-target}
:::

::: {#release_notes.xhtml#id34 .section}
### Performance Improvements

-   Improve [`AttributeDict.recursive()`{.docutils .literal
    .notranslate}]{.pre} and [`AttributeDictMiddleware`{.docutils
    .literal .notranslate}]{.pre} performance, effectively speeding up
    response processing for attrdict middleware by nearly 2x.
    ([#3575](https://github.com/ethereum/web3.py/issues/3575){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3575\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-6-1-2024-12-18 .section}
## web3.py v7.6.1 (2024-12-18)

::: {#release_notes.xhtml#id35 .section}
### Bugfixes

-   Include an end-of-line delimiter when sending messages via IPC with
    the [`IPCProvider`{.docutils .literal .notranslate}]{.pre} and
    [`AsyncIPCProvider`{.docutils .literal .notranslate}]{.pre}.
    ([#3537](https://github.com/ethereum/web3.py/issues/3537){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3537\]]{.link-target})

-   Contract functions and events no longer initialize for each call.
    Retrieval of overloaded functions and events is now deterministic.
    Any ambiguity will result in an exception being raised.
    ([#3540](https://github.com/ethereum/web3.py/issues/3540){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3540\]]{.link-target})

-   Bump the eth-tester version to one that works in the tester
    dependency extras
    ([#3555](https://github.com/ethereum/web3.py/issues/3555){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3555\]]{.link-target})
:::

::: {#release_notes.xhtml#id36 .section}
### Improved Documentation

-   Update ENS-related links
    ([#3563](https://github.com/ethereum/web3.py/issues/3563){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3563\]]{.link-target})
:::

::: {#release_notes.xhtml#id37 .section}
### Internal Changes - for web3.py Contributors

-   Upgrade Geth Fixture to 1.14.12
    ([#3533](https://github.com/ethereum/web3.py/issues/3533){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3533\]]{.link-target})

-   Delete [`ARCHITECTURE.md`{.docutils .literal .notranslate}]{.pre} as
    unused
    ([#3547](https://github.com/ethereum/web3.py/issues/3547){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3547\]]{.link-target})
:::

::: {#release_notes.xhtml#id38 .section}
### Miscellaneous Changes

-   [#3525](https://github.com/ethereum/web3.py/issues/3525){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3525\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#web3-py-v7-6-0-2024-11-22 .section}
## web3.py v7.6.0 (2024-11-22)

::: {#release_notes.xhtml#id39 .section}
### Bugfixes

-   Update the `<cite>`{=html}ContractEvents`</cite>`{=html} class to
    raise a `<cite>`{=html}NoABIFound`</cite>`{=html} exception if the
    `<cite>`{=html}Contract`</cite>`{=html} is initialized without an
    `<cite>`{=html}ABI`</cite>`{=html} and an attempt to access an event
    is made. This exception makes
    `<cite>`{=html}ContractEvents`</cite>`{=html} consistent with
    `<cite>`{=html}ContractFunctions`</cite>`{=html}.
    ([#3491](https://github.com/ethereum/web3.py/issues/3491){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3491\]]{.link-target})
:::

::: {#release_notes.xhtml#id40 .section}
### Features

-   Contracts with overloaded functions or events are now supported. The
    Contract initializes functions and events using an identifier to
    distinguish between them. The identifier is the function or event
    signature, which consists of the name and the parameter types.
    ([#3491](https://github.com/ethereum/web3.py/issues/3491){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3491\]]{.link-target})

-   -   Support for [`w3.eth.blob_base_fee`{.docutils .literal
        .notranslate}]{.pre}

    -   Async support for [`w3.eth.blob_base_fee`{.docutils .literal
        .notranslate}]{.pre}
        ([#3527](https://github.com/ethereum/web3.py/issues/3527){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/issues/3527\]]{.link-target})
:::

::: {#release_notes.xhtml#id41 .section}
### Internal Changes - for web3.py Contributors

-   Pin [`websockets<14`{.docutils .literal .notranslate}]{.pre} due to
    breaking changes
    ([#3529](https://github.com/ethereum/web3.py/issues/3529){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3529\]]{.link-target})
:::

::: {#release_notes.xhtml#id42 .section}
### Miscellaneous Changes

-   [#3491](https://github.com/ethereum/web3.py/issues/3491){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3491\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#web3-py-v7-5-0-2024-11-06 .section}
## web3.py v7.5.0 (2024-11-06)

::: {#release_notes.xhtml#id43 .section}
### Improved Documentation

-   Polish docs index page
    ([#3522](https://github.com/ethereum/web3.py/issues/3522){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3522\]]{.link-target})
:::

::: {#release_notes.xhtml#id44 .section}
### Features

-   Add support for Geth Debug traceTransaction.
    ([#3334](https://github.com/ethereum/web3.py/issues/3334){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3334\]]{.link-target})

-   New contract methods to obtain event elements from a contract ABI
    using a name, signature, selector, or topic.
    ([#3472](https://github.com/ethereum/web3.py/issues/3472){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3472\]]{.link-target})
:::

::: {#release_notes.xhtml#id45 .section}
### Internal Changes - for web3.py Contributors

-   Add python 3.13 support
    ([#3493](https://github.com/ethereum/web3.py/issues/3493){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3493\]]{.link-target})

-   Compile test contracts with newly released Solidity
    [`v0.8.28`{.docutils .literal .notranslate}]{.pre} to ensure
    compatibility.
    ([#3515](https://github.com/ethereum/web3.py/issues/3515){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3515\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-4-0-2024-10-16 .section}
## web3.py v7.4.0 (2024-10-16)

::: {#release_notes.xhtml#id46 .section}
### Bugfixes

-   Fix a bug where CCIP-Read expected a [`{sender}`{.docutils .literal
    .notranslate}]{.pre} in the url for a POST request. If
    [`{data}`{.docutils .literal .notranslate}]{.pre} is missing from
    the url, assume a POST request is being made regardless of whether
    [`{sender}`{.docutils .literal .notranslate}]{.pre} is present.
    ([#3291](https://github.com/ethereum/web3.py/issues/3291){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3291\]]{.link-target})

-   Fix a bug where non-mainnet chains could not cache requests based on
    missing [`finalized`{.docutils .literal .notranslate}]{.pre} block
    number.
    ([#3508](https://github.com/ethereum/web3.py/issues/3508){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3508\]]{.link-target})

-   Send [`json`{.docutils .literal .notranslate}]{.pre}, not
    [`data`{.docutils .literal .notranslate}]{.pre} with CCIP-Read POST
    requests.
    ([#3512](https://github.com/ethereum/web3.py/issues/3512){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3512\]]{.link-target})
:::

::: {#release_notes.xhtml#id47 .section}
### Improved Documentation

-   Update the request caching documentation to clarify on when to reach
    for request caching and how to configure the request validation
    threshold for certain endpoints.
    ([#3508](https://github.com/ethereum/web3.py/issues/3508){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3508\]]{.link-target})
:::

::: {#release_notes.xhtml#id48 .section}
### Features

-   Allow a time interval, in seconds, to be used as the
    [`request_cache_validation_threshold`{.docutils .literal
    .notranslate}]{.pre} for request caching. Keep a list of internal
    default values based on the chain id for some of the bigger chains.
    ([#3508](https://github.com/ethereum/web3.py/issues/3508){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3508\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-3-1-2024-10-14 .section}
## web3.py v7.3.1 (2024-10-14)

::: {#release_notes.xhtml#id49 .section}
### Bugfixes

-   Properly wrap [`AsyncBeacon.request_timeout`{.docutils .literal
    .notranslate}]{.pre} float in a [`aiohttp.ClientTimeout`{.docutils
    .literal .notranslate}]{.pre} when making requests.
    ([#3503](https://github.com/ethereum/web3.py/issues/3503){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3503\]]{.link-target})

-   Changes related to an `<cite>`{=html}eth-typing`</cite>`{=html}
    bugfix, input types for [`ABIEvent`{.docutils .literal
    .notranslate}]{.pre}: [`ABIComponent`{.docutils .literal
    .notranslate}]{.pre} -\> [`ABIComponentIndexed`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3510](https://github.com/ethereum/web3.py/issues/3510){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3510\]]{.link-target})
:::

::: {#release_notes.xhtml#id50 .section}
### Improved Documentation

-   Fix [`EthereumTesterProvider`{.docutils .literal
    .notranslate}]{.pre} signature in docs, added an
    [`eth_tester`{.docutils .literal .notranslate}]{.pre} example.
    ([#3500](https://github.com/ethereum/web3.py/issues/3500){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3500\]]{.link-target})

-   Fix `<cite>`{=html}pip install -e ".\[dev\]"`</cite>`{=html} command
    in linux README.
    ([#3505](https://github.com/ethereum/web3.py/issues/3505){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3505\]]{.link-target})
:::

::: {#release_notes.xhtml#id51 .section}
### Internal Changes - for web3.py Contributors

-   Update the ENSIP-15 to the latest spec and update the test suite.
    ([#3501](https://github.com/ethereum/web3.py/issues/3501){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3501\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-3-0-2024-09-25 .section}
## web3.py v7.3.0 (2024-09-25)

::: {#release_notes.xhtml#id52 .section}
### Bugfixes

-   Base default [`maxFeePerGas`{.docutils .literal .notranslate}]{.pre}
    calculation off of existing [`maxPriorityFeePerGas`{.docutils
    .literal .notranslate}]{.pre} key instead of separate RPC call
    ([#3052](https://github.com/ethereum/web3.py/issues/3052){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3052\]]{.link-target})

-   Add back dependency extra for 'tester'.
    ([#3480](https://github.com/ethereum/web3.py/issues/3480){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3480\]]{.link-target})

-   Fix a bug where sensitive requests that make use of block data
    should not be cached until some validation threshold deems it is
    safe to do so, when request caching is turned on.
    ([#3483](https://github.com/ethereum/web3.py/issues/3483){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3483\]]{.link-target})
:::

::: {#release_notes.xhtml#id53 .section}
### Improved Documentation

-   Update [`contract.encode_abi`{.docutils .literal
    .notranslate}]{.pre} signature in docs and migration guide
    ([#3473](https://github.com/ethereum/web3.py/issues/3473){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3473\]]{.link-target})

-   Update documentation around
    [`SignAndSendRawMiddlewareBuilder`{.docutils .literal
    .notranslate}]{.pre} injection into the middleware onion. It should
    be injected lower in the stack than any middleware that modifies the
    transaction, in order to ensure those modified fields are signed.
    ([#3488](https://github.com/ethereum/web3.py/issues/3488){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3488\]]{.link-target})

-   Docs cleanups related to [`test`{.docutils .literal
    .notranslate}]{.pre} vs [`tester`{.docutils .literal
    .notranslate}]{.pre} install extras.
    ([#3496](https://github.com/ethereum/web3.py/issues/3496){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3496\]]{.link-target})
:::

::: {#release_notes.xhtml#id54 .section}
### Features

-   Add a configuration for request caching that sets a threshold for
    validating cached requests that make use of block data. This can be
    turned off altogether by setting the threshold to [`None`{.docutils
    .literal .notranslate}]{.pre}.
    ([#3483](https://github.com/ethereum/web3.py/issues/3483){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3483\]]{.link-target})

-   Add a configuration option for the [`read_buffer_limit`{.docutils
    .literal .notranslate}]{.pre} for [`AsyncIPCProvider`{.docutils
    .literal .notranslate}]{.pre} in order to control the expected
    message size limit (defaults to 20MB). Add
    [`ReadBufferLimitReached`{.docutils .literal .notranslate}]{.pre}
    for when the read limit is reached, extend from
    [`PersistentConnectionError`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3492](https://github.com/ethereum/web3.py/issues/3492){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3492\]]{.link-target})
:::

::: {#release_notes.xhtml#id55 .section}
### Internal Changes - for web3.py Contributors

-   Test warning cleanup
    ([#3468](https://github.com/ethereum/web3.py/issues/3468){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3468\]]{.link-target})

-   Re-compile test contracts with recently released Solidity
    [`v0.8.27`{.docutils .literal .notranslate}]{.pre}.
    ([#3475](https://github.com/ethereum/web3.py/issues/3475){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3475\]]{.link-target})

-   Re-organize the install extras. Re-define the [`test`{.docutils
    .literal .notranslate}]{.pre} extra to always include the
    [`tester`{.docutils .literal .notranslate}]{.pre} extra since it's
    needed for testing.
    ([#3495](https://github.com/ethereum/web3.py/issues/3495){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3495\]]{.link-target})
:::

::: {#release_notes.xhtml#id56 .section}
### Miscellaneous Changes

-   [#3490](https://github.com/ethereum/web3.py/issues/3490){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3490\]]{.link-target}
:::

::: {#release_notes.xhtml#id57 .section}
### Performance Improvements

-   Improve logic for reading from the async IPC socket in order to
    properly handle and adjust the handling of large messages. This
    improves reading speeds in general.
    ([#3492](https://github.com/ethereum/web3.py/issues/3492){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3492\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-2-0-2024-08-29 .section}
## web3.py v7.2.0 (2024-08-29)

::: {#release_notes.xhtml#id58 .section}
### Bugfixes

-   Fix a bug with newer [`hexbytes`{.docutils .literal
    .notranslate}]{.pre} versions that yield non-0x-prefixed hex for
    [`HexBytes`{.docutils .literal .notranslate}]{.pre}:
    [`raw_transaction.hex()`{.docutils .literal .notranslate}]{.pre} -\>
    [`raw_transaction.to_0x_hex()`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3471](https://github.com/ethereum/web3.py/issues/3471){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3471\]]{.link-target})
:::

::: {#release_notes.xhtml#id59 .section}
### Features

-   HTTPProvider and AsyncHTTPProvider's get_request_headers is now
    available on both the class and the instance
    ([#3467](https://github.com/ethereum/web3.py/issues/3467){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3467\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-1-0-2024-08-28 .section}
## web3.py v7.1.0 (2024-08-28)

::: {#release_notes.xhtml#id60 .section}
### Bugfixes

-   Specify a unique [`__hash__()`{.docutils .literal
    .notranslate}]{.pre} for unhashable [`Web3Middleware`{.docutils
    .literal .notranslate}]{.pre} types and use this hash as the
    middleware onion key when a name is not provided for the middleware.
    This fixes a bug where different middleware were given the same name
    and therefore raised errors.
    ([#3463](https://github.com/ethereum/web3.py/issues/3463){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3463\]]{.link-target})
:::

::: {#release_notes.xhtml#id61 .section}
### Improved Documentation

-   Fix bug in filters example code
    ([#3455](https://github.com/ethereum/web3.py/issues/3455){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3455\]]{.link-target})

-   Update [`v6`{.docutils .literal .notranslate}]{.pre} -\>
    [`v7`{.docutils .literal .notranslate}]{.pre} migration guide with
    examples for importing and adding middleware, as well as examples on
    how to use the [`MiddlewareBuilder`{.docutils .literal
    .notranslate}]{.pre} classes.
    ([#3462](https://github.com/ethereum/web3.py/issues/3462){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3462\]]{.link-target})
:::

::: {#release_notes.xhtml#id62 .section}
### Features

-   Add sync and async support for beacon
    [`/eth/v1/beacon/blob_sidecars`{.docutils .literal
    .notranslate}]{.pre} endpoint.
    ([#3407](https://github.com/ethereum/web3.py/issues/3407){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3407\]]{.link-target})

-   Allow user to call ContractFunctions without parentheses
    ([#3444](https://github.com/ethereum/web3.py/issues/3444){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3444\]]{.link-target})
:::

::: {#release_notes.xhtml#id63 .section}
### Internal Changes - for web3.py Contributors

-   Refactor and DRY up CI run setup and reduce surface area for errors.
    Include pre-releases in CI runs for internally maintained libraries
    to try and catch any conflicts.
    ([#3452](https://github.com/ethereum/web3.py/issues/3452){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3452\]]{.link-target})

-   Bump `<cite>`{=html}py-geth`</cite>`{=html} to [`>=5.0.0`{.docutils
    .literal .notranslate}]{.pre} from [`>=5.0.0b1`{.docutils .literal
    .notranslate}]{.pre} now that stable has been released. This only
    matters for the [`test`{.docutils .literal .notranslate}]{.pre}
    install extra (CI and dev purposes).
    ([#3458](https://github.com/ethereum/web3.py/issues/3458){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3458\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-0-0-2024-08-21 .section}
## web3.py v7.0.0 (2024-08-21)

::: {#release_notes.xhtml#id64 .section}
### Breaking Changes

-   Update `<cite>`{=html}eth-utils`</cite>`{=html} and
    `<cite>`{=html}eth-typing`</cite>`{=html} to latest major versions

    `<cite>`{=html}eth-utils`</cite>`{=html} v5 and
    `<cite>`{=html}eth-typing`</cite>`{=html} v5
    ([#3450](https://github.com/ethereum/web3.py/issues/3450){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3450\]]{.link-target})
:::

::: {#release_notes.xhtml#id65 .section}
### Improved Documentation

-   Improve batch request documentation.
    ([#3448](https://github.com/ethereum/web3.py/issues/3448){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3448\]]{.link-target})
:::

::: {#release_notes.xhtml#id66 .section}
### Internal Changes - for web3.py Contributors

-   Fix Release Notes formatting
    ([#3454](https://github.com/ethereum/web3.py/issues/3454){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3454\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-0-0-beta-9-2024-08-01 .section}
## web3.py v7.0.0-beta.9 (2024-08-01)

::: {#release_notes.xhtml#id67 .section}
### Breaking Changes

-   Upgrades to use latest [`ABI`{.docutils .literal
    .notranslate}]{.pre} utilities and typings from
    [`eth-utils`{.docutils .literal .notranslate}]{.pre} and
    [`eth-typing`{.docutils .literal .notranslate}]{.pre}.

    -   Typings for [`ABI`{.docutils .literal .notranslate}]{.pre}
        components are now available in the [`eth-typing`{.docutils
        .literal .notranslate}]{.pre} package. [`ABI`{.docutils .literal
        .notranslate}]{.pre} types previously in [`web3.types`{.docutils
        .literal .notranslate}]{.pre} have been removed.

    -   New versions of existing ABI functions were added to
        [`eth-utils`{.docutils .literal .notranslate}]{.pre} and are now
        exposed in `<cite>`{=html}web3.py`</cite>`{=html} via
        [`web3.utils.abi`{.docutils .literal .notranslate}]{.pre}.

    -   ABI exceptions have been renamed in [`web3.exceptions`{.docutils
        .literal .notranslate}]{.pre}. The
        [`ABIEventFunctionNotFound`{.docutils .literal
        .notranslate}]{.pre} and [`FallbackNotFound`{.docutils .literal
        .notranslate}]{.pre} exceptions have been removed. Use
        [`ABIEventNotFound`{.docutils .literal .notranslate}]{.pre} and
        [`ABIFallbackNotFound`{.docutils .literal .notranslate}]{.pre}
        instead.

    -   [`MismatchedABI`{.docutils .literal .notranslate}]{.pre}
        exceptions are raised instead of a
        [`Web3ValidationError`{.docutils .literal .notranslate}]{.pre}
        for ABI related errors.

    -   [`encode_abi`{.docutils .literal .notranslate}]{.pre} arguments
        have been updated to use [`abi_element_name`{.docutils .literal
        .notranslate}]{.pre} instead of [`fn_name`{.docutils .literal
        .notranslate}]{.pre}.
        ([#3408](https://github.com/ethereum/web3.py/issues/3408){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/issues/3408\]]{.link-target})

```{=html}
<!-- -->
```
-   Remove [`Web3ValidationError`{.docutils .literal
    .notranslate}]{.pre} dependence / inheritance from
    `<cite>`{=html}eth-utils`</cite>`{=html}
    [`ValidationError`{.docutils .literal .notranslate}]{.pre}.
    ([#3443](https://github.com/ethereum/web3.py/issues/3443){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3443\]]{.link-target})
:::

::: {#release_notes.xhtml#id68 .section}
### Improved Documentation

-   Use autodoc and update ABI functions with docstrings and doctests.
    ([#3408](https://github.com/ethereum/web3.py/issues/3408){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3408\]]{.link-target})
:::

::: {#release_notes.xhtml#id69 .section}
### Features

-   Utilities to extract function and event [`ABI`{.docutils .literal
    .notranslate}]{.pre} attributes from a contract. Utilities in the
    [`web3.utils.abi`{.docutils .literal .notranslate}]{.pre} module
    parse ABI elements and check encodability of provided arguments. ABI
    functions in [`eth-utils`{.docutils .literal .notranslate}]{.pre}
    are exposed by the [`web3.utils.abi`{.docutils .literal
    .notranslate}]{.pre} module.

    -   [`get_abi_element_info`{.docutils .literal .notranslate}]{.pre}
        returns an [`ABIElementInfo`{.docutils .literal
        .notranslate}]{.pre} TypedDict with the [`abi`{.docutils
        .literal .notranslate}]{.pre}, [`selector`{.docutils .literal
        .notranslate}]{.pre}, and [`arguments`{.docutils .literal
        .notranslate}]{.pre}.

    -   [`get_abi_element`{.docutils .literal .notranslate}]{.pre}
        returns the [`ABI`{.docutils .literal .notranslate}]{.pre} of a
        function, event, or error given the name and arguments.

    -   [`check_if_arguments_can_be_encoded`{.docutils .literal
        .notranslate}]{.pre} returns true if the arguments can be
        encoded with the given ABI.

    -   [`get_event_abi`{.docutils .literal .notranslate}]{.pre} returns
        the [`ABI`{.docutils .literal .notranslate}]{.pre} of an event
        given the name.

    -   [`get_event_log_topics`{.docutils .literal .notranslate}]{.pre}
        returns the log topics of an event given the name.

    -   [`log_topics_to_bytes`{.docutils .literal .notranslate}]{.pre}
        returns the log topics as bytes.
        ([#3408](https://github.com/ethereum/web3.py/issues/3408){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/issues/3408\]]{.link-target})

```{=html}
<!-- -->
```
-   Add explicit stream kwarg to HTTPProvider so that timeout can be
    more finely tuned.
    ([#3428](https://github.com/ethereum/web3.py/issues/3428){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3428\]]{.link-target})

-   Implement a [`RequestTimedOut`{.docutils .literal
    .notranslate}]{.pre} exception, extending from
    [`Web3RPCError`{.docutils .literal .notranslate}]{.pre}, for when
    requests to the node time out.
    ([#3440](https://github.com/ethereum/web3.py/issues/3440){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3440\]]{.link-target})
:::

::: {#release_notes.xhtml#id70 .section}
### Internal Changes - for web3.py Contributors

-   Run [`mypy`{.docutils .literal .notranslate}]{.pre} locally using
    [`pre-commit`{.docutils .literal .notranslate}]{.pre} hook, instead
    of within [`pre-commit`{.docutils .literal .notranslate}]{.pre}
    container
    ([#3414](https://github.com/ethereum/web3.py/issues/3414){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3414\]]{.link-target})

-   Mitigate inconsistently failing tests for CI runs with appropriate
    [`flaky`{.docutils .literal .notranslate}]{.pre} or
    [`pytest.mark.xfail()`{.docutils .literal .notranslate}]{.pre}
    decorators.
    ([#3440](https://github.com/ethereum/web3.py/issues/3440){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3440\]]{.link-target})
:::

::: {#release_notes.xhtml#id71 .section}
### Miscellaneous Changes

-   [#3408](https://github.com/ethereum/web3.py/issues/3408){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3408\]]{.link-target},
    [#3445](https://github.com/ethereum/web3.py/issues/3445){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3445\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#web3-py-v7-0-0-beta-8-2024-07-24 .section}
## web3.py v7.0.0-beta.8 (2024-07-24)

::: {#release_notes.xhtml#id72 .section}
### Breaking Changes

-   Refactor the public [`socket`{.docutils .literal
    .notranslate}]{.pre} api for persistent connection providers to
    properly define [`send()`{.docutils .literal .notranslate}]{.pre},
    [`recv()`{.docutils .literal .notranslate}]{.pre}, and
    [`make_request()`{.docutils .literal .notranslate}]{.pre} (send and
    wait for response) methods for interacting with the open socket.
    ([#3433](https://github.com/ethereum/web3.py/issues/3433){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3433\]]{.link-target})

-   Format entries in [`accessList`{.docutils .literal
    .notranslate}]{.pre} [`storageKeys`{.docutils .literal
    .notranslate}]{.pre} to be [`HexStr`{.docutils .literal
    .notranslate}]{.pre} instead of [`HexBytes`{.docutils .literal
    .notranslate}]{.pre}
    ([#3434](https://github.com/ethereum/web3.py/issues/3434){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3434\]]{.link-target})
:::

::: {#release_notes.xhtml#id73 .section}
### Bugfixes

-   Handle [`ConnectionClosedOK`{.docutils .literal .notranslate}]{.pre}
    case for [`WebSocketProvider`{.docutils .literal
    .notranslate}]{.pre}. If a persistent connection is closed
    gracefully, log and raise a silent
    [`PersistentConnectionClosedOK`{.docutils .literal
    .notranslate}]{.pre} exception, triggering an end to the message
    listener task and breaking out of the
    [`process_subscriptions()`{.docutils .literal .notranslate}]{.pre}
    iterator.
    ([#3432](https://github.com/ethereum/web3.py/issues/3432){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3432\]]{.link-target})
:::

::: {#release_notes.xhtml#id74 .section}
### Features

-   Add [`popitem()`{.docutils .literal .notranslate}]{.pre}
    functionality to the [`SimpleCache`{.docutils .literal
    .notranslate}]{.pre} class as well as an async utility method to
    wait for the next item, [`async_await_and_popitem()`{.docutils
    .literal .notranslate}]{.pre}.
    ([#3433](https://github.com/ethereum/web3.py/issues/3433){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3433\]]{.link-target})
:::

::: {#release_notes.xhtml#id75 .section}
### Internal Changes - for web3.py Contributors

-   Refactor some common logic for persistent connection providers back
    into the base [`PersistentConnectionProvider`{.docutils .literal
    .notranslate}]{.pre} class to reduce code duplication and improve
    maintainability.
    ([#3433](https://github.com/ethereum/web3.py/issues/3433){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3433\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-0-0-beta-7-2024-06-26 .section}
## web3.py v7.0.0-beta.7 (2024-06-26)

::: {#release_notes.xhtml#id76 .section}
### Bugfixes

-   Change the [`exception_retry_configuration`{.docutils .literal
    .notranslate}]{.pre} typing on http providers to be an
    [`Optional`{.docutils .literal .notranslate}]{.pre}, as setting this
    property to [`None`{.docutils .literal .notranslate}]{.pre}
    effectively turns off retries on exceptions for requests.
    ([#3412](https://github.com/ethereum/web3.py/issues/3412){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3412\]]{.link-target})

-   A bugfix, pre-release, to update the [`Beacon`{.docutils .literal
    .notranslate}]{.pre} APIs (sync and async) to properly use the new
    [`HTTPSessionManager`{.docutils .literal .notranslate}]{.pre}.
    ([#3421](https://github.com/ethereum/web3.py/issues/3421){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3421\]]{.link-target})
:::

::: {#release_notes.xhtml#id77 .section}
### Improved Documentation

-   Add an [`eth_subscribe`{.docutils .literal .notranslate}]{.pre}
    example to the events guide
    ([#3403](https://github.com/ethereum/web3.py/issues/3403){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3403\]]{.link-target})
:::

::: {#release_notes.xhtml#id78 .section}
### Features

-   Properly handle [`InsufficientDataBytes`{.docutils .literal
    .notranslate}]{.pre} errors when processing receipts
    ([#3388](https://github.com/ethereum/web3.py/issues/3388){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3388\]]{.link-target})

-   Provide explicit [`__all__`{.docutils .literal .notranslate}]{.pre}
    exports for providers in
    `<cite>`{=html}web3/providers/\_\_init\_\_.py`</cite>`{=html};
    update `<cite>`{=html}web3/\_\_init\_\_.py`</cite>`{=html} to
    include all provider classes including base classes.
    ([#3409](https://github.com/ethereum/web3.py/issues/3409){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3409\]]{.link-target})
:::

::: {#release_notes.xhtml#id79 .section}
### Internal Changes - for web3.py Contributors

-   Re-compile test contracts with Solidity v0.8.25 to ensure
    compatibility.
    ([#3307](https://github.com/ethereum/web3.py/issues/3307){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3307\]]{.link-target})

-   Increase allowable range of eth-tester: 0.11.x and 0.12.x
    ([#3400](https://github.com/ethereum/web3.py/issues/3400){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3400\]]{.link-target})

-   Remove uses of signHash in tests, require eth-account \>=0.13.0 in
    doctests
    ([#3404](https://github.com/ethereum/web3.py/issues/3404){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3404\]]{.link-target})

-   Use a [`HTTPSessionManager`{.docutils .literal .notranslate}]{.pre}
    to manage sessions for http providers, rather than have them share a
    single session manager / cache.
    ([#3412](https://github.com/ethereum/web3.py/issues/3412){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3412\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-0-0-beta-6-2024-05-15 .section}
## web3.py v7.0.0-beta.6 (2024-05-15)

::: {#release_notes.xhtml#id80 .section}
### Bugfixes

-   Properly propagate exceptions from the message listener task to the
    main loop for persistent connection providers.
    ([#3378](https://github.com/ethereum/web3.py/issues/3378){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3378\]]{.link-target})
:::

::: {#release_notes.xhtml#id81 .section}
### Improved Documentation

-   Prunes the node onboarding text
    ([#3371](https://github.com/ethereum/web3.py/issues/3371){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3371\]]{.link-target})

-   Stale example cleanup
    ([#3374](https://github.com/ethereum/web3.py/issues/3374){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3374\]]{.link-target})

-   Merge migration guides into one page
    ([#3379](https://github.com/ethereum/web3.py/issues/3379){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3379\]]{.link-target})

-   Simplify titles of docs guides
    ([#3381](https://github.com/ethereum/web3.py/issues/3381){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3381\]]{.link-target})

-   Move ABI Types guide into the Troubleshooting page
    ([#3382](https://github.com/ethereum/web3.py/issues/3382){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3382\]]{.link-target})

-   Distribute examples into relevant guides and delete Example page
    ([#3383](https://github.com/ethereum/web3.py/issues/3383){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3383\]]{.link-target})

-   Add subscribe/unsubscribe API
    ([#3386](https://github.com/ethereum/web3.py/issues/3386){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3386\]]{.link-target})

-   Introduces batch request API
    ([#3393](https://github.com/ethereum/web3.py/issues/3393){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3393\]]{.link-target})
:::

::: {#release_notes.xhtml#id82 .section}
### Features

-   Add support for request batching via
    [`w3.batch_requests()`{.docutils .literal .notranslate}]{.pre}
    context manager (sync and async).
    ([#3370](https://github.com/ethereum/web3.py/issues/3370){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3370\]]{.link-target})

-   Allow request cache configuration on provider
    [`__init__()`{.docutils .literal .notranslate}]{.pre} for all
    provider classes.
    ([#3395](https://github.com/ethereum/web3.py/issues/3395){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3395\]]{.link-target})
:::

::: {#release_notes.xhtml#id83 .section}
### Internal Changes - for web3.py Contributors

-   Merge the python project template, notably adding python 3.12
    support
    ([#3363](https://github.com/ethereum/web3.py/issues/3363){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3363\]]{.link-target})

-   Increase python-asyncio dependency to be \>=0.21.2,\<0.23
    ([#3369](https://github.com/ethereum/web3.py/issues/3369){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3369\]]{.link-target})

-   Bump to [`mypy==1.10.0`{.docutils .literal .notranslate}]{.pre} for
    [`pre-commit`{.docutils .literal .notranslate}]{.pre}
    ([#3377](https://github.com/ethereum/web3.py/issues/3377){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3377\]]{.link-target})

-   Move signed.rawTransaction -\> signed.raw_transaction in eth module
    tests
    ([#3380](https://github.com/ethereum/web3.py/issues/3380){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3380\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-0-0-beta-5-2024-04-26 .section}
## web3.py v7.0.0-beta.5 (2024-04-26)

::: {#release_notes.xhtml#id84 .section}
### Breaking Changes

-   Snake-case remaining arguments [`fromBlock`{.docutils .literal
    .notranslate}]{.pre}, [`toBlock`{.docutils .literal
    .notranslate}]{.pre}, and [`blockHash`{.docutils .literal
    .notranslate}]{.pre} in contract and filter methods where they are
    passed in as kwargs.
    ([#3353](https://github.com/ethereum/web3.py/issues/3353){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3353\]]{.link-target})

-   Employ an exponential backoff strategy using the
    [`backoff_factor`{.docutils .literal .notranslate}]{.pre} in
    [`ExceptionRetryConfiguration`{.docutils .literal
    .notranslate}]{.pre} for [`HTTPProvider`{.docutils .literal
    .notranslate}]{.pre} and [`AsyncHTTPProvider`{.docutils .literal
    .notranslate}]{.pre}. Reduce the default initial delay to
    [`0.125`{.docutils .literal .notranslate}]{.pre} seconds.
    ([#3358](https://github.com/ethereum/web3.py/issues/3358){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3358\]]{.link-target})

-   Validate JSON-RPC responses more strictly against the JSON-RPC 2.0
    specifications. [`BlockNumberOutofRange`{.docutils .literal
    .notranslate}]{.pre} -\> [`BlockNumberOutOfRange`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3359](https://github.com/ethereum/web3.py/issues/3359){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3359\]]{.link-target})
:::

::: {#release_notes.xhtml#id85 .section}
### Deprecations

-   [`messageHash`{.docutils .literal .notranslate}]{.pre} and
    [`rawTransaction`{.docutils .literal .notranslate}]{.pre} from
    [`eth-account`{.docutils .literal .notranslate}]{.pre} have been
    deprecated for snake_case versions
    ([#3348](https://github.com/ethereum/web3.py/issues/3348){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3348\]]{.link-target})
:::

::: {#release_notes.xhtml#id86 .section}
### Features

-   Raise [`Web3RPCError`{.docutils .literal .notranslate}]{.pre} on
    JSON-RPC errors rather than [`Web3ValueError`{.docutils .literal
    .notranslate}]{.pre}. Raise [`MethodNotSupported`{.docutils .literal
    .notranslate}]{.pre} exception when a method is not supported within
    *web3.py*; keep [`MethodUnavailable`{.docutils .literal
    .notranslate}]{.pre} for when a method is not available on the
    current provider (JSON-RPC error).
    ([#3359](https://github.com/ethereum/web3.py/issues/3359){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3359\]]{.link-target})
:::

::: {#release_notes.xhtml#id87 .section}
### Internal Changes - for web3.py Contributors

-   Bump [`eth-account`{.docutils .literal .notranslate}]{.pre}
    dependency to [`>=0.12.2`{.docutils .literal .notranslate}]{.pre}
    ([#3348](https://github.com/ethereum/web3.py/issues/3348){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3348\]]{.link-target})
:::

::: {#release_notes.xhtml#removals .section}
### Removals

-   Remove the deprecated [`personal`{.docutils .literal
    .notranslate}]{.pre} namespace and all references to it.
    ([#3350](https://github.com/ethereum/web3.py/issues/3350){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3350\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-0-0-beta-4-2024-04-11 .section}
## web3.py v7.0.0-beta.4 (2024-04-11)

::: {#release_notes.xhtml#id88 .section}
### Bugfixes

-   Fix misused call to `<cite>`{=html}endpoint_uri`</cite>`{=html} for
    all cases of [`PersistentConnectionProvider`{.docutils .literal
    .notranslate}]{.pre} by being able to retrieve either the
    [`ipc_path`{.docutils .literal .notranslate}]{.pre} or the
    [`endpoint_uri`{.docutils .literal .notranslate}]{.pre} from the
    base class with [`endpoint_uri_or_ipc_path`{.docutils .literal
    .notranslate}]{.pre} property.
    ([#3319](https://github.com/ethereum/web3.py/issues/3319){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3319\]]{.link-target})
:::

::: {#release_notes.xhtml#id89 .section}
### Improved Documentation

-   Fix [`eth_createAccessList`{.docutils .literal .notranslate}]{.pre}
    docs to reflect the correct behavior.
    ([#3327](https://github.com/ethereum/web3.py/issues/3327){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3327\]]{.link-target})
:::

::: {#release_notes.xhtml#id90 .section}
### Features

-   Use in-house exception wrappers for common Python exceptions, such
    as [`ValueError`{.docutils .literal .notranslate}]{.pre},
    [`TypeError`{.docutils .literal .notranslate}]{.pre},
    [`AttributeError`{.docutils .literal .notranslate}]{.pre}, and
    [`AssertionError`{.docutils .literal .notranslate}]{.pre}, for
    better control over exception handling.
    ([#3300](https://github.com/ethereum/web3.py/issues/3300){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3300\]]{.link-target})

-   Add request formatter for [`maxFeePerBlobGas`{.docutils .literal
    .notranslate}]{.pre} when sending blob transactions. Add formatters
    for [`blobGasPrice`{.docutils .literal .notranslate}]{.pre} and
    [`blobGasUsed`{.docutils .literal .notranslate}]{.pre} for
    *eth_getTransactionReceipt*.
    ([#3322](https://github.com/ethereum/web3.py/issues/3322){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3322\]]{.link-target})

-   Add formatters to ensure that the result of a
    [`eth_createAccessList`{.docutils .literal .notranslate}]{.pre}
    response can be plugged directly into an [`accessList`{.docutils
    .literal .notranslate}]{.pre} in a transaction.
    ([#3327](https://github.com/ethereum/web3.py/issues/3327){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3327\]]{.link-target})

-   Add Cancun support to [`EthereumTesterProvider`{.docutils .literal
    .notranslate}]{.pre}; update Cancun-related fields in some internal
    types.
    ([#3332](https://github.com/ethereum/web3.py/issues/3332){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3332\]]{.link-target})
:::

::: {#release_notes.xhtml#id91 .section}
### Internal Changes - for web3.py Contributors

-   Use [`pre-commit`{.docutils .literal .notranslate}]{.pre} for
    linting, run updated lint tools and fix errors
    ([#3297](https://github.com/ethereum/web3.py/issues/3297){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3297\]]{.link-target})

-   Dependency updates: [`eth-abi>=5.0.1`{.docutils .literal
    .notranslate}]{.pre}, [`eth-account>=0.12.0`{.docutils .literal
    .notranslate}]{.pre} [`eth-typing>=4.0.0`{.docutils .literal
    .notranslate}]{.pre} and [`hexbytes>=1.2.0`{.docutils .literal
    .notranslate}]{.pre} with relevant changes to support these.
    ([#3298](https://github.com/ethereum/web3.py/issues/3298){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3298\]]{.link-target})

-   Remove code conditionally necessary for [`python<=3.7`{.docutils
    .literal .notranslate}]{.pre}
    ([#3317](https://github.com/ethereum/web3.py/issues/3317){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3317\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-0-0-beta-3-2024-03-28 .section}
## web3.py v7.0.0-beta.3 (2024-03-28)

::: {#release_notes.xhtml#id92 .section}
### Bugfixes

-   Fix [`process_log()`{.docutils .literal .notranslate}]{.pre} when
    parsing logs for events with indexed and non-indexed inputs.
    [`get_event_data()`{.docutils .literal .notranslate}]{.pre} now
    compares log topics and event ABIs as hex values.
    ([#3289](https://github.com/ethereum/web3.py/issues/3289){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3289\]]{.link-target})

-   Fix [`process_log`{.docutils .literal .notranslate}]{.pre} for
    [`HexStr`{.docutils .literal .notranslate}]{.pre} inputs. Explicit
    type coercion of entry [`topics`{.docutils .literal
    .notranslate}]{.pre} and [`data`{.docutils .literal
    .notranslate}]{.pre} values.
    ([#3293](https://github.com/ethereum/web3.py/issues/3293){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3293\]]{.link-target})

-   Fix typing for json data argument to [`eth_signTypedData`{.docutils
    .literal .notranslate}]{.pre}.
    ([#3308](https://github.com/ethereum/web3.py/issues/3308){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3308\]]{.link-target})
:::

::: {#release_notes.xhtml#id93 .section}
### Improved Documentation

-   Add note about middlewares change to v7 migration guide.
    ([#3277](https://github.com/ethereum/web3.py/issues/3277){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3277\]]{.link-target})

-   Rearrange v7 migration guide and include upgrade path from
    WebsocketProviderV2
    ([#3310](https://github.com/ethereum/web3.py/issues/3310){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3310\]]{.link-target})
:::

::: {#release_notes.xhtml#id94 .section}
### Features

-   Add support for [`eth_getRawTransactionByHash`{.docutils .literal
    .notranslate}]{.pre} RPC method
    ([#3247](https://github.com/ethereum/web3.py/issues/3247){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3247\]]{.link-target})

-   Add [`user_message`{.docutils .literal .notranslate}]{.pre} kwarg
    for human readable [`Web3Exception`{.docutils .literal
    .notranslate}]{.pre} messages.
    ([#3263](https://github.com/ethereum/web3.py/issues/3263){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3263\]]{.link-target})

-   Add formatters for type 3 transaction fields
    [`maxFeePerBlobGas`{.docutils .literal .notranslate}]{.pre} and
    [`blobVersionedHashes`{.docutils .literal .notranslate}]{.pre}.
    ([#3314](https://github.com/ethereum/web3.py/issues/3314){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3314\]]{.link-target})
:::

::: {#release_notes.xhtml#id95 .section}
### Internal Changes - for web3.py Contributors

-   Add a daily CI run
    ([#3272](https://github.com/ethereum/web3.py/issues/3272){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3272\]]{.link-target})

-   Add linting for non-inclusive language with [`blocklint`{.docutils
    .literal .notranslate}]{.pre}.
    ([#3275](https://github.com/ethereum/web3.py/issues/3275){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3275\]]{.link-target})
:::

::: {#release_notes.xhtml#id96 .section}
### Miscellaneous Changes

-   [#3304](https://github.com/ethereum/web3.py/issues/3304){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3304\]]{.link-target}
:::

::: {#release_notes.xhtml#id97 .section}
### Performance Improvements

-   Importing [`ens._normalization`{.docutils .literal
    .notranslate}]{.pre} is deferred until the first call of
    [`ens.utils.normalize_name`{.docutils .literal .notranslate}]{.pre}
    in order to speed up [`import`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`web3`{.docutils .literal .notranslate}]{.pre}.
    ([#3285](https://github.com/ethereum/web3.py/issues/3285){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3285\]]{.link-target})

-   Utilize [`async`{.docutils .literal .notranslate}]{.pre}
    functionality when popping responses from request manager cache for
    persistent connection providers.
    ([#3306](https://github.com/ethereum/web3.py/issues/3306){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3306\]]{.link-target})
:::

::: {#release_notes.xhtml#id98 .section}
### Removals

-   Remove [`Contract.encodeABI()`{.docutils .literal
    .notranslate}]{.pre} in favor of [`Contract.encode_abi()`{.docutils
    .literal .notranslate}]{.pre} to follow standard conventions.
    ([#3281](https://github.com/ethereum/web3.py/issues/3281){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3281\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-0-0-beta-2-2024-03-11 .section}
## web3.py v7.0.0-beta.2 (2024-03-11)

::: {#release_notes.xhtml#id99 .section}
### Breaking Changes

-   Move [`middlewares`{.docutils .literal .notranslate}]{.pre} -\>
    [`middleware`{.docutils .literal .notranslate}]{.pre}
    ([#3276](https://github.com/ethereum/web3.py/issues/3276){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3276\]]{.link-target})
:::

::: {#release_notes.xhtml#id100 .section}
### Bugfixes

-   Fix/update methods and decorators in [`web3/_utils/abi.py`{.docutils
    .literal .notranslate}]{.pre} to address issues raised by
    [`mypy`{.docutils .literal .notranslate}]{.pre}
    ([#3269](https://github.com/ethereum/web3.py/issues/3269){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3269\]]{.link-target})

-   Catch all types of [`eth-abi`{.docutils .literal
    .notranslate}]{.pre} [`DecodingError`{.docutils .literal
    .notranslate}]{.pre} in
    [`EthereumTesterProvider->_make_request()`{.docutils .literal
    .notranslate}]{.pre}
    ([#3271](https://github.com/ethereum/web3.py/issues/3271){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3271\]]{.link-target})
:::

::: {#release_notes.xhtml#id101 .section}
### Improved Documentation

-   Remove annual user survey prompt from docs
    ([#3218](https://github.com/ethereum/web3.py/issues/3218){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3218\]]{.link-target})

-   Introduce feedback form banner prompt on docs
    ([#3253](https://github.com/ethereum/web3.py/issues/3253){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3253\]]{.link-target})

-   Refresh of the middleware docs
    ([#3266](https://github.com/ethereum/web3.py/issues/3266){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3266\]]{.link-target})
:::

::: {#release_notes.xhtml#id102 .section}
### Miscellaneous Changes

-   [#3259](https://github.com/ethereum/web3.py/issues/3259){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3259\]]{.link-target},
    [#3262](https://github.com/ethereum/web3.py/issues/3262){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3262\]]{.link-target}
:::

::: {#release_notes.xhtml#id103 .section}
### Removals

-   Remove the [`ethpm`{.docutils .literal .notranslate}]{.pre} module
    and related docs, tests, and dependencies
    ([#3261](https://github.com/ethereum/web3.py/issues/3261){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3261\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v7-0-0-beta-1-2024-02-28 .section}
## web3.py v7.0.0-beta.1 (2024-02-28)

::: {#release_notes.xhtml#id104 .section}
### Breaking Changes

-   Refactor the middleware setup so that request processors and
    response processors are separated. This will allow for more
    flexibility in the future and aid in the implementation of features
    such as batched requests. This PR also closes out a few outstanding
    issues and will be the start of the breaking changes for
    `<cite>`{=html}web3.py`</cite>`{=html} [`v7`{.docutils .literal
    .notranslate}]{.pre}. Review PR for a full list of changes.
    ([#3169](https://github.com/ethereum/web3.py/issues/3169){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3169\]]{.link-target})

-   Use a message listener background task for
    [`WebsocketProviderV2`{.docutils .literal .notranslate}]{.pre}
    rather than relying on [`ws.recv()`{.docutils .literal
    .notranslate}]{.pre} blocking. Some breaking changes to API, notably
    [`listen_to_websocket`{.docutils .literal .notranslate}]{.pre} -\>
    [`process_subscriptions`{.docutils .literal .notranslate}]{.pre}.
    ([#3179](https://github.com/ethereum/web3.py/issues/3179){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3179\]]{.link-target})

-   Drop dependency on [`lru-dict`{.docutils .literal
    .notranslate}]{.pre} library.
    ([#3196](https://github.com/ethereum/web3.py/issues/3196){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3196\]]{.link-target})

-   Drop support for python 3.7
    ([#3198](https://github.com/ethereum/web3.py/issues/3198){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3198\]]{.link-target})

-   Return iterable of [``` ABIFunction``s ```{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`from`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`the`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[``` ``BaseContractFunctions ```{.docutils .literal
    .notranslate}]{.pre} iterator.
    ([#3200](https://github.com/ethereum/web3.py/issues/3200){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3200\]]{.link-target})

-   Name changes internal to the library related to [`v7`{.docutils
    .literal .notranslate}]{.pre}: [`WebsocketProvider`{.docutils
    .literal .notranslate}]{.pre} -\>
    [`LegacyWebSocketProvider`{.docutils .literal .notranslate}]{.pre},
    [`WebsocketProviderV2`{.docutils .literal .notranslate}]{.pre} -\>
    [`WebSocketProvider`{.docutils .literal .notranslate}]{.pre}
    ([#3225](https://github.com/ethereum/web3.py/issues/3225){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3225\]]{.link-target})

-   [`CallOverride`{.docutils .literal .notranslate}]{.pre} type change
    to [`StateOverride`{.docutils .literal .notranslate}]{.pre} to
    reflect better the type name for the state override.
    [`eth_call`{.docutils .literal .notranslate}]{.pre} is also not the
    only method with this param, making the name more generic.
    ([#3227](https://github.com/ethereum/web3.py/issues/3227){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3227\]]{.link-target})

-   Rename `<cite>`{=html}beacon/main.py`</cite>`{=html} -\>
    `<cite>`{=html}beacon/beacon.py`</cite>`{=html}
    ([#3233](https://github.com/ethereum/web3.py/issues/3233){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3233\]]{.link-target})

-   [`EthereumTesterProvider`{.docutils .literal .notranslate}]{.pre}
    now returns [`input`{.docutils .literal .notranslate}]{.pre} for
    `<cite>`{=html}eth_getTransaction\*`</cite>`{=html} for better
    consistency with JSON-RPC spec.
    ([#3235](https://github.com/ethereum/web3.py/issues/3235){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3235\]]{.link-target})

-   Change the signature for the async version of
    [`wait_for_transaction_receipt()`{.docutils .literal
    .notranslate}]{.pre} to use [`Optional[float]`{.docutils .literal
    .notranslate}]{.pre} instead of [`float`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3237](https://github.com/ethereum/web3.py/issues/3237){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3237\]]{.link-target})

-   [`get_default_ipc_path()`{.docutils .literal .notranslate}]{.pre}
    and [`get_dev_ipc_path()`{.docutils .literal .notranslate}]{.pre}
    now return the path value without checking if the
    [`geth.ipc`{.docutils .literal .notranslate}]{.pre} file exists.
    ([#3245](https://github.com/ethereum/web3.py/issues/3245){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3245\]]{.link-target})
:::

::: {#release_notes.xhtml#id105 .section}
### Bugfixes

-   Fix return type of [`AsyncContract.constructor`{.docutils .literal
    .notranslate}]{.pre}
    ([#3192](https://github.com/ethereum/web3.py/issues/3192){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3192\]]{.link-target})

-   Handle new geth errors related to waiting for a transaction receipt
    while transactions are still being indexed.
    ([#3216](https://github.com/ethereum/web3.py/issues/3216){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3216\]]{.link-target})
:::

::: {#release_notes.xhtml#id106 .section}
### Improved Documentation

-   Documentation was updated to reflect early changes to
    [`v7`{.docutils .literal .notranslate}]{.pre} from [`v6`{.docutils
    .literal .notranslate}]{.pre}. A [`v6`{.docutils .literal
    .notranslate}]{.pre} -\> [`v7`{.docutils .literal
    .notranslate}]{.pre} migration guide was also started and will be
    added to as [`v7`{.docutils .literal .notranslate}]{.pre} breaking
    changes are introduced.
    ([#3211](https://github.com/ethereum/web3.py/issues/3211){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3211\]]{.link-target})

-   Remove ENS v6 breaking change warning from v7
    ([#3254](https://github.com/ethereum/web3.py/issues/3254){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3254\]]{.link-target})
:::

::: {#release_notes.xhtml#id107 .section}
### Features

-   Add AsyncIPCProvider
    ([#2984](https://github.com/ethereum/web3.py/issues/2984){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2984\]]{.link-target})

-   Implement [`state_override`{.docutils .literal .notranslate}]{.pre}
    parameter for [`eth_estimateGas`{.docutils .literal
    .notranslate}]{.pre} method.
    ([#3164](https://github.com/ethereum/web3.py/issues/3164){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3164\]]{.link-target})

-   Upgrade `<cite>`{=html}eth-tester`</cite>`{=html} to
    [`v0.10.0-b.1`{.docutils .literal .notranslate}]{.pre} and turn on
    [`eth_feeHistory`{.docutils .literal .notranslate}]{.pre} support
    for [`EthereumTesterProvider`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3172](https://github.com/ethereum/web3.py/issues/3172){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3172\]]{.link-target})

-   Add formatters for new [`Cancun`{.docutils .literal
    .notranslate}]{.pre} network upgrade block header fields:
    [`blobGasUsed`{.docutils .literal .notranslate}]{.pre},
    [`excessBlobGas`{.docutils .literal .notranslate}]{.pre}, and
    [`parentBeaconBlockRoot`{.docutils .literal .notranslate}]{.pre}.
    ([#3223](https://github.com/ethereum/web3.py/issues/3223){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3223\]]{.link-target})

-   Contract event [`get_logs`{.docutils .literal .notranslate}]{.pre}
    results sorted by each [`ContractEvent`{.docutils .literal
    .notranslate}]{.pre} [`logIndex`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3228](https://github.com/ethereum/web3.py/issues/3228){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3228\]]{.link-target})
:::

::: {#release_notes.xhtml#id108 .section}
### Internal Changes - for web3.py Contributors

-   Create test fixture for latest [`geth`{.docutils .literal
    .notranslate}]{.pre} version. Run tests with [`geth`{.docutils
    .literal .notranslate}]{.pre} in [`--dev`{.docutils .literal
    .notranslate}]{.pre} mode.
    ([#3191](https://github.com/ethereum/web3.py/issues/3191){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3191\]]{.link-target})

-   Validate geth version used to generate the integration test fixture
    against the version in the binary that is used to run the tests.
    ([#3193](https://github.com/ethereum/web3.py/issues/3193){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3193\]]{.link-target})

-   Internal change to [`WebsocketProviderV2`{.docutils .literal
    .notranslate}]{.pre} before release: raise exceptions in message
    listener task by default; opting to silence them via a flag.
    ([#3202](https://github.com/ethereum/web3.py/issues/3202){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3202\]]{.link-target})

-   Compile contracts with and test against new Solidity version
    [`v0.8.24`{.docutils .literal .notranslate}]{.pre}.
    ([#3204](https://github.com/ethereum/web3.py/issues/3204){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3204\]]{.link-target})

-   Formatting updates for [`black==24.1.0`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3207](https://github.com/ethereum/web3.py/issues/3207){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3207\]]{.link-target})

-   Allow HTTP provider request retry configuration to be turned off
    appropriately. Internal change since [`v7`{.docutils .literal
    .notranslate}]{.pre} has not yet been released.
    ([#3211](https://github.com/ethereum/web3.py/issues/3211){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3211\]]{.link-target})

-   Upgraded geth fixture version
    ([#3231](https://github.com/ethereum/web3.py/issues/3231){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3231\]]{.link-target})
:::

::: {#release_notes.xhtml#id109 .section}
### Miscellaneous Changes

-   [#2964](https://github.com/ethereum/web3.py/issues/2964){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2964\]]{.link-target},
    [#3248](https://github.com/ethereum/web3.py/issues/3248){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3248\]]{.link-target}
:::

::: {#release_notes.xhtml#id110 .section}
### Performance Improvements

-   Remove call to [`parse_block_identifier`{.docutils .literal
    .notranslate}]{.pre} when initializing [`ContractCaller`{.docutils
    .literal .notranslate}]{.pre} functions.
    ([#3257](https://github.com/ethereum/web3.py/issues/3257){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3257\]]{.link-target})
:::

::: {#release_notes.xhtml#id111 .section}
### Removals

-   [`normalize_request_parameters`{.docutils .literal
    .notranslate}]{.pre} middleware was in a stale state and not being
    used or tested. This middleware has been removed.
    ([#3211](https://github.com/ethereum/web3.py/issues/3211){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3211\]]{.link-target})

-   Remove deprecated [`geth.miner`{.docutils .literal
    .notranslate}]{.pre} namespace and methods.
    ([#3236](https://github.com/ethereum/web3.py/issues/3236){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3236\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-14-0-2024-01-10 .section}
## web3.py v6.14.0 (2024-01-10)

::: {#release_notes.xhtml#id112 .section}
### Bugfixes

-   Change [`fee_history`{.docutils .literal .notranslate}]{.pre}
    default behavior. If [`reward_percentiles`{.docutils .literal
    .notranslate}]{.pre} arg not included, pass it to the provider as an
    empty list instead of [`None`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3185](https://github.com/ethereum/web3.py/issues/3185){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3185\]]{.link-target})

-   Use [`importlib.metadata`{.docutils .literal .notranslate}]{.pre}
    for version info if python\>=3.8
    ([#3187](https://github.com/ethereum/web3.py/issues/3187){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3187\]]{.link-target})
:::

::: {#release_notes.xhtml#id113 .section}
### Improved Documentation

-   Remove docs reference for removed [`protocol_version`{.docutils
    .literal .notranslate}]{.pre} RPC method
    ([#3183](https://github.com/ethereum/web3.py/issues/3183){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3183\]]{.link-target})
:::

::: {#release_notes.xhtml#id114 .section}
### Internal Changes - for web3.py Contributors

-   Re-define how async vs sync core test suites are ran.
    ([#3180](https://github.com/ethereum/web3.py/issues/3180){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3180\]]{.link-target})

-   Add basic import and version tests for the [`web3`{.docutils
    .literal .notranslate}]{.pre} module
    ([#3187](https://github.com/ethereum/web3.py/issues/3187){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3187\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-13-0-2023-12-20 .section}
## web3.py v6.13.0 (2023-12-20)

::: {#release_notes.xhtml#id115 .section}
### Features

-   Implement async [`eth_createAccessList`{.docutils .literal
    .notranslate}]{.pre} RPC method to create an EIP-2930 access list.
    ([#3167](https://github.com/ethereum/web3.py/issues/3167){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3167\]]{.link-target})
:::

::: {#release_notes.xhtml#id116 .section}
### Internal Changes - for web3.py Contributors

-   Add flaky async Geth integration tests to CI
    ([#3170](https://github.com/ethereum/web3.py/issues/3170){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3170\]]{.link-target})

-   Fix wrong test reference for [`EthereumTesterProvider`{.docutils
    .literal .notranslate}]{.pre} integration test suite.
    ([#3171](https://github.com/ethereum/web3.py/issues/3171){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3171\]]{.link-target})

-   Small fix for integration tests for [`tox`{.docutils .literal
    .notranslate}]{.pre} to recognize independent patterns for each test
    run.
    ([#3173](https://github.com/ethereum/web3.py/issues/3173){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3173\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-12-0-2023-12-11 .section}
## web3.py v6.12.0 (2023-12-11)

::: {#release_notes.xhtml#id117 .section}
### Improved Documentation

-   Make downloadable versions of docs available in [`pdf`{.docutils
    .literal .notranslate}]{.pre}, [`htmlzip`{.docutils .literal
    .notranslate}]{.pre}, and [`epub`{.docutils .literal
    .notranslate}]{.pre} formats
    ([#3153](https://github.com/ethereum/web3.py/issues/3153){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3153\]]{.link-target})

-   Add 2023 user survey fine art banner in the docs
    ([#3159](https://github.com/ethereum/web3.py/issues/3159){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3159\]]{.link-target})

-   Polish the community resources docs page
    ([#3162](https://github.com/ethereum/web3.py/issues/3162){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3162\]]{.link-target})
:::

::: {#release_notes.xhtml#id118 .section}
### Features

-   Implement [`createAccessList`{.docutils .literal
    .notranslate}]{.pre} RPC endpoint to create an EIP-2930 access list.
    ([#2381](https://github.com/ethereum/web3.py/issues/2381){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2381\]]{.link-target})
:::

::: {#release_notes.xhtml#id119 .section}
### Internal Changes - for web3.py Contributors

-   Run flaky eth-tester tests on CI
    ([#3157](https://github.com/ethereum/web3.py/issues/3157){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3157\]]{.link-target})

-   Pin [`pytest-asyncio`{.docutils .literal .notranslate}]{.pre}
    dependency to \<0.23
    ([#3160](https://github.com/ethereum/web3.py/issues/3160){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3160\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-11-4-2023-11-27 .section}
## web3.py v6.11.4 (2023-11-27)

::: {#release_notes.xhtml#id120 .section}
### Bugfixes

-   Fix collision of [`w3`{.docutils .literal .notranslate}]{.pre}
    variable when initializing contract with function of the same name
    ([#3147](https://github.com/ethereum/web3.py/issues/3147){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3147\]]{.link-target})
:::

::: {#release_notes.xhtml#id121 .section}
### Miscellaneous Changes

-   [#3148](https://github.com/ethereum/web3.py/issues/3148){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3148\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#web3-py-v6-11-3-2023-11-08 .section}
## web3.py v6.11.3 (2023-11-08)

::: {#release_notes.xhtml#id122 .section}
### Bugfixes

-   When coming back through the middleware onion after a request is
    made, we have the response [`id`{.docutils .literal
    .notranslate}]{.pre}. Use it to match to the cached request
    information and process the response accordingly.
    ([#3140](https://github.com/ethereum/web3.py/issues/3140){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3140\]]{.link-target})
:::

::: {#release_notes.xhtml#id123 .section}
### Improved Documentation

-   Adds Discord bot template repo to Resources page
    ([#3143](https://github.com/ethereum/web3.py/issues/3143){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3143\]]{.link-target})
:::

::: {#release_notes.xhtml#id124 .section}
### Internal Changes - for web3.py Contributors

-   Additional contract [`abi`{.docutils .literal .notranslate}]{.pre}
    documentation to make it a clear requirement for contract instances.
    ([#2539](https://github.com/ethereum/web3.py/issues/2539){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2539\]]{.link-target})

-   Fix type annotations for [`web3`{.docutils .literal
    .notranslate}]{.pre} constants.
    ([#3138](https://github.com/ethereum/web3.py/issues/3138){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3138\]]{.link-target})

-   Add upper pin to deprecated dependency [`lru-dict`{.docutils
    .literal .notranslate}]{.pre} whose new minor version release
    introduced a typing issue with CI lint builds.
    ([#3144](https://github.com/ethereum/web3.py/issues/3144){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3144\]]{.link-target})

-   Recompile test contracts with new Solidity version
    [`v0.8.23`{.docutils .literal .notranslate}]{.pre} to ensure
    compatibility.
    ([#3146](https://github.com/ethereum/web3.py/issues/3146){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3146\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-11-2-2023-10-30 .section}
## web3.py v6.11.2 (2023-10-30)

::: {#release_notes.xhtml#id125 .section}
### Improved Documentation

-   Fix formatting in documentation for creating an account.
    ([#3128](https://github.com/ethereum/web3.py/issues/3128){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3128\]]{.link-target})

-   Fix broken links for Apeworx and Sepolia faucet
    ([#3130](https://github.com/ethereum/web3.py/issues/3130){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3130\]]{.link-target})
:::

::: {#release_notes.xhtml#id126 .section}
### Internal Changes - for web3.py Contributors

-   Speed up the core test suite by splitting up sync and async tests.
    This reduces the CI build times to \~8min from \~12min.
    ([#3111](https://github.com/ethereum/web3.py/issues/3111){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3111\]]{.link-target})

-   Re-compile test contracts with Solidity [`v0.8.22`{.docutils
    .literal .notranslate}]{.pre} to ensure compatibility with this
    latest Solidity version.
    ([#3134](https://github.com/ethereum/web3.py/issues/3134){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3134\]]{.link-target})

-   Improvements on yielding to the event loop while searching in
    response caches and calling [`recv()`{.docutils .literal
    .notranslate}]{.pre} on the websocket connection for
    [`WebSocketProviderV2`{.docutils .literal .notranslate}]{.pre}.
    ([#3135](https://github.com/ethereum/web3.py/issues/3135){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3135\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-11-1-2023-10-18 .section}
## web3.py v6.11.1 (2023-10-18)

::: {#release_notes.xhtml#id127 .section}
### Improved Documentation

-   Update [`WebsocketProviderV2`{.docutils .literal
    .notranslate}]{.pre} documentation. Document a general overview of
    the [`RequestProcessor`{.docutils .literal .notranslate}]{.pre}
    class and its internal caches.
    ([#3125](https://github.com/ethereum/web3.py/issues/3125){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3125\]]{.link-target})
:::

::: {#release_notes.xhtml#id128 .section}
### Features

-   Properly define an [`__await__()`{.docutils .literal
    .notranslate}]{.pre} method on the
    [`_PersistentConnectionWeb3`{.docutils .literal .notranslate}]{.pre}
    class so a persistent connection may be initialized using the
    [`await`{.docutils .literal .notranslate}]{.pre} pattern.
    Integration tests added for initializing the persistent connection
    using the [`await`{.docutils .literal .notranslate}]{.pre} pattern.
    ([#3125](https://github.com/ethereum/web3.py/issues/3125){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3125\]]{.link-target})
:::

::: {#release_notes.xhtml#id129 .section}
### Internal Changes - for web3.py Contributors

-   Updates and refactoring for the [`WebsocketProviderV2`{.docutils
    .literal .notranslate}]{.pre} class and its internal supporting
    classes and logic. Separation of one-to-one and one-to-many request
    responses. Storing of one-to-many responses in a [`deque`{.docutils
    .literal .notranslate}]{.pre} and one-to-one responses in a
    [`SimpleCache`{.docutils .literal .notranslate}]{.pre} class.
    Provide an async lock around the websocket [`recv()`{.docutils
    .literal .notranslate}]{.pre}.
    ([#3125](https://github.com/ethereum/web3.py/issues/3125){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3125\]]{.link-target})

-   Add upper pin to [`hexbytes`{.docutils .literal .notranslate}]{.pre}
    dependency to due incoming breaking change
    ([#3127](https://github.com/ethereum/web3.py/issues/3127){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3127\]]{.link-target})
:::

::: {#release_notes.xhtml#id130 .section}
### Miscellaneous Changes

-   [#3114](https://github.com/ethereum/web3.py/issues/3114){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3114\]]{.link-target},
    [#3129](https://github.com/ethereum/web3.py/issues/3129){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3129\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#web3-py-v6-11-0-2023-10-11 .section}
## web3.py v6.11.0 (2023-10-11)

::: {#release_notes.xhtml#breaking-changes-to-beta-apis .section}
### Breaking Changes (to Beta APIs)

-   Refactor the async iterator pattern for message streams from the
    websocket connection for [`WebsocketProviderV2`{.docutils .literal
    .notranslate}]{.pre} to a proper async iterator. This allows for a
    more natural usage of the iterator pattern and mimics the behavior
    of the underlying [`websockets`{.docutils .literal
    .notranslate}]{.pre} library.
    ([#3116](https://github.com/ethereum/web3.py/issues/3116){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3116\]]{.link-target})
:::

::: {#release_notes.xhtml#id131 .section}
### Bugfixes

-   Use hashes to compare equality of two [`AttributeDict`{.docutils
    .literal .notranslate}]{.pre} classes
    ([#3104](https://github.com/ethereum/web3.py/issues/3104){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3104\]]{.link-target})

-   Fix issues with formatting middleware, such as
    [`async_geth_poa_middleware`{.docutils .literal .notranslate}]{.pre}
    and subscription responses for [`WebsocketProviderV2`{.docutils
    .literal .notranslate}]{.pre}.
    ([#3116](https://github.com/ethereum/web3.py/issues/3116){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3116\]]{.link-target})
:::

::: {#release_notes.xhtml#id132 .section}
### Improved Documentation

-   Change [`docker-compose`{.docutils .literal .notranslate}]{.pre} to
    [`docker`{.docutils .literal .notranslate}]{.pre}` `{.docutils
    .literal .notranslate}[`compose`{.docutils .literal
    .notranslate}]{.pre} in the Contributing docs examples.
    ([#3107](https://github.com/ethereum/web3.py/issues/3107){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3107\]]{.link-target})

-   Updates to the [`WebsocketProviderV2`{.docutils .literal
    .notranslate}]{.pre} documentation async iterator example for
    iterating over a persistent stream of messages from the websocket
    connection via [`async`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`for`{.docutils .literal .notranslate}]{.pre}.
    ([#3116](https://github.com/ethereum/web3.py/issues/3116){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3116\]]{.link-target})

-   Update outdated node and private key management verbiage.
    ([#3117](https://github.com/ethereum/web3.py/issues/3117){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3117\]]{.link-target})
:::

::: {#release_notes.xhtml#id133 .section}
### Features

-   Allow passing in a [`float`{.docutils .literal .notranslate}]{.pre}
    for a [`request_timeout`{.docutils .literal .notranslate}]{.pre} for
    requests for the [`Beacon`{.docutils .literal .notranslate}]{.pre}
    class. Update some Beacon API endpoints (sync and async).
    ([#3106](https://github.com/ethereum/web3.py/issues/3106){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3106\]]{.link-target})

-   Add [`allow_list`{.docutils .literal .notranslate}]{.pre} kwarg for
    [`exception_retry_middleware`{.docutils .literal
    .notranslate}]{.pre} to allow for a custom list of RPC endpoints.
    Add a sleep between retries and a customizable
    [`backoff_factor`{.docutils .literal .notranslate}]{.pre} to control
    the sleep time between retry attempts.
    ([#3120](https://github.com/ethereum/web3.py/issues/3120){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3120\]]{.link-target})
:::

::: {#release_notes.xhtml#id134 .section}
### Internal Changes - for web3.py Contributors

-   Refactor logic for the [`input_munger()`{.docutils .literal
    .notranslate}]{.pre} method on the [`Method`{.docutils .literal
    .notranslate}]{.pre} class.
    ([#2987](https://github.com/ethereum/web3.py/issues/2987){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2987\]]{.link-target})

-   Pin mypy to v1.4.1, the last to support py37
    ([#3122](https://github.com/ethereum/web3.py/issues/3122){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3122\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-10-0-2023-09-21 .section}
## web3.py v6.10.0 (2023-09-21)

::: {#release_notes.xhtml#id135 .section}
### Breaking Changes (to Beta APIs)

-   Breaking change to the API for interacting with a persistent
    websocket connection via [`AsyncWeb3`{.docutils .literal
    .notranslate}]{.pre} and [`WebsocketProviderV2`{.docutils .literal
    .notranslate}]{.pre}. This change internalizes the
    [`provider.ws`{.docutils .literal .notranslate}]{.pre} property and
    opts for a [`w3.ws`{.docutils .literal .notranslate}]{.pre} API
    achieved via a new [`WebsocketConnection`{.docutils .literal
    .notranslate}]{.pre} class. With these changes,
    [`eth_subscription`{.docutils .literal .notranslate}]{.pre} messages
    now return the subscription id as the [`subscription`{.docutils
    .literal .notranslate}]{.pre} param and the formatted message as the
    [`result`{.docutils .literal .notranslate}]{.pre} param.
    ([#3096](https://github.com/ethereum/web3.py/issues/3096){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3096\]]{.link-target})
:::

::: {#release_notes.xhtml#id136 .section}
### Bugfixes

-   Return `<cite>`{=html}w3.eth.gas_price`</cite>`{=html} when
    calculating time based gas price strategy for an empty chain.
    ([#1149](https://github.com/ethereum/web3.py/issues/1149){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1149\]]{.link-target})

-   Update `<cite>`{=html}LogReceipt`</cite>`{=html} and
    `<cite>`{=html}TxReceipt`</cite>`{=html} declarations. Remove
    `<cite>`{=html}LogReceipt`</cite>`{=html}'s
    `<cite>`{=html}payload`</cite>`{=html} and
    `<cite>`{=html}topic`</cite>`{=html} attributes. Refactor
    `<cite>`{=html}LogEntry`</cite>`{=html} to
    `<cite>`{=html}LogReceipt`</cite>`{=html}.
    ([#3043](https://github.com/ethereum/web3.py/issues/3043){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3043\]]{.link-target})

-   Fixes [`AsyncEth.max_priority_fee_per_gas`{.docutils .literal
    .notranslate}]{.pre}. It wasn't falling back to
    [`eth_feeHistory`{.docutils .literal .notranslate}]{.pre} since the
    [`MethodUnavailable`{.docutils .literal .notranslate}]{.pre} error
    was introduced.
    ([#3084](https://github.com/ethereum/web3.py/issues/3084){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3084\]]{.link-target})
:::

::: {#release_notes.xhtml#id137 .section}
### Improved Documentation

-   Update [`WebsocketProviderV2`{.docutils .literal
    .notranslate}]{.pre} documentation to reflect the new public
    websocket API via the [`WebsocketConnection`{.docutils .literal
    .notranslate}]{.pre} class.
    ([#3096](https://github.com/ethereum/web3.py/issues/3096){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3096\]]{.link-target})
:::

::: {#release_notes.xhtml#id138 .section}
### Features

-   Improved error messaging for exceptions from malformed JSON-RPC
    responses.
    ([#3053](https://github.com/ethereum/web3.py/issues/3053){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3053\]]{.link-target})

-   Enable filtering by non-indexed arguments for contract event
    [`get_logs()`{.docutils .literal .notranslate}]{.pre}.
    ([#3078](https://github.com/ethereum/web3.py/issues/3078){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3078\]]{.link-target})

-   Add [`eth_maxPriorityFeePerGas`{.docutils .literal
    .notranslate}]{.pre} to [`exception_retry_middleware`{.docutils
    .literal .notranslate}]{.pre} whitelist
    ([#3090](https://github.com/ethereum/web3.py/issues/3090){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3090\]]{.link-target})

-   Sync responses for [`WebsocketProviderV2`{.docutils .literal
    .notranslate}]{.pre} open connections with requests via matching RPC
    [`id`{.docutils .literal .notranslate}]{.pre} values.
    ([#3096](https://github.com/ethereum/web3.py/issues/3096){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3096\]]{.link-target})

-   Properly JSON encode [`AttributeDict`{.docutils .literal
    .notranslate}]{.pre}, [`bytes`{.docutils .literal
    .notranslate}]{.pre}, and [`HexBytes`{.docutils .literal
    .notranslate}]{.pre} when sending a JSON-RPC request by utilizing
    the in-house [`Web3JsonEncoder`{.docutils .literal
    .notranslate}]{.pre} class.
    ([#3101](https://github.com/ethereum/web3.py/issues/3101){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3101\]]{.link-target})
:::

::: {#release_notes.xhtml#id139 .section}
### Internal Changes - for web3.py Contributors

-   Fix an issue with an IPC test present only on MacOSX.
    ([#929](https://github.com/ethereum/web3.py/issues/929){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/929\]]{.link-target})

-   Ignore flake8 rule F401 (unused import) in all
    [`__init__.py`{.docutils .literal .notranslate}]{.pre} files
    ([#3097](https://github.com/ethereum/web3.py/issues/3097){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3097\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-9-0-2023-08-23 .section}
## web3.py v6.9.0 (2023-08-23)

::: {#release_notes.xhtml#id140 .section}
### Bugfixes

-   Fix the type for [`input`{.docutils .literal .notranslate}]{.pre} in
    [`TxData`{.docutils .literal .notranslate}]{.pre} from
    [`HexStr`{.docutils .literal .notranslate}]{.pre} -\>
    [`HexBytes`{.docutils .literal .notranslate}]{.pre}.
    ([#3074](https://github.com/ethereum/web3.py/issues/3074){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3074\]]{.link-target})

-   Fix an issue with [`WebsocketProviderV2`{.docutils .literal
    .notranslate}]{.pre} when responses to a request aren't found in the
    cache ([`None`{.docutils .literal .notranslate}]{.pre} values).
    ([#3075](https://github.com/ethereum/web3.py/issues/3075){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3075\]]{.link-target})

-   Re-expose some websockets constants found in
    [`web3.providers.websocket.websocket`{.docutils .literal
    .notranslate}]{.pre} via [`web3.providers.websocket`{.docutils
    .literal .notranslate}]{.pre}.
    ([#3076](https://github.com/ethereum/web3.py/issues/3076){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3076\]]{.link-target})

-   Return [`NotImplemented`{.docutils .literal .notranslate}]{.pre}
    constant, rather than raising [`NotImplementedError`{.docutils
    .literal .notranslate}]{.pre} for
    [`NamedElementOnion.__add__()`{.docutils .literal
    .notranslate}]{.pre}, based on Python standards.
    ([#3080](https://github.com/ethereum/web3.py/issues/3080){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3080\]]{.link-target})

-   Only release [`async_lock`{.docutils .literal .notranslate}]{.pre}
    if it's locked to begin with.
    ([#3083](https://github.com/ethereum/web3.py/issues/3083){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3083\]]{.link-target})
:::

::: {#release_notes.xhtml#id141 .section}
### Improved Documentation

-   Add MEV blocking tutorial to Resources docs page
    ([#3072](https://github.com/ethereum/web3.py/issues/3072){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3072\]]{.link-target})

-   Fix documentation around current state of [`get_logs()`{.docutils
    .literal .notranslate}]{.pre} usage and arguments.
    ([#3073](https://github.com/ethereum/web3.py/issues/3073){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3073\]]{.link-target})

-   Add an Ape hackathon kit to Resources documentation page
    ([#3082](https://github.com/ethereum/web3.py/issues/3082){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3082\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-8-0-2023-08-02 .section}
## web3.py v6.8.0 (2023-08-02)

::: {#release_notes.xhtml#id142 .section}
### Bugfixes

-   Fix the type for the optional param asking for "full transactions"
    when subscribing to [`newPendingTransactions`{.docutils .literal
    .notranslate}]{.pre} via [`eth_subscribe`{.docutils .literal
    .notranslate}]{.pre} to [`bool`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3067](https://github.com/ethereum/web3.py/issues/3067){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3067\]]{.link-target})
:::

::: {#release_notes.xhtml#id143 .section}
### Improved Documentation

-   Change docs to reflect AsyncHTTPProvider does accept ENS names now
    ([#3070](https://github.com/ethereum/web3.py/issues/3070){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3070\]]{.link-target})
:::

::: {#release_notes.xhtml#id144 .section}
### Features

-   Return structured JSON-RPC errors for missing or unimplemented
    eth-tester methods.
    ([#3061](https://github.com/ethereum/web3.py/issues/3061){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3061\]]{.link-target})

-   ENS name-to-address support for [`eth_subscribe`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3066](https://github.com/ethereum/web3.py/issues/3066){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3066\]]{.link-target})

-   Asynchronous iterator support for [`AsyncWeb3`{.docutils .literal
    .notranslate}]{.pre} with [`WebsocketProviderV2`{.docutils .literal
    .notranslate}]{.pre} using [`async`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`for`{.docutils .literal .notranslate}]{.pre} syntax.
    ([#3067](https://github.com/ethereum/web3.py/issues/3067){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3067\]]{.link-target})
:::

::: {#release_notes.xhtml#id145 .section}
### Internal Changes - for web3.py Contributors

-   Minor fixes to type hinting in the core tests setup fixtures.
    ([#3069](https://github.com/ethereum/web3.py/issues/3069){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3069\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-7-0-2023-07-26 .section}
## web3.py v6.7.0 (2023-07-26)

::: {#release_notes.xhtml#id146 .section}
### Bugfixes

-   Test wheel build in separate directory and virtualenv
    ([#3046](https://github.com/ethereum/web3.py/issues/3046){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3046\]]{.link-target})

-   Handle case where data gets returned as [`None`{.docutils .literal
    .notranslate}]{.pre} in a JSON-RPC error response
    ([#3054](https://github.com/ethereum/web3.py/issues/3054){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3054\]]{.link-target})

-   Fixed default windows IPC provider path to work with python 3.11
    ([#3058](https://github.com/ethereum/web3.py/issues/3058){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3058\]]{.link-target})

-   Fix return type for [`rpc_gas_price_strategy`{.docutils .literal
    .notranslate}]{.pre} to [`int`{.docutils .literal
    .notranslate}]{.pre} but also only convert the
    [`strategy_based_gas_price`{.docutils .literal .notranslate}]{.pre}
    to [`hex`{.docutils .literal .notranslate}]{.pre} if it is an
    [`int`{.docutils .literal .notranslate}]{.pre} in the
    [`gas_price_strategy_middleware`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3065](https://github.com/ethereum/web3.py/issues/3065){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3065\]]{.link-target})
:::

::: {#release_notes.xhtml#id147 .section}
### Improved Documentation

-   Add note to Release Notes about v5 end-of-life and v6.6.0 yank
    ([#3045](https://github.com/ethereum/web3.py/issues/3045){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3045\]]{.link-target})

-   Add documentation for [`WebsocketProviderV2`{.docutils .literal
    .notranslate}]{.pre} (beta).
    ([#3048](https://github.com/ethereum/web3.py/issues/3048){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3048\]]{.link-target})
:::

::: {#release_notes.xhtml#id148 .section}
### Features

-   Add ENSIP-9 (Multichain Address Resolution) support for
    [`address()`{.docutils .literal .notranslate}]{.pre} and
    [`setup_address()`{.docutils .literal .notranslate}]{.pre} for
    [`ENS`{.docutils .literal .notranslate}]{.pre} and
    [`AsyncENS`{.docutils .literal .notranslate}]{.pre} classes.
    ([#3030](https://github.com/ethereum/web3.py/issues/3030){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3030\]]{.link-target})

-   Support for [`eth_subscribe`{.docutils .literal .notranslate}]{.pre}
    and [`eth_unsubscribe`{.docutils .literal .notranslate}]{.pre}
    methods has been added with the introduction of a new websocket
    provider, [`WebsocketProviderV2`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3048](https://github.com/ethereum/web3.py/issues/3048){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3048\]]{.link-target})
:::

::: {#release_notes.xhtml#id149 .section}
### Internal Changes - for web3.py Contributors

-   Added recursive typing to [`ABIFunctionComponents`{.docutils
    .literal .notranslate}]{.pre} type
    ([#3063](https://github.com/ethereum/web3.py/issues/3063){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3063\]]{.link-target})

-   Upgrade eth-tester requirement to v0.9.0-b.1
    ([#3064](https://github.com/ethereum/web3.py/issues/3064){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3064\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-6-1-2023-07-12 .section}
## web3.py v6.6.1 (2023-07-12)

::: {#release_notes.xhtml#id150 .section}
### Bugfixes

-   Add [`ens/specs`{.docutils .literal .notranslate}]{.pre} to
    MANIFEST.in
    ([#3039](https://github.com/ethereum/web3.py/issues/3039){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3039\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-6-0-2023-07-12 .section}
## web3.py v6.6.0 (2023-07-12)

**Note: This release was missing the required \`\`ens/specs\`\`
directory, so it was yanked from Pypi in favor of v6.6.1**

::: {#release_notes.xhtml#id151 .section}
### Breaking Changes

-   ENS name normalization now uses ENSIP-15 by default. This is
    technically a breaking change introduced by ENS but, according to
    ENSIP-15, 99% of existing names should be unaffected.
    ([#3024](https://github.com/ethereum/web3.py/issues/3024){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3024\]]{.link-target})
:::

::: {#release_notes.xhtml#id152 .section}
### Bugfixes

-   Handle [`None`{.docutils .literal .notranslate}]{.pre} in the
    formatting middleware
    ([#2546](https://github.com/ethereum/web3.py/issues/2546){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2546\]]{.link-target})

-   Fix for a possible bug in
    [`construct_sign_and_send_raw_middleware`{.docutils .literal
    .notranslate}]{.pre} where the signed transaction was sent as bytes
    and expected to be converted to hex by formatting later on. It is
    now explicitly sent as the hex string hash within the middleware.
    ([#2936](https://github.com/ethereum/web3.py/issues/2936){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2936\]]{.link-target})

-   Fixes [`max_priority_fee_per_gas`{.docutils .literal
    .notranslate}]{.pre}. It wasn't falling back to
    [`eth_feeHistory`{.docutils .literal .notranslate}]{.pre} since the
    [`MethodUnavailable`{.docutils .literal .notranslate}]{.pre} error
    was introduced.
    ([#3002](https://github.com/ethereum/web3.py/issues/3002){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3002\]]{.link-target})

-   Properly initialize logger in [`AsyncHTTPProvider`{.docutils
    .literal .notranslate}]{.pre}.
    ([#3026](https://github.com/ethereum/web3.py/issues/3026){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3026\]]{.link-target})

-   Fix [`AsyncWeb3.solidity_keccak`{.docutils .literal
    .notranslate}]{.pre} to match [`Web3.solidity_keccak`{.docutils
    .literal .notranslate}]{.pre}.
    ([#3034](https://github.com/ethereum/web3.py/issues/3034){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3034\]]{.link-target})
:::

::: {#release_notes.xhtml#id153 .section}
### Improved Documentation

-   Replaced transaction examples with unused account addresses.
    ([#2011](https://github.com/ethereum/web3.py/issues/2011){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2011\]]{.link-target})

-   Removed obsolete docs for camelCase miner methods and
    [`deploy`{.docutils .literal .notranslate}]{.pre}
    ([#2039](https://github.com/ethereum/web3.py/issues/2039){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2039\]]{.link-target})

-   Update documentation relating to ENS only being available on
    mainnet. ENS is available on all networks where the ENS contracts
    are deployed.
    ([#3012](https://github.com/ethereum/web3.py/issues/3012){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3012\]]{.link-target})

-   Add first steps section and tidy up learning resources
    ([#3013](https://github.com/ethereum/web3.py/issues/3013){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3013\]]{.link-target})

-   Replace references to [`jasoncarver.eth`{.docutils .literal
    .notranslate}]{.pre} with [`ens.eth`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3020](https://github.com/ethereum/web3.py/issues/3020){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3020\]]{.link-target})

-   Adds "Hackathon Helpers" section to Resources page
    ([#3035](https://github.com/ethereum/web3.py/issues/3035){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3035\]]{.link-target})
:::

::: {#release_notes.xhtml#id154 .section}
### Features

-   Update ENS Resolver ABI
    ([#1839](https://github.com/ethereum/web3.py/issues/1839){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1839\]]{.link-target})

-   [`async_http_retry_request_middleware`{.docutils .literal
    .notranslate}]{.pre}, an async http request retry middleware for
    [`AsyncHTTPProvider`{.docutils .literal .notranslate}]{.pre}.
    ([#3009](https://github.com/ethereum/web3.py/issues/3009){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3009\]]{.link-target})

-   Add [`eth_getStorageAt()`{.docutils .literal .notranslate}]{.pre}
    support for [`EthereumTesterProvider`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3011](https://github.com/ethereum/web3.py/issues/3011){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3011\]]{.link-target})

-   Add async support for ENS name-to-address resolution via
    [`async_name_to_address_middleware`{.docutils .literal
    .notranslate}]{.pre}.
    ([#3012](https://github.com/ethereum/web3.py/issues/3012){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3012\]]{.link-target})

-   Add async support for the sign-and-send raw transaction middleware
    via [`construct_async_sign_and_send_raw_middleware()`{.docutils
    .literal .notranslate}]{.pre}.
    ([#3025](https://github.com/ethereum/web3.py/issues/3025){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3025\]]{.link-target})
:::

::: {#release_notes.xhtml#id155 .section}
### Internal Changes - for web3.py Contributors

-   Remove some warnings from test output
    ([#2991](https://github.com/ethereum/web3.py/issues/2991){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2991\]]{.link-target})

-   Introduced the logic for ENSIP-15 ENS name normalization. Originally
    this was done via a flag in this PR but changed to the default
    behavior in #3024 before release.
    ([#3000](https://github.com/ethereum/web3.py/issues/3000){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3000\]]{.link-target})
:::

::: {#release_notes.xhtml#id156 .section}
### Miscellaneous Changes

-   [#2997](https://github.com/ethereum/web3.py/issues/2997){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2997\]]{.link-target},
    [#3011](https://github.com/ethereum/web3.py/issues/3011){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3011\]]{.link-target},
    [#3023](https://github.com/ethereum/web3.py/issues/3023){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3023\]]{.link-target},
    [#3037](https://github.com/ethereum/web3.py/issues/3037){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/3037\]]{.link-target}
:::

::: {#release_notes.xhtml#id157 .section}
### Removals

-   Removed references to deprecated middlewares with new tests to check
    default middlewares
    ([#2972](https://github.com/ethereum/web3.py/issues/2972){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2972\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-py-v6-5-0-2023-06-15 .section}
## web3.py v6.5.0 (2023-06-15)

::: {#release_notes.xhtml#id158 .section}
### Bugfixes

-   Properly create a fresh cache for each instance of
    [`simple_cache_middleware`{.docutils .literal .notranslate}]{.pre}
    if no cache is provided. Fixes a bug when using this middleware with
    multiple instances of [`Web3`{.docutils .literal
    .notranslate}]{.pre}.
    ([#2979](https://github.com/ethereum/web3.py/issues/2979){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2979\]]{.link-target})

-   Fix potential race condition when writing cache entries in
    [`simple_cache_middleware`{.docutils .literal .notranslate}]{.pre}
    ([#2981](https://github.com/ethereum/web3.py/issues/2981){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2981\]]{.link-target})

-   Catch [`UnicodeDecodeError`{.docutils .literal .notranslate}]{.pre}
    for contract revert messages that cannot be decoded and issue a
    warning instead, raising a [`ContractLogicError`{.docutils .literal
    .notranslate}]{.pre} with the raw [`data`{.docutils .literal
    .notranslate}]{.pre} from the response.
    ([#2989](https://github.com/ethereum/web3.py/issues/2989){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2989\]]{.link-target})
:::

::: {#release_notes.xhtml#id159 .section}
### Improved Documentation

-   Introduces resources page to documentation
    ([#2957](https://github.com/ethereum/web3.py/issues/2957){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2957\]]{.link-target})

-   Completed docstrings for [`ContractFunction`{.docutils .literal
    .notranslate}]{.pre} and [`AsyncContractFunction`{.docutils .literal
    .notranslate}]{.pre} classes
    ([#2960](https://github.com/ethereum/web3.py/issues/2960){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2960\]]{.link-target})

-   Added 'unsupported by any current clients' note to the
    [`Eth.sign_typed_data`{.docutils .literal .notranslate}]{.pre} docs
    ([#2961](https://github.com/ethereum/web3.py/issues/2961){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2961\]]{.link-target})

-   Removed list of [`AsyncHTTPProvider`{.docutils .literal
    .notranslate}]{.pre}-supported methods, it supports them all now
    ([#2962](https://github.com/ethereum/web3.py/issues/2962){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2962\]]{.link-target})

-   Modernize the filtering guide, emphasizing [`get_logs`{.docutils
    .literal .notranslate}]{.pre}
    ([#2968](https://github.com/ethereum/web3.py/issues/2968){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2968\]]{.link-target})

-   Removed references to defunct providers in [`IPCProvider`{.docutils
    .literal .notranslate}]{.pre} docs
    ([#2971](https://github.com/ethereum/web3.py/issues/2971){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2971\]]{.link-target})

-   Update Matomo analytics script to move to cloud services
    ([#2978](https://github.com/ethereum/web3.py/issues/2978){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2978\]]{.link-target})
:::

::: {#release_notes.xhtml#id160 .section}
### Features

-   Add the [`sign_typed_data`{.docutils .literal .notranslate}]{.pre}
    method to the [`AsyncEth`{.docutils .literal .notranslate}]{.pre}
    class
    ([#2920](https://github.com/ethereum/web3.py/issues/2920){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2920\]]{.link-target})

-   Add support for Solidity [`Panic`{.docutils .literal
    .notranslate}]{.pre} errors, available since Solidity 0.8.0. Raises
    [`ContractPanicError`{.docutils .literal .notranslate}]{.pre} with
    appropriate messaging based on the known panic error codes.
    ([#2986](https://github.com/ethereum/web3.py/issues/2986){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2986\]]{.link-target})
:::

::: {#release_notes.xhtml#id161 .section}
### Internal Changes - for web3.py Contributors

-   [`lint-roll`{.docutils .literal .notranslate}]{.pre} - dropped
    [`isort`{.docutils .literal .notranslate}]{.pre}
    [`--recursive`{.docutils .literal .notranslate}]{.pre} flag, not
    needed as of their [`v5`{.docutils .literal .notranslate}]{.pre},
    added black
    ([#2930](https://github.com/ethereum/web3.py/issues/2930){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2930\]]{.link-target})

-   Moved [`ethpm`{.docutils .literal .notranslate}]{.pre} deprecation
    warning to only show when the module is explicitly enabled
    ([#2983](https://github.com/ethereum/web3.py/issues/2983){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2983\]]{.link-target})

-   Update make release to check remote upstream is pointing to
    ethereum/web3.py.
    ([#2988](https://github.com/ethereum/web3.py/issues/2988){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2988\]]{.link-target})

-   Removed `<cite>`{=html}pluggy`</cite>`{=html} from dev requirements
    ([#2992](https://github.com/ethereum/web3.py/issues/2992){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2992\]]{.link-target})
:::

::: {#release_notes.xhtml#id162 .section}
### Miscellaneous Changes

-   [#2960](https://github.com/ethereum/web3.py/issues/2960){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2960\]]{.link-target},
    [#2965](https://github.com/ethereum/web3.py/issues/2965){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2965\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#web3-py-v6-4-0-2023-05-15 .section}
## web3.py v6.4.0 (2023-05-15)

::: {#release_notes.xhtml#id163 .section}
### Bugfixes

-   fix AttributeDicts unhashable if they contain lists recursively
    tupleizing them
    ([#2908](https://github.com/ethereum/web3.py/issues/2908){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2908\]]{.link-target})
:::

::: {#release_notes.xhtml#id164 .section}
### Deprecations

-   add deprecation notice for the `<cite>`{=html}ethPM`</cite>`{=html}
    module
    ([#2953](https://github.com/ethereum/web3.py/issues/2953){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2953\]]{.link-target})
:::

::: {#release_notes.xhtml#id165 .section}
### Improved Documentation

-   remove reference to the ability to specify a list of providers - you
    can't anymore
    ([#2949](https://github.com/ethereum/web3.py/issues/2949){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2949\]]{.link-target})

-   add deprecation notice for the `<cite>`{=html}ethPM`</cite>`{=html}
    module
    ([#2953](https://github.com/ethereum/web3.py/issues/2953){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2953\]]{.link-target})
:::

::: {#release_notes.xhtml#id166 .section}
### Features

-   Update [`eth-tester`{.docutils .literal .notranslate}]{.pre} to pull
    in Shanghai changes and make additional changes to fully support
    Shanghai with [`eth-tester`{.docutils .literal .notranslate}]{.pre}.
    ([#2958](https://github.com/ethereum/web3.py/issues/2958){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2958\]]{.link-target})
:::

::: {#release_notes.xhtml#id167 .section}
### Internal Changes - for web3.py Contributors

-   bump sphinx and readthedocs py versions
    ([#2945](https://github.com/ethereum/web3.py/issues/2945){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2945\]]{.link-target})

-   re-compile test contracts with Solidity [`v0.8.20`{.docutils
    .literal .notranslate}]{.pre}
    ([#2951](https://github.com/ethereum/web3.py/issues/2951){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2951\]]{.link-target})

-   Set towncrier settings in
    `<cite>`{=html}pyproject.toml`</cite>`{=html} to match the python
    project template and change newfragment type "doc" to "docs"
    ([#2959](https://github.com/ethereum/web3.py/issues/2959){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2959\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v6-3-0-2023-05-03 .section}
## v6.3.0 (2023-05-03)

::: {#release_notes.xhtml#id168 .section}
### Features

-   Add support for custom revert errors
    ([#2795](https://github.com/ethereum/web3.py/issues/2795){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2795\]]{.link-target})

-   Add the [`modify_transaction`{.docutils .literal
    .notranslate}]{.pre} method to the [`AsyncEth`{.docutils .literal
    .notranslate}]{.pre} class
    ([#2825](https://github.com/ethereum/web3.py/issues/2825){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2825\]]{.link-target})

-   add show_traceback flag to is_connected to allow user to see
    connection error reason
    ([#2912](https://github.com/ethereum/web3.py/issues/2912){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2912\]]{.link-target})

-   Add a [`data`{.docutils .literal .notranslate}]{.pre} attribute on
    the [`ContractLogicError`{.docutils .literal .notranslate}]{.pre}
    class that returns raw data returned by the node.
    ([#2922](https://github.com/ethereum/web3.py/issues/2922){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2922\]]{.link-target})

-   Add support via result formatters for [`reward`{.docutils .literal
    .notranslate}]{.pre} type trace actions on tracing calls.
    ([#2929](https://github.com/ethereum/web3.py/issues/2929){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2929\]]{.link-target})
:::

::: {#release_notes.xhtml#id169 .section}
### Bugfixes

-   Typing was being ignored for the [`get_ipc_path`{.docutils .literal
    .notranslate}]{.pre} and [`get_dev_ipc_path`{.docutils .literal
    .notranslate}]{.pre} functions because of a missing
    [`None`{.docutils .literal .notranslate}]{.pre} return. Those two
    methods now explicitly return [`None`{.docutils .literal
    .notranslate}]{.pre} and have an [`Optional`{.docutils .literal
    .notranslate}]{.pre} in their type definition.
    ([#2917](https://github.com/ethereum/web3.py/issues/2917){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2917\]]{.link-target})

-   fix AsyncEventFilterBuilder looking for Web3 instead of AsyncWeb3
    ([#2931](https://github.com/ethereum/web3.py/issues/2931){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2931\]]{.link-target})

-   Add check for null withdrawal field on get_block response
    ([#2941](https://github.com/ethereum/web3.py/issues/2941){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2941\]]{.link-target})
:::

::: {#release_notes.xhtml#id170 .section}
### Improved Documentation

-   Add a decision tree guide for sending transactions
    ([#2919](https://github.com/ethereum/web3.py/issues/2919){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2919\]]{.link-target})

-   Update references to master branch
    ([#2933](https://github.com/ethereum/web3.py/issues/2933){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2933\]]{.link-target})

-   Cleanup Quickstart guide and next steps
    ([#2935](https://github.com/ethereum/web3.py/issues/2935){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2935\]]{.link-target})

-   Cleanup Overview page links and context
    ([#2938](https://github.com/ethereum/web3.py/issues/2938){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2938\]]{.link-target})
:::

::: {#release_notes.xhtml#id171 .section}
### Internal Changes - for web3.py Contributors

-   Added [`build`{.docutils .literal .notranslate}]{.pre} to towncrier
    commands in Makefile
    ([#2915](https://github.com/ethereum/web3.py/issues/2915){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2915\]]{.link-target})

-   Update win wheel CI builds to use [`python`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`-m`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`tox`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`-r`{.docutils .literal .notranslate}]{.pre} instead
    of specifying the [`tox`{.docutils .literal .notranslate}]{.pre}
    executable directly.
    ([#2923](https://github.com/ethereum/web3.py/issues/2923){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2923\]]{.link-target})

-   update pip and tox install on CI containers
    ([#2927](https://github.com/ethereum/web3.py/issues/2927){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2927\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v6-2-0-2023-04-12 .section}
## v6.2.0 (2023-04-12)

::: {#release_notes.xhtml#id172 .section}
### Features

-   Adds async version of
    `<cite>`{=html}eth_getUncleCount`</cite>`{=html} methods
    ([#2822](https://github.com/ethereum/web3.py/issues/2822){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2822\]]{.link-target})

-   Add the [`sign_transaction`{.docutils .literal .notranslate}]{.pre}
    method to the [`AsyncEth`{.docutils .literal .notranslate}]{.pre}
    class
    ([#2827](https://github.com/ethereum/web3.py/issues/2827){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2827\]]{.link-target})

-   Add the [`replace_transaction`{.docutils .literal
    .notranslate}]{.pre} method to the [`AsyncEth`{.docutils .literal
    .notranslate}]{.pre} class
    ([#2847](https://github.com/ethereum/web3.py/issues/2847){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2847\]]{.link-target})
:::

::: {#release_notes.xhtml#id173 .section}
### Bugfixes

-   Use [`TraceFilterParams`{.docutils .literal .notranslate}]{.pre}
    instead of [`FilterParams`{.docutils .literal .notranslate}]{.pre}
    for [`trace_filter`{.docutils .literal .notranslate}]{.pre} typing
    ([#2913](https://github.com/ethereum/web3.py/issues/2913){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2913\]]{.link-target})
:::

::: {#release_notes.xhtml#id174 .section}
### Improved Documentation

-   Add welcome banner for Ethereum newcomers
    ([#2905](https://github.com/ethereum/web3.py/issues/2905){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2905\]]{.link-target})

-   Added breaking changes from pr2448 to v6 migration guide
    ([#2907](https://github.com/ethereum/web3.py/issues/2907){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2907\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v6-1-0-2023-04-05 .section}
## v6.1.0 (2023-04-05)

::: {#release_notes.xhtml#id175 .section}
### Features

-   Add tracing functionality back in via the [`tracing`{.docutils
    .literal .notranslate}]{.pre} module, add formatters for
    human-readable input and output, and attach this module to
    [`Web3`{.docutils .literal .notranslate}]{.pre} on init / make it a
    default module.
    ([#2851](https://github.com/ethereum/web3.py/issues/2851){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2851\]]{.link-target})

-   Add result formatters for [`withdrawals_root`{.docutils .literal
    .notranslate}]{.pre} and [`withdrawals`{.docutils .literal
    .notranslate}]{.pre} as part of [`Shanghai`{.docutils .literal
    .notranslate}]{.pre} hard fork support.
    ([#2868](https://github.com/ethereum/web3.py/issues/2868){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2868\]]{.link-target})

-   add eth_chainId to exception_retry_middleware whitelist
    ([#2892](https://github.com/ethereum/web3.py/issues/2892){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2892\]]{.link-target})
:::

::: {#release_notes.xhtml#id176 .section}
### Bugfixes

-   Mark `<cite>`{=html}test_async_eth_sign`</cite>`{=html} with
    `<cite>`{=html}\@pytest.mark.asyncio`</cite>`{=html}
    ([#2858](https://github.com/ethereum/web3.py/issues/2858){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2858\]]{.link-target})

-   fix readthedocs broken version selector
    ([#2883](https://github.com/ethereum/web3.py/issues/2883){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2883\]]{.link-target})
:::

::: {#release_notes.xhtml#id177 .section}
### Improved Documentation

-   remove camelCased method deprecation notices from web3.eth docs
    ([#2882](https://github.com/ethereum/web3.py/issues/2882){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2882\]]{.link-target})

-   Add doc blurb about multiple HTTPProviders with the same URL
    ([#2889](https://github.com/ethereum/web3.py/issues/2889){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2889\]]{.link-target})

-   fix styling and external link formatting
    ([#2897](https://github.com/ethereum/web3.py/issues/2897){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2897\]]{.link-target})
:::

::: {#release_notes.xhtml#id178 .section}
### Internal Changes - for web3.py Contributors

-   Bump pytest from 6.2.5 to 7+ because of CI
    [`DeprecationWarning`{.docutils .literal .notranslate}]{.pre}
    ([#2863](https://github.com/ethereum/web3.py/issues/2863){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2863\]]{.link-target})

-   Require eth-abi v4 stable
    ([#2886](https://github.com/ethereum/web3.py/issues/2886){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2886\]]{.link-target})

-   remove unused docs dependencies and bump version of remaining
    ([#2890](https://github.com/ethereum/web3.py/issues/2890){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2890\]]{.link-target})

-   Update go-ethereum integration test fixture to use the latest
    version of geth - [`v1.11.5`{.docutils .literal
    .notranslate}]{.pre}.
    ([#2896](https://github.com/ethereum/web3.py/issues/2896){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2896\]]{.link-target})

-   Update [`geth_steps`{.docutils .literal .notranslate}]{.pre} in
    CircleCI builds to pip install the proper version of
    [`py-geth`{.docutils .literal .notranslate}]{.pre}.
    ([#2898](https://github.com/ethereum/web3.py/issues/2898){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2898\]]{.link-target})

-   Update CircleCI windows orb path since it now uses python 3.11.
    ([#2899](https://github.com/ethereum/web3.py/issues/2899){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2899\]]{.link-target})

-   Bump go version used in CI jobs that install and run go-ethereum and
    parameterize the version in circleci config file for ease of
    configuration.
    ([#2900](https://github.com/ethereum/web3.py/issues/2900){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2900\]]{.link-target})
:::

::: {#release_notes.xhtml#id179 .section}
### Miscellaneous changes

-   [#2887](https://github.com/ethereum/web3.py/issues/2887){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2887\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v6-0-0-2023-03-14 .section}
## v6.0.0 (2023-03-14)

::: {#release_notes.xhtml#id180 .section}
### Bugfixes

-   fix dict_to_namedtuple unable to handle empty dict as input
    ([#2867](https://github.com/ethereum/web3.py/issues/2867){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2867\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v6-0-0-beta-11-2023-02-24 .section}
## v6.0.0-beta.11 (2023-02-24)

::: {#release_notes.xhtml#id181 .section}
### Features

-   Add the [`sign`{.docutils .literal .notranslate}]{.pre} method to
    the [`AsyncEth`{.docutils .literal .notranslate}]{.pre} class
    ([#2833](https://github.com/ethereum/web3.py/issues/2833){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2833\]]{.link-target})
:::

::: {#release_notes.xhtml#id182 .section}
### Bugfixes

-   More accurately define the [`eth_call`{.docutils .literal
    .notranslate}]{.pre} return type as [`HexBytes`{.docutils .literal
    .notranslate}]{.pre} since the response is converted to
    [`HexBytes`{.docutils .literal .notranslate}]{.pre} in the pythonic
    formatters and there are differences between [`HexBytes`{.docutils
    .literal .notranslate}]{.pre} and [`bytes`{.docutils .literal
    .notranslate}]{.pre} types.
    ([#2842](https://github.com/ethereum/web3.py/issues/2842){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2842\]]{.link-target})

-   Set default block_identifier in ContractFunction.call() to None
    ([#2846](https://github.com/ethereum/web3.py/issues/2846){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2846\]]{.link-target})
:::

::: {#release_notes.xhtml#id183 .section}
### Improved Documentation

-   Remove unused module lines to instantiate the AsyncHTTPProvider
    ([#2789](https://github.com/ethereum/web3.py/issues/2789){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2789\]]{.link-target})

-   Typos fix in docs
    ([#2817](https://github.com/ethereum/web3.py/issues/2817){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2817\]]{.link-target})

-   Add/cleanup docs for the [`AsyncHTTPProvider`{.docutils .literal
    .notranslate}]{.pre} in light of the new [`AsyncWeb3`{.docutils
    .literal .notranslate}]{.pre} class
    ([#2821](https://github.com/ethereum/web3.py/issues/2821){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2821\]]{.link-target})

-   Remove user survey banner following close of survey
    ([#2831](https://github.com/ethereum/web3.py/issues/2831){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2831\]]{.link-target})
:::

::: {#release_notes.xhtml#id184 .section}
### Internal Changes - for web3.py Contributors

-   Do not invoke [`setup.py`{.docutils .literal .notranslate}]{.pre}
    directly; use [`python`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`-m`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`build`{.docutils .literal .notranslate}]{.pre} where
    appropriate.
    ([#2714](https://github.com/ethereum/web3.py/issues/2714){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2714\]]{.link-target})

-   clean up ignored unused imports
    ([#2838](https://github.com/ethereum/web3.py/issues/2838){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2838\]]{.link-target})

-   Recompile test contracts with the new Solidity version
    [`0.8.19`{.docutils .literal .notranslate}]{.pre}.
    ([#2840](https://github.com/ethereum/web3.py/issues/2840){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2840\]]{.link-target})

-   Update [`py-geth`{.docutils .literal .notranslate}]{.pre} version
    and re-generate integration test fixture with geth
    [`v1.11.2`{.docutils .literal .notranslate}]{.pre}.
    ([#2841](https://github.com/ethereum/web3.py/issues/2841){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2841\]]{.link-target})
:::

::: {#release_notes.xhtml#id185 .section}
### Breaking changes

-   Use [`AsyncWeb3`{.docutils .literal .notranslate}]{.pre} class and
    preserve typing for the async api calls.
    ([#2819](https://github.com/ethereum/web3.py/issues/2819){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2819\]]{.link-target})

-   Fix typing for [`CallOverrideParams`{.docutils .literal
    .notranslate}]{.pre} and add proper request formatters for call
    state overrides.
    ([#2843](https://github.com/ethereum/web3.py/issues/2843){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2843\]]{.link-target})

-   Remove python warning and doc notes related to unstable async
    providers.
    ([#2845](https://github.com/ethereum/web3.py/issues/2845){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2845\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v6-0-0-beta-10-2023-02-15 .section}
## v6.0.0-beta.10 (2023-02-15)

::: {#release_notes.xhtml#id186 .section}
### Features

-   add decode_tuples option to contract instantiation
    ([#2799](https://github.com/ethereum/web3.py/issues/2799){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2799\]]{.link-target})
:::

::: {#release_notes.xhtml#id187 .section}
### Bugfixes

-   Fix [`ethpm`{.docutils .literal .notranslate}]{.pre} import issues
    after making [`ipfshttpclient`{.docutils .literal
    .notranslate}]{.pre} optional.
    ([#2775](https://github.com/ethereum/web3.py/issues/2775){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2775\]]{.link-target})

-   Fix for recently-broken [`eth-tester`{.docutils .literal
    .notranslate}]{.pre} exception message parsing for some exception
    cases.
    ([#2783](https://github.com/ethereum/web3.py/issues/2783){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2783\]]{.link-target})
:::

::: {#release_notes.xhtml#id188 .section}
### Improved Documentation

-   Added a v6 Migraion Guide
    ([#2778](https://github.com/ethereum/web3.py/issues/2778){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2778\]]{.link-target})

-   Rebrand the library to lowercase "web3.py"
    ([#2804](https://github.com/ethereum/web3.py/issues/2804){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2804\]]{.link-target})

-   remove references to Rinkeby or replace with Goerli
    ([#2815](https://github.com/ethereum/web3.py/issues/2815){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2815\]]{.link-target})
:::

::: {#release_notes.xhtml#id189 .section}
### Internal Changes - for web3.py Contributors

-   Organize the [`eth`{.docutils .literal .notranslate}]{.pre} module
    into separate files for better readability.
    ([#2753](https://github.com/ethereum/web3.py/issues/2753){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2753\]]{.link-target})

-   Rename the newly-split [`eth`{.docutils .literal
    .notranslate}]{.pre} module files to match convention.
    ([#2772](https://github.com/ethereum/web3.py/issues/2772){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2772\]]{.link-target})

-   Re-compile all test contracts with latest Solidity version. Refactor
    test fixtures. Adds a script that compiles all test contracts to the
    same directory with selected Solidity version.
    ([#2797](https://github.com/ethereum/web3.py/issues/2797){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2797\]]{.link-target})

-   Updates to [`isort`{.docutils .literal .notranslate}]{.pre} and
    [`black`{.docutils .literal .notranslate}]{.pre} required some
    formatting changes and isort config refactoring.
    ([#2802](https://github.com/ethereum/web3.py/issues/2802){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2802\]]{.link-target})

-   Compile test contracts using newly-released Solidity version
    [`0.8.18`{.docutils .literal .notranslate}]{.pre}.
    ([#2803](https://github.com/ethereum/web3.py/issues/2803){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2803\]]{.link-target})
:::

::: {#release_notes.xhtml#id190 .section}
### Breaking changes

-   All exceptions inherit from a custom class. EthPM exceptions inherit
    from EthPMException, ENS exceptions inherit from ENSException, and
    all other web3.py exceptions inherit from Web3Exception
    ([#1478](https://github.com/ethereum/web3.py/issues/1478){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1478\]]{.link-target})

-   Reorganized contract to contract.py, async_contract.py,
    base_contract.py and utils.py. In this change there was a small
    breaking change where the constructor of BaseContractCaller
    contract_function_class was defaulting to a ContractFunction now
    there is no default. This was done to separate the base class from
    the implementation.
    ([#2567](https://github.com/ethereum/web3.py/issues/2567){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2567\]]{.link-target})

-   When calling a contract, use [`w3.eth.default_block`{.docutils
    .literal .notranslate}]{.pre} if no block_identifier is specified
    instead of [`latest`{.docutils .literal .notranslate}]{.pre}.
    ([#2777](https://github.com/ethereum/web3.py/issues/2777){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2777\]]{.link-target})

-   Strict bytes type checking is now default for [`web3.py`{.docutils
    .literal .notranslate}]{.pre}. This change also adds a boolean flag
    on the [`Web3`{.docutils .literal .notranslate}]{.pre} class for
    turning this feature on and off, as well as a flag on the
    [`ENS`{.docutils .literal .notranslate}]{.pre} class for control
    over a standalone [`ENS`{.docutils .literal .notranslate}]{.pre}
    instance.
    ([#2788](https://github.com/ethereum/web3.py/issues/2788){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2788\]]{.link-target})

-   When a method is not supported by a node provider, raise a
    MethodUnavailable error instead of the generic ValueError.
    ([#2796](https://github.com/ethereum/web3.py/issues/2796){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2796\]]{.link-target})

-   [`dict`{.docutils .literal .notranslate}]{.pre} to
    [`AttributeDict`{.docutils .literal .notranslate}]{.pre} conversion
    is no longer a default result formatter. This conversion is now done
    via a default middleware that may be removed.
    ([#2805](https://github.com/ethereum/web3.py/issues/2805){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2805\]]{.link-target})

-   Removed deprecated [`manager.request_async`{.docutils .literal
    .notranslate}]{.pre} and associated methods.
    ([#2810](https://github.com/ethereum/web3.py/issues/2810){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2810\]]{.link-target})

-   removed Rinkeby from list of allowed chains in EthPM
    ([#2815](https://github.com/ethereum/web3.py/issues/2815){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2815\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v6-0-0-beta-9-2023-01-03 .section}
## v6.0.0-beta.9 (2023-01-03)

::: {#release_notes.xhtml#id191 .section}
### Features

-   Add async [`w3.eth.get_block_transaction_count`{.docutils .literal
    .notranslate}]{.pre}
    ([#2687](https://github.com/ethereum/web3.py/issues/2687){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2687\]]{.link-target})

-   Support Python 3.11
    ([#2699](https://github.com/ethereum/web3.py/issues/2699){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2699\]]{.link-target})

-   Load the [`AsyncHTTPProvider`{.docutils .literal
    .notranslate}]{.pre} with default async middleware and default async
    modules, just as the [`HTTPProvider`{.docutils .literal
    .notranslate}]{.pre}.
    ([#2736](https://github.com/ethereum/web3.py/issues/2736){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2736\]]{.link-target})

-   Add support for Nethermind/Gnosis revert reason formatting
    ([#2739](https://github.com/ethereum/web3.py/issues/2739){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2739\]]{.link-target})

-   Added async functionality to filter
    ([#2744](https://github.com/ethereum/web3.py/issues/2744){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2744\]]{.link-target})

-   Get contract address from [`CREATE`{.docutils .literal
    .notranslate}]{.pre} and [`CREATE2`{.docutils .literal
    .notranslate}]{.pre} opcodes
    ([#2762](https://github.com/ethereum/web3.py/issues/2762){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2762\]]{.link-target})
:::

::: {#release_notes.xhtml#id192 .section}
### Bugfixes

-   Fixing abi encoding for multidimensional arrays.
    ([#2764](https://github.com/ethereum/web3.py/issues/2764){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2764\]]{.link-target})
:::

::: {#release_notes.xhtml#id193 .section}
### Performance improvements

-   Some minor performance improvements to the [`SimpleCache`{.docutils
    .literal .notranslate}]{.pre} class and simple cache middlewares
    (sync and async).
    ([#2719](https://github.com/ethereum/web3.py/issues/2719){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2719\]]{.link-target})

-   Remove unnecessary [`await`{.docutils .literal .notranslate}]{.pre}
    for [`generate_gas_price()`{.docutils .literal .notranslate}]{.pre}
    method as it does not need to be awaited. Move this method to
    [`BaseEth`{.docutils .literal .notranslate}]{.pre} to be used
    directly by both [`Eth`{.docutils .literal .notranslate}]{.pre} and
    [`AsyncEth`{.docutils .literal .notranslate}]{.pre} modules.
    ([#2735](https://github.com/ethereum/web3.py/issues/2735){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2735\]]{.link-target})
:::

::: {#release_notes.xhtml#id194 .section}
### Improved Documentation

-   Add user survey to docs banner
    ([#2720](https://github.com/ethereum/web3.py/issues/2720){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2720\]]{.link-target})

-   Document improvements for private key info and account funding.
    ([#2722](https://github.com/ethereum/web3.py/issues/2722){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2722\]]{.link-target})

-   Include eth-tester install note in quickstart
    ([#2755](https://github.com/ethereum/web3.py/issues/2755){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2755\]]{.link-target})
:::

::: {#release_notes.xhtml#deprecations-and-removals .section}
### Deprecations and Removals

-   Removal of Infura auto provider support.
    ([#2706](https://github.com/ethereum/web3.py/issues/2706){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2706\]]{.link-target})

-   Removal of [`version`{.docutils .literal .notranslate}]{.pre}
    module.
    ([#2729](https://github.com/ethereum/web3.py/issues/2729){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2729\]]{.link-target})

-   Remove already-deprecated [`start_rpc`{.docutils .literal
    .notranslate}]{.pre} and [`stop_rpc`{.docutils .literal
    .notranslate}]{.pre} from the [`w3.geth.admin`{.docutils .literal
    .notranslate}]{.pre} module.
    ([#2731](https://github.com/ethereum/web3.py/issues/2731){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2731\]]{.link-target})
:::

::: {#release_notes.xhtml#id195 .section}
### Internal Changes - for web3.py Contributors

-   Use regex pattern for [`black`{.docutils .literal
    .notranslate}]{.pre} command for [`tox`{.docutils .literal
    .notranslate}]{.pre} / [`make`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`lint`{.docutils .literal .notranslate}]{.pre} linting
    commands.
    ([#2727](https://github.com/ethereum/web3.py/issues/2727){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2727\]]{.link-target})

-   Use regex pattern for [`mypy`{.docutils .literal
    .notranslate}]{.pre} command for [`tox`{.docutils .literal
    .notranslate}]{.pre} / [`make`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`lint`{.docutils .literal .notranslate}]{.pre} linting
    commands.
    ([#2734](https://github.com/ethereum/web3.py/issues/2734){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2734\]]{.link-target})

-   Remove internal method [`apply_formatter_to_array`{.docutils
    .literal .notranslate}]{.pre} and use the method with the same name
    from the [`eth-utils`{.docutils .literal .notranslate}]{.pre}
    library.
    ([#2737](https://github.com/ethereum/web3.py/issues/2737){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2737\]]{.link-target})
:::

::: {#release_notes.xhtml#id196 .section}
### Miscellaneous changes

-   [#2751](https://github.com/ethereum/web3.py/issues/2751){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2751\]]{.link-target}
:::

::: {#release_notes.xhtml#id197 .section}
### Breaking changes

-   Snakecase the processReceipt, processLog, createFilter, and getLogs
    methods
    ([#2709](https://github.com/ethereum/web3.py/issues/2709){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2709\]]{.link-target})

-   Remove Parity module and references.
    ([#2718](https://github.com/ethereum/web3.py/issues/2718){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2718\]]{.link-target})

-   Make the [`ipfshttpclient`{.docutils .literal .notranslate}]{.pre}
    library opt-in via a web3 install extra. This only affects the
    [`ethpm`{.docutils .literal .notranslate}]{.pre} [`ipfs`{.docutils
    .literal .notranslate}]{.pre} backends, which rely on the library.
    ([#2730](https://github.com/ethereum/web3.py/issues/2730){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2730\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v6-0-0-beta-8-2022-11-14 .section}
## v6.0.0-beta.8 (2022-11-14)

::: {#release_notes.xhtml#id198 .section}
### Features

-   Async support for caching certain methods via
    [`async_simple_cache_middleware`{.docutils .literal
    .notranslate}]{.pre} as well as constructing custom async caching
    middleware via [`async_construct_simple_cache_middleware`{.docutils
    .literal .notranslate}]{.pre}. [`SimpleCache`{.docutils .literal
    .notranslate}]{.pre} class was also added to the public
    [`utils`{.docutils .literal .notranslate}]{.pre} module.
    ([#2579](https://github.com/ethereum/web3.py/issues/2579){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2579\]]{.link-target})

-   Remove upper pins on dependencies
    ([#2648](https://github.com/ethereum/web3.py/issues/2648){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2648\]]{.link-target})

-   Async support for beacon api.
    ([#2689](https://github.com/ethereum/web3.py/issues/2689){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2689\]]{.link-target})

-   If the loop for a cached async session is closed, or the session
    itself was closed, create a new session at that cache key and
    properly close and evict the stale session.
    ([#2713](https://github.com/ethereum/web3.py/issues/2713){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2713\]]{.link-target})
:::

::: {#release_notes.xhtml#id199 .section}
### Bugfixes

-   bump `<cite>`{=html}sphinx_rtd_theme`</cite>`{=html} version to fix
    missing unordered list bullets
    ([#2688](https://github.com/ethereum/web3.py/issues/2688){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2688\]]{.link-target})

-   Fix bug to generate unique cache keys when multi-threading & with
    unique event loops for async.
    ([#2690](https://github.com/ethereum/web3.py/issues/2690){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2690\]]{.link-target})

-   Properly release [`async_lock`{.docutils .literal
    .notranslate}]{.pre} for session requests if an exception is raised
    during a task.
    ([#2695](https://github.com/ethereum/web3.py/issues/2695){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2695\]]{.link-target})
:::

::: {#release_notes.xhtml#id200 .section}
### Internal Changes - for web3.py Contributors

-   move definition of RTD install requirements file from their
    dashboard into `<cite>`{=html}.readthedocs.yml`</cite>`{=html}, and
    remove unused `<cite>`{=html}sphinx-better-theme`</cite>`{=html}
    from requirements
    ([#2688](https://github.com/ethereum/web3.py/issues/2688){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2688\]]{.link-target})
:::

::: {#release_notes.xhtml#id201 .section}
### Miscellaneous changes

-   [#2690](https://github.com/ethereum/web3.py/issues/2690){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2690\]]{.link-target},
    [#2694](https://github.com/ethereum/web3.py/issues/2694){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2694\]]{.link-target}
:::

::: {#release_notes.xhtml#id202 .section}
### Breaking changes

-   Remove support for dictionary-based caches, for
    simple-cache-middleware, in favor of the internal
    [`SimpleCache`{.docutils .literal .notranslate}]{.pre} class.
    ([#2579](https://github.com/ethereum/web3.py/issues/2579){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2579\]]{.link-target})

-   Snakecase the clientVersion method
    ([#2686](https://github.com/ethereum/web3.py/issues/2686){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2686\]]{.link-target})

-   change instances of `<cite>`{=html}createFilter`</cite>`{=html} to
    `<cite>`{=html}create_filter`</cite>`{=html}
    ([#2692](https://github.com/ethereum/web3.py/issues/2692){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2692\]]{.link-target})

-   Remove [`SolidityError`{.docutils .literal .notranslate}]{.pre} in
    favor of [`ContractLogicError`{.docutils .literal
    .notranslate}]{.pre}
    ([#2697](https://github.com/ethereum/web3.py/issues/2697){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2697\]]{.link-target})

-   Snakecase the solidityKeccak method
    ([#2702](https://github.com/ethereum/web3.py/issues/2702){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2702\]]{.link-target})

-   Snakecase the fromWeb3 method
    ([#2703](https://github.com/ethereum/web3.py/issues/2703){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2703\]]{.link-target})

-   Snakecase the toBytes, toHex, toInt, toJSON, and toText methods
    ([#2707](https://github.com/ethereum/web3.py/issues/2707){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2707\]]{.link-target})

-   Snakecase the toAddress, isChecksumAddress, and toChecksumAddress
    methods
    ([#2708](https://github.com/ethereum/web3.py/issues/2708){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2708\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v6-0-0-beta-7-2022-10-19 .section}
## v6.0.0-beta.7 (2022-10-19)

::: {#release_notes.xhtml#id203 .section}
### Bugfixes

-   Protobuf dependency had a DoS-able bug. It was fixed in v4.21.6.
    See:
    [https://nvd.nist.gov/vuln/detail/CVE-2022-1941](https://nvd.nist.gov/vuln/detail/CVE-2022-1941){.reference
    .external}
    ([#2666](https://github.com/ethereum/web3.py/issues/2666){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2666\]]{.link-target})
:::

::: {#release_notes.xhtml#id204 .section}
### Improved Documentation

-   Added Chainstack link to quickstart docs.
    ([#2677](https://github.com/ethereum/web3.py/issues/2677){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2677\]]{.link-target})
:::

::: {#release_notes.xhtml#id205 .section}
### Deprecations and Removals

-   Remove Ropsten auto provider and the relevant references to Ropsten
    across the repo
    ([#2672](https://github.com/ethereum/web3.py/issues/2672){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2672\]]{.link-target})
:::

::: {#release_notes.xhtml#id206 .section}
### Internal Changes - for web3.py Contributors

-   Clean up remaining uses of deprecated [`eth_abi`{.docutils .literal
    .notranslate}]{.pre} methods.
    ([#2668](https://github.com/ethereum/web3.py/issues/2668){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2668\]]{.link-target})
:::

::: {#release_notes.xhtml#id207 .section}
### Miscellaneous changes

-   [#2671](https://github.com/ethereum/web3.py/issues/2671){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2671\]]{.link-target},
    [#2682](https://github.com/ethereum/web3.py/issues/2682){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2682\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v6-0-0-beta-6-2022-09-26 .section}
## v6.0.0-beta.6 (2022-09-26)

::: {#release_notes.xhtml#id208 .section}
### Bugfixes

-   Protobuf dependency breaks at version [`3.20.2`{.docutils .literal
    .notranslate}]{.pre} and above; pin to [`3.20.1`{.docutils .literal
    .notranslate}]{.pre} for now.
    ([#2657](https://github.com/ethereum/web3.py/issues/2657){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2657\]]{.link-target})
:::

::: {#release_notes.xhtml#id209 .section}
### Features

-   Add new predefined block identifiers [`safe`{.docutils .literal
    .notranslate}]{.pre} and [`finalized`{.docutils .literal
    .notranslate}]{.pre}.
    ([#2652](https://github.com/ethereum/web3.py/issues/2652){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2652\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v6-0-0-beta-5-2022-09-19 .section}
## v6.0.0-beta.5 (2022-09-19)

::: {#release_notes.xhtml#id210 .section}
### Breaking Changes

-   Removed IBAN since it was an unused feature
    ([#2537](https://github.com/ethereum/web3.py/issues/2537){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2537\]]{.link-target})

-   Update eth-tester dependency to v0.7.0-beta.1; Update eth-account
    version to \>=0.7.0,\<0.8.0
    ([#2623](https://github.com/ethereum/web3.py/issues/2623){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2623\]]{.link-target})

-   Remove [`WEB3_INFURA_API_KEY`{.docutils .literal
    .notranslate}]{.pre} environment variable in favor of
    [`WEB3_INFURA_PROJECT_ID`{.docutils .literal .notranslate}]{.pre}.
    Change [`InfuraKeyNotFound`{.docutils .literal .notranslate}]{.pre}
    exception to [`InfuraProjectIdNotFound`{.docutils .literal
    .notranslate}]{.pre}
    ([#2634](https://github.com/ethereum/web3.py/issues/2634){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2634\]]{.link-target})

-   Remove Kovan auto provider
    ([#2635](https://github.com/ethereum/web3.py/issues/2635){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2635\]]{.link-target})

-   Snakecase the `<cite>`{=html}isConnected`</cite>`{=html} method
    ([#2643](https://github.com/ethereum/web3.py/issues/2643){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2643\]]{.link-target})

-   Snakecase the [`toWei`{.docutils .literal .notranslate}]{.pre} and
    [`fromWei`{.docutils .literal .notranslate}]{.pre} methods
    ([#2647](https://github.com/ethereum/web3.py/issues/2647){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2647\]]{.link-target})
:::

::: {#release_notes.xhtml#id211 .section}
### Bugfixes

-   Fix [`eth-tester`{.docutils .literal .notranslate}]{.pre} key
    remapping for [`logsBloom`{.docutils .literal .notranslate}]{.pre}
    and [`receiptsRoot`{.docutils .literal .notranslate}]{.pre}
    ([#1630](https://github.com/ethereum/web3.py/issues/1630){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1630\]]{.link-target})

-   Improve upon issues with session caching - better support for
    multithreading and make sure session eviction from cache does not
    happen prematurely.
    ([#2409](https://github.com/ethereum/web3.py/issues/2409){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2409\]]{.link-target})

-   Allow classes to inherit from the [`Web3`{.docutils .literal
    .notranslate}]{.pre} class by attaching modules appropriately.
    ([#2592](https://github.com/ethereum/web3.py/issues/2592){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2592\]]{.link-target})

-   fixed bug in how async_eth_tester_middleware fills default fields
    ([#2600](https://github.com/ethereum/web3.py/issues/2600){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2600\]]{.link-target})

-   Allow hex for [`value`{.docutils .literal .notranslate}]{.pre} field
    when validating via [`validate_payable()`{.docutils .literal
    .notranslate}]{.pre} contracts method
    ([#2602](https://github.com/ethereum/web3.py/issues/2602){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2602\]]{.link-target})

-   Update Beacon API to v2.3.0
    ([#2616](https://github.com/ethereum/web3.py/issues/2616){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2616\]]{.link-target})

-   Move [`flaky`{.docutils .literal .notranslate}]{.pre} option to
    top-level conftest.py
    ([#2642](https://github.com/ethereum/web3.py/issues/2642){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2642\]]{.link-target})
:::

::: {#release_notes.xhtml#documentation-updates .section}
### Documentation Updates

-   Update Proof of Authority middleware
    (`<cite>`{=html}geth_poa_middleware`</cite>`{=html}) documentation
    for better clarity.
    ([#2538](https://github.com/ethereum/web3.py/issues/2538){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2538\]]{.link-target})

-   Add some missing supported async middlewares to docs.
    ([#2574](https://github.com/ethereum/web3.py/issues/2574){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2574\]]{.link-target})

-   Introduce AsyncENS and availability on w3 instance in ENS guide.
    ([#2585](https://github.com/ethereum/web3.py/issues/2585){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2585\]]{.link-target})

-   Fix typo in eth.call docs
    ([#2613](https://github.com/ethereum/web3.py/issues/2613){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2613\]]{.link-target})

-   remove section for deleted
    `<cite>`{=html}account.recoverHash`</cite>`{=html} method
    ([#2615](https://github.com/ethereum/web3.py/issues/2615){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2615\]]{.link-target})

-   examples docs gave incorrect return type for
    `<cite>`{=html}eth.get_transaction`</cite>`{=html}, fixed
    ([#2617](https://github.com/ethereum/web3.py/issues/2617){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2617\]]{.link-target})

-   minor typo fix in contracts overview
    ([#2628](https://github.com/ethereum/web3.py/issues/2628){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2628\]]{.link-target})

-   fix bug in `<cite>`{=html}Deploying new contracts`</cite>`{=html}
    example
    ([#2646](https://github.com/ethereum/web3.py/issues/2646){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2646\]]{.link-target})
:::

::: {#release_notes.xhtml#id212 .section}
### Features

-   Support for [`Account`{.docutils .literal .notranslate}]{.pre} class
    access in [`AsyncEth`{.docutils .literal .notranslate}]{.pre} via
    [`async_w3.eth.account`{.docutils .literal .notranslate}]{.pre}
    ([#2580](https://github.com/ethereum/web3.py/issues/2580){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2580\]]{.link-target})

-   Expose public abi utility methods:
    [`get_abi_output_names()`{.docutils .literal .notranslate}]{.pre}
    and [`get_abi_input_names()`{.docutils .literal .notranslate}]{.pre}
    ([#2596](https://github.com/ethereum/web3.py/issues/2596){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2596\]]{.link-target})

-   update all references to deprecated
    `<cite>`{=html}eth_abi.encode_abi`</cite>`{=html} to
    `<cite>`{=html}eth_abi.encode`</cite>`{=html}
    ([#2621](https://github.com/ethereum/web3.py/issues/2621){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2621\]]{.link-target})

-   update all references to deprecated
    `<cite>`{=html}eth_abi.decode_abi`</cite>`{=html} to
    `<cite>`{=html}eth_abi.decode`</cite>`{=html}
    ([#2636](https://github.com/ethereum/web3.py/issues/2636){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2636\]]{.link-target})

-   Add Sepolia auto provider
    ([#2639](https://github.com/ethereum/web3.py/issues/2639){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2639\]]{.link-target})
:::

::: {#release_notes.xhtml#misc .section}
### Misc

-   [#2603](https://github.com/ethereum/web3.py/issues/2603){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2603\]]{.link-target},
    [#2622](https://github.com/ethereum/web3.py/issues/2622){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2622\]]{.link-target},
    [#2630](https://github.com/ethereum/web3.py/issues/2630){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2630\]]{.link-target},
    [#2638](https://github.com/ethereum/web3.py/issues/2638){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2638\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v6-0-0-beta-4-2022-07-13 .section}
## v6.0.0-beta.4 (2022-07-13)

::: {#release_notes.xhtml#id213 .section}
### Breaking Changes

-   sha3 and soliditySha3 were previously deprecated and now removed
    ([#2479](https://github.com/ethereum/web3.py/issues/2479){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2479\]]{.link-target})

-   Remove deprecated methods from Geth, Parity and Net modules
    ([#2480](https://github.com/ethereum/web3.py/issues/2480){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2480\]]{.link-target})

-   Provide better messaging to wrong arguments for contract functions,
    especially for [`tuple`{.docutils .literal .notranslate}]{.pre}
    argument types.
    ([#2556](https://github.com/ethereum/web3.py/issues/2556){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2556\]]{.link-target})
:::

::: {#release_notes.xhtml#id214 .section}
### Bugfixes

-   Properly format [`block_number`{.docutils .literal
    .notranslate}]{.pre} for [`eth_getTransactionCount`{.docutils
    .literal .notranslate}]{.pre} when using
    [`EthereumTesterProvider`{.docutils .literal .notranslate}]{.pre}
    ([#1801](https://github.com/ethereum/web3.py/issues/1801){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1801\]]{.link-target})

-   removed `<cite>`{=html}Optional`</cite>`{=html} type hints for
    `<cite>`{=html}passphrase`</cite>`{=html} arguments that aren't
    actually optional
    ([#2511](https://github.com/ethereum/web3.py/issues/2511){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2511\]]{.link-target})

-   Fix `<cite>`{=html}is_dynamic_fee_transaction`</cite>`{=html} and
    `<cite>`{=html}TRANSACTION_DEFAULTS`</cite>`{=html} when
    `<cite>`{=html}gas_price_strategy`</cite>`{=html} returns zero
    ([#2562](https://github.com/ethereum/web3.py/issues/2562){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2562\]]{.link-target})
:::

::: {#release_notes.xhtml#id215 .section}
### Documentation Updates

-   Remove deprecated methods from Geth, Parity, and Net modules
    ([#2480](https://github.com/ethereum/web3.py/issues/2480){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2480\]]{.link-target})

-   replace double- with single-quotes to make f-string valid
    ([#2504](https://github.com/ethereum/web3.py/issues/2504){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2504\]]{.link-target})

-   added geth personal_sign and personal_ec_recover documentation
    ([#2511](https://github.com/ethereum/web3.py/issues/2511){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2511\]]{.link-target})
:::

::: {#release_notes.xhtml#id216 .section}
### Features

-   Add transaction result formatters for
    `<cite>`{=html}type`</cite>`{=html} and
    `<cite>`{=html}chainId`</cite>`{=html} to convert values to
    [`int`{.docutils .literal .notranslate}]{.pre} if
    [`hexadecimal`{.docutils .literal .notranslate}]{.pre} if the field
    is not null
    ([#2491](https://github.com/ethereum/web3.py/issues/2491){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2491\]]{.link-target})

-   Add a global flag on the provider for enabling / disabling CCIP Read
    for calls: [`global_ccip_read_enabled`{.docutils .literal
    .notranslate}]{.pre} (defaults to [`True`{.docutils .literal
    .notranslate}]{.pre}).
    ([#2499](https://github.com/ethereum/web3.py/issues/2499){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2499\]]{.link-target})

-   Deprecate Geth Admin StartRPC and StopRPC for StartHTTP and StopHTTP
    ([#2507](https://github.com/ethereum/web3.py/issues/2507){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2507\]]{.link-target})

-   Added Async support for ENS
    ([#2547](https://github.com/ethereum/web3.py/issues/2547){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2547\]]{.link-target})

-   support multi-dimensional arrays for ABI tuples types
    ([#2555](https://github.com/ethereum/web3.py/issues/2555){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2555\]]{.link-target})
:::

::: {#release_notes.xhtml#id217 .section}
### Misc

-   [#2345](https://github.com/ethereum/web3.py/issues/2345){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2345\]]{.link-target},
    [#2483](https://github.com/ethereum/web3.py/issues/2483){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2483\]]{.link-target},
    [#2505](https://github.com/ethereum/web3.py/issues/2505){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2505\]]{.link-target},
    [#2513](https://github.com/ethereum/web3.py/issues/2513){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2513\]]{.link-target},
    [#2514](https://github.com/ethereum/web3.py/issues/2514){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2514\]]{.link-target},
    [#2515](https://github.com/ethereum/web3.py/issues/2515){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2515\]]{.link-target},
    [#2516](https://github.com/ethereum/web3.py/issues/2516){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2516\]]{.link-target},
    [#2518](https://github.com/ethereum/web3.py/issues/2518){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2518\]]{.link-target},
    [#2520](https://github.com/ethereum/web3.py/issues/2520){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2520\]]{.link-target},
    [#2521](https://github.com/ethereum/web3.py/issues/2521){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2521\]]{.link-target},
    [#2522](https://github.com/ethereum/web3.py/issues/2522){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2522\]]{.link-target},
    [#2523](https://github.com/ethereum/web3.py/issues/2523){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2523\]]{.link-target},
    [#2524](https://github.com/ethereum/web3.py/issues/2524){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2524\]]{.link-target},
    [#2525](https://github.com/ethereum/web3.py/issues/2525){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2525\]]{.link-target},
    [#2527](https://github.com/ethereum/web3.py/issues/2527){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2527\]]{.link-target},
    [#2530](https://github.com/ethereum/web3.py/issues/2530){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2530\]]{.link-target},
    [#2531](https://github.com/ethereum/web3.py/issues/2531){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2531\]]{.link-target},
    [#2534](https://github.com/ethereum/web3.py/issues/2534){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2534\]]{.link-target},
    [#2542](https://github.com/ethereum/web3.py/issues/2542){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2542\]]{.link-target},
    [#2544](https://github.com/ethereum/web3.py/issues/2544){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2544\]]{.link-target},
    [#2550](https://github.com/ethereum/web3.py/issues/2550){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2550\]]{.link-target},
    [#2551](https://github.com/ethereum/web3.py/issues/2551){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2551\]]{.link-target},
    [#2559](https://github.com/ethereum/web3.py/issues/2559){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2559\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v6-0-0-beta-3-2022-06-01 .section}
## v6.0.0-beta.3 (2022-06-01)

::: {#release_notes.xhtml#id218 .section}
### Breaking Changes

-   Removed deprecated methods from eth and geth
    ([#1416](https://github.com/ethereum/web3.py/issues/1416){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1416\]]{.link-target})
:::

::: {#release_notes.xhtml#id219 .section}
### Bugfixes

-   Fix bug in \_is_latest_block_number_request in cache middleware
    ([#2185](https://github.com/ethereum/web3.py/issues/2185){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2185\]]{.link-target})

-   Increase cache size to allow for 20 entries.
    ([#2477](https://github.com/ethereum/web3.py/issues/2477){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2477\]]{.link-target})

-   format receipt.type to int and log.data to HexBytes
    ([#2482](https://github.com/ethereum/web3.py/issues/2482){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2482\]]{.link-target})

-   Only thread lock for methods attempting to access the cache for
    caching middleware.
    ([#2496](https://github.com/ethereum/web3.py/issues/2496){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2496\]]{.link-target})
:::

::: {#release_notes.xhtml#id220 .section}
### Documentation Updates

-   Fix typo in simple_cache_middleware example
    ([#2449](https://github.com/ethereum/web3.py/issues/2449){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2449\]]{.link-target})

-   Fix dict type hints in EventScanner example
    ([#2469](https://github.com/ethereum/web3.py/issues/2469){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2469\]]{.link-target})

-   Add clarification around ValueError and Local Signing middleware
    ([#2474](https://github.com/ethereum/web3.py/issues/2474){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2474\]]{.link-target})
:::

::: {#release_notes.xhtml#id221 .section}
### Features

-   Add async version of contract functionality
    ([#2270](https://github.com/ethereum/web3.py/issues/2270){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2270\]]{.link-target})

-   ENSIP-10 / wildcard resolution support for ENS module
    ([#2411](https://github.com/ethereum/web3.py/issues/2411){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2411\]]{.link-target})

-   CCIP Read support and finalize implementation of and add tests for
    ENS offchain resolution support
    ([#2457](https://github.com/ethereum/web3.py/issues/2457){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2457\]]{.link-target})
:::

::: {#release_notes.xhtml#id222 .section}
### Misc

-   [#2454](https://github.com/ethereum/web3.py/issues/2454){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2454\]]{.link-target},
    [#2450](https://github.com/ethereum/web3.py/issues/2450){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2450\]]{.link-target},
    [#2462](https://github.com/ethereum/web3.py/issues/2462){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2462\]]{.link-target},
    [#2471](https://github.com/ethereum/web3.py/issues/2471){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2471\]]{.link-target},
    [#2478](https://github.com/ethereum/web3.py/issues/2478){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2478\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v6-0-0-beta-2-2022-04-27 .section}
## v6.0.0-beta.2 (2022-04-27)

::: {#release_notes.xhtml#id223 .section}
### Breaking Changes

-   Audit [`.rst`{.docutils .literal .notranslate}]{.pre} and
    [`.py`{.docutils .literal .notranslate}]{.pre} files and convert all
    Web3 instance variable names to [`w3`{.docutils .literal
    .notranslate}]{.pre} to avoid confusion with the [`web3`{.docutils
    .literal .notranslate}]{.pre} module.
    ([#1183](https://github.com/ethereum/web3.py/issues/1183){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1183\]]{.link-target})

-   Update dependency requirements: - eth-utils - eth-abi - eth-tester -
    eth-account - eth-typing
    ([#2342](https://github.com/ethereum/web3.py/issues/2342){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2342\]]{.link-target})

-   Add [`attach_methods()`{.docutils .literal .notranslate}]{.pre} to
    [`Module`{.docutils .literal .notranslate}]{.pre} class to
    facilitate attaching methods to modules.
    ([#2383](https://github.com/ethereum/web3.py/issues/2383){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2383\]]{.link-target})

-   Move IOError -\> OSError
    ([#2434](https://github.com/ethereum/web3.py/issues/2434){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2434\]]{.link-target})
:::

::: {#release_notes.xhtml#id224 .section}
### Documentation Updates

-   Clarify info about Infura filters over HTTP
    ([#2322](https://github.com/ethereum/web3.py/issues/2322){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2322\]]{.link-target})

-   Document reading private keys from environment variables
    ([#2380](https://github.com/ethereum/web3.py/issues/2380){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2380\]]{.link-target})

-   Add example for the
    [`construct_sign_and_send_raw_middleware`{.docutils .literal
    .notranslate}]{.pre} when connected to a hosted node
    ([#2410](https://github.com/ethereum/web3.py/issues/2410){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2410\]]{.link-target})

-   Doc fix: Pending transaction filter returns a
    [`TransactionFilter`{.docutils .literal .notranslate}]{.pre} not a
    [`BlockFilter`{.docutils .literal .notranslate}]{.pre}
    ([#2444](https://github.com/ethereum/web3.py/issues/2444){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2444\]]{.link-target})
:::

::: {#release_notes.xhtml#id225 .section}
### Features

-   Add 'get_text' method to look up ENS text record values
    ([#2286](https://github.com/ethereum/web3.py/issues/2286){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2286\]]{.link-target})

-   For [`ENS.name()`{.docutils .literal .notranslate}]{.pre}, validate
    that the forward resolution returns the same address as provided by
    the user as per the ENS documentation recommendation for Reverse
    Resolution.
    ([#2420](https://github.com/ethereum/web3.py/issues/2420){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2420\]]{.link-target})

-   Add sync chain_id to [`simple_middleware_cache`{.docutils .literal
    .notranslate}]{.pre}
    ([#2425](https://github.com/ethereum/web3.py/issues/2425){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2425\]]{.link-target})
:::

::: {#release_notes.xhtml#id226 .section}
### Misc

-   [#2369](https://github.com/ethereum/web3.py/issues/2369){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2369\]]{.link-target},
    [#2372](https://github.com/ethereum/web3.py/issues/2372){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2372\]]{.link-target},
    [#2418](https://github.com/ethereum/web3.py/issues/2418){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2418\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v6-0-0-beta-1-2022-02-28 .section}
## v6.0.0-beta.1 (2022-02-28)

::: {#release_notes.xhtml#id227 .section}
### Breaking Changes

-   Update [`websockets`{.docutils .literal .notranslate}]{.pre}
    dependency to v10+
    ([#2324](https://github.com/ethereum/web3.py/issues/2324){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2324\]]{.link-target})

-   Remove support for the unsupported Python 3.6 Also removes outdated
    Parity tests
    ([#2343](https://github.com/ethereum/web3.py/issues/2343){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2343\]]{.link-target})

-   Update Sphinx requirement to [`>=4.2.0,<5`{.docutils .literal
    .notranslate}]{.pre}
    ([#2362](https://github.com/ethereum/web3.py/issues/2362){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2362\]]{.link-target})
:::

::: {#release_notes.xhtml#id228 .section}
### Bugfixes

-   Fix types for [`gas`{.docutils .literal .notranslate}]{.pre}, and
    [`gasLimit`{.docutils .literal .notranslate}]{.pre}:
    [`Wei`{.docutils .literal .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`->`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`int`{.docutils .literal .notranslate}]{.pre}. Also
    fix types for [`effectiveGasPrice`{.docutils .literal
    .notranslate}]{.pre}: ([`int`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`->`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`Wei`{.docutils .literal .notranslate}]{.pre})
    ([#2330](https://github.com/ethereum/web3.py/issues/2330){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2330\]]{.link-target})
:::

::: {#release_notes.xhtml#id229 .section}
### Features

-   Added session caching to the AsyncHTTPProvider
    ([#2016](https://github.com/ethereum/web3.py/issues/2016){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2016\]]{.link-target})

-   Add support for Python 3.10
    ([#2175](https://github.com/ethereum/web3.py/issues/2175){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2175\]]{.link-target})

-   Added 'Breaking Changes' and 'Deprecations' categories to our
    release notes
    ([#2340](https://github.com/ethereum/web3.py/issues/2340){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2340\]]{.link-target})

-   Add async `<cite>`{=html}eth.get_storage_at`</cite>`{=html} method
    ([#2350](https://github.com/ethereum/web3.py/issues/2350){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2350\]]{.link-target})

-   Upgrade [`jsonschema`{.docutils .literal .notranslate}]{.pre}
    version to [`>=4.0.0<5`{.docutils .literal .notranslate}]{.pre}
    ([#2361](https://github.com/ethereum/web3.py/issues/2361){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2361\]]{.link-target})
:::

::: {#release_notes.xhtml#id230 .section}
### Misc

-   [#2353](https://github.com/ethereum/web3.py/issues/2353){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2353\]]{.link-target},
    [#2365](https://github.com/ethereum/web3.py/issues/2365){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2365\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-28-0-2022-02-09 .section}
## v5.28.0 (2022-02-09)

::: {#release_notes.xhtml#id231 .section}
### Features

-   Added Async functions for Geth Personal and Admin modules
    ([#1413](https://github.com/ethereum/web3.py/issues/1413){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1413\]]{.link-target})

-   async support for formatting, validation, and geth poa middlewares
    ([#2098](https://github.com/ethereum/web3.py/issues/2098){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2098\]]{.link-target})

-   Calculate a default [`maxPriorityFeePerGas`{.docutils .literal
    .notranslate}]{.pre} using [`eth_feeHistory`{.docutils .literal
    .notranslate}]{.pre} when [`eth_maxPriorityFeePerGas`{.docutils
    .literal .notranslate}]{.pre} is not available, since the latter is
    not a part of the Ethereum JSON-RPC specs and only supported by
    certain clients.
    ([#2259](https://github.com/ethereum/web3.py/issues/2259){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2259\]]{.link-target})

-   Allow NamedTuples in ABI inputs
    ([#2312](https://github.com/ethereum/web3.py/issues/2312){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2312\]]{.link-target})

-   Add async `<cite>`{=html}eth.syncing`</cite>`{=html} method
    ([#2331](https://github.com/ethereum/web3.py/issues/2331){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2331\]]{.link-target})
:::

::: {#release_notes.xhtml#id232 .section}
### Bugfixes

-   remove `<cite>`{=html}ens.utils.dict_copy`</cite>`{=html} decorator
    ([#1423](https://github.com/ethereum/web3.py/issues/1423){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1423\]]{.link-target})

-   The exception retry middleware whitelist was missing a comma between
    [`txpool`{.docutils .literal .notranslate}]{.pre} and
    [`testing`{.docutils .literal .notranslate}]{.pre}
    ([#2327](https://github.com/ethereum/web3.py/issues/2327){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2327\]]{.link-target})

-   Properly initialize external modules that do not inherit from the
    [`web3.module.Module`{.docutils .literal .notranslate}]{.pre} class
    ([#2328](https://github.com/ethereum/web3.py/issues/2328){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2328\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-27-0-2022-01-31 .section}
## v5.27.0 (2022-01-31)

::: {#release_notes.xhtml#id233 .section}
### Features

-   Added Async functions for Geth TxPool
    ([#1413](https://github.com/ethereum/web3.py/issues/1413){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1413\]]{.link-target})

-   external modules are no longer required to inherit from the
    [`web3.module.Module`{.docutils .literal .notranslate}]{.pre} class
    ([#2304](https://github.com/ethereum/web3.py/issues/2304){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2304\]]{.link-target})

-   Add async `<cite>`{=html}eth.get_logs`</cite>`{=html} method
    ([#2310](https://github.com/ethereum/web3.py/issues/2310){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2310\]]{.link-target})

-   add Async access to `<cite>`{=html}default_account`</cite>`{=html}
    and `<cite>`{=html}default_block`</cite>`{=html}
    ([#2315](https://github.com/ethereum/web3.py/issues/2315){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2315\]]{.link-target})

-   Update eth-tester and eth-account dependencies to pull in bugfix
    from eth-keys
    ([#2320](https://github.com/ethereum/web3.py/issues/2320){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2320\]]{.link-target})
:::

::: {#release_notes.xhtml#id234 .section}
### Bugfixes

-   Fixed issues with parsing tuples and nested tuples in event logs
    ([#2211](https://github.com/ethereum/web3.py/issues/2211){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2211\]]{.link-target})

-   In ENS the contract function to resolve an ENS address was being
    called twice in error. One of those calls was removed.
    ([#2318](https://github.com/ethereum/web3.py/issues/2318){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2318\]]{.link-target})

-   [`to_hexbytes`{.docutils .literal .notranslate}]{.pre} block
    formatters no longer throw when value is [`None`{.docutils .literal
    .notranslate}]{.pre}
    ([#2321](https://github.com/ethereum/web3.py/issues/2321){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2321\]]{.link-target})
:::

::: {#release_notes.xhtml#id235 .section}
### Improved Documentation

-   fix typo in `<cite>`{=html}eth.account`</cite>`{=html} docs
    ([#2111](https://github.com/ethereum/web3.py/issues/2111){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2111\]]{.link-target})

-   explicitly add `<cite>`{=html}output_values`</cite>`{=html} to
    contracts example
    ([#2293](https://github.com/ethereum/web3.py/issues/2293){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2293\]]{.link-target})

-   update imports for `<cite>`{=html}AsyncHTTPProvider`</cite>`{=html}
    sample code
    ([#2302](https://github.com/ethereum/web3.py/issues/2302){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2302\]]{.link-target})

-   fixed broken link to filter schema
    ([#2303](https://github.com/ethereum/web3.py/issues/2303){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2303\]]{.link-target})

-   add github link to the main docs landing page
    ([#2313](https://github.com/ethereum/web3.py/issues/2313){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2313\]]{.link-target})

-   fix typos and update referenced `<cite>`{=html}geth`</cite>`{=html}
    version
    ([#2326](https://github.com/ethereum/web3.py/issues/2326){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2326\]]{.link-target})
:::

::: {#release_notes.xhtml#id236 .section}
### Misc

-   [#2217](https://github.com/ethereum/web3.py/issues/2217){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2217\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-26-0-2022-01-06 .section}
## v5.26.0 (2022-01-06)

::: {#release_notes.xhtml#id237 .section}
### Features

-   Add [`middlewares`{.docutils .literal .notranslate}]{.pre} property
    to [`NamedElementOnion`{.docutils .literal .notranslate}]{.pre} /
    [`web3.middleware_onion`{.docutils .literal .notranslate}]{.pre}.
    Returns current middlewares in proper order for importing into a new
    [`Web3`{.docutils .literal .notranslate}]{.pre} instance
    ([#2239](https://github.com/ethereum/web3.py/issues/2239){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2239\]]{.link-target})

-   Add async [`eth.hashrate`{.docutils .literal .notranslate}]{.pre}
    method
    ([#2243](https://github.com/ethereum/web3.py/issues/2243){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2243\]]{.link-target})

-   Add async [`eth.chain_id`{.docutils .literal .notranslate}]{.pre}
    method
    ([#2251](https://github.com/ethereum/web3.py/issues/2251){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2251\]]{.link-target})

-   Add async [`eth.mining`{.docutils .literal .notranslate}]{.pre}
    method
    ([#2252](https://github.com/ethereum/web3.py/issues/2252){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2252\]]{.link-target})

-   Add async [`eth.get_transaction_receipt`{.docutils .literal
    .notranslate}]{.pre} and
    [`eth.wait_for_transaction_receipt`{.docutils .literal
    .notranslate}]{.pre} methods
    ([#2265](https://github.com/ethereum/web3.py/issues/2265){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2265\]]{.link-target})

-   Add async `<cite>`{=html}eth.accounts`</cite>`{=html} method
    ([#2284](https://github.com/ethereum/web3.py/issues/2284){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2284\]]{.link-target})

-   Support for attaching external modules to the [`Web3`{.docutils
    .literal .notranslate}]{.pre} instance when instantiating the
    [`Web3`{.docutils .literal .notranslate}]{.pre} instance, via the
    [`external_modules`{.docutils .literal .notranslate}]{.pre}
    argument, or via the new [`attach_modules()`{.docutils .literal
    .notranslate}]{.pre} method
    ([#2288](https://github.com/ethereum/web3.py/issues/2288){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2288\]]{.link-target})
:::

::: {#release_notes.xhtml#id238 .section}
### Bugfixes

-   Fixed doctest that wasn't running in [`docs/contracts.rst`{.docutils
    .literal .notranslate}]{.pre}
    ([#2213](https://github.com/ethereum/web3.py/issues/2213){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2213\]]{.link-target})

-   Key mapping fix to eth-tester middleware for access list storage
    keys
    ([#2224](https://github.com/ethereum/web3.py/issues/2224){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2224\]]{.link-target})

-   Inherit [`Web3`{.docutils .literal .notranslate}]{.pre} instance
    middlewares when instantiating [`ENS`{.docutils .literal
    .notranslate}]{.pre} with [`ENS.fromWeb3()`{.docutils .literal
    .notranslate}]{.pre} method
    ([#2239](https://github.com/ethereum/web3.py/issues/2239){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2239\]]{.link-target})
:::

::: {#release_notes.xhtml#id239 .section}
### Improved Documentation

-   Fix example docs to show a TransactionNotFound error, instead of
    None
    ([#2199](https://github.com/ethereum/web3.py/issues/2199){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2199\]]{.link-target})

-   fix typo in ethpm.rst
    ([#2277](https://github.com/ethereum/web3.py/issues/2277){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2277\]]{.link-target})

-   Clarify provider usage in Quickstart docs
    ([#2287](https://github.com/ethereum/web3.py/issues/2287){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2287\]]{.link-target})

-   Address common BSC usage question
    ([#2289](https://github.com/ethereum/web3.py/issues/2289){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2289\]]{.link-target})
:::

::: {#release_notes.xhtml#id240 .section}
### Misc

-   [#1729](https://github.com/ethereum/web3.py/issues/1729){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1729\]]{.link-target},
    [#2233](https://github.com/ethereum/web3.py/issues/2233){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2233\]]{.link-target},
    [#2242](https://github.com/ethereum/web3.py/issues/2242){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2242\]]{.link-target},
    [#2260](https://github.com/ethereum/web3.py/issues/2260){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2260\]]{.link-target},
    [#2261](https://github.com/ethereum/web3.py/issues/2261){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2261\]]{.link-target},
    [#2283](https://github.com/ethereum/web3.py/issues/2283){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2283\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-25-0-2021-11-19 .section}
## v5.25.0 (2021-11-19)

::: {#release_notes.xhtml#id241 .section}
### Features

-   Support for [`w3.eth.get_raw_transaction_by_block`{.docutils
    .literal .notranslate}]{.pre}, and async support for
    [`w3.eth.get_raw_transaction_by_block`{.docutils .literal
    .notranslate}]{.pre}
    ([#2209](https://github.com/ethereum/web3.py/issues/2209){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2209\]]{.link-target})
:::

::: {#release_notes.xhtml#id242 .section}
### Bugfixes

-   BadResponseFormat error thrown instead of KeyError when a response
    gets sent back without a [`result`{.docutils .literal
    .notranslate}]{.pre} key.
    ([#2188](https://github.com/ethereum/web3.py/issues/2188){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2188\]]{.link-target})
:::

::: {#release_notes.xhtml#id243 .section}
### Improved Documentation

-   Correct link to Websocket library documentation
    ([#2173](https://github.com/ethereum/web3.py/issues/2173){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2173\]]{.link-target})

-   Doc update to make it clearer that
    enable_unstable_package_management() method is on the web3 instance
    ([#2208](https://github.com/ethereum/web3.py/issues/2208){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2208\]]{.link-target})
:::

::: {#release_notes.xhtml#id244 .section}
### Misc

-   [#2102](https://github.com/ethereum/web3.py/issues/2102){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2102\]]{.link-target},
    [#2179](https://github.com/ethereum/web3.py/issues/2179){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2179\]]{.link-target},
    [#2191](https://github.com/ethereum/web3.py/issues/2191){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2191\]]{.link-target},
    [#2201](https://github.com/ethereum/web3.py/issues/2201){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2201\]]{.link-target},
    [#2205](https://github.com/ethereum/web3.py/issues/2205){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2205\]]{.link-target},
    [#2212](https://github.com/ethereum/web3.py/issues/2212){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2212\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-24-0-2021-09-27 .section}
## v5.24.0 (2021-09-27)

::: {#release_notes.xhtml#id245 .section}
### Features

-   Add async [`eth.send_raw_transaction`{.docutils .literal
    .notranslate}]{.pre} method
    ([#2135](https://github.com/ethereum/web3.py/issues/2135){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2135\]]{.link-target})

-   Updated eth-account version to v0.5.6 - adds support for signing
    typed transactions without needing to explicitly set the transaction
    type and now accepts correct JSON-RPC structure for accessList for
    typed transactions
    ([#2157](https://github.com/ethereum/web3.py/issues/2157){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2157\]]{.link-target})
:::

::: {#release_notes.xhtml#id246 .section}
### Bugfixes

-   Encode block_count as hex before making eth_feeHistory RPC call
    ([#2117](https://github.com/ethereum/web3.py/issues/2117){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2117\]]{.link-target})
:::

::: {#release_notes.xhtml#id247 .section}
### Improved Documentation

-   Fix typo in AsyncHTTPProvider docs
    ([#2131](https://github.com/ethereum/web3.py/issues/2131){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2131\]]{.link-target})

-   Update AsyncHTTPProvider doc Supported Methods to include
    [`web3.eth.send_raw_transaction()`{.docutils .literal
    .notranslate}]{.pre}.
    ([#2135](https://github.com/ethereum/web3.py/issues/2135){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2135\]]{.link-target})

-   Improve messaging around usage and implementation questions,
    directing users to the appropriate channel
    ([#2138](https://github.com/ethereum/web3.py/issues/2138){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2138\]]{.link-target})

-   Clarify some contract [`ValueError`{.docutils .literal
    .notranslate}]{.pre} error messages.
    ([#2146](https://github.com/ethereum/web3.py/issues/2146){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2146\]]{.link-target})

-   Updated docs for w3.eth.account.sign_transaction to reflect that
    transaction type is no longer needed to successfully sign typed
    transactions and to illustrate how to structure an optional
    accessList parameter in a typed transaction
    ([#2157](https://github.com/ethereum/web3.py/issues/2157){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2157\]]{.link-target})
:::

::: {#release_notes.xhtml#id248 .section}
### Misc

-   [#2105](https://github.com/ethereum/web3.py/issues/2105){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2105\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-23-1-2021-08-27 .section}
## v5.23.1 (2021-08-27)

::: {#release_notes.xhtml#id249 .section}
### Features

-   Add constants for the zero address, zero hash, max int, and wei per
    ether.
    ([#2109](https://github.com/ethereum/web3.py/issues/2109){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2109\]]{.link-target})
:::

::: {#release_notes.xhtml#id250 .section}
### Improved Documentation

-   Renamed "1559 transaction" to "dynamic fee transaction" where
    appropriate to keep consistency among the general code base for 1559
    transaction (type=2) naming
    ([#2118](https://github.com/ethereum/web3.py/issues/2118){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2118\]]{.link-target})

-   Update AsyncHTTPProvider doc example to include modules and
    middlewares keyword arguments
    ([#2123](https://github.com/ethereum/web3.py/issues/2123){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2123\]]{.link-target})
:::

::: {#release_notes.xhtml#id251 .section}
### Misc

-   [#2110](https://github.com/ethereum/web3.py/issues/2110){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2110\]]{.link-target},
    [#2118](https://github.com/ethereum/web3.py/issues/2118){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2118\]]{.link-target},
    [#2122](https://github.com/ethereum/web3.py/issues/2122){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2122\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-23-0-2021-08-12 .section}
## v5.23.0 (2021-08-12)

::: {#release_notes.xhtml#id252 .section}
### Features

-   Add support for eth_feeHistory RPC method
    ([#2038](https://github.com/ethereum/web3.py/issues/2038){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2038\]]{.link-target})

-   Add support for eth_maxPriorityFeePerGas RPC method
    ([#2100](https://github.com/ethereum/web3.py/issues/2100){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2100\]]{.link-target})
:::

::: {#release_notes.xhtml#id253 .section}
### Bugfixes

-   Hot fix for string interpolation issue with contract function call
    decoding exception to facilitate extracting a meaningful message
    from the eth_call response
    ([#2096](https://github.com/ethereum/web3.py/issues/2096){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2096\]]{.link-target})

-   Bypass adding a [`gasPrice`{.docutils .literal .notranslate}]{.pre}
    via the gas price strategy, if one is set, when EIP-1559 transaction
    params are used for [`send_transaction`{.docutils .literal
    .notranslate}]{.pre}
    ([#2099](https://github.com/ethereum/web3.py/issues/2099){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2099\]]{.link-target})
:::

::: {#release_notes.xhtml#id254 .section}
### Improved Documentation

-   Update feeHistory docs
    ([#2104](https://github.com/ethereum/web3.py/issues/2104){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2104\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-22-0-2021-08-02 .section}
## v5.22.0 (2021-08-02)

::: {#release_notes.xhtml#id255 .section}
### Features

-   Add support for eth_getRawTransactionByHash RPC method
    ([#2039](https://github.com/ethereum/web3.py/issues/2039){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2039\]]{.link-target})

-   Add AsyncNet module
    ([#2044](https://github.com/ethereum/web3.py/issues/2044){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2044\]]{.link-target})

-   Add async [`eth.get_balance`{.docutils .literal
    .notranslate}]{.pre}, [`eth.get_code`{.docutils .literal
    .notranslate}]{.pre}, [`eth.get_transaction_count`{.docutils
    .literal .notranslate}]{.pre} methods.
    ([#2056](https://github.com/ethereum/web3.py/issues/2056){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2056\]]{.link-target})

-   eth_signTransaction support for eip-1559 params 'maxFeePerGas' and
    'maxPriorityFeePerGas'
    ([#2082](https://github.com/ethereum/web3.py/issues/2082){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2082\]]{.link-target})

-   Add support for async [`w3.eth.call`{.docutils .literal
    .notranslate}]{.pre}.
    ([#2083](https://github.com/ethereum/web3.py/issues/2083){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2083\]]{.link-target})
:::

::: {#release_notes.xhtml#id256 .section}
### Bugfixes

-   If a transaction hash was passed as a string rather than a HexByte
    to [`w3.eth.wait_for_transaction_receipt`{.docutils .literal
    .notranslate}]{.pre}, and the time was exhausted before the
    transaction is in the chain, the error being raised was a TypeError
    instead of the correct TimeExhausted error. This is because the
    [`to_hex`{.docutils .literal .notranslate}]{.pre} method in the
    TimeExhausted error message expects a primitive as the first
    argument, and a string doesn't qualify as a primitive. Fixed by
    converting the transaction_hash to HexBytes instead.
    ([#2068](https://github.com/ethereum/web3.py/issues/2068){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2068\]]{.link-target})

-   Hot fix for a string interpolation issue in message when
    BadFunctionCallOutput is raised for call_contract_function()
    ([#2069](https://github.com/ethereum/web3.py/issues/2069){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2069\]]{.link-target})

-   [`fill_transaction_defaults()`{.docutils .literal
    .notranslate}]{.pre} no longer sets a default [`gasPrice`{.docutils
    .literal .notranslate}]{.pre} if 1559 fees are present in the
    transaction parameters. This fixes sign-and-send middleware issues
    with 1559 fees.
    ([#2092](https://github.com/ethereum/web3.py/issues/2092){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2092\]]{.link-target})
:::

::: {#release_notes.xhtml#id257 .section}
### Improved Documentation

-   Clarify that [`send_transaction`{.docutils .literal
    .notranslate}]{.pre}, [`modify_transaction`{.docutils .literal
    .notranslate}]{.pre}, and [`replace_transaction`{.docutils .literal
    .notranslate}]{.pre} return HexByte objects instead of strings.
    ([#2058](https://github.com/ethereum/web3.py/issues/2058){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2058\]]{.link-target})

-   Added troubleshooting section for Microsoft Visual C++ error on
    Windows machines
    ([#2077](https://github.com/ethereum/web3.py/issues/2077){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2077\]]{.link-target})

-   Updated the sign-and-send middleware docs to include EIP-1559 as
    well as legacy transaction examples
    ([#2092](https://github.com/ethereum/web3.py/issues/2092){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2092\]]{.link-target})
:::

::: {#release_notes.xhtml#id258 .section}
### Misc

-   [#2073](https://github.com/ethereum/web3.py/issues/2073){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2073\]]{.link-target},
    [#2080](https://github.com/ethereum/web3.py/issues/2080){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2080\]]{.link-target},
    [#2085](https://github.com/ethereum/web3.py/issues/2085){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2085\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-21-0-2021-07-12 .section}
## v5.21.0 (2021-07-12)

::: {#release_notes.xhtml#id259 .section}
### Features

-   Adds support for EIP 1559 transaction keys:
    `<cite>`{=html}maxFeePerGas`</cite>`{=html} and
    `<cite>`{=html}maxPriorityFeePerGas`</cite>`{=html}
    ([#2060](https://github.com/ethereum/web3.py/issues/2060){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2060\]]{.link-target})
:::

::: {#release_notes.xhtml#id260 .section}
### Bugfixes

-   Bugfix where an error response got passed to a function expecting a
    block identifier.

    Split out null result formatters from the error formatters and added
    some tests.
    ([#2022](https://github.com/ethereum/web3.py/issues/2022){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2022\]]{.link-target})

-   Fix broken tests and use the new 1559 params for most of our test
    transactions.
    ([#2053](https://github.com/ethereum/web3.py/issues/2053){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2053\]]{.link-target})

-   Set a default maxFeePerGas value consistent with Geth
    ([#2055](https://github.com/ethereum/web3.py/issues/2055){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2055\]]{.link-target})

-   Fix bug in geth PoA middleware where a [`None`{.docutils .literal
    .notranslate}]{.pre} response should throw a
    [`BlockNotFound`{.docutils .literal .notranslate}]{.pre} error, but
    was instead throwing an [`AttributeError`{.docutils .literal
    .notranslate}]{.pre}
    ([#2064](https://github.com/ethereum/web3.py/issues/2064){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2064\]]{.link-target})
:::

::: {#release_notes.xhtml#id261 .section}
### Improved Documentation

-   Added general documentation on unit and integration testing and how
    to contribute to our test suite.
    ([#2053](https://github.com/ethereum/web3.py/issues/2053){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2053\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-20-1-2021-07-01 .section}
## v5.20.1 (2021-07-01)

::: {#release_notes.xhtml#id262 .section}
### Bugfixes

-   Have the geth dev IPC auto connection check for the
    [`WEB3_PROVIDER_URI`{.docutils .literal .notranslate}]{.pre}
    environment variable.
    ([#2023](https://github.com/ethereum/web3.py/issues/2023){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2023\]]{.link-target})
:::

::: {#release_notes.xhtml#id263 .section}
### Improved Documentation

-   Remove reference to allowing multiple providers in docs
    ([#2018](https://github.com/ethereum/web3.py/issues/2018){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2018\]]{.link-target})

-   Update "Contract Deployment Example" docs to use
    [`py-solc-x`{.docutils .literal .notranslate}]{.pre} as
    [`solc`{.docutils .literal .notranslate}]{.pre} is no longer
    maintained.
    ([#2020](https://github.com/ethereum/web3.py/issues/2020){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2020\]]{.link-target})

-   Detail using unreleased Geth builds in CI
    ([#2037](https://github.com/ethereum/web3.py/issues/2037){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2037\]]{.link-target})

-   Clarify that a missing trie node error could occur when using
    [`block_identifier`{.docutils .literal .notranslate}]{.pre} with
    [`.call()`{.docutils .literal .notranslate}]{.pre} on a node that
    isn't running in archive mode
    ([#2048](https://github.com/ethereum/web3.py/issues/2048){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2048\]]{.link-target})
:::

::: {#release_notes.xhtml#id264 .section}
### Misc

-   [#1938](https://github.com/ethereum/web3.py/issues/1938){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1938\]]{.link-target},
    [#2015](https://github.com/ethereum/web3.py/issues/2015){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2015\]]{.link-target},
    [#2021](https://github.com/ethereum/web3.py/issues/2021){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2021\]]{.link-target},
    [#2025](https://github.com/ethereum/web3.py/issues/2025){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2025\]]{.link-target},
    [#2028](https://github.com/ethereum/web3.py/issues/2028){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2028\]]{.link-target},
    [#2029](https://github.com/ethereum/web3.py/issues/2029){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2029\]]{.link-target},
    [#2035](https://github.com/ethereum/web3.py/issues/2035){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2035\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-20-0-2021-06-09 .section}
## v5.20.0 (2021-06-09)

::: {#release_notes.xhtml#id265 .section}
### Features

-   Add new AsyncHTTPProvider. No middleware or session caching support
    yet.

    Also adds async [`w3.eth.gas_price`{.docutils .literal
    .notranslate}]{.pre}, and async [`w3.isConnected()`{.docutils
    .literal .notranslate}]{.pre} methods.
    ([#1978](https://github.com/ethereum/web3.py/issues/1978){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1978\]]{.link-target})

-   Add ability for AsyncHTTPProvider to accept middleware

    Also adds async gas_price_strategy middleware, and moves gas
    estimate to middleware.

    AsyncEthereumTesterProvider now inherits from AsyncBase
    ([#1999](https://github.com/ethereum/web3.py/issues/1999){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1999\]]{.link-target})

-   Support state_override in contract function call.
    ([#2005](https://github.com/ethereum/web3.py/issues/2005){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2005\]]{.link-target})
:::

::: {#release_notes.xhtml#id266 .section}
### Bugfixes

-   Test ethpm caching + bump Sphinx version.
    ([#1977](https://github.com/ethereum/web3.py/issues/1977){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1977\]]{.link-target})
:::

::: {#release_notes.xhtml#id267 .section}
### Improved Documentation

-   Clarify solidityKeccak documentation.
    ([#1971](https://github.com/ethereum/web3.py/issues/1971){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1971\]]{.link-target})

-   Improve contributor documentation context and ordering.
    ([#2008](https://github.com/ethereum/web3.py/issues/2008){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2008\]]{.link-target})

-   Add docs for unstable AsyncHTTPProvider
    ([#2017](https://github.com/ethereum/web3.py/issues/2017){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2017\]]{.link-target})
:::

::: {#release_notes.xhtml#id268 .section}
### Misc

-   [#1979](https://github.com/ethereum/web3.py/issues/1979){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1979\]]{.link-target},
    [#1980](https://github.com/ethereum/web3.py/issues/1980){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1980\]]{.link-target},
    [#1993](https://github.com/ethereum/web3.py/issues/1993){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1993\]]{.link-target},
    [#2002](https://github.com/ethereum/web3.py/issues/2002){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/2002\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-19-0-2021-04-28 .section}
## v5.19.0 (2021-04-28)

::: {#release_notes.xhtml#id269 .section}
### Features

-   Handle optional [`eth_call`{.docutils .literal .notranslate}]{.pre}
    state override param.
    ([#1921](https://github.com/ethereum/web3.py/issues/1921){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1921\]]{.link-target})

-   Add list_storage_keys deprecate listStorageKeys
    ([#1944](https://github.com/ethereum/web3.py/issues/1944){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1944\]]{.link-target})

-   Add net_peers deprecate netPeers
    ([#1946](https://github.com/ethereum/web3.py/issues/1946){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1946\]]{.link-target})

-   Add trace_replay_transaction deprecate traceReplayTransaction
    ([#1949](https://github.com/ethereum/web3.py/issues/1949){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1949\]]{.link-target})

-   Add add_reserved_peer deprecate addReservedPeer
    ([#1951](https://github.com/ethereum/web3.py/issues/1951){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1951\]]{.link-target})

-   Add [`parity.set_mode`{.docutils .literal .notranslate}]{.pre},
    deprecate [`parity.setMode`{.docutils .literal .notranslate}]{.pre}
    ([#1954](https://github.com/ethereum/web3.py/issues/1954){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1954\]]{.link-target})

-   Add [`parity.trace_raw_transaction`{.docutils .literal
    .notranslate}]{.pre}, deprecate
    [`parity.traceRawTransaction`{.docutils .literal
    .notranslate}]{.pre}
    ([#1955](https://github.com/ethereum/web3.py/issues/1955){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1955\]]{.link-target})

-   Add [`parity.trace_call`{.docutils .literal .notranslate}]{.pre},
    deprecate [`parity.traceCall`{.docutils .literal
    .notranslate}]{.pre}
    ([#1957](https://github.com/ethereum/web3.py/issues/1957){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1957\]]{.link-target})

-   Add trace_filter deprecate traceFilter
    ([#1960](https://github.com/ethereum/web3.py/issues/1960){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1960\]]{.link-target})

-   Add trace_block, deprecate traceBlock
    ([#1961](https://github.com/ethereum/web3.py/issues/1961){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1961\]]{.link-target})

-   Add trace_replay_block_transactions, deprecate
    traceReplayBlockTransactions
    ([#1962](https://github.com/ethereum/web3.py/issues/1962){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1962\]]{.link-target})

-   Add [`parity.trace_transaction`{.docutils .literal
    .notranslate}]{.pre}, deprecate [`parity.traceTransaction`{.docutils
    .literal .notranslate}]{.pre}
    ([#1963](https://github.com/ethereum/web3.py/issues/1963){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1963\]]{.link-target})
:::

::: {#release_notes.xhtml#id270 .section}
### Improved Documentation

-   Document [`eth_call`{.docutils .literal .notranslate}]{.pre} state
    overrides.
    ([#1965](https://github.com/ethereum/web3.py/issues/1965){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1965\]]{.link-target})
:::

::: {#release_notes.xhtml#id271 .section}
### Misc

-   [#1774](https://github.com/ethereum/web3.py/issues/1774){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1774\]]{.link-target},
    [#1805](https://github.com/ethereum/web3.py/issues/1805){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1805\]]{.link-target},
    [#1945](https://github.com/ethereum/web3.py/issues/1945){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1945\]]{.link-target},
    [#1964](https://github.com/ethereum/web3.py/issues/1964){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1964\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-18-0-2021-04-08 .section}
## v5.18.0 (2021-04-08)

::: {#release_notes.xhtml#id272 .section}
### Features

-   Add [`w3.eth.modify_transaction`{.docutils .literal
    .notranslate}]{.pre} deprecate [`w3.eth.modifyTransaction`{.docutils
    .literal .notranslate}]{.pre}
    ([#1886](https://github.com/ethereum/web3.py/issues/1886){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1886\]]{.link-target})

-   Add [`w3.eth.get_transaction_receipt`{.docutils .literal
    .notranslate}]{.pre}, deprecate
    [`w3.eth.getTransactionReceipt`{.docutils .literal
    .notranslate}]{.pre}
    ([#1893](https://github.com/ethereum/web3.py/issues/1893){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1893\]]{.link-target})

-   Add [`w3.eth.wait_for_transaction_receipt`{.docutils .literal
    .notranslate}]{.pre} deprecate
    [`w3.eth.waitForTransactionReceipt`{.docutils .literal
    .notranslate}]{.pre}
    ([#1896](https://github.com/ethereum/web3.py/issues/1896){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1896\]]{.link-target})

-   Add [`w3.eth.set_contract_factory`{.docutils .literal
    .notranslate}]{.pre} deprecate
    [`w3.eth.setContractFactory`{.docutils .literal .notranslate}]{.pre}
    ([#1900](https://github.com/ethereum/web3.py/issues/1900){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1900\]]{.link-target})

-   Add [`w3.eth.generate_gas_price`{.docutils .literal
    .notranslate}]{.pre} deprecate [`w3.eth.generateGasPrice`{.docutils
    .literal .notranslate}]{.pre}
    ([#1905](https://github.com/ethereum/web3.py/issues/1905){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1905\]]{.link-target})

-   Add [`w3.eth.set_gas_price_strategy`{.docutils .literal
    .notranslate}]{.pre} deprecate
    [`w3.eth.setGasPriceStrategy`{.docutils .literal
    .notranslate}]{.pre}
    ([#1906](https://github.com/ethereum/web3.py/issues/1906){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1906\]]{.link-target})

-   Add [`w3.eth.estimate_gas`{.docutils .literal .notranslate}]{.pre}
    deprecate [`w3.eth.estimateGas`{.docutils .literal
    .notranslate}]{.pre}
    ([#1913](https://github.com/ethereum/web3.py/issues/1913){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1913\]]{.link-target})

-   Add [`w3.eth.sign_typed_data`{.docutils .literal
    .notranslate}]{.pre} deprecate [`w3.eth.signTypedData`{.docutils
    .literal .notranslate}]{.pre}
    ([#1915](https://github.com/ethereum/web3.py/issues/1915){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1915\]]{.link-target})

-   Add [`w3.eth.get_filter_changes`{.docutils .literal
    .notranslate}]{.pre} deprecate [`w3.eth.getFilterChanges`{.docutils
    .literal .notranslate}]{.pre}
    ([#1916](https://github.com/ethereum/web3.py/issues/1916){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1916\]]{.link-target})

-   Add [`eth.get_filter_logs`{.docutils .literal .notranslate}]{.pre},
    deprecate [`eth.getFilterLogs`{.docutils .literal
    .notranslate}]{.pre}
    ([#1919](https://github.com/ethereum/web3.py/issues/1919){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1919\]]{.link-target})

-   Add [`eth.uninstall_filter`{.docutils .literal .notranslate}]{.pre},
    deprecate [`eth.uninstallFilter`{.docutils .literal
    .notranslate}]{.pre}
    ([#1920](https://github.com/ethereum/web3.py/issues/1920){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1920\]]{.link-target})

-   Add [`w3.eth.get_logs`{.docutils .literal .notranslate}]{.pre}
    deprecate [`w3.eth.getLogs`{.docutils .literal .notranslate}]{.pre}
    ([#1925](https://github.com/ethereum/web3.py/issues/1925){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1925\]]{.link-target})

-   Add [`w3.eth.submit_hashrate`{.docutils .literal
    .notranslate}]{.pre} deprecate [`w3.eth.submitHashrate`{.docutils
    .literal .notranslate}]{.pre}
    ([#1926](https://github.com/ethereum/web3.py/issues/1926){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1926\]]{.link-target})

-   Add [`w3.eth.submit_work`{.docutils .literal .notranslate}]{.pre}
    deprecate [`w3.eth.submitWork`{.docutils .literal
    .notranslate}]{.pre}
    ([#1927](https://github.com/ethereum/web3.py/issues/1927){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1927\]]{.link-target})

-   Add [`w3.eth.get_work`{.docutils .literal .notranslate}]{.pre},
    deprecate [`w3.eth.getWork`{.docutils .literal .notranslate}]{.pre}
    ([#1934](https://github.com/ethereum/web3.py/issues/1934){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1934\]]{.link-target})

-   Adds public get_block_number method.
    ([#1937](https://github.com/ethereum/web3.py/issues/1937){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1937\]]{.link-target})
:::

::: {#release_notes.xhtml#id273 .section}
### Improved Documentation

-   Add ABI type examples to docs
    ([#1890](https://github.com/ethereum/web3.py/issues/1890){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1890\]]{.link-target})

-   Promote the new Ethereum Python Discord server on the README.
    ([#1898](https://github.com/ethereum/web3.py/issues/1898){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1898\]]{.link-target})

-   Escape reserved characters in install script of Contributing docs.
    ([#1909](https://github.com/ethereum/web3.py/issues/1909){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1909\]]{.link-target})

-   Add detailed event filtering examples.
    ([#1910](https://github.com/ethereum/web3.py/issues/1910){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1910\]]{.link-target})

-   Add docs example for tuning log levels.
    ([#1928](https://github.com/ethereum/web3.py/issues/1928){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1928\]]{.link-target})

-   Add some performance tips in troubleshooting docs.
    ([#1929](https://github.com/ethereum/web3.py/issues/1929){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1929\]]{.link-target})

-   Add existing contract interaction to docs examples.
    ([#1933](https://github.com/ethereum/web3.py/issues/1933){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1933\]]{.link-target})

-   Replace Gitter links with the Python Discord server.
    ([#1936](https://github.com/ethereum/web3.py/issues/1936){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1936\]]{.link-target})
:::

::: {#release_notes.xhtml#id274 .section}
### Misc

-   [#1887](https://github.com/ethereum/web3.py/issues/1887){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1887\]]{.link-target},
    [#1907](https://github.com/ethereum/web3.py/issues/1907){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1907\]]{.link-target},
    [#1917](https://github.com/ethereum/web3.py/issues/1917){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1917\]]{.link-target},
    [#1930](https://github.com/ethereum/web3.py/issues/1930){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1930\]]{.link-target},
    [#1935](https://github.com/ethereum/web3.py/issues/1935){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1935\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-17-0-2021-02-24 .section}
## v5.17.0 (2021-02-24)

::: {#release_notes.xhtml#id275 .section}
### Features

-   Added [`get_transaction_count`{.docutils .literal
    .notranslate}]{.pre}, and deprecated
    [`getTransactionCount`{.docutils .literal .notranslate}]{.pre}
    ([#1844](https://github.com/ethereum/web3.py/issues/1844){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1844\]]{.link-target})

-   Add [`w3.eth.send_transaction`{.docutils .literal
    .notranslate}]{.pre}, deprecate [`w3.eth.sendTransaction`{.docutils
    .literal .notranslate}]{.pre}
    ([#1878](https://github.com/ethereum/web3.py/issues/1878){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1878\]]{.link-target})

-   Add [`web3.eth.sign_transaction`{.docutils .literal
    .notranslate}]{.pre}, deprecate
    [`web3.eth.signTransaction`{.docutils .literal .notranslate}]{.pre}
    ([#1879](https://github.com/ethereum/web3.py/issues/1879){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1879\]]{.link-target})

-   Add [`w3.eth.send_raw_transaction`{.docutils .literal
    .notranslate}]{.pre}, deprecate
    [`w3.eth.sendRawTransaction`{.docutils .literal .notranslate}]{.pre}
    ([#1880](https://github.com/ethereum/web3.py/issues/1880){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1880\]]{.link-target})

-   Add [`w3.eth.replace_transaction`{.docutils .literal
    .notranslate}]{.pre} deprecate
    [`w3.eth.replaceTransaction`{.docutils .literal .notranslate}]{.pre}
    ([#1882](https://github.com/ethereum/web3.py/issues/1882){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1882\]]{.link-target})
:::

::: {#release_notes.xhtml#id276 .section}
### Improved Documentation

-   Fix return type of [`send_transaction`{.docutils .literal
    .notranslate}]{.pre} in docs.
    ([#686](https://github.com/ethereum/web3.py/issues/686){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/686\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-16-0-2021-02-04 .section}
## v5.16.0 (2021-02-04)

::: {#release_notes.xhtml#id277 .section}
### Features

-   Added [`get_block_transaction_count`{.docutils .literal
    .notranslate}]{.pre}, and deprecated
    [`getBlockTransactionCount`{.docutils .literal .notranslate}]{.pre}
    ([#1841](https://github.com/ethereum/web3.py/issues/1841){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1841\]]{.link-target})

-   Move [`defaultAccount`{.docutils .literal .notranslate}]{.pre} to
    [`default_account`{.docutils .literal .notranslate}]{.pre}.
    Deprecate [`defaultAccount`{.docutils .literal .notranslate}]{.pre}.
    ([#1848](https://github.com/ethereum/web3.py/issues/1848){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1848\]]{.link-target})

-   Add [`eth.default_block`{.docutils .literal .notranslate}]{.pre},
    deprecate [`eth.defaultBlock`{.docutils .literal
    .notranslate}]{.pre}. Also adds [`parity.default_block`{.docutils
    .literal .notranslate}]{.pre}, and deprecates
    [`parity.defaultBlock`{.docutils .literal .notranslate}]{.pre}.
    ([#1849](https://github.com/ethereum/web3.py/issues/1849){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1849\]]{.link-target})

-   Add [`eth.gas_price`{.docutils .literal .notranslate}]{.pre},
    deprecate [`eth.gasPrice`{.docutils .literal .notranslate}]{.pre}
    ([#1850](https://github.com/ethereum/web3.py/issues/1850){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1850\]]{.link-target})

-   Added [`eth.block_number`{.docutils .literal .notranslate}]{.pre}
    property. Deprecated [`eth.blockNumber`{.docutils .literal
    .notranslate}]{.pre}
    ([#1851](https://github.com/ethereum/web3.py/issues/1851){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1851\]]{.link-target})

-   Add [`eth.chain_id`{.docutils .literal .notranslate}]{.pre},
    deprecate [`eth.chainId`{.docutils .literal .notranslate}]{.pre}
    ([#1852](https://github.com/ethereum/web3.py/issues/1852){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1852\]]{.link-target})

-   Add [`eth.protocol_version`{.docutils .literal .notranslate}]{.pre},
    deprecate [`eth.protocolVersion`{.docutils .literal
    .notranslate}]{.pre}
    ([#1853](https://github.com/ethereum/web3.py/issues/1853){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1853\]]{.link-target})

-   Add [`eth.get_code`{.docutils .literal .notranslate}]{.pre},
    deprecate [`eth.getCode`{.docutils .literal .notranslate}]{.pre}
    ([#1856](https://github.com/ethereum/web3.py/issues/1856){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1856\]]{.link-target})

-   Deprecate [`eth.getProof`{.docutils .literal .notranslate}]{.pre},
    add [`eth.get_proof`{.docutils .literal .notranslate}]{.pre}
    ([#1857](https://github.com/ethereum/web3.py/issues/1857){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1857\]]{.link-target})

-   Add [`eth.get_transaction`{.docutils .literal .notranslate}]{.pre},
    deprecate [`eth.getTransaction`{.docutils .literal
    .notranslate}]{.pre}
    ([#1858](https://github.com/ethereum/web3.py/issues/1858){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1858\]]{.link-target})

-   Add [`eth.get_transaction_by_block`{.docutils .literal
    .notranslate}]{.pre}, deprecate
    [`eth.getTransactionByBlock`{.docutils .literal .notranslate}]{.pre}
    ([#1859](https://github.com/ethereum/web3.py/issues/1859){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1859\]]{.link-target})

-   Add get_uncle_by_block, deprecate getUncleByBlock
    ([#1862](https://github.com/ethereum/web3.py/issues/1862){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1862\]]{.link-target})

-   Add get_uncle_count, deprecate getUncleCount
    ([#1863](https://github.com/ethereum/web3.py/issues/1863){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1863\]]{.link-target})
:::

::: {#release_notes.xhtml#id278 .section}
### Bugfixes

-   Fix event filter creation if the event ABI contains a
    [`values`{.docutils .literal .notranslate}]{.pre} key.
    ([#1807](https://github.com/ethereum/web3.py/issues/1807){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1807\]]{.link-target})
:::

::: {#release_notes.xhtml#id279 .section}
### Improved Documentation

-   Remove v5 breaking changes link from the top of the release notes.
    ([#1837](https://github.com/ethereum/web3.py/issues/1837){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1837\]]{.link-target})

-   Add account creation troubleshooting docs.
    ([#1855](https://github.com/ethereum/web3.py/issues/1855){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1855\]]{.link-target})

-   Document passing a struct into a contract function.
    ([#1860](https://github.com/ethereum/web3.py/issues/1860){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1860\]]{.link-target})

-   Add instance configuration troubleshooting docs.
    ([#1865](https://github.com/ethereum/web3.py/issues/1865){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1865\]]{.link-target})

-   Clarify nonce lookup in sendRawTransaction docs.
    ([#1866](https://github.com/ethereum/web3.py/issues/1866){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1866\]]{.link-target})

-   Updated docs for web3.eth methods: eth.getTransactionReceipt and
    eth.waitForTransactionReceipt
    ([#1868](https://github.com/ethereum/web3.py/issues/1868){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1868\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-15-0-2021-01-15 .section}
## v5.15.0 (2021-01-15)

::: {#release_notes.xhtml#id280 .section}
### Features

-   Add [`get_storage_at`{.docutils .literal .notranslate}]{.pre} method
    and deprecate [`getStorageAt`{.docutils .literal
    .notranslate}]{.pre}.
    ([#1828](https://github.com/ethereum/web3.py/issues/1828){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1828\]]{.link-target})

-   Add [`eth.get_block`{.docutils .literal .notranslate}]{.pre} method
    and deprecate [`eth.getBlock`{.docutils .literal
    .notranslate}]{.pre}.
    ([#1829](https://github.com/ethereum/web3.py/issues/1829){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1829\]]{.link-target})
:::

::: {#release_notes.xhtml#id281 .section}
### Bugfixes

-   PR #1585 changed the error that was coming back from eth-tester when
    the Revert opcode was called, which broke some tests in downstream
    libraries. This PR reverts back to raising the original error.
    ([#1813](https://github.com/ethereum/web3.py/issues/1813){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1813\]]{.link-target})

-   Added a new [`ContractLogicError`{.docutils .literal
    .notranslate}]{.pre} for when a contract reverts a transaction.
    [`ContractLogicError`{.docutils .literal .notranslate}]{.pre} will
    replace [`SolidityError`{.docutils .literal .notranslate}]{.pre}, in
    v6.
    ([#1814](https://github.com/ethereum/web3.py/issues/1814){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1814\]]{.link-target})
:::

::: {#release_notes.xhtml#id282 .section}
### Improved Documentation

-   Introduce Beacon API documentation
    ([#1836](https://github.com/ethereum/web3.py/issues/1836){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1836\]]{.link-target})
:::

::: {#release_notes.xhtml#id283 .section}
### Misc

-   [#1602](https://github.com/ethereum/web3.py/issues/1602){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1602\]]{.link-target},
    [#1827](https://github.com/ethereum/web3.py/issues/1827){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1827\]]{.link-target},
    [#1831](https://github.com/ethereum/web3.py/issues/1831){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1831\]]{.link-target},
    [#1833](https://github.com/ethereum/web3.py/issues/1833){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1833\]]{.link-target},
    [#1834](https://github.com/ethereum/web3.py/issues/1834){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1834\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-14-0-2021-01-05 .section}
## v5.14.0 (2021-01-05)

::: {#release_notes.xhtml#id284 .section}
### Bugfixes

-   Remove docs/web3.\* from the gitignore to allow for the beacon docs
    to be added to git, and add [`beacon`{.docutils .literal
    .notranslate}]{.pre} to the default web3 modules that get loaded.
    ([#1824](https://github.com/ethereum/web3.py/issues/1824){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1824\]]{.link-target})

-   Remove auto-documenting from the Beacon API
    ([#1825](https://github.com/ethereum/web3.py/issues/1825){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1825\]]{.link-target})
:::

::: {#release_notes.xhtml#id285 .section}
### Features

-   Introduce experimental Ethereum 2.0 beacon node API
    ([#1758](https://github.com/ethereum/web3.py/issues/1758){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1758\]]{.link-target})

-   Add new get_balance method on Eth class. Deprecated getBalance.
    ([#1806](https://github.com/ethereum/web3.py/issues/1806){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1806\]]{.link-target})
:::

::: {#release_notes.xhtml#id286 .section}
### Misc

-   [#1815](https://github.com/ethereum/web3.py/issues/1815){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1815\]]{.link-target},
    [#1816](https://github.com/ethereum/web3.py/issues/1816){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1816\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-13-1-2020-12-03 .section}
## v5.13.1 (2020-12-03)

::: {#release_notes.xhtml#id287 .section}
### Bugfixes

-   Handle revert reason parsing for Ganache
    ([#1794](https://github.com/ethereum/web3.py/issues/1794){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1794\]]{.link-target})
:::

::: {#release_notes.xhtml#id288 .section}
### Improved Documentation

-   Document Geth and Parity/OpenEthereum fixture generation
    ([#1787](https://github.com/ethereum/web3.py/issues/1787){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1787\]]{.link-target})
:::

::: {#release_notes.xhtml#id289 .section}
### Misc

-   [#1778](https://github.com/ethereum/web3.py/issues/1778){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1778\]]{.link-target},
    [#1780](https://github.com/ethereum/web3.py/issues/1780){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1780\]]{.link-target},
    [#1790](https://github.com/ethereum/web3.py/issues/1790){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1790\]]{.link-target},
    [#1791](https://github.com/ethereum/web3.py/issues/1791){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1791\]]{.link-target},
    [#1796](https://github.com/ethereum/web3.py/issues/1796){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1796\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-13-0-2020-10-29 .section}
## v5.13.0 (2020-10-29)

::: {#release_notes.xhtml#id290 .section}
### Features

-   Raise `<cite>`{=html}SolidityError`</cite>`{=html} exceptions that
    contain the revert reason when a `<cite>`{=html}call`</cite>`{=html}
    fails.
    ([#941](https://github.com/ethereum/web3.py/issues/941){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/941\]]{.link-target})
:::

::: {#release_notes.xhtml#id291 .section}
### Bugfixes

-   Update eth-tester dependency to fix tester environment install
    version conflict.
    ([#1782](https://github.com/ethereum/web3.py/issues/1782){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1782\]]{.link-target})
:::

::: {#release_notes.xhtml#id292 .section}
### Misc

-   [#1757](https://github.com/ethereum/web3.py/issues/1757){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1757\]]{.link-target},
    [#1767](https://github.com/ethereum/web3.py/issues/1767){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1767\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-12-3-2020-10-21 .section}
## v5.12.3 (2020-10-21)

::: {#release_notes.xhtml#id293 .section}
### Misc

-   [#1752](https://github.com/ethereum/web3.py/issues/1752){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1752\]]{.link-target},
    [#1759](https://github.com/ethereum/web3.py/issues/1759){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1759\]]{.link-target},
    [#1773](https://github.com/ethereum/web3.py/issues/1773){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1773\]]{.link-target},
    [#1775](https://github.com/ethereum/web3.py/issues/1775){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1775\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-12-2-2020-10-12 .section}
## v5.12.2 (2020-10-12)

::: {#release_notes.xhtml#id294 .section}
### Bugfixes

-   Address the use of multiple providers in the docs
    ([#1701](https://github.com/ethereum/web3.py/issues/1701){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1701\]]{.link-target})

-   Remove stale connection errors from docs
    ([#1737](https://github.com/ethereum/web3.py/issues/1737){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1737\]]{.link-target})

-   Allow ENS name resolution for methods that use the
    [`Method`{.docutils .literal .notranslate}]{.pre} class
    ([#1749](https://github.com/ethereum/web3.py/issues/1749){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1749\]]{.link-target})
:::

::: {#release_notes.xhtml#id295 .section}
### Misc

-   [#1727](https://github.com/ethereum/web3.py/issues/1727){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1727\]]{.link-target},
    [#1728](https://github.com/ethereum/web3.py/issues/1728){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1728\]]{.link-target},
    [#1733](https://github.com/ethereum/web3.py/issues/1733){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1733\]]{.link-target},
    [#1735](https://github.com/ethereum/web3.py/issues/1735){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1735\]]{.link-target},
    [#1741](https://github.com/ethereum/web3.py/issues/1741){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1741\]]{.link-target},
    [#1746](https://github.com/ethereum/web3.py/issues/1746){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1746\]]{.link-target},
    [#1748](https://github.com/ethereum/web3.py/issues/1748){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1748\]]{.link-target},
    [#1753](https://github.com/ethereum/web3.py/issues/1753){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1753\]]{.link-target},
    [#1768](https://github.com/ethereum/web3.py/issues/1768){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1768\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-12-1-2020-09-02 .section}
## v5.12.1 (2020-09-02)

::: {#release_notes.xhtml#id296 .section}
### Misc

-   [#1708](https://github.com/ethereum/web3.py/issues/1708){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1708\]]{.link-target},
    [#1709](https://github.com/ethereum/web3.py/issues/1709){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1709\]]{.link-target},
    [#1715](https://github.com/ethereum/web3.py/issues/1715){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1715\]]{.link-target},
    [#1722](https://github.com/ethereum/web3.py/issues/1722){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1722\]]{.link-target},
    [#1724](https://github.com/ethereum/web3.py/issues/1724){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1724\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-12-0-2020-07-16 .section}
## v5.12.0 (2020-07-16)

::: {#release_notes.xhtml#id297 .section}
### Features

-   Update `<cite>`{=html}web3.pm`</cite>`{=html} and
    `<cite>`{=html}ethpm`</cite>`{=html} module to EthPM v3
    specification.
    ([#1652](https://github.com/ethereum/web3.py/issues/1652){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1652\]]{.link-target})

-   Allow consumer to initialize
    `<cite>`{=html}HttpProvider`</cite>`{=html} with their own
    `<cite>`{=html}requests.Session`</cite>`{=html}. This allows the
    `<cite>`{=html}HttpAdapter`</cite>`{=html} connection pool to be
    tuned as desired.
    ([#1469](https://github.com/ethereum/web3.py/issues/1469){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1469\]]{.link-target})
:::

::: {#release_notes.xhtml#id298 .section}
### Improved Documentation

-   Use ethpm v3 packages in examples documentation.
    ([#1683](https://github.com/ethereum/web3.py/issues/1683){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1683\]]{.link-target})

-   Modernize the deploy contract example.
    ([#1679](https://github.com/ethereum/web3.py/issues/1679){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1679\]]{.link-target})

-   Add contribution guidelines and a code of conduct.
    ([#1691](https://github.com/ethereum/web3.py/issues/1691){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1691\]]{.link-target})
:::

::: {#release_notes.xhtml#id299 .section}
### Misc

-   [#1687](https://github.com/ethereum/web3.py/issues/1687){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1687\]]{.link-target}

-   [#1690](https://github.com/ethereum/web3.py/issues/1690){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1690\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-12-0-beta-3-2020-07-15 .section}
## v5.12.0-beta.3 (2020-07-15)

::: {#release_notes.xhtml#id300 .section}
### Bugfixes

-   Include ethpm-spec solidity examples in distribution.
    ([#1686](https://github.com/ethereum/web3.py/issues/1686){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1686\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-12-0-beta-2-2020-07-14 .section}
## v5.12.0-beta.2 (2020-07-14)

::: {#release_notes.xhtml#id301 .section}
### Bugfixes

-   Support ethpm-spec submodule in distributions.
    ([#1682](https://github.com/ethereum/web3.py/issues/1682){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1682\]]{.link-target})
:::

::: {#release_notes.xhtml#id302 .section}
### Improved Documentation

-   Modernize the deploy contract example.
    ([#1679](https://github.com/ethereum/web3.py/issues/1679){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1679\]]{.link-target})

-   Use ethpm v3 packages in examples documentation.
    ([#1683](https://github.com/ethereum/web3.py/issues/1683){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1683\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-12-0-beta-1-2020-07-09 .section}
## v5.12.0-beta.1 (2020-07-09)

::: {#release_notes.xhtml#id303 .section}
### Features

-   Allow consumer to initialize
    `<cite>`{=html}HttpProvider`</cite>`{=html} with their own
    `<cite>`{=html}requests.Session`</cite>`{=html}. This allows the
    `<cite>`{=html}HttpAdapter`</cite>`{=html} connection pool to be
    tuned as desired.
    ([#1469](https://github.com/ethereum/web3.py/issues/1469){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1469\]]{.link-target})

-   Update `<cite>`{=html}web3.pm`</cite>`{=html} and
    `<cite>`{=html}ethpm`</cite>`{=html} module to EthPM v3
    specification.
    ([#1652](https://github.com/ethereum/web3.py/issues/1652){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1652\]]{.link-target})
:::

::: {#release_notes.xhtml#id304 .section}
### Bugfixes

-   Update outdated reference url in ethpm docs and tests.
    ([#1680](https://github.com/ethereum/web3.py/issues/1680){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1680\]]{.link-target})
:::

::: {#release_notes.xhtml#id305 .section}
### Improved Documentation

-   Add a [`getBalance()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} example and provide more context for using the
    `<cite>`{=html}fromWei`</cite>`{=html} and
    `<cite>`{=html}toWei`</cite>`{=html} utility methods.
    ([#1676](https://github.com/ethereum/web3.py/issues/1676){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1676\]]{.link-target})

-   Overhaul the Overview documentation to provide a tour of major
    features.
    ([#1681](https://github.com/ethereum/web3.py/issues/1681){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1681\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-11-1-2020-06-17 .section}
## v5.11.1 (2020-06-17)

::: {#release_notes.xhtml#id306 .section}
### Bugfixes

-   Added formatter rules for eth_tester middleware to allow
    [`getBalance()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} by using integer block numbers
    ([#1660](https://github.com/ethereum/web3.py/issues/1660){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1660\]]{.link-target})

-   Fix type annotations within the [`eth.py`{.docutils .literal
    .notranslate}]{.pre} module. Several arguments that defaulted to
    [`None`{.docutils .literal .notranslate}]{.pre} were not declared
    [`Optional`{.docutils .literal .notranslate}]{.pre}.
    ([#1668](https://github.com/ethereum/web3.py/issues/1668){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1668\]]{.link-target})

-   Fix type annotation warning when using string URI to instantiate an
    HTTP or WebsocketProvider.
    ([#1669](https://github.com/ethereum/web3.py/issues/1669){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1669\]]{.link-target})

-   Fix type annotations within the [`web3`{.docutils .literal
    .notranslate}]{.pre} modules. Several arguments that defaulted to
    [`None`{.docutils .literal .notranslate}]{.pre} were not declared
    [`Optional`{.docutils .literal .notranslate}]{.pre}.
    ([#1670](https://github.com/ethereum/web3.py/issues/1670){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1670\]]{.link-target})
:::

::: {#release_notes.xhtml#id307 .section}
### Improved Documentation

-   Breaks up links into three categories (Intro, Guides, and API) and
    adds content to the index page: a lib introduction and some "Getting
    Started" links.
    ([#1671](https://github.com/ethereum/web3.py/issues/1671){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1671\]]{.link-target})

-   Fills in some gaps in the Quickstart guide and adds provider
    connection details for local nodes.
    ([#1673](https://github.com/ethereum/web3.py/issues/1673){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1673\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-11-0-2020-06-03 .section}
## v5.11.0 (2020-06-03)

::: {#release_notes.xhtml#id308 .section}
### Features

-   Accept a block identifier in the [`Contract.estimateGas`{.docutils
    .literal .notranslate}]{.pre} method. Includes a related upgrade of
    eth-tester to v0.5.0-beta.1.
    ([#1639](https://github.com/ethereum/web3.py/issues/1639){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1639\]]{.link-target})

-   Introduce a more specific validation error,
    [`ExtraDataLengthError`{.docutils .literal .notranslate}]{.pre}.
    This enables tools to detect when someone may be connected to a POA
    network, for example, and provide a smoother developer experience.
    ([#1666](https://github.com/ethereum/web3.py/issues/1666){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1666\]]{.link-target})
:::

::: {#release_notes.xhtml#id309 .section}
### Bugfixes

-   Correct the type annotations of
    `<cite>`{=html}FilterParams.address`</cite>`{=html}
    ([#1664](https://github.com/ethereum/web3.py/issues/1664){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1664\]]{.link-target})
:::

::: {#release_notes.xhtml#id310 .section}
### Improved Documentation

-   Corrects the return value of [`getTransactionReceipt`{.docutils
    .literal .notranslate}]{.pre}, description of caching middleware,
    and deprecated method names.
    ([#1663](https://github.com/ethereum/web3.py/issues/1663){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1663\]]{.link-target})

-   Corrects documentation of websocket timeout configuration.
    ([#1665](https://github.com/ethereum/web3.py/issues/1665){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1665\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-10-0-2020-05-18 .section}
## v5.10.0 (2020-05-18)

::: {#release_notes.xhtml#id311 .section}
### Features

-   An update of [`eth-tester`{.docutils .literal .notranslate}]{.pre}
    includes a change of the default fork from Constantinople to Muir
    Glacier.
    [#1636](https://github.com/ethereum/web3.py/issues/1636){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1636\]]{.link-target}
:::

::: {#release_notes.xhtml#id312 .section}
### Bugfixes

-   [`my_contract.events.MyEvent`{.docutils .literal
    .notranslate}]{.pre} was incorrectly annotated so that
    [`MyEvent`{.docutils .literal .notranslate}]{.pre} was marked as a
    [`ContractEvent`{.docutils .literal .notranslate}]{.pre} instance.
    Fixed to be a class type, i.e., [`Type[ContractEvent]`{.docutils
    .literal .notranslate}]{.pre}.
    ([#1646](https://github.com/ethereum/web3.py/issues/1646){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1646\]]{.link-target})

-   IPCProvider correctly handled [`pathlib.Path`{.docutils .literal
    .notranslate}]{.pre} input, but warned against its type. Fixed to
    permit Path objects in addition to strings.
    ([#1647](https://github.com/ethereum/web3.py/issues/1647){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1647\]]{.link-target})
:::

::: {#release_notes.xhtml#id313 .section}
### Misc

-   [#1636](https://github.com/ethereum/web3.py/issues/1636){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1636\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-9-0-2020-04-30 .section}
## v5.9.0 (2020-04-30)

::: {#release_notes.xhtml#id314 .section}
### Features

-   Upgrade eth-account to use v0.5.2+. eth-account 0.5.2 adds support
    for hd accounts

    Also had to pin eth-keys to get dependencies to resolve.
    ([#1622](https://github.com/ethereum/web3.py/issues/1622){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1622\]]{.link-target})
:::

::: {#release_notes.xhtml#id315 .section}
### Bugfixes

-   Fix local_filter_middleware new entries bug
    ([#1514](https://github.com/ethereum/web3.py/issues/1514){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1514\]]{.link-target})

-   ENS [`name`{.docutils .literal .notranslate}]{.pre} and ENS
    [`address`{.docutils .literal .notranslate}]{.pre} can return
    [`None`{.docutils .literal .notranslate}]{.pre}. Fixes return types.
    ([#1633](https://github.com/ethereum/web3.py/issues/1633){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1633\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-8-0-2020-04-23 .section}
## v5.8.0 (2020-04-23)

::: {#release_notes.xhtml#id316 .section}
### Features

-   Introduced [`list_wallets`{.docutils .literal .notranslate}]{.pre}
    method to the [`GethPersonal`{.docutils .literal
    .notranslate}]{.pre} class.
    ([#1516](https://github.com/ethereum/web3.py/issues/1516){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1516\]]{.link-target})

-   Added block_identifier parameter to
    `<cite>`{=html}ContractConstructor.estimateGas`</cite>`{=html}
    method.
    ([#1588](https://github.com/ethereum/web3.py/issues/1588){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1588\]]{.link-target})

-   Add snake_case methods to Geth and Parity Personal Modules.

    Deprecate camelCase methods.
    ([#1589](https://github.com/ethereum/web3.py/issues/1589){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1589\]]{.link-target})

-   Added new weighted keyword argument to the time based gas price
    strategy.

    If [`True`{.docutils .literal .notranslate}]{.pre}, it will more
    give more weight to more recent block times.
    ([#1614](https://github.com/ethereum/web3.py/issues/1614){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1614\]]{.link-target})

-   Adds support for Solidity's new(ish) receive function.

    Adds a new contract API that mirrors the existing fallback API:
    [`contract.receive`{.docutils .literal .notranslate}]{.pre}
    ([#1623](https://github.com/ethereum/web3.py/issues/1623){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1623\]]{.link-target})
:::

::: {#release_notes.xhtml#id317 .section}
### Bugfixes

-   Fixed hasattr overloader method in the web3.ContractEvent,
    web3.ContractFunction, and web3.ContractCaller classes by
    implementing a try/except handler that returns False if an exception
    is raised in the \_\_getattr\_\_ overloader method (since
    \_\_getattr\_\_ HAS to be called in every \_\_hasattr\_\_ call).

    Created two new Exception classes, 'ABIEventFunctionNotFound' and
    'ABIFunctionNotFound', which inherit from both AttributeError and
    MismatchedABI, and replaced the MismatchedABI raises in
    ContractEvent, ContractFunction, and ContractCaller with a raise to
    the created class in the \_\_getattr\_\_ overloader method of the
    object.
    ([#1594](https://github.com/ethereum/web3.py/issues/1594){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1594\]]{.link-target})

-   Change return type of rpc_gas_price_strategy from int to Wei
    ([#1612](https://github.com/ethereum/web3.py/issues/1612){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1612\]]{.link-target})
:::

::: {#release_notes.xhtml#id318 .section}
### Improved Documentation

-   Fix typo in "Internals" docs. Changed asyncronous --\> asynchronous
    ([#1607](https://github.com/ethereum/web3.py/issues/1607){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1607\]]{.link-target})

-   Improve documentation that introduces and troubleshoots Providers.
    ([#1609](https://github.com/ethereum/web3.py/issues/1609){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1609\]]{.link-target})

-   Add documentation for when to use each transaction method.
    ([#1610](https://github.com/ethereum/web3.py/issues/1610){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1610\]]{.link-target})

-   Remove incorrect web3 for w3 in doc example
    ([#1615](https://github.com/ethereum/web3.py/issues/1615){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1615\]]{.link-target})

-   Add examples for using web3.contract via the ethpm module.
    ([#1617](https://github.com/ethereum/web3.py/issues/1617){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1617\]]{.link-target})

-   Add dark mode to documentation. Also fixes a bunch of formatting
    issues in docs.
    ([#1626](https://github.com/ethereum/web3.py/issues/1626){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1626\]]{.link-target})
:::

::: {#release_notes.xhtml#id319 .section}
### Misc

-   [#1545](https://github.com/ethereum/web3.py/issues/1545){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1545\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-7-0-2020-03-16 .section}
## v5.7.0 (2020-03-16)

::: {#release_notes.xhtml#id320 .section}
### Features

-   Add snake_case methods for the net module

    Also moved net module to use ModuleV2 instead of Module
    ([#1592](https://github.com/ethereum/web3.py/issues/1592){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1592\]]{.link-target})
:::

::: {#release_notes.xhtml#id321 .section}
### Bugfixes

-   Fix return type of eth_getCode. Changed from Hexstr to HexBytes.
    ([#1601](https://github.com/ethereum/web3.py/issues/1601){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1601\]]{.link-target})
:::

::: {#release_notes.xhtml#id322 .section}
### Misc

-   [#1590](https://github.com/ethereum/web3.py/issues/1590){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1590\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-6-0-2020-02-26 .section}
## v5.6.0 (2020-02-26)

::: {#release_notes.xhtml#id323 .section}
### Features

-   Add snake_case methods to Geth Miner class, deprecate camelCase
    methods
    ([#1579](https://github.com/ethereum/web3.py/issues/1579){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1579\]]{.link-target})

-   Add snake_case methods for the net module, deprecate camelCase
    methods
    ([#1581](https://github.com/ethereum/web3.py/issues/1581){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1581\]]{.link-target})

-   Add PEP561 type marker
    ([#1583](https://github.com/ethereum/web3.py/issues/1583){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1583\]]{.link-target})
:::

::: {#release_notes.xhtml#id324 .section}
### Bugfixes

-   Increase replacement tx minimum gas price bump

    Parity/OpenEthereum requires a replacement transaction's gas to be a
    minimum of 12.5% higher than the original (vs. Geth's 10%).
    ([#1570](https://github.com/ethereum/web3.py/issues/1570){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1570\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-5-1-2020-02-10 .section}
## v5.5.1 (2020-02-10)

::: {#release_notes.xhtml#id325 .section}
### Improved Documentation

-   Documents the `<cite>`{=html}getUncleCount`</cite>`{=html} method.
    ([#1534](https://github.com/ethereum/web3.py/issues/1534){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1534\]]{.link-target})
:::

::: {#release_notes.xhtml#id326 .section}
### Misc

-   [#1576](https://github.com/ethereum/web3.py/issues/1576){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1576\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-5-0-2020-02-03 .section}
## v5.5.0 (2020-02-03)

::: {#release_notes.xhtml#id327 .section}
### Features

-   ENS had to release a new registry to push a bugfix. See [this
    article](https://medium.com/the-ethereum-name-service/ens-registry-migration-bug-fix-new-features-64379193a5a){.reference
    .external}[
    \[https://medium.com/the-ethereum-name-service/ens-registry-migration-bug-fix-new-features-64379193a5a\]]{.link-target}
    for background information. web3.py uses the new registry for all
    default ENS interactions, now.
    ([#1573](https://github.com/ethereum/web3.py/issues/1573){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1573\]]{.link-target})
:::

::: {#release_notes.xhtml#id328 .section}
### Bugfixes

-   Minor bugfix in how ContractCaller looks up abi functions.
    ([#1552](https://github.com/ethereum/web3.py/issues/1552){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1552\]]{.link-target})

-   Update modules to use compatible typing-extensions import.
    ([#1554](https://github.com/ethereum/web3.py/issues/1554){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1554\]]{.link-target})

-   Make 'from' and 'to' fields checksum addresses in returned
    transaction receipts
    ([#1562](https://github.com/ethereum/web3.py/issues/1562){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1562\]]{.link-target})

-   Use local Trinity's IPC socket if it is available, for newer
    versions of Trinity.
    ([#1563](https://github.com/ethereum/web3.py/issues/1563){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1563\]]{.link-target})
:::

::: {#release_notes.xhtml#id329 .section}
### Improved Documentation

-   Add Matomo Tracking to Docs site.

    Matomo is an Open Source web analytics platform that allows us to
    get better insights and optimize for our audience without the
    negative consequences of other compareable platforms.

    Read more:
    [https://matomo.org/why-matomo/](https://matomo.org/why-matomo/){.reference
    .external}
    ([#1541](https://github.com/ethereum/web3.py/issues/1541){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1541\]]{.link-target})

-   Fix web3 typo in docs
    ([#1559](https://github.com/ethereum/web3.py/issues/1559){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1559\]]{.link-target})
:::

::: {#release_notes.xhtml#id330 .section}
### Misc

-   [#1521](https://github.com/ethereum/web3.py/issues/1521){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1521\]]{.link-target},
    [#1546](https://github.com/ethereum/web3.py/issues/1546){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1546\]]{.link-target},
    [#1571](https://github.com/ethereum/web3.py/issues/1571){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1571\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-4-0-2019-12-06 .section}
## v5.4.0 (2019-12-06)

::: {#release_notes.xhtml#id331 .section}
### Features

-   Add \_\_str\_\_ to IPCProvider
    ([#1536](https://github.com/ethereum/web3.py/issues/1536){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1536\]]{.link-target})
:::

::: {#release_notes.xhtml#id332 .section}
### Bugfixes

-   Add required typing-extensions library to setup.py
    ([#1544](https://github.com/ethereum/web3.py/issues/1544){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1544\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#v5-3-1-2019-12-05 .section}
## v5.3.1 (2019-12-05)

::: {#release_notes.xhtml#id333 .section}
### Bugfixes

-   Only apply hexbytes formatting to r and s values in transaction if
    present
    ([#1531](https://github.com/ethereum/web3.py/issues/1531){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1531\]]{.link-target})

-   Update eth-utils dependency which contains mypy bugfix.
    ([#1537](https://github.com/ethereum/web3.py/issues/1537){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1537\]]{.link-target})
:::

::: {#release_notes.xhtml#id334 .section}
### Improved Documentation

-   Update Contract Event documentation to show correct example
    ([#1515](https://github.com/ethereum/web3.py/issues/1515){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1515\]]{.link-target})

-   Add documentation to methods that raise an error in v5 instead of
    returning [`None`{.docutils .literal .notranslate}]{.pre}
    ([#1527](https://github.com/ethereum/web3.py/issues/1527){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1527\]]{.link-target})
:::

::: {#release_notes.xhtml#id335 .section}
### Misc

-   [#1518](https://github.com/ethereum/web3.py/issues/1518){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1518\]]{.link-target},
    [#1532](https://github.com/ethereum/web3.py/issues/1532){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1532\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-3-0-2019-11-14 .section}
## v5.3.0 (2019-11-14)

::: {#release_notes.xhtml#id336 .section}
### Features

-   Support handling ENS domains in ERC1319 URIs.
    ([#1489](https://github.com/ethereum/web3.py/issues/1489){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1489\]]{.link-target})
:::

::: {#release_notes.xhtml#id337 .section}
### Bugfixes

-   Make local block filter return empty list when when no blocks mined
    ([#1255](https://github.com/ethereum/web3.py/issues/1255){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1255\]]{.link-target})

-   Google protobuf dependency was updated to
    `<cite>`{=html}3.10.0`</cite>`{=html}
    ([#1493](https://github.com/ethereum/web3.py/issues/1493){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1493\]]{.link-target})

-   Infura websocket provider works when no secret key is present
    ([#1501](https://github.com/ethereum/web3.py/issues/1501){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1501\]]{.link-target})
:::

::: {#release_notes.xhtml#id338 .section}
### Improved Documentation

-   Update Quickstart instructions to use the auto Infura module instead
    of the more complicated web3 auto module
    ([#1482](https://github.com/ethereum/web3.py/issues/1482){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1482\]]{.link-target})

-   Remove outdated py.test command from readme
    ([#1483](https://github.com/ethereum/web3.py/issues/1483){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1483\]]{.link-target})
:::

::: {#release_notes.xhtml#id339 .section}
### Misc

-   [#1461](https://github.com/ethereum/web3.py/issues/1461){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1461\]]{.link-target},
    [#1471](https://github.com/ethereum/web3.py/issues/1471){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1471\]]{.link-target},
    [#1475](https://github.com/ethereum/web3.py/issues/1475){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1475\]]{.link-target},
    [#1476](https://github.com/ethereum/web3.py/issues/1476){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1476\]]{.link-target},
    [#1479](https://github.com/ethereum/web3.py/issues/1479){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1479\]]{.link-target},
    [#1488](https://github.com/ethereum/web3.py/issues/1488){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1488\]]{.link-target},
    [#1492](https://github.com/ethereum/web3.py/issues/1492){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1492\]]{.link-target},
    [#1498](https://github.com/ethereum/web3.py/issues/1498){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1498\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-2-2-2019-10-21 .section}
## v5.2.2 (2019-10-21)

::: {#release_notes.xhtml#id340 .section}
### Features

-   Add poll_latency to waitForTransactionReceipt
    ([#1453](https://github.com/ethereum/web3.py/issues/1453){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1453\]]{.link-target})
:::

::: {#release_notes.xhtml#id341 .section}
### Bugfixes

-   Fix flaky Parity whisper module test
    ([#1473](https://github.com/ethereum/web3.py/issues/1473){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1473\]]{.link-target})
:::

::: {#release_notes.xhtml#id342 .section}
### Misc

-   [#1472](https://github.com/ethereum/web3.py/issues/1472){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1472\]]{.link-target},
    [#1474](https://github.com/ethereum/web3.py/issues/1474){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1474\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-2-1-2019-10-17 .section}
## v5.2.1 (2019-10-17)

::: {#release_notes.xhtml#id343 .section}
### Improved Documentation

-   Update documentation for unlock account duration
    ([#1464](https://github.com/ethereum/web3.py/issues/1464){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1464\]]{.link-target})

-   Clarify module installation command for OSX\>=10.15
    ([#1467](https://github.com/ethereum/web3.py/issues/1467){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1467\]]{.link-target})
:::

::: {#release_notes.xhtml#id344 .section}
### Misc

-   [#1468](https://github.com/ethereum/web3.py/issues/1468){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1468\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-2-0-2019-09-26 .section}
## v5.2.0 (2019-09-26)

::: {#release_notes.xhtml#id345 .section}
### Features

-   Add [`enable_strict_bytes_type_checking`{.docutils .literal
    .notranslate}]{.pre} flag to web3 instance
    ([#1419](https://github.com/ethereum/web3.py/issues/1419){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1419\]]{.link-target})

-   Move Geth Whisper methods to snake case and deprecate camel case
    methods
    ([#1433](https://github.com/ethereum/web3.py/issues/1433){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1433\]]{.link-target})
:::

::: {#release_notes.xhtml#id346 .section}
### Bugfixes

-   Add null check to logsbloom formatter
    ([#1445](https://github.com/ethereum/web3.py/issues/1445){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1445\]]{.link-target})
:::

::: {#release_notes.xhtml#id347 .section}
### Improved Documentation

-   Reformat autogenerated towncrier release notes
    ([#1460](https://github.com/ethereum/web3.py/issues/1460){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1460\]]{.link-target})
:::
:::

::: {#release_notes.xhtml#web3-5-1-0-2019-09-18 .section}
## Web3 5.1.0 (2019-09-18)

::: {#release_notes.xhtml#id348 .section}
### Features

-   Add [`contract_types`{.docutils .literal .notranslate}]{.pre}
    property to [`Package`{.docutils .literal .notranslate}]{.pre}
    class.
    ([#1440](https://github.com/ethereum/web3.py/issues/1440){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1440\]]{.link-target})
:::

::: {#release_notes.xhtml#id349 .section}
### Bugfixes

-   Fix flaky parity integration test in the whisper module
    ([#1147](https://github.com/ethereum/web3.py/issues/1147){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1147\]]{.link-target})
:::

::: {#release_notes.xhtml#id350 .section}
### Improved Documentation

-   Remove whitespace, move [`topics`{.docutils .literal
    .notranslate}]{.pre} key -\> [`topic`{.docutils .literal
    .notranslate}]{.pre} in Geth docs
    ([#1425](https://github.com/ethereum/web3.py/issues/1425){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1425\]]{.link-target})

-   Enforce stricter doc checking, turning warnings into errors to fail
    CI builds to catch issues quickly.

    Add missing [`web3.tools.rst`{.docutils .literal
    .notranslate}]{.pre} to the table of contents and fix incorrectly
    formatted JSON example.
    ([#1437](https://github.com/ethereum/web3.py/issues/1437){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1437\]]{.link-target})

-   Add example using Geth POA Middleware with Infura Rinkeby Node
    ([#1444](https://github.com/ethereum/web3.py/issues/1444){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1444\]]{.link-target})
:::

::: {#release_notes.xhtml#id351 .section}
### Misc

-   [#1446](https://github.com/ethereum/web3.py/issues/1446){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1446\]]{.link-target},
    [#1451](https://github.com/ethereum/web3.py/issues/1451){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1451\]]{.link-target}
:::
:::

::: {#release_notes.xhtml#v5-0-2 .section}
## v5.0.2

Released August 22, 2019

-   Bugfixes

    -   \[ethPM\] Fix bug in package id and release id fetching
        strategy -
        [#1427](https://github.com/ethereum/web3.py/pull/1427){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1427\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-1 .section}
## v5.0.1

Released August 15, 2019

-   Bugfixes

    -   \[ethPM\] Add begin/close chars to package name regex -
        [#1418](https://github.com/ethereum/web3.py/pull/1418){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1418\]]{.link-target}

    -   \[ethPM\] Update deployments to work when only abi available -
        [#1417](https://github.com/ethereum/web3.py/pull/1417){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1417\]]{.link-target}

    -   Fix tuples handled incorrectly in
        [`decode_function_input`{.docutils .literal
        .notranslate}]{.pre} -
        [#1410](https://github.com/ethereum/web3.py/pull/1410){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1410\]]{.link-target}

-   Misc

    -   Eliminate [`signTransaction`{.docutils .literal
        .notranslate}]{.pre} warning -
        [#1404](https://github.com/ethereum/web3.py/pull/1404){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1404\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0 .section}
## v5.0.0

Released August 1, 2019

-   Features

    -   [`web3.eth.chainId`{.docutils .literal .notranslate}]{.pre} now
        returns an integer instead of hex -
        [#1394](https://github.com/ethereum/web3.py/pull/1394){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1394\]]{.link-target}

-   Bugfixes

    -   Deprecation Warnings now show for methods that have a
        [`@combomethod`{.docutils .literal .notranslate}]{.pre}
        decorator -
        [#1401](https://github.com/ethereum/web3.py/pull/1401){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1401\]]{.link-target}

-   Misc

    -   \[ethPM\] Add ethPM to the docker file -
        [#1405](https://github.com/ethereum/web3.py/pull/1405){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1405\]]{.link-target}

-   Docs

    -   Docs are updated to use checksummed addresses -
        [#1390](https://github.com/ethereum/web3.py/pull/1390){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1390\]]{.link-target}

    -   Minor doc formatting fixes -
        [#1338](https://github.com/ethereum/web3.py/pull/1338){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1338\]]{.link-target}
        &
        [#1345](https://github.com/ethereum/web3.py/pull/1345){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1345\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-beta-5 .section}
## v5.0.0-beta.5

Released July 31, 2019

*This is intended to be the final release before the stable v5 release.*

-   Features

    -   Parity operating mode can be read and set -
        [#1355](https://github.com/ethereum/web3.py/pull/1355){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1355\]]{.link-target}

    -   Process a single event log, instead of a whole transaction
        receipt -
        [#1354](https://github.com/ethereum/web3.py/pull/1354){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1354\]]{.link-target}

-   Docs

    -   Remove doctest dependency on ethtoken -
        [#1395](https://github.com/ethereum/web3.py/pull/1395){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1395\]]{.link-target}

-   Bugfixes

    -   \[ethPM\] Bypass IPFS validation for large files -
        [#1393](https://github.com/ethereum/web3.py/pull/1393){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1393\]]{.link-target}

-   Misc

    -   \[ethPM\] Update default Registry solidity contract -
        [#1400](https://github.com/ethereum/web3.py/pull/1400){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1400\]]{.link-target}

    -   \[ethPM\] Update web3.pm to use new simple Registry
        implementation -
        [#1398](https://github.com/ethereum/web3.py/pull/1398){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1398\]]{.link-target}

    -   Update dependency requirement formatting for releasing -
        [#1403](https://github.com/ethereum/web3.py/pull/1403){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1403\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-beta-4 .section}
## v5.0.0-beta.4

Released July 18,2019

-   Features

    -   \[ethPM\] Update registry uri to support basic uris w/o package
        id -
        [#1389](https://github.com/ethereum/web3.py/pull/1389){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1389\]]{.link-target}

-   Docs

    -   Clarify in docs the return of
        [`Eth.sendRawTransaction()`{.docutils .literal
        .notranslate}]{.pre} as a HexBytes object, not a string. -
        [#1384](https://github.com/ethereum/web3.py/pull/1384){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1384\]]{.link-target}

-   Misc

    -   \[ethPM\] Migrate tests over from pytest-ethereum -
        [#1385](https://github.com/ethereum/web3.py/pull/1385){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1385\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-beta-3 .section}
## v5.0.0-beta.3

Released July 15, 2019

-   Features

    -   Add eth_getProof support -
        [#1185](https://github.com/ethereum/web3.py/pull/1185){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1185\]]{.link-target}

    -   Implement web3.pm.get_local_package() -
        [#1372](https://github.com/ethereum/web3.py/pull/1372){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1372\]]{.link-target}

    -   Update registry URIs to support chain IDs -
        [#1382](https://github.com/ethereum/web3.py/pull/1382){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1382\]]{.link-target}

    -   Add error flags to [`event.processReceipt`{.docutils .literal
        .notranslate}]{.pre} -
        [#1366](https://github.com/ethereum/web3.py/pull/1366){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1366\]]{.link-target}

-   Bugfixes

    -   Remove full IDNA processing in favor of UTS46 -
        [#1364](https://github.com/ethereum/web3.py/pull/1364){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1364\]]{.link-target}

-   Misc

    -   Migrate py-ethpm library to web3/ethpm -
        [#1379](https://github.com/ethereum/web3.py/pull/1379){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1379\]]{.link-target}

    -   Relax canonical address requirement in ethPM -
        [#1380](https://github.com/ethereum/web3.py/pull/1380){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1380\]]{.link-target}

    -   Replace ethPM's infura strategy with web3's native infura
        support -
        [#1383](https://github.com/ethereum/web3.py/pull/1383){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1383\]]{.link-target}

    -   Change [`combine_argument_formatters`{.docutils .literal
        .notranslate}]{.pre} to
        [`apply_formatters_to_sequence`{.docutils .literal
        .notranslate}]{.pre} -
        [#1360](https://github.com/ethereum/web3.py/pull/1360){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1360\]]{.link-target}

    -   Move [`pytest.xfail`{.docutils .literal .notranslate}]{.pre}
        instances to [`@pytest.mark.xfail`{.docutils .literal
        .notranslate}]{.pre} -
        [#1376](https://github.com/ethereum/web3.py/pull/1376){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1376\]]{.link-target}

    -   Change [`net.version`{.docutils .literal .notranslate}]{.pre} to
        [`eth.chainId`{.docutils .literal .notranslate}]{.pre} in
        default transaction params -
        [#1378](https://github.com/ethereum/web3.py/pull/1378){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1378\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-beta-2 .section}
## v5.0.0-beta.2

Released May 13, 2019

-   Features

    -   Mark deprecated sha3 method as static -
        [#1350](https://github.com/ethereum/web3.py/pull/1350){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1350\]]{.link-target}

    -   Upgrade to eth-account v0.4.0 -
        [#1348](https://github.com/ethereum/web3.py/pull/1348){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1348\]]{.link-target}

-   Docs

    -   Add note about web3\[tester\] in documentation -
        [#1325](https://github.com/ethereum/web3.py/pull/1325){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1325\]]{.link-target}

-   Misc

    -   Replace [`web3._utils.toolz`{.docutils .literal
        .notranslate}]{.pre} imports with [`eth_utils.toolz`{.docutils
        .literal .notranslate}]{.pre} -
        [#1317](https://github.com/ethereum/web3.py/pull/1317){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1317\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-beta-1 .section}
## v5.0.0-beta.1

Released May 6, 2019

-   Features

    -   Add support for tilda in provider IPC Path -
        [#1049](https://github.com/ethereum/web3.py/pull/1049){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1049\]]{.link-target}

    -   EIP 712 Signing Supported -
        [#1319](https://github.com/ethereum/web3.py/pull/1319){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1319\]]{.link-target}

-   Docs

    -   Update contract example to use [`compile_standard`{.docutils
        .literal .notranslate}]{.pre} -
        [#1263](https://github.com/ethereum/web3.py/pull/1263){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1263\]]{.link-target}

    -   Fix typo in middleware docs -
        [#1339](https://github.com/ethereum/web3.py/pull/1339){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1339\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-alpha-11 .section}
## v5.0.0-alpha.11

Released April 24, 2019

-   Docs

    -   Add documentation for web3.py unit tests -
        [#1324](https://github.com/ethereum/web3.py/pull/1324){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1324\]]{.link-target}

-   Misc

    -   Update deprecated collections.abc imports -
        [#1334](https://github.com/ethereum/web3.py/pull/1334){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1334\]]{.link-target}

    -   Fix documentation typo -
        [#1335](https://github.com/ethereum/web3.py/pull/1335){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1335\]]{.link-target}

    -   Upgrade eth-tester version -
        [#1332](https://github.com/ethereum/web3.py/pull/1332){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1332\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-alpha-10 .section}
## v5.0.0-alpha.10

Released April 15, 2019

-   Features

    -   Add getLogs by blockHash -
        [#1269](https://github.com/ethereum/web3.py/pull/1269){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1269\]]{.link-target}

    -   Implement chainId endpoint -
        [#1295](https://github.com/ethereum/web3.py/pull/1295){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1295\]]{.link-target}

    -   Moved non-standard JSON-RPC endpoints to applicable Parity/Geth
        docs. Deprecated [`web3.version`{.docutils .literal
        .notranslate}]{.pre} for [`web3.api`{.docutils .literal
        .notranslate}]{.pre} -
        [#1290](https://github.com/ethereum/web3.py/pull/1290){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1290\]]{.link-target}

    -   Moved Whisper endpoints to applicable Geth or Parity namespace -
        [#1308](https://github.com/ethereum/web3.py/pull/1308){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1308\]]{.link-target}

    -   Added support for Goerli provider -
        [#1286](https://github.com/ethereum/web3.py/pull/1286){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1286\]]{.link-target}

    -   Added addReservedPeer to Parity module -
        [#1311](https://github.com/ethereum/web3.py/pull/1311){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1311\]]{.link-target}

-   Bugfixes

    -   Cast gas price values to integers in gas strategies -
        [#1297](https://github.com/ethereum/web3.py/pull/1297){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1297\]]{.link-target}

    -   Missing constructor function no longer ignores constructor
        args -
        [#1316](https://github.com/ethereum/web3.py/pull/1316){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1316\]]{.link-target}

-   Misc

    -   Require eth-utils \>= 1.4, downgrade Go version for integration
        tests -
        [#1310](https://github.com/ethereum/web3.py/pull/1310){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1310\]]{.link-target}

    -   Fix doc build warnings -
        [#1331](https://github.com/ethereum/web3.py/pull/1331){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1331\]]{.link-target}

    -   Zip Fixture data -
        [#1307](https://github.com/ethereum/web3.py/pull/1307){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1307\]]{.link-target}

    -   Update Geth version for integration tests -
        [#1301](https://github.com/ethereum/web3.py/pull/1301){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1301\]]{.link-target}

    -   Remove unneeded testrpc -
        [#1322](https://github.com/ethereum/web3.py/pull/1322){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1322\]]{.link-target}

    -   Add ContractCaller docs to v5 migration guide -
        [#1323](https://github.com/ethereum/web3.py/pull/1323){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1323\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-alpha-9 .section}
## v5.0.0-alpha.9

Released March 26, 2019

-   Breaking Changes

    -   Raise error if there is no Infura API Key -
        [#1294](https://github.com/ethereum/web3.py/pull/1294){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1294\]]{.link-target}
        & -
        [#1299](https://github.com/ethereum/web3.py/pull/1299){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1299\]]{.link-target}

-   Misc

    -   Upgraded Parity version for integration testing -
        [#1292](https://github.com/ethereum/web3.py/pull/1292){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1292\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-alpha-8 .section}
## v5.0.0-alpha.8

Released March 20, 2019

-   Breaking Changes

    -   Removed [`web3/utils`{.docutils .literal .notranslate}]{.pre}
        directory in favor of [`web3/_utils`{.docutils .literal
        .notranslate}]{.pre} -
        [#1282](https://github.com/ethereum/web3.py/pull/1282){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1282\]]{.link-target}

    -   Relocated personal RPC endpoints to Parity and Geth class -
        [#1211](https://github.com/ethereum/web3.py/pull/1211){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1211\]]{.link-target}

    -   Deprecated [`web3.net.chainId()`{.docutils .literal
        .notranslate}]{.pre}, [`web3.eth.getCompilers()`{.docutils
        .literal .notranslate}]{.pre}, and
        [`web3.eth.getTransactionFromBlock()`{.docutils .literal
        .notranslate}]{.pre}. Removed
        [`web3.eth.enableUnauditedFeatures()`{.docutils .literal
        .notranslate}]{.pre} -
        [#1270](https://github.com/ethereum/web3.py/pull/1270){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1270\]]{.link-target}

    -   Relocated eth_protocolVersion and web3_clientVersion -
        [#1274](https://github.com/ethereum/web3.py/pull/1274){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1274\]]{.link-target}

    -   Relocated [`web3.txpool`{.docutils .literal .notranslate}]{.pre}
        to [`web3.geth.txpool`{.docutils .literal .notranslate}]{.pre} -
        [#1275](https://github.com/ethereum/web3.py/pull/1275){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1275\]]{.link-target}

    -   Relocated admin module to Geth namespace -
        [#1288](https://github.com/ethereum/web3.py/pull/1288){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1288\]]{.link-target}

    -   Relocated miner module to Geth namespace -
        [#1287](https://github.com/ethereum/web3.py/pull/1287){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1287\]]{.link-target}

-   Features

    -   Implement [`eth_submitHashrate`{.docutils .literal
        .notranslate}]{.pre} and [`eth_submitWork`{.docutils .literal
        .notranslate}]{.pre} JSONRPC endpoints. -
        [#1280](https://github.com/ethereum/web3.py/pull/1280){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1280\]]{.link-target}

    -   Implement [`web3.eth.signTransaction`{.docutils .literal
        .notranslate}]{.pre} -
        [#1277](https://github.com/ethereum/web3.py/pull/1277){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1277\]]{.link-target}

-   Docs

    -   Added v5 migration docs -
        [#1284](https://github.com/ethereum/web3.py/pull/1284){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1284\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-alpha-7 .section}
## v5.0.0-alpha.7

Released March 11, 2019

-   Breaking Changes

    -   Updated JSON-RPC calls that lookup txs or blocks to raise an
        error if lookup fails -
        [#1218](https://github.com/ethereum/web3.py/pull/1218){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1218\]]{.link-target}
        and
        [#1268](https://github.com/ethereum/web3.py/pull/1268){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1268\]]{.link-target}

-   Features

    -   Tuple ABI support -
        [#1235](https://github.com/ethereum/web3.py/pull/1235){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1235\]]{.link-target}

-   Bugfixes

    -   One last [`middleware_stack`{.docutils .literal
        .notranslate}]{.pre} was still hanging on. Changed to
        [`middleware_onion`{.docutils .literal .notranslate}]{.pre} -
        [#1262](https://github.com/ethereum/web3.py/pull/1262){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1262\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-alpha-6 .section}
## v5.0.0-alpha.6

Released February 25th, 2019

-   Features

    -   New [`NoABIFound`{.docutils .literal .notranslate}]{.pre} error
        for cases where there is no ABI -
        [#1247](https://github.com/ethereum/web3.py/pull/1247){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1247\]]{.link-target}

-   Misc

    -   Interact with Infura using an API Key. Key will be required
        after March 27th. -
        [#1232](https://github.com/ethereum/web3.py/pull/1232){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1232\]]{.link-target}

    -   Remove [`process_type`{.docutils .literal .notranslate}]{.pre}
        utility function in favor of eth-abi functionality -
        [#1249](https://github.com/ethereum/web3.py/pull/1249){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1249\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-alpha-5 .section}
## v5.0.0-alpha.5

Released February 13th, 2019

-   Breaking Changes

    -   Remove deprecated [`buildTransaction`{.docutils .literal
        .notranslate}]{.pre}, [`call`{.docutils .literal
        .notranslate}]{.pre}, [`deploy`{.docutils .literal
        .notranslate}]{.pre}, [`estimateGas`{.docutils .literal
        .notranslate}]{.pre}, and [`transact`{.docutils .literal
        .notranslate}]{.pre} methods -
        [#1232](https://github.com/ethereum/web3.py/pull/1232){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1232\]]{.link-target}

-   Features

    -   Adds [`Web3.toJSON`{.docutils .literal .notranslate}]{.pre}
        method -
        [#1173](https://github.com/ethereum/web3.py/pull/1173){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1173\]]{.link-target}

    -   Contract Caller API Implemented -
        [#1227](https://github.com/ethereum/web3.py/pull/1227){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1227\]]{.link-target}

    -   Add Geth POA middleware to use Rinkeby with Infura Auto -
        [#1234](https://github.com/ethereum/web3.py/pull/1234){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1234\]]{.link-target}

    -   Add manifest and input argument validation to
        [`pm.release_package()`{.docutils .literal
        .notranslate}]{.pre} -
        [#1237](https://github.com/ethereum/web3.py/pull/1237){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1237\]]{.link-target}

-   Misc

    -   Clean up intro and block/tx sections in Filter docs -
        [#1223](https://github.com/ethereum/web3.py/pull/1223){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1223\]]{.link-target}

    -   Remove unnecessary [`EncodingError`{.docutils .literal
        .notranslate}]{.pre} exception catching -
        [#1224](https://github.com/ethereum/web3.py/pull/1224){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1224\]]{.link-target}

    -   Improvements to [`merge_args_and_kwargs`{.docutils .literal
        .notranslate}]{.pre} utility function -
        [#1228](https://github.com/ethereum/web3.py/pull/1228){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1228\]]{.link-target}

    -   Update vyper registry assets -
        [#1242](https://github.com/ethereum/web3.py/pull/1242){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1242\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-alpha-4 .section}
## v5.0.0-alpha.4

Released January 23rd, 2019

-   Breaking Changes

    -   Rename [`middleware_stack`{.docutils .literal
        .notranslate}]{.pre} to [`middleware_onion`{.docutils .literal
        .notranslate}]{.pre} -
        [#1210](https://github.com/ethereum/web3.py/pull/1210){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1210\]]{.link-target}

    -   Drop already deprecated [`web3.soliditySha3`{.docutils .literal
        .notranslate}]{.pre} -
        [#1217](https://github.com/ethereum/web3.py/pull/1217){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1217\]]{.link-target}

    -   ENS: Stop inferring [`.eth`{.docutils .literal
        .notranslate}]{.pre} TLD on domain names -
        [#1205](https://github.com/ethereum/web3.py/pull/1205){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1205\]]{.link-target}

-   Bugfixes

    -   Validate [`ethereum_tester`{.docutils .literal
        .notranslate}]{.pre} class in
        [`EthereumTesterProvider`{.docutils .literal
        .notranslate}]{.pre} -
        [#1217](https://github.com/ethereum/web3.py/pull/1217){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1217\]]{.link-target}

    -   Support [`getLogs()`{.docutils .literal .notranslate}]{.pre}
        method without creating filters -
        [#1192](https://github.com/ethereum/web3.py/pull/1192){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1192\]]{.link-target}

-   Features

    -   Stablize the [`PM`{.docutils .literal .notranslate}]{.pre}
        module -
        [#1125](https://github.com/ethereum/web3.py/pull/1125){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1125\]]{.link-target}

    -   Implement async [`Version`{.docutils .literal
        .notranslate}]{.pre} module -
        [#1166](https://github.com/ethereum/web3.py/pull/1166){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1166\]]{.link-target}

-   Misc

    -   Update .gitignore to ignore [`.DS_Store`{.docutils .literal
        .notranslate}]{.pre} and [`.mypy_cache/`{.docutils .literal
        .notranslate}]{.pre} -
        [#1215](https://github.com/ethereum/web3.py/pull/1215){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1215\]]{.link-target}

    -   Change CircleCI badge link to CircleCI project -
        [#1214](https://github.com/ethereum/web3.py/pull/1214){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1214\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-alpha-3 .section}
## v5.0.0-alpha.3

Released January 15th, 2019

-   Breaking Changes

    -   Remove [`web3.miner.hashrate`{.docutils .literal
        .notranslate}]{.pre} and [`web3.version.network`{.docutils
        .literal .notranslate}]{.pre} -
        [#1198](https://github.com/ethereum/web3.py/pull/1198){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1198\]]{.link-target}

    -   Remove [`web3.providers.tester.EthereumTesterProvider`{.docutils
        .literal .notranslate}]{.pre} and
        [`web3.providers.tester.TestRPCProvider`{.docutils .literal
        .notranslate}]{.pre} -
        [#1199](https://github.com/ethereum/web3.py/pull/1199){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1199\]]{.link-target}

    -   Change [`manager.providers`{.docutils .literal
        .notranslate}]{.pre} from list to single
        [`manager.provider`{.docutils .literal .notranslate}]{.pre} -
        [#1200](https://github.com/ethereum/web3.py/pull/1200){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1200\]]{.link-target}

    -   Replace deprecated [`web3.sha3`{.docutils .literal
        .notranslate}]{.pre} method with [`web3.keccak`{.docutils
        .literal .notranslate}]{.pre} method -
        [#1207](https://github.com/ethereum/web3.py/pull/1207){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1207\]]{.link-target}

    -   Drop auto detect testnets for IPCProvider -
        [#1206](https://github.com/ethereum/web3.py/pull/1206){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1206\]]{.link-target}

-   Bugfixes

    -   Add check to make sure blockHash exists -
        [#1158](https://github.com/ethereum/web3.py/pull/1158){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1158\]]{.link-target}

-   Misc

    -   Remove some unreachable code in
        `<cite>`{=html}providers/base.py`</cite>`{=html} -
        [#1160](https://github.com/ethereum/web3.py/pull/1160){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1160\]]{.link-target}

    -   Migrate tester provider results from middleware to defaults -
        [#1188](https://github.com/ethereum/web3.py/pull/1188){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1188\]]{.link-target}

    -   Fix doc formatting for build_filter method -
        [#1187](https://github.com/ethereum/web3.py/pull/1187){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1187\]]{.link-target}

    -   Add ERC20 example in docs -
        [#1178](https://github.com/ethereum/web3.py/pull/1178){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1178\]]{.link-target}

    -   Code style improvements -
        [#1194](https://github.com/ethereum/web3.py/pull/1194){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1194\]]{.link-target}
        &
        [#1191](https://github.com/ethereum/web3.py/pull/1191){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1191\]]{.link-target}

    -   Convert Web3 instance variables to w3 -
        [#1186](https://github.com/ethereum/web3.py/pull/1186){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1186\]]{.link-target}

    -   Update eth-utils dependencies and clean up other dependencies -
        [#1195](https://github.com/ethereum/web3.py/pull/1195){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1195\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-alpha-2 .section}
## v5.0.0-alpha.2

Released December 20th, 2018

-   Breaking Changes

    -   Remove support for python3.5, drop support for eth-abi v1 -
        [#1163](https://github.com/ethereum/web3.py/pull/1163){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1163\]]{.link-target}

-   Features

    -   Support for custom ReleaseManager was fixed -
        [#1165](https://github.com/ethereum/web3.py/pull/1165){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1165\]]{.link-target}

-   Misc

    -   Fix doctest nonsense with unicorn token -
        [3b2047](https://github.com/ethereum/web3.py/commit/3b20479ea52){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/commit/3b20479ea52\]]{.link-target}

    -   Docs for installing web3 in FreeBSD -
        [#1156](https://github.com/ethereum/web3.py/pull/1156){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1156\]]{.link-target}

    -   Use latest python in readthedocs -
        [#1162](https://github.com/ethereum/web3.py/pull/1162){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1162\]]{.link-target}

    -   Use twine in release script -
        [#1164](https://github.com/ethereum/web3.py/pull/1164){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1164\]]{.link-target}

    -   Upgrade eth-tester, for eth-abi v2 support -
        [#1168](https://github.com/ethereum/web3.py/pull/1168){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1168\]]{.link-target}
:::

::: {#release_notes.xhtml#v5-0-0-alpha-1 .section}
## v5.0.0-alpha.1

Released December 13th, 2018

-   Features

    -   Add Rinkeby and Kovan Infura networks; made mainnet the
        default -
        [#1150](https://github.com/ethereum/web3.py/pull/1150){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1150\]]{.link-target}

    -   Add parity-specific [`listStorageKeys`{.docutils .literal
        .notranslate}]{.pre} RPC -
        [#1145](https://github.com/ethereum/web3.py/pull/1145){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1145\]]{.link-target}

    -   Deprecated [`Web3.soliditySha3`{.docutils .literal
        .notranslate}]{.pre}; use [`Web3.solidityKeccak`{.docutils
        .literal .notranslate}]{.pre} instead. -
        [#1139](https://github.com/ethereum/web3.py/pull/1139){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1139\]]{.link-target}

    -   Add default trinity locations to IPC path guesser -
        [#1121](https://github.com/ethereum/web3.py/pull/1121){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1121\]]{.link-target}

    -   Add wss to [`AutoProvider`{.docutils .literal
        .notranslate}]{.pre} -
        [#1110](https://github.com/ethereum/web3.py/pull/1110){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1110\]]{.link-target}

    -   Add timeout for [`WebsocketProvider`{.docutils .literal
        .notranslate}]{.pre} -
        [#1109](https://github.com/ethereum/web3.py/pull/1109){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1109\]]{.link-target}

    -   Receipt timeout raises [`TimeExhausted`{.docutils .literal
        .notranslate}]{.pre} -
        [#1070](https://github.com/ethereum/web3.py/pull/1070){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1070\]]{.link-target}

    -   Allow specification of block number for
        [`eth_estimateGas`{.docutils .literal .notranslate}]{.pre} -
        [#1046](https://github.com/ethereum/web3.py/pull/1046){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1046\]]{.link-target}

-   Misc

    -   Removed [`web3._utils.six`{.docutils .literal
        .notranslate}]{.pre} support -
        [#1116](https://github.com/ethereum/web3.py/pull/1116){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1116\]]{.link-target}

    -   Upgrade eth-utils to 1.2.0 -
        [#1104](https://github.com/ethereum/web3.py/pull/1104){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1104\]]{.link-target}

    -   Require Python version 3.5.3 or greater -
        [#1095](https://github.com/ethereum/web3.py/pull/1095){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1095\]]{.link-target}

    -   Bump websockets version to 7.0.0 -
        [#1146](https://github.com/ethereum/web3.py/pull/1146){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1146\]]{.link-target}

    -   Bump parity test binary to 1.11.11 -
        [#1064](https://github.com/ethereum/web3.py/pull/1064){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1064\]]{.link-target}
:::

::: {#release_notes.xhtml#v4-8-2 .section}
## v4.8.2

Released November 15, 2018

-   Misc

    -   Reduce unneeded memory usage -
        [#1138](https://github.com/ethereum/web3.py/pull/1138){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1138\]]{.link-target}
:::

::: {#release_notes.xhtml#v4-8-1 .section}
## v4.8.1

Released October 28, 2018

-   Features

    -   Add timeout for WebsocketProvider -
        [#1119](https://github.com/ethereum/web3.py/pull/1119){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1119\]]{.link-target}

    -   Reject transactions that send ether to non-payable contract
        functions -
        [#1115](https://github.com/ethereum/web3.py/pull/1115){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1115\]]{.link-target}

    -   Add Auto Infura Ropsten support: [`from`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`web3.auto.infura.ropsten`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`import`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`w3`{.docutils .literal .notranslate}]{.pre} -
        [#1124](https://github.com/ethereum/web3.py/pull/1124){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1124\]]{.link-target}

    -   Auto-detect trinity IPC file location -
        [#1129](https://github.com/ethereum/web3.py/pull/1129){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1129\]]{.link-target}

-   Misc

    -   Require Python \>=3.5.3 -
        [#1107](https://github.com/ethereum/web3.py/pull/1107){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1107\]]{.link-target}

    -   Upgrade eth-tester and eth-utils -
        [#1085](https://github.com/ethereum/web3.py/pull/1085){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1085\]]{.link-target}

    -   Configure readthedocs dependencies -
        [#1082](https://github.com/ethereum/web3.py/pull/1082){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1082\]]{.link-target}

    -   soliditySha3 docs fixup -
        [#1100](https://github.com/ethereum/web3.py/pull/1100){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1100\]]{.link-target}

    -   Update ropsten faucet links in troubleshooting docs
:::

::: {#release_notes.xhtml#v4-7-2 .section}
## v4.7.2

Released September 25th, 2018

-   Bugfixes

    -   IPC paths starting with [`~`{.docutils .literal
        .notranslate}]{.pre} are appropriately resolved to the home
        directory -
        [#1072](https://github.com/ethereum/web3.py/pull/1072){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1072\]]{.link-target}

    -   You can use the local signing middleware with [[`bytes`{.xref
        .py .py-class .docutils .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#bytes "(in Python v3.14)"){.reference
        .external}[
        \[https://docs.python.org/3/library/stdtypes.html#bytes\]]{.link-target}-type
        addresses -
        [#1069](https://github.com/ethereum/web3.py/pull/1069){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1069\]]{.link-target}
:::

::: {#release_notes.xhtml#v4-7-1 .section}
## v4.7.1

Released September 11th, 2018

-   Bugfixes

    -   [old pip
        bug](https://github.com/pypa/pip/issues/4614){.reference
        .external}[
        \[https://github.com/pypa/pip/issues/4614\]]{.link-target} used
        during release made it impossible for non-windows users to
        install 4.7.0.
:::

::: {#release_notes.xhtml#v4-7-0 .section}
## v4.7.0

Released September 10th, 2018

-   Features

    -   Add traceFilter method to the parity module. -
        [#1051](https://github.com/ethereum/web3.py/pull/1051){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1051\]]{.link-target}

    -   Move [`datastructures`{.xref .py .py-mod .docutils .literal
        .notranslate}]{.pre} to public namespace [`datastructures`{.xref
        .py .py-mod .docutils .literal .notranslate}]{.pre} to improve
        support for type checking. -
        [#1038](https://github.com/ethereum/web3.py/pull/1038){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1038\]]{.link-target}

    -   Optimization to contract calls -
        [#944](https://github.com/ethereum/web3.py/pull/944){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/944\]]{.link-target}

-   Bugfixes

    -   ENS name resolution only attempted on mainnet by default. -
        [#1037](https://github.com/ethereum/web3.py/pull/1037){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1037\]]{.link-target}

    -   Fix attribute access error when attributedict middleware is not
        used. -
        [#1040](https://github.com/ethereum/web3.py/pull/1040){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1040\]]{.link-target}

-   Misc - Upgrade eth-tester to 0.1.0-beta.32, and remove integration
    tests for py-ethereum. - Upgrade eth-hash to 0.2.0 with pycryptodome
    3.6.6 which resolves a vulnerability.
:::

::: {#release_notes.xhtml#v4-6-0 .section}
## v4.6.0

Released Aug 24, 2018

-   Features

    -   Support for Python 3.7, most notably in
        [`WebsocketProvider`{.xref .py .py-class .docutils .literal
        .notranslate}]{.pre} -
        [#996](https://github.com/ethereum/web3.py/pull/996){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/996\]]{.link-target}

    -   You can now decode a transaction's data to its original function
        call and arguments with:
        [[`contract.decode_function_input()`{.xref .py .py-meth
        .docutils .literal
        .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.decode_function_input "web3.contract.Contract.decode_function_input"){.reference
        .internal} -
        [#991](https://github.com/ethereum/web3.py/pull/991){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/991\]]{.link-target}

    -   Support for [[`IPCProvider`{.xref .py .py-class .docutils
        .literal
        .notranslate}]{.pre}](#providers.xhtml#web3.providers.ipc.IPCProvider "web3.providers.ipc.IPCProvider"){.reference
        .internal} in FreeBSD (and more readme docs) -
        [#1008](https://github.com/ethereum/web3.py/pull/1008){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1008\]]{.link-target}

-   Bugfixes

    -   Fix crash in time-based gas strategies with small number of
        transactions -
        [#983](https://github.com/ethereum/web3.py/pull/983){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/983\]]{.link-target}

    -   Fx crash when passing multiple addresses to
        [`w3.eth.getLogs()`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre} -
        [#1005](https://github.com/ethereum/web3.py/pull/1005){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/1005\]]{.link-target}

-   Misc

    -   Disallow configuring filters with both manual and generated
        topic lists -
        [#976](https://github.com/ethereum/web3.py/pull/976){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/976\]]{.link-target}

    -   Add support for the upcoming eth-abi v2, which does ABI string
        decoding differently -
        [#974](https://github.com/ethereum/web3.py/pull/974){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/974\]]{.link-target}

    -   Add a lot more filter tests -
        [#997](https://github.com/ethereum/web3.py/pull/997){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/997\]]{.link-target}

    -   Add more tests for filtering with [`None`{.docutils .literal
        .notranslate}]{.pre}. Note that geth & parity differ here. -
        [#985](https://github.com/ethereum/web3.py/pull/985){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/985\]]{.link-target}

    -   Follow-up on Parity bug that we reported upstream
        ([parity#7816](https://github.com/paritytech/parity-ethereum/issues/7816){.reference
        .external}[
        \[https://github.com/paritytech/parity-ethereum/issues/7816\]]{.link-target}):
        they resolved in 1.10. We removed xfail on that test. -
        [#992](https://github.com/ethereum/web3.py/pull/992){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/992\]]{.link-target}

    -   Docs: add an example of interacting with an ERC20 contract -
        [#995](https://github.com/ethereum/web3.py/pull/995){.reference
        .external}[
        \[https://github.com/ethereum/web3.py/pull/995\]]{.link-target}

    -   A couple doc typo fixes

        > <div>
        >
        > -   [#1006](https://github.com/ethereum/web3.py/pull/1006){.reference
        >     .external}[
        >     \[https://github.com/ethereum/web3.py/pull/1006\]]{.link-target}
        >
        > -   [#1010](https://github.com/ethereum/web3.py/pull/1010){.reference
        >     .external}[
        >     \[https://github.com/ethereum/web3.py/pull/1010\]]{.link-target}
        >
        > </div>
:::

::: {#release_notes.xhtml#v4-5-0 .section}
## v4.5.0

Released July 30, 2018

-   Features

    -   Accept addresses supplied in [[`bytes`{.xref .py .py-class
        .docutils .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#bytes "(in Python v3.14)"){.reference
        .external}[
        \[https://docs.python.org/3/library/stdtypes.html#bytes\]]{.link-target}
        format (which does not provide checksum validation)

    -   Improve estimation of gas prices

-   Bugfixes

    -   Can now use a block number with [`getCode()`{.xref .py .py-meth
        .docutils .literal .notranslate}]{.pre} when connected to
        [[`EthereumTesterProvider`{.xref .py .py-class .docutils
        .literal
        .notranslate}]{.pre}](#providers.xhtml#web3.providers.eth_tester.EthereumTesterProvider "web3.providers.eth_tester.EthereumTesterProvider"){.reference
        .internal} (without crashing)

-   Misc

    -   Test Parity 1.11.7

    -   Parity integration tests upgrade to use sha256 instead of md5

    -   Fix some filter docs

    -   eth-account upgrade to v0.3.0

    -   eth-tester upgrade to v0.1.0-beta.29
:::

::: {#release_notes.xhtml#v4-4-1 .section}
## v4.4.1

Released June 29, 2018

-   Bugfixes

    -   eth-pm package was renamed (old one deleted) which broke the
        web3 release. eth-pm was removed from the web3.py install until
        it's stable.

-   Misc

    -   [[`IPCProvider`{.xref .py .py-class .docutils .literal
        .notranslate}]{.pre}](#providers.xhtml#web3.providers.ipc.IPCProvider "web3.providers.ipc.IPCProvider"){.reference
        .internal} now accepts a [[`pathlib.Path`{.xref .py .py-class
        .docutils .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/pathlib.html#pathlib.Path "(in Python v3.14)"){.reference
        .external}[
        \[https://docs.python.org/3/library/pathlib.html#pathlib.Path\]]{.link-target}
        argument for the IPC path

    -   Docs explaining the new custom autoproviders in web3
:::

::: {#release_notes.xhtml#v4-4-0 .section}
## v4.4.0

Released June 21, 2018

-   Features

    -   Add support for https in WEB3_PROVIDER_URI environment variable

    -   Can send websocket connection parameters in
        [`WebsocketProvider`{.xref .py .py-class .docutils .literal
        .notranslate}]{.pre}

    -   Two new auto-initialization options:

        -   [`from`{.docutils .literal .notranslate}]{.pre}` `{.docutils
            .literal .notranslate}[`web3.auto.gethdev`{.docutils
            .literal .notranslate}]{.pre}` `{.docutils .literal
            .notranslate}[`import`{.docutils .literal
            .notranslate}]{.pre}` `{.docutils .literal
            .notranslate}[`w3`{.docutils .literal .notranslate}]{.pre}

        -   [`from`{.docutils .literal .notranslate}]{.pre}` `{.docutils
            .literal .notranslate}[`web3.auto.infura`{.docutils .literal
            .notranslate}]{.pre}` `{.docutils .literal
            .notranslate}[`import`{.docutils .literal
            .notranslate}]{.pre}` `{.docutils .literal
            .notranslate}[`w3`{.docutils .literal .notranslate}]{.pre}
            (After setting the [`INFURA_API_KEY`{.docutils .literal
            .notranslate}]{.pre} environment variable)

    -   Alpha support for a new package management tool based on
        ethpm-spec

-   Bugfixes

    -   Can now receive large responses in [`WebsocketProvider`{.xref
        .py .py-class .docutils .literal .notranslate}]{.pre} by
        specifying a large [`max_size`{.docutils .literal
        .notranslate}]{.pre} in the websocket connection parameters.

-   Misc

    -   Websockets dependency upgraded to v5

    -   Raise deprecation warning on [`getTransactionFromBlock()`{.xref
        .py .py-meth .docutils .literal .notranslate}]{.pre}

    -   Fix docs for [`waitForTransactionReceipt()`{.xref .py .py-meth
        .docutils .literal .notranslate}]{.pre}

    -   Developer Dockerfile now installs testing dependencies
:::

::: {#release_notes.xhtml#v4-3-0 .section}
## v4.3.0

Released June 6, 2018

-   Features

    -   Support for the ABI types like:
        [fixedMxN](http://solidity.readthedocs.io/en/v0.4.24/abi-spec.html#types){.reference
        .external}[
        \[http://solidity.readthedocs.io/en/v0.4.24/abi-spec.html#types\]]{.link-target}
        which is used by Vyper.

    -   In-flight transaction-signing middleware: Use local keys as if
        they were hosted keys using the new
        [`sign_and_send_raw_middleware`{.docutils .literal
        .notranslate}]{.pre}

    -   New [`getUncleByBlock()`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre} API

    -   New name [`getTransactionByBlock()`{.xref .py .py-meth .docutils
        .literal .notranslate}]{.pre}, which replaces the deprecated
        [`getTransactionFromBlock()`{.xref .py .py-meth .docutils
        .literal .notranslate}]{.pre}

    -   Add several new Parity trace functions

    -   New API to resolve ambiguous function calls, for example:

        -   Two functions with the same name that accept similar
            argument types, like [`myfunc(uint8)`{.docutils .literal
            .notranslate}]{.pre} and [`myfunc(int8)`{.docutils .literal
            .notranslate}]{.pre}, and you want to call
            [`contract.functions.myfunc(1).call()`{.docutils .literal
            .notranslate}]{.pre}

        -   See how to use it at: [[Invoke Ambiguous Contract
            Functions]{.std
            .std-ref}](#web3.contract.xhtml#ambiguous-contract-functions){.reference
            .internal}

-   Bugfixes

    -   Gas estimation doesn't crash, when 0 blocks are available. (ie\~
        on the genesis block)

    -   Close out all HTTPProvider sessions, to squash warnings on exit

    -   Stop adding Contract address twice to the filter. It was making
        some nodes unhappy

-   Misc

    -   Friendlier json encoding/decoding failure error messages

    -   Performance improvements, when the responses from the node are
        large (by reducing the number of times we evaluate if the
        response is valid json)

    -   Parity CI test fixes (ugh, environment setup hell, thanks to the
        community for cleaning this up!)

    -   Don't crash when requesting a transaction that was created with
        the parity bug (which allowed an unsigned transaction to be
        included, so [`publicKey`{.docutils .literal
        .notranslate}]{.pre} is [`None`{.docutils .literal
        .notranslate}]{.pre})

    -   Doc fixes: addresses must be checksummed (or ENS names on
        mainnet)

    -   Enable local integration testing of parity on non-Debian OS

    -   README:

        -   Testing setup for devs

        -   Change the build badge from Travis to Circle CI

    -   Cache the parity binary in Circle CI, to reduce the impact of
        their binary API going down

    -   Dropped the dot: [`py.test`{.docutils .literal
        .notranslate}]{.pre} -\> [`pytest`{.docutils .literal
        .notranslate}]{.pre}
:::

::: {#release_notes.xhtml#v4-2-1 .section}
## v4.2.1

Released May 9, 2018

-   Bugfixes

    -   When [`getting`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre}` `{.xref .py .py-meth .docutils .literal
        .notranslate}[`a`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre}` `{.xref .py .py-meth .docutils .literal
        .notranslate}[`transaction`{.xref .py .py-meth .docutils
        .literal .notranslate}]{.pre} with data attached and trying to
        [`modify`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre}` `{.xref .py .py-meth .docutils .literal
        .notranslate}[`it`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre} (say, to increase the gas price), the data
        was not being reattached in the new transaction.

    -   [`web3.personal.sendTransaction()`{.xref .py .py-meth .docutils
        .literal .notranslate}]{.pre} was crashing when using a
        transaction generated with [`buildTransaction()`{.docutils
        .literal .notranslate}]{.pre}

-   Misc

    -   Improved error message when connecting to a geth-style PoA
        network

    -   Improved error message when address is not checksummed

    -   Started in on support for [`fixedMxN`{.docutils .literal
        .notranslate}]{.pre} ABI arguments

    -   Lots of documentation upgrades, including:

        -   Guide for understanding nodes/networks/connections

        -   Simplified Quickstart with notes for common issues

        -   A new Troubleshooting section

    -   Potential pypy performance improvements (use toolz instead of
        cytoolz)

    -   eth-tester upgraded to beta 24
:::

::: {#release_notes.xhtml#v4-2-0 .section}
## v4.2.0

Released Apr 25, 2018

-   Removed audit warning and opt-in requirement for
    [`w3.eth.account`{.docutils .literal .notranslate}]{.pre}. See more
    in: [[Accounts]{.std
    .std-ref}](#web3.eth.account.xhtml#eth-account){.reference
    .internal}

-   Added an API to look up contract functions: [`fn`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`=`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`contract.functions['function_name_here']`{.docutils
    .literal .notranslate}]{.pre}

-   Upgrade Whisper (shh) module to use v6 API

-   Bugfix: set 'to' field of transaction to empty when using
    [`transaction`{.docutils .literal .notranslate}]{.pre}` `{.docutils
    .literal .notranslate}[`=`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`contract.constructor().buildTransaction()`{.docutils
    .literal .notranslate}]{.pre}

-   You can now specify `<cite>`{=html}nonce`</cite>`{=html} in
    [`buildTransaction()`{.docutils .literal .notranslate}]{.pre}

-   Distinguish between chain id and network id -- currently always
    return `<cite>`{=html}None`</cite>`{=html} for [`chainId`{.xref .py
    .py-attr .docutils .literal .notranslate}]{.pre}

-   Better error message when trying to use a contract function that has
    0 or \>1 matches

-   Better error message when trying to install on a python version
    \<3.5

-   Installs pypiwin32 during pip install, for a better Windows
    experience

-   Cleaned up a lot of test warnings by upgrading from deprecated APIs,
    especially from the deprecated
    [`contract.deploy(txn_dict,`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`args=contract_args)`{.docutils .literal
    .notranslate}]{.pre} to the new
    [`contract.constructor(*contract_args).transact(txn_dict)`{.docutils
    .literal .notranslate}]{.pre}

-   Documentation typo fixes

-   Better template for Pull Requests
:::

::: {#release_notes.xhtml#v4-1-0 .section}
## v4.1.0

Released Apr 9, 2018

-   New [`WebsocketProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}. If you're looking for better performance than
    HTTP, check out websockets.

-   New [`w3.eth.waitForTransactionReceipt()`{.xref .py .py-meth
    .docutils .literal .notranslate}]{.pre}

-   Added name collision detection to ConciseContract and
    ImplicitContract

-   Bugfix to allow fromBlock set to 0 in createFilter, like
    [`contract.events.MyEvent.createFilter(fromBlock=0,`{.docutils
    .literal .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`...)`{.docutils .literal .notranslate}]{.pre}

-   Bugfix of ENS automatic connection

-   eth-tester support for Byzantium

-   New migration guide for v3 -\> v4 upgrade

-   Various documentation updates

-   Pinned eth-account to older version
:::

::: {#release_notes.xhtml#v4-0-0 .section}
## v4.0.0

Released Apr 2, 2018

-   Marked beta.13 as stable

-   Documentation tweaks
:::

::: {#release_notes.xhtml#v4-0-0-beta-13 .section}
## v4.0.0-beta.13

Released Mar 27, 2018

*This is intended to be the final release before the stable v4 release.*

-   Add support for geth 1.8 (fixed error on
    [`getTransactionReceipt()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre})

-   You can now call a contract method at a specific block with the
    [`block_identifier`{.docutils .literal .notranslate}]{.pre} keyword
    argument, see: [[`call()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction.call "web3.contract.ContractFunction.call"){.reference
    .internal}

-   In preparation for stable release, disable
    [`w3.eth.account`{.docutils .literal .notranslate}]{.pre} by
    default, until a third-party audit is complete & resolved.

-   New API for contract deployment, which enables gas estimation, local
    signing, etc. See [[`constructor()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.constructor "web3.contract.Contract.constructor"){.reference
    .internal}.

-   Find contract events with
    [[contract.events.\$my_event.createFilter()]{.std
    .std-ref}](#web3.contract.xhtml#contract-create-filter){.reference
    .internal}

-   Support auto-complete for contract methods.

-   Upgrade most dependencies to stable

    -   eth-abi

    -   eth-utils

    -   hexbytes

    -   *not included: eth-tester and eth-account*

-   Switch the default EthereumTesterProvider backend from eth-testrpc
    to eth-tester:
    [[`web3.providers.eth_tester.EthereumTesterProvider`{.xref .py
    .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.eth_tester.EthereumTesterProvider "web3.providers.eth_tester.EthereumTesterProvider"){.reference
    .internal}

-   A lot of documentation improvements

-   Test node integrations over a variety of providers

-   geth 1.8 test suite
:::

::: {#release_notes.xhtml#v4-0-0-beta-12 .section}
## v4.0.0-beta.12

A little hiccup on release. Skipped.
:::

::: {#release_notes.xhtml#v4-0-0-beta-11 .section}
## v4.0.0-beta.11

Released Feb 28, 2018

-   New methods to modify or replace pending transactions

-   A compatibility option for connecting to [`geth`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`--dev`{.docutils .literal .notranslate}]{.pre} -- see
    [[Proof of Authority]{.std
    .std-ref}](#middleware.xhtml#geth-poa){.reference .internal}

-   A new [`web3.net.chainId`{.xref .py .py-attr .docutils .literal
    .notranslate}]{.pre}

-   Create a filter object from an existing filter ID.

-   eth-utils v1.0.1 (stable) compatibility
:::

::: {#release_notes.xhtml#v4-0-0-beta-10 .section}
## v4.0.0-beta.10

Released Feb 21, 2018

-   bugfix: Compatibility with eth-utils v1-beta2 (the incompatibility
    was causing fresh web3.py installs to fail)

-   bugfix: crash when sending the output of
    [`contract.functions.myFunction().buildTransaction()`{.docutils
    .literal .notranslate}]{.pre} to [`sendTransaction()`{.xref .py
    .py-meth .docutils .literal .notranslate}]{.pre}. Now, having a
    chainID key does not crash sendTransaction.

-   bugfix: a TypeError when estimating gas like:
    [`contract.functions.myFunction().estimateGas()`{.docutils .literal
    .notranslate}]{.pre} is fixed

-   Added parity integration tests to the continuous integration suite!

-   Some py3 and docs cleanup
:::

::: {#release_notes.xhtml#v4-0-0-beta-9 .section}
## v4.0.0-beta.9

Released Feb 8, 2018

-   Access event log parameters as attributes

-   Support for specifying nonce in eth-tester

-   [Bugfix](https://github.com/ethereum/web3.py/pull/616){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/pull/616\]]{.link-target}
    dependency conflicts between eth-utils, eth-abi, and eth-tester

-   Clearer error message when invalid keywords provided to contract
    constructor function

-   New docs for working with private keys + set up doctests

-   First parity integration tests

-   replace internal implementation of w3.eth.account with
    [[`eth_account.account.Account`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account "(in eth-account v0.14)"){.reference
    .external}[
    \[https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account\]]{.link-target}
:::

::: {#release_notes.xhtml#v4-0-0-beta-8 .section}
## v4.0.0-beta.8

Released Feb 7, 2018, then recalled. It added 32MB of test data to git
history, so the tag was deleted, as well as the corresponding release.
(Although the release would not have contained that test data)
:::

::: {#release_notes.xhtml#v4-0-0-beta-7 .section}
## v4.0.0-beta.7

Released Jan 29, 2018

-   Support for [`web3.eth.Eth.getLogs()`{.xref .py .py-meth .docutils
    .literal .notranslate}]{.pre} in eth-tester with py-evm

-   Process transaction receipts with Event ABI, using
    `<cite>`{=html}Contract.events.myEvent(\*args,
    \*\*kwargs).processReceipt(transaction_receipt)`</cite>`{=html} see
    [[Event Log Object]{.std
    .std-ref}](#web3.contract.xhtml#event-log-object){.reference
    .internal} for the new type.

-   Add timeout parameter to [[`web3.providers.ipc.IPCProvider`{.xref
    .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.ipc.IPCProvider "web3.providers.ipc.IPCProvider"){.reference
    .internal}

-   bugfix: make sure `<cite>`{=html}idna`</cite>`{=html} package is
    always installed

-   Replace ethtestrpc with py-evm, in all tests

-   Dockerfile fixup

-   Test refactoring & cleanup

-   Reduced warnings during tests
:::

::: {#release_notes.xhtml#v4-0-0-beta-6 .section}
## v4.0.0-beta.6

Released Jan 18, 2018

-   New contract function call API:
    `<cite>`{=html}my_contract.functions.my_func().call()`</cite>`{=html}
    is preferred over the now deprecated
    `<cite>`{=html}my_contract.call().my_func()`</cite>`{=html} API.

-   A new, sophisticated gas estimation algorithm, based on the
    [https://ethgasstation.info](https://ethgasstation.info){.reference
    .external} approach. You must opt-in to the new approach, because
    it's quite slow. We recommend using the new caching middleware. See
    [[`web3.gas_strategies.time_based.construct_time_based_gas_price_strategy()`{.xref
    .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#gas_price.xhtml#web3.gas_strategies.time_based.construct_time_based_gas_price_strategy "web3.gas_strategies.time_based.construct_time_based_gas_price_strategy"){.reference
    .internal}

-   New caching middleware that can cache based on time, block, or
    indefinitely.

-   Automatically retry JSON-RPC requests over HTTP, a few times.

-   ConciseContract now has the address directly

-   Many eth-tester fixes.
    [`web3.providers.eth_tester.main.EthereumTesterProvider`{.xref .py
    .py-class .docutils .literal .notranslate}]{.pre} is now a
    legitimate alternative to
    [`web3.providers.tester.EthereumTesterProvider`{.xref .py .py-class
    .docutils .literal .notranslate}]{.pre}.

-   ethtest-rpc removed from testing. Tests use eth-tester only, on
    pyethereum. Soon it will be eth-tester with py-evm.

-   Bumped several dependencies, like eth-tester

-   Documentation updates
:::

::: {#release_notes.xhtml#v4-0-0-beta-5 .section}
## v4.0.0-beta.5

Released Dec 28, 2017

-   Improvements to working with eth-tester, using
    [[`EthereumTesterProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.eth_tester.EthereumTesterProvider "web3.providers.eth_tester.EthereumTesterProvider"){.reference
    .internal}:

    -   Bugfix the key names in event logging

    -   Add support for [`sendRawTransaction()`{.xref .py .py-meth
        .docutils .literal .notranslate}]{.pre}

-   [[`IPCProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.ipc.IPCProvider "web3.providers.ipc.IPCProvider"){.reference
    .internal} now automatically retries on a broken connection, like
    when you restart your node

-   New gas price engine API, laying groundwork for more advanced gas
    pricing strategies
:::

::: {#release_notes.xhtml#v4-0-0-beta-4 .section}
## v4.0.0-beta.4

Released Dec 7, 2017

-   New [`buildTransaction()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} method to prepare contract transactions,
    offline

-   New automatic provider detection, for [`w3`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`=`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`Web3()`{.docutils .literal .notranslate}]{.pre}
    initialization

-   Set environment variable
    `<cite>`{=html}WEB3_PROVIDER_URI`</cite>`{=html} to suggest a
    provider for automatic detection

-   New API to set providers like: [`w3.providers`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`=`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`[IPCProvider()]`{.docutils .literal
    .notranslate}]{.pre}

-   Crashfix: [[`web3.eth.Eth.filter()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.filter "web3.eth.Eth.filter"){.reference
    .internal} when retrieving logs with the argument 'latest'

-   Bump eth-tester to v0.1.0-beta.5, with bugfix for filtering by topic

-   Removed GPL lib [`pylru`{.docutils .literal .notranslate}]{.pre},
    now believed to be in full MIT license compliance.
:::

::: {#release_notes.xhtml#v4-0-0-beta-3 .section}
## v4.0.0-beta.3

Released Dec 1, 2017

-   Fix encoding of ABI types: [`bytes[]`{.docutils .literal
    .notranslate}]{.pre} and [`string[]`{.docutils .literal
    .notranslate}]{.pre}

-   Windows connection error bugfix

-   Bugfix message signatures that were broken \~1% of the time
    (zero-pad [`r`{.docutils .literal .notranslate}]{.pre} and
    [`s`{.docutils .literal .notranslate}]{.pre})

-   Autoinit web3 now produces None instead of raising an exception on
    [`from`{.docutils .literal .notranslate}]{.pre}` `{.docutils
    .literal .notranslate}[`web3.auto`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`import`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`w3`{.docutils .literal .notranslate}]{.pre}

-   Clearer errors on formatting failure (includes field name that
    failed)

-   Python modernization, removing Py2 compatibility cruft

-   Update dependencies with changed names, now:

    -   [`eth-abi`{.docutils .literal .notranslate}]{.pre}

    -   [`eth-keyfile`{.docutils .literal .notranslate}]{.pre}

    -   [`eth-keys`{.docutils .literal .notranslate}]{.pre}

    -   [`eth-tester`{.docutils .literal .notranslate}]{.pre}

    -   [`eth-utils`{.docutils .literal .notranslate}]{.pre}

-   Faster Travis CI builds, with cached geth binary
:::

::: {#release_notes.xhtml#v4-0-0-beta-2 .section}
## v4.0.0-beta.2

Released Nov 22, 2017

Bug Fixes:

-   [`sendRawTransaction()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} accepts raw bytes

-   [[`contract()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.contract "web3.eth.Eth.contract"){.reference
    .internal} accepts an ENS name as contract address

-   [`signTransaction()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} returns the expected hash (*after* signing the
    transaction)

-   [`Account`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre} methods can all be called statically, like:
    [`Account.sign(...)`{.docutils .literal .notranslate}]{.pre}

-   [`getTransactionReceipt()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} returns the [`status`{.docutils .literal
    .notranslate}]{.pre} field as an [`int`{.docutils .literal
    .notranslate}]{.pre}

-   [`Web3.soliditySha3()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} looks up ENS names if they are supplied with an
    "address" ABI

-   If running multiple threads with the same w3 instance,
    [`ValueError:`{.docutils .literal .notranslate}]{.pre}` `{.docutils
    .literal .notranslate}[`Recursively`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`called`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`...`{.docutils .literal .notranslate}]{.pre} is no
    longer raised

Plus, various python modernization code cleanups, and testing against
geth 1.7.2.
:::

::: {#release_notes.xhtml#v4-0-0-beta-1 .section}
## v4.0.0-beta.1

-   Python 3 is now required

-   ENS names can be used anywhere that a hex address can

-   Sign transactions and messages with local private keys

-   New filter mechanism: [[`get_all_entries()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.Filter.get_all_entries "web3.utils.filters.Filter.get_all_entries"){.reference
    .internal} and [[`get_new_entries()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.Filter.get_new_entries "web3.utils.filters.Filter.get_new_entries"){.reference
    .internal}

-   Quick automatic initialization with [`from`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`web3.auto`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`import`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`w3`{.docutils .literal .notranslate}]{.pre}

-   All addresses must be supplied with an EIP-55 checksum

-   All addresses are returned with a checksum

-   Renamed [`Web3.toDecimal()`{.docutils .literal .notranslate}]{.pre}
    to [`toInt()`{.docutils .literal .notranslate}]{.pre}, see:
    [[Encoding and Decoding Helpers]{.std
    .std-ref}](#web3.main.xhtml#overview-type-conversions){.reference
    .internal}

-   All filter calls are synchronous, gevent integration dropped

-   Contract [`eventFilter()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} has replaced both [`Contract.on()`{.docutils
    .literal .notranslate}]{.pre} and [`Contract.pastEvents()`{.docutils
    .literal .notranslate}]{.pre}

-   Contract arguments of [`bytes`{.docutils .literal
    .notranslate}]{.pre} ABI type now accept hex strings.

-   Contract arguments of [`string`{.docutils .literal
    .notranslate}]{.pre} ABI type now accept python [`str`{.docutils
    .literal .notranslate}]{.pre}.

-   Contract return values of [`string`{.docutils .literal
    .notranslate}]{.pre} ABI type now return python [`str`{.docutils
    .literal .notranslate}]{.pre}.

-   Many methods now return a [`bytes`{.docutils .literal
    .notranslate}]{.pre}-like object where they used to return a hex
    string, like in [`Web3.sha3()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}

-   IPC connection left open and reused, rather than opened and closed
    on each call

-   A number of deprecated methods from v3 were removed
:::

::: {#release_notes.xhtml#id510 .section}
## 3.16.1

-   Addition of [`ethereum-tester`{.docutils .literal
    .notranslate}]{.pre} as a dependency
:::

::: {#release_notes.xhtml#id511 .section}
## 3.16.0

-   Addition of *named* middlewares for easier manipulation of
    middleware stack.

-   Provider middlewares can no longer be modified during runtime.

-   Experimental custom ABI normalization API for Contract objects.
:::

::: {#release_notes.xhtml#id512 .section}
## 3.15.0

-   Change docs to use RTD theme

-   Experimental new [`EthereumTesterProvider`{.docutils .literal
    .notranslate}]{.pre} for the [`ethereum-tester`{.docutils .literal
    .notranslate}]{.pre} library.

-   Bugfix for [`function`{.docutils .literal .notranslate}]{.pre} type
    abi encoding via [`ethereum-abi-utils`{.docutils .literal
    .notranslate}]{.pre} upgrade to [`v0.4.1`{.docutils .literal
    .notranslate}]{.pre}

-   Bugfix for [`Web3.toHex`{.docutils .literal .notranslate}]{.pre} to
    conform to RPC spec.
:::

::: {#release_notes.xhtml#id513 .section}
## 3.14.2

-   Fix PyPi readme text.
:::

::: {#release_notes.xhtml#id514 .section}
## 3.14.1

-   Fix PyPi readme text.
:::

::: {#release_notes.xhtml#id515 .section}
## 3.14.0

-   New [`stalecheck_middleware`{.docutils .literal .notranslate}]{.pre}

-   Improvements to [`Web3.toHex`{.docutils .literal
    .notranslate}]{.pre} and [`Web3.toText`{.docutils .literal
    .notranslate}]{.pre}.

-   Improvements to [`Web3.sha3`{.docutils .literal .notranslate}]{.pre}
    signature.

-   Bugfixes for [`Web3.eth.sign`{.docutils .literal
    .notranslate}]{.pre} api
:::

::: {#release_notes.xhtml#id516 .section}
## 3.13.5

-   Add experimental [`fixture_middleware`{.docutils .literal
    .notranslate}]{.pre}

-   Various bugfixes introduced in middleware API introduction and
    migration to formatter middleware.
:::

::: {#release_notes.xhtml#id517 .section}
## 3.13.4

-   Bugfix for formatter handling of contract creation transaction.
:::

::: {#release_notes.xhtml#id518 .section}
## 3.13.3

-   Improved testing infrastructure.
:::

::: {#release_notes.xhtml#id519 .section}
## 3.13.2

-   Bugfix for retrieving filter changes for both new block filters and
    pending transaction filters.
:::

::: {#release_notes.xhtml#id520 .section}
## 3.13.1

-   Fix mispelled [`attrdict_middleware`{.docutils .literal
    .notranslate}]{.pre} (was spelled [`attrdict_middlware`{.docutils
    .literal .notranslate}]{.pre}).
:::

::: {#release_notes.xhtml#id521 .section}
## 3.13.0

-   New Middleware API

-   Support for multiple providers

-   New [`web3.soliditySha3`{.docutils .literal .notranslate}]{.pre}

-   Remove multiple functions that were never implemented from the
    original web3.

-   Deprecated [`web3.currentProvider`{.docutils .literal
    .notranslate}]{.pre} accessor. Use [`web3.provider`{.docutils
    .literal .notranslate}]{.pre} now instead.

-   Deprecated password prompt within
    [`web3.personal.newAccount`{.docutils .literal .notranslate}]{.pre}.
:::

::: {#release_notes.xhtml#id522 .section}
## 3.12.0

-   Bugfix for abi filtering to correctly handle
    [`constructor`{.docutils .literal .notranslate}]{.pre} and
    [`fallback`{.docutils .literal .notranslate}]{.pre} type abi
    entries.
:::

::: {#release_notes.xhtml#id523 .section}
## 3.11.0

-   All web3 apis which accept [`address`{.docutils .literal
    .notranslate}]{.pre} parameters now enforce checksums if the address
    *looks* like it is checksummed.

-   Improvements to error messaging with when calling a contract on a
    node that may not be fully synced

-   Bugfix for [`web3.eth.syncing`{.docutils .literal
    .notranslate}]{.pre} to correctly handle [`False`{.docutils .literal
    .notranslate}]{.pre}
:::

::: {#release_notes.xhtml#id524 .section}
## 3.10.0

-   Web3 now returns
    [`web3.utils.datastructures.AttributeDict`{.docutils .literal
    .notranslate}]{.pre} in places where it previously returned a normal
    [`dict`{.docutils .literal .notranslate}]{.pre}.

-   [`web3.eth.contract`{.docutils .literal .notranslate}]{.pre} now
    performs validation on the [`address`{.docutils .literal
    .notranslate}]{.pre} parameter.

-   Added [`web3.eth.getWork`{.docutils .literal .notranslate}]{.pre}
    API
:::

::: {#release_notes.xhtml#id525 .section}
## 3.9.0

-   Add validation for the [`abi`{.docutils .literal
    .notranslate}]{.pre} parameter of [`eth`{.docutils .literal
    .notranslate}]{.pre}

-   Contract return values of [`bytes`{.docutils .literal
    .notranslate}]{.pre}, [`bytesXX`{.docutils .literal
    .notranslate}]{.pre} and [`string`{.docutils .literal
    .notranslate}]{.pre} are no longer converted to text types and will
    be returned in their raw byte-string format.
:::

::: {#release_notes.xhtml#id526 .section}
## 3.8.1

-   Bugfix for [`eth_sign`{.docutils .literal .notranslate}]{.pre}
    double hashing input.

-   Removed deprecated [`DelegatedSigningManager`{.docutils .literal
    .notranslate}]{.pre}

-   Removed deprecate [`PrivateKeySigningManager`{.docutils .literal
    .notranslate}]{.pre}
:::

::: {#release_notes.xhtml#id527 .section}
## 3.8.0

-   Update pyrlp dependency to [`>=0.4.7`{.docutils .literal
    .notranslate}]{.pre}

-   Update eth-testrpc dependency to [`>=1.2.0`{.docutils .literal
    .notranslate}]{.pre}

-   Deprecate [`DelegatedSigningManager`{.docutils .literal
    .notranslate}]{.pre}

-   Deprecate [`PrivateKeySigningManager`{.docutils .literal
    .notranslate}]{.pre}
:::

::: {#release_notes.xhtml#id528 .section}
## 3.7.1

-   upstream version bump for bugfix in eth-abi-utils
:::

::: {#release_notes.xhtml#id529 .section}
## 3.7.0

-   deprecate [`eth.defaultAccount`{.docutils .literal
    .notranslate}]{.pre} defaulting to the coinbase account.
:::

::: {#release_notes.xhtml#id530 .section}
## 3.6.2

-   Fix error message from contract factory creation.

-   Use [`ethereum-utils`{.docutils .literal .notranslate}]{.pre} for
    utility functions.
:::

::: {#release_notes.xhtml#id531 .section}
## 3.6.1

-   Upgrade [`ethereum-abi-utils`{.docutils .literal
    .notranslate}]{.pre} dependency for upstream bugfix.
:::

::: {#release_notes.xhtml#id532 .section}
## 3.6.0

-   Deprecate [`Contract.code`{.docutils .literal .notranslate}]{.pre}:
    replaced by [`Contract.bytecode`{.docutils .literal
    .notranslate}]{.pre}

-   Deprecate [`Contract.code_runtime`{.docutils .literal
    .notranslate}]{.pre}: replaced by
    [`Contract.bytecode_runtime`{.docutils .literal .notranslate}]{.pre}

-   Deprecate [`abi`{.docutils .literal .notranslate}]{.pre},
    [`code`{.docutils .literal .notranslate}]{.pre},
    [`code_runtime`{.docutils .literal .notranslate}]{.pre} and
    [`source`{.docutils .literal .notranslate}]{.pre} as arguments for
    the [`Contract`{.docutils .literal .notranslate}]{.pre} object.

-   Deprecate [`source`{.docutils .literal .notranslate}]{.pre} as a
    property of the [`Contract`{.docutils .literal .notranslate}]{.pre}
    object

-   Add [`Contract.factory()`{.docutils .literal .notranslate}]{.pre}
    API.

-   Deprecate the [`construct_contract_factory`{.docutils .literal
    .notranslate}]{.pre} helper function.
:::

::: {#release_notes.xhtml#id533 .section}
## 3.5.3

-   Bugfix for how [`requests`{.docutils .literal .notranslate}]{.pre}
    library is used. Now reuses session.
:::

::: {#release_notes.xhtml#id534 .section}
## 3.5.2

-   Bugfix for construction of [`request_kwargs`{.docutils .literal
    .notranslate}]{.pre} within HTTPProvider
:::

::: {#release_notes.xhtml#id535 .section}
## 3.5.1

-   Allow [`HTTPProvider`{.docutils .literal .notranslate}]{.pre} to be
    imported from [`web3`{.docutils .literal .notranslate}]{.pre}
    module.

-   make [`HTTPProvider`{.docutils .literal .notranslate}]{.pre}
    accessible as a property of [`web3`{.docutils .literal
    .notranslate}]{.pre} instances.
:::

::: {#release_notes.xhtml#id536 .section}
## 3.5.0

-   Deprecate [`web3.providers.rpc.RPCProvider`{.docutils .literal
    .notranslate}]{.pre}

-   Deprecate [`web3.providers.rpc.KeepAliveRPCProvider`{.docutils
    .literal .notranslate}]{.pre}

-   Add new [`web3.providers.rpc.HTTPProvider`{.docutils .literal
    .notranslate}]{.pre}

-   Remove hard dependency on gevent.
:::

::: {#release_notes.xhtml#id537 .section}
## 3.4.4

-   Bugfix for [`web3.eth.getTransaction`{.docutils .literal
    .notranslate}]{.pre} when the hash is unknown.
:::

::: {#release_notes.xhtml#id538 .section}
## 3.4.3

-   Bugfix for event log data decoding to properly handle dynamic sized
    values.

-   New [`web3.tester`{.docutils .literal .notranslate}]{.pre} module to
    access extra RPC functionality from [`eth-testrpc`{.docutils
    .literal .notranslate}]{.pre}
:::

::: {#release_notes.xhtml#id539 .section}
## 3.4.2

-   Fix package so that [`eth-testrpc`{.docutils .literal
    .notranslate}]{.pre} is not required.
:::

::: {#release_notes.xhtml#id540 .section}
## 3.4.1

-   Force gevent\<1.2.0 until this issue is fixed:
    [https://github.com/gevent/gevent/issues/916](https://github.com/gevent/gevent/issues/916){.reference
    .external}
:::

::: {#release_notes.xhtml#id541 .section}
## 3.4.0

-   Bugfix for contract instances to respect
    [`web3.eth.defaultAccount`{.docutils .literal .notranslate}]{.pre}

-   Better error reporting when ABI decoding fails for contract method
    response.
:::

::: {#release_notes.xhtml#id542 .section}
## 3.3.0

-   New [`EthereumTesterProvider`{.docutils .literal
    .notranslate}]{.pre} now available. Faster test runs than
    [`TestRPCProvider`{.docutils .literal .notranslate}]{.pre}

-   Updated underlying eth-testrpc requirement.
:::

::: {#release_notes.xhtml#id543 .section}
## 3.2.0

-   [`web3.shh`{.docutils .literal .notranslate}]{.pre} is now
    implemented.

-   Introduced [`KeepAliveRPCProvider`{.docutils .literal
    .notranslate}]{.pre} to correctly recycle HTTP connections and use
    HTTP keep alive
:::

::: {#release_notes.xhtml#id544 .section}
## 3.1.1

-   Bugfix for contract transaction sending not respecting the
    [`web3.eth.defaultAccount`{.docutils .literal .notranslate}]{.pre}
    configuration.
:::

::: {#release_notes.xhtml#id545 .section}
## 3.1.0

-   New DelegatedSigningManager and PrivateKeySigningManager classes.
:::

::: {#release_notes.xhtml#id546 .section}
## 3.0.2

-   Bugfix or IPCProvider not handling large JSON responses well.
:::

::: {#release_notes.xhtml#id547 .section}
## 3.0.1

-   Better RPC compliance to be compatable with the Parity JSON-RPC
    server.
:::

::: {#release_notes.xhtml#id548 .section}
## 3.0.0

-   [`Filter`{.docutils .literal .notranslate}]{.pre} objects now
    support controlling the interval through which they poll using the
    [`poll_interval`{.docutils .literal .notranslate}]{.pre} property
:::

::: {#release_notes.xhtml#id549 .section}
## 2.9.0

-   Bugfix generation of event topics.

-   Web3.Iban now allows access to Iban address tools.
:::

::: {#release_notes.xhtml#id550 .section}
## 2.8.1

-   Bugfix for [`geth.ipc`{.docutils .literal .notranslate}]{.pre} path
    on linux systems.
:::

::: {#release_notes.xhtml#id551 .section}
## 2.8.0

-   

    Changes to the [`Contract`{.docutils .literal .notranslate}]{.pre} API:

    :   -   [`Contract.deploy()`{.docutils .literal .notranslate}]{.pre}
            parameter arguments renamed to args

        -   [`Contract.deploy()`{.docutils .literal .notranslate}]{.pre}
            now takes args and kwargs parameters to allow constructing
            with keyword arguments or positional arguments.

        -   [`Contract.pastEvents`{.docutils .literal
            .notranslate}]{.pre} now allows you to specify a
            [`fromBlock`{.docutils .literal
            .notranslate}]{.pre}` `{.docutils .literal
            .notranslate}[`or`{.docutils .literal
            .notranslate}]{.pre}` `{.docutils .literal
            .notranslate}[``` ``toBlock. ```{.docutils .literal
            .notranslate}]{.pre} Previously these were forced to be
            [`'earliest'`{.docutils .literal .notranslate}]{.pre} and
            [`web3.eth.blockNumber`{.docutils .literal
            .notranslate}]{.pre} respectively.

        -   [`Contract.call`{.docutils .literal .notranslate}]{.pre},
            [`Contract.transact`{.docutils .literal .notranslate}]{.pre}
            and [`Contract.estimateGas`{.docutils .literal
            .notranslate}]{.pre} are now callable as class methods as
            well as instance methods. When called this way, an address
            must be provided with the transaction parameter.

        -   [`Contract.call`{.docutils .literal .notranslate}]{.pre},
            [`Contract.transact`{.docutils .literal .notranslate}]{.pre}
            and [`Contract.estimateGas`{.docutils .literal
            .notranslate}]{.pre} now allow specifying an alternate
            address for the transaction.

-   

    [`RPCProvider`{.docutils .literal .notranslate}]{.pre} now supports the following constructor arguments.

    :   -   [`ssl`{.docutils .literal .notranslate}]{.pre} for enabling
            SSL

        -   [`connection_timeout`{.docutils .literal
            .notranslate}]{.pre} and [`network_timeout`{.docutils
            .literal .notranslate}]{.pre} for controlling the timeouts
            for requests.
:::

::: {#release_notes.xhtml#id552 .section}
## 2.7.1

-   Bugfix: Fix KeyError in merge_args_and_kwargs helper fn.
:::

::: {#release_notes.xhtml#id553 .section}
## 2.7.0

-   Bugfix for usage of block identifiers 'latest', 'earliest',
    'pending'

-   Sphinx documentation

-   Non-data transactions now default to 90000 gas.

-   Web3 object now has helpers set as static methods rather than being
    set at initialization.

-   RPCProvider now takes a [`path`{.docutils .literal
    .notranslate}]{.pre} parameter to allow configuration for requests
    to go to paths other than [`/`{.docutils .literal
    .notranslate}]{.pre}.
:::

::: {#release_notes.xhtml#id554 .section}
## 2.6.0

-   TestRPCProvider no longer dumps logging output to stdout and stderr.

-   Bugfix for return types of [`address[]`{.docutils .literal
    .notranslate}]{.pre}

-   Bugfix for event data types of [`address`{.docutils .literal
    .notranslate}]{.pre}
:::

::: {#release_notes.xhtml#id555 .section}
## 2.5.0

-   All transactions which contain a [`data`{.docutils .literal
    .notranslate}]{.pre} element will now have their gas automatically
    estimated with 100k additional buffer. This was previously only true
    with transactions initiated from a [`Contract`{.docutils .literal
    .notranslate}]{.pre} object.
:::

::: {#release_notes.xhtml#id556 .section}
## 2.4.0

-   Contract functions can now be called using keyword arguments.
:::

::: {#release_notes.xhtml#id557 .section}
## 2.3.0

-   Upstream fixes for filters

-   Filter APIs [`on`{.docutils .literal .notranslate}]{.pre} and
    [`pastEvents`{.docutils .literal .notranslate}]{.pre} now callable
    as both instance and class methods.
:::

::: {#release_notes.xhtml#id558 .section}
## 2.2.0

-   The filters that come back from the contract [`on`{.docutils
    .literal .notranslate}]{.pre} and [`pastEvents`{.docutils .literal
    .notranslate}]{.pre} methods now call their callbacks with the same
    data format as [`web3.js`{.docutils .literal .notranslate}]{.pre}.
:::

::: {#release_notes.xhtml#id559 .section}
## 2.1.1

-   Cast RPCProvider port to an integer.
:::

::: {#release_notes.xhtml#id560 .section}
## 2.1.0

-   Remove all monkeypatching
:::

::: {#release_notes.xhtml#id561 .section}
## 2.0.0

-   Pull in downstream updates to proper gevent usage.

-   Fix [`eth_sign`{.docutils .literal .notranslate}]{.pre}

-   Bugfix with contract operations mutating the transaction object that
    is passed in.

-   More explicit linting ignore statements.
:::

::: {#release_notes.xhtml#id562 .section}
## 1.9.0

-   BugFix: fix for python3 only [`json.JSONDecodeError`{.docutils
    .literal .notranslate}]{.pre} handling.
:::

::: {#release_notes.xhtml#id563 .section}
## 1.8.0

-   BugFix: [`RPCProvider`{.docutils .literal .notranslate}]{.pre} not
    sending a content-type header

-   Bugfix: [`web3.toWei`{.docutils .literal .notranslate}]{.pre} now
    returns an integer instead of a decimal.Decimal
:::

::: {#release_notes.xhtml#id564 .section}
## 1.7.1

-   [`TestRPCProvider`{.docutils .literal .notranslate}]{.pre} can now
    be imported directly from [`web3`{.docutils .literal
    .notranslate}]{.pre}
:::

::: {#release_notes.xhtml#id565 .section}
## 1.7.0

-   Add [`eth.admin`{.docutils .literal .notranslate}]{.pre} interface.

-   Bugfix: Format the return value of [`web3.eth.syncing`{.docutils
    .literal .notranslate}]{.pre}

-   Bugfix: IPCProvider socket interactions are now more robust.
:::

::: {#release_notes.xhtml#id566 .section}
## 1.6.0

-   Downstream package upgrades for [`eth-testrpc`{.docutils .literal
    .notranslate}]{.pre} and [`ethereum-tester-client`{.docutils
    .literal .notranslate}]{.pre} to handle configuration of the
    Homestead and DAO fork block numbers.
:::

::: {#release_notes.xhtml#id567 .section}
## 1.5.0

-   Rename [`web3.contract._Contract`{.docutils .literal
    .notranslate}]{.pre} to [`web3.contract.Contract`{.docutils .literal
    .notranslate}]{.pre} to expose it for static analysis and auto
    completion tools

-   Allow passing string parameters to functions

-   Automatically compute gas requirements for contract deployment and

-   transactions.

-   Contract Filters

-   Block, Transaction, and Log filters

-   [`web3.eth.txpool`{.docutils .literal .notranslate}]{.pre} interface

-   [`web3.eth.mining`{.docutils .literal .notranslate}]{.pre} interface

-   Fixes for encoding.
:::

::: {#release_notes.xhtml#id568 .section}
## 1.4.0

-   Bugfix to allow address types in constructor arguments.
:::

::: {#release_notes.xhtml#id569 .section}
## 1.3.0

-   Partial implementation of the [`web3.eth.contract`{.docutils
    .literal .notranslate}]{.pre} interface.
:::

::: {#release_notes.xhtml#id570 .section}
## 1.2.0

-   Restructure project modules to be more *flat*

-   Add ability to run test suite without the *slow* tests.

-   Breakup [`encoding`{.docutils .literal .notranslate}]{.pre} utils
    into smaller modules.

-   Basic pep8 formatting.

-   Apply python naming conventions to internal APIs

-   Lots of minor bugfixes.

-   Removal of dead code left behind from [`1.0.0`{.docutils .literal
    .notranslate}]{.pre} refactor.

-   Removal of [`web3/solidity`{.docutils .literal .notranslate}]{.pre}
    module.
:::

::: {#release_notes.xhtml#id571 .section}
## 1.1.0

-   Add missing [`isConnected()`{.docutils .literal .notranslate}]{.pre}
    method.

-   Add test coverage for [`setProvider()`{.docutils .literal
    .notranslate}]{.pre}
:::

::: {#release_notes.xhtml#id572 .section}
## 1.0.1

-   Specify missing [`pyrlp`{.docutils .literal .notranslate}]{.pre} and
    [`gevent`{.docutils .literal .notranslate}]{.pre} dependencies
:::

::: {#release_notes.xhtml#id573 .section}
## 1.0.0

-   Massive refactor to the majority of the app.
:::

::: {#release_notes.xhtml#id574 .section}
## 0.1.0

-   Initial release
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#providers.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#providers.xhtml#providers .section}
[]{#providers.xhtml#id1}

# Providers

Using Ethereum requires access to an Ethereum node. If you have the
means, you're encouraged to [run your own
node](https://ethereum.org/en/developers/docs/nodes-and-clients/run-a-node/){.reference
.external}[
\[https://ethereum.org/en/developers/docs/nodes-and-clients/run-a-node/\]]{.link-target}.
(Note that you do not need to stake ether to run a node.) If you're
unable to run your own node, you can use a [remote
node](https://ethereum.org/en/developers/docs/nodes-and-clients/nodes-as-a-service/){.reference
.external}[
\[https://ethereum.org/en/developers/docs/nodes-and-clients/nodes-as-a-service/\]]{.link-target}.

Once you have access to a node, you can connect to it using a
**provider**. Providers generate
[JSON-RPC](https://ethereum.org/en/developers/docs/apis/json-rpc/){.reference
.external}[
\[https://ethereum.org/en/developers/docs/apis/json-rpc/\]]{.link-target}
requests and return the response. This is done by submitting the request
to an HTTP, WebSocket, or IPC socket-based server.

::: {.admonition .note}
Note

web3.py supports one provider per instance. If you have an advanced use
case that requires multiple providers, create and configure a new web3
instance per connection.
:::

If you are already happily connected to your Ethereum node, then you can
skip the rest of this providers section.

::: {#providers.xhtml#choosing-a-provider .section}
[]{#providers.xhtml#choosing-provider}

## Choosing a Provider

Most nodes have a variety of ways to connect to them. Most commonly:

1.  IPC (uses local filesystem: fastest and most secure)

2.  WebSocket (works remotely, faster than HTTP)

3.  HTTP (more nodes support it)

If you're not sure how to decide, choose this way:

-   If you have the option of running web3.py on the same machine as the
    node, choose IPC.

-   If you must connect to a node on a different computer, use
    WebSocket.

-   If your node does not support WebSocket, use HTTP.

Once you have decided how to connect, you'll select and configure the
appropriate provider class:

-   [[`HTTPProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.rpc.HTTPProvider "web3.providers.rpc.HTTPProvider"){.reference
    .internal}

-   [[`IPCProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.ipc.IPCProvider "web3.providers.ipc.IPCProvider"){.reference
    .internal}

-   [`AsyncHTTPProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}

-   [[`AsyncIPCProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.AsyncIPCProvider "web3.providers.persistent.AsyncIPCProvider"){.reference
    .internal} (Persistent Connection Provider)

-   [[`WebSocketProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.WebSocketProvider "web3.providers.persistent.WebSocketProvider"){.reference
    .internal} (Persistent Connection Provider)

Each provider above links to the documentation on how to properly
initialize that provider. Once you have reviewed the relevant
documentation for the provider of your choice, you are ready to [[get
started with web3.py]{.std
.std-ref}](#quickstart.xhtml#first-w3-use){.reference .internal}.

::: {#providers.xhtml#provider-via-environment-variable .section}
### Provider via Environment Variable

Alternatively, you can set the environment variable
[`WEB3_PROVIDER_URI`{.docutils .literal .notranslate}]{.pre} before
starting your script, and web3 will look for that provider first.

Valid formats for this environment variable are:

-   [`file:///path/to/node/rpc-json/file.ipc`{.docutils .literal
    .notranslate}]{.pre}

-   [`http://192.168.1.2:8545`{.docutils .literal .notranslate}]{.pre}

-   [`https://node.ontheweb.com`{.docutils .literal .notranslate}]{.pre}

-   [`ws://127.0.0.1:8546`{.docutils .literal .notranslate}]{.pre}
:::
:::

::: {#providers.xhtml#auto-initialization-provider-shortcuts .section}
## Auto-initialization Provider Shortcuts

::: {#providers.xhtml#geth-dev-proof-of-authority .section}
### Geth dev Proof of Authority

To connect to a [`geth`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`--dev`{.docutils .literal .notranslate}]{.pre} Proof of
Authority instance with the POA middleware loaded by default:

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3.auto.gethdev import w3

    # confirm that the connection succeeded
    >>> w3.is_connected()
    True
:::
:::

Or, connect to an async web3 instance:

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3.auto.gethdev import async_w3
    >>> await async_w3.provider.connect()

    # confirm that the connection succeeded
    >>> await async_w3.is_connected()
    True
:::
:::
:::
:::

::: {#providers.xhtml#built-in-providers .section}
## Built In Providers

Web3 ships with the following providers which are appropriate for
connecting to local and remote JSON-RPC servers.

::: {#providers.xhtml#httpprovider .section}
### HTTPProvider

*[class]{.pre}[ ]{.w}*[[web3.providers.rpc.]{.pre}]{.sig-prename .descclassname}[[HTTPProvider]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[endpoint_uri]{.pre}]{.n}*, *[[request_kwargs]{.pre}]{.n}[[=]{.pre}]{.o}[[{}]{.pre}]{.default_value}*, *[[session]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[exception_retry_configuration]{.pre}]{.n}[[=]{.pre}]{.o}[[ExceptionRetryConfiguration()]{.pre}]{.default_value}*[)]{.sig-paren}

:   This provider handles interactions with an HTTP or HTTPS based
    JSON-RPC server.

    -   [`endpoint_uri`{.docutils .literal .notranslate}]{.pre} should
        be the full URI to the RPC endpoint such as
        [`'https://localhost:8545'`{.docutils .literal
        .notranslate}]{.pre}. For RPC servers behind HTTP connections
        running on port 80 and HTTPS connections running on port 443 the
        port can be omitted from the URI.

    -   [`request_kwargs`{.docutils .literal .notranslate}]{.pre} should
        be a dictionary of keyword arguments which will be passed onto
        each http/https POST request made to your node.

    -   [`session`{.docutils .literal .notranslate}]{.pre} allows you to
        pass a [`requests.Session`{.docutils .literal
        .notranslate}]{.pre} object initialized as desired.

    -   [`exception_retry_configuration`{.docutils .literal
        .notranslate}]{.pre} is an instance of the
        [[`ExceptionRetryConfiguration`{.xref .py .py-class .docutils
        .literal
        .notranslate}]{.pre}](#internals.xhtml#web3.providers.rpc.utils.ExceptionRetryConfiguration "web3.providers.rpc.utils.ExceptionRetryConfiguration"){.reference
        .internal} class which allows you to configure how the provider
        should handle exceptions when making certain requests. Setting
        this to [`None`{.docutils .literal .notranslate}]{.pre} will
        disable exception retries.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> from web3 import Web3
        >>> w3 = Web3(Web3.HTTPProvider("http://127.0.0.1:8545"))
    :::
    :::

    Note that you should create only one HTTPProvider with the same
    provider URL per python process, as the HTTPProvider recycles
    underlying TCP/IP network connections, for better performance.
    Multiple HTTPProviders with different URLs will work as expected.

    Under the hood, the [`HTTPProvider`{.docutils .literal
    .notranslate}]{.pre} uses the python requests library for making
    requests. If you would like to modify how requests are made, you can
    use the [`request_kwargs`{.docutils .literal .notranslate}]{.pre} to
    do so. A common use case for this is increasing the timeout for each
    request.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> from web3 import Web3
        >>> w3 = Web3(Web3.HTTPProvider("http://127.0.0.1:8545", request_kwargs={'timeout': 60}))
    :::
    :::

    To tune the connection pool size, you can pass your own
    [`requests.Session`{.docutils .literal .notranslate}]{.pre}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> from web3 import Web3
        >>> adapter = requests.adapters.HTTPAdapter(pool_connections=20, pool_maxsize=20)
        >>> session = requests.Session()
        >>> session.mount('http://', adapter)
        >>> session.mount('https://', adapter)
        >>> w3 = Web3(Web3.HTTPProvider("http://127.0.0.1:8545", session=session))
    :::
    :::
:::

::: {#providers.xhtml#ipcprovider .section}
### IPCProvider

*[class]{.pre}[ ]{.w}*[[web3.providers.ipc.]{.pre}]{.sig-prename .descclassname}[[IPCProvider]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[ipc_path]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[timeout]{.pre}]{.n}[[=]{.pre}]{.o}[[10]{.pre}]{.default_value}*[)]{.sig-paren}

:   This provider handles interaction with an IPC Socket based JSON-RPC
    server.

    -   [`ipc_path`{.docutils .literal .notranslate}]{.pre} is the
        filesystem path to the IPC socket:

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> from web3 import Web3
        >>> w3 = Web3(Web3.IPCProvider("~/Library/Ethereum/geth.ipc"))
    :::
    :::

    If no [`ipc_path`{.docutils .literal .notranslate}]{.pre} is
    specified, it will use a default depending on your operating system.

    -   On Linux and FreeBSD: [`~/.ethereum/geth.ipc`{.docutils .literal
        .notranslate}]{.pre}

    -   On Mac OS: [`~/Library/Ethereum/geth.ipc`{.docutils .literal
        .notranslate}]{.pre}

    -   On Windows: [`\\.\pipe\geth.ipc`{.docutils .literal
        .notranslate}]{.pre}
:::

::: {#providers.xhtml#asynchttpprovider .section}
### AsyncHTTPProvider

*[class]{.pre}[ ]{.w}*[[web3.providers.rpc.]{.pre}]{.sig-prename .descclassname}[[AsyncHTTPProvider]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[endpoint_uri]{.pre}]{.n}*, *[[request_kwargs]{.pre}]{.n}[[=]{.pre}]{.o}[[{}]{.pre}]{.default_value}*, *[[exception_retry_configuration]{.pre}]{.n}[[=]{.pre}]{.o}[[ExceptionRetryConfiguration()]{.pre}]{.default_value}*[)]{.sig-paren}

:   This provider handles interactions with an HTTP or HTTPS based
    JSON-RPC server asynchronously.

    -   [`endpoint_uri`{.docutils .literal .notranslate}]{.pre} should
        be the full URI to the RPC endpoint such as
        [`'https://localhost:8545'`{.docutils .literal
        .notranslate}]{.pre}. For RPC servers behind HTTP connections
        running on port 80 and HTTPS connections running on port 443 the
        port can be omitted from the URI.

    -   [`request_kwargs`{.docutils .literal .notranslate}]{.pre} should
        be a dictionary of keyword arguments which will be passed onto
        each http/https POST request made to your node.

    -   [`exception_retry_configuration`{.docutils .literal
        .notranslate}]{.pre} is an instance of the
        [[`ExceptionRetryConfiguration`{.xref .py .py-class .docutils
        .literal
        .notranslate}]{.pre}](#internals.xhtml#web3.providers.rpc.utils.ExceptionRetryConfiguration "web3.providers.rpc.utils.ExceptionRetryConfiguration"){.reference
        .internal} class which allows you to configure how the provider
        should handle exceptions when making certain requests. Setting
        this to [`None`{.docutils .literal .notranslate}]{.pre} will
        disable exception retries.

    The [`cache_async_session()`{.docutils .literal .notranslate}]{.pre}
    method allows you to use your own [`aiohttp.ClientSession`{.docutils
    .literal .notranslate}]{.pre} object.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> from aiohttp import ClientSession
        >>> from web3 import AsyncWeb3, AsyncHTTPProvider

        >>> w3 = AsyncWeb3(AsyncHTTPProvider(endpoint_uri))

        >>> # If you want to pass in your own session:
        >>> custom_session = ClientSession()
        >>> await w3.provider.cache_async_session(custom_session) # This method is an async method so it needs to be handled accordingly
        >>> # when you're finished, disconnect:
        >>> w3.provider.disconnect()
    :::
    :::

    Under the hood, the [`AsyncHTTPProvider`{.docutils .literal
    .notranslate}]{.pre} uses the python
    [aiohttp](https://docs.aiohttp.org/en/stable/){.reference
    .external}[ \[https://docs.aiohttp.org/en/stable/\]]{.link-target}
    library for making requests.
:::

::: {#providers.xhtml#persistent-connection-providers .section}
### Persistent Connection Providers

::: {#providers.xhtml#persistent-connection-base-class .section}
#### Persistent Connection Base Class

::: {.admonition .note}
Note

This class is not meant to be used directly. If your provider class
inherits from this class, look to these docs for additional
configuration options.
:::

*[class]{.pre}[ ]{.w}*[[web3.providers.persistent.]{.pre}]{.sig-prename .descclassname}[[PersistentConnectionProvider]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[request_timeout:]{.pre} [float]{.pre} [=]{.pre} [50.0]{.pre}]{.n}*, *[[subscription_response_queue_size:]{.pre} [int]{.pre} [=]{.pre} [500]{.pre}]{.n}*, *[[silence_listener_task_exceptions:]{.pre} [bool]{.pre} [=]{.pre} [False]{.pre}Â Â Â Â  [max_connection_retries:]{.pre} [int]{.pre} [=]{.pre} [5]{.pre}]{.n}*, *[[request_information_cache_size:]{.pre} [int]{.pre} [=]{.pre} [500]{.pre}]{.n}*[)]{.sig-paren}

:   This is a base provider class, inherited by the following providers:

    > <div>
    >
    > -   [[`WebSocketProvider`{.xref .py .py-class .docutils .literal
    >     .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.WebSocketProvider "web3.providers.persistent.WebSocketProvider"){.reference
    >     .internal}
    >
    > -   [[`AsyncIPCProvider`{.xref .py .py-class .docutils .literal
    >     .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.AsyncIPCProvider "web3.providers.persistent.AsyncIPCProvider"){.reference
    >     .internal}
    >
    > </div>

    It handles interactions with a persistent connection to a JSON-RPC
    server. Among its configuration, it houses all of the
    [[`RequestProcessor`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#internals.xhtml#web3.providers.persistent.request_processor.RequestProcessor "web3.providers.persistent.request_processor.RequestProcessor"){.reference
    .internal} logic for handling the asynchronous sending and receiving
    of requests and responses. See the [[Request Processing for
    Persistent Connection Providers]{.std
    .std-ref}](#internals.xhtml#internals-persistent-connection-providers){.reference
    .internal} section for more details on the internals of persistent
    connection providers.

    -   [`request_timeout`{.docutils .literal .notranslate}]{.pre} is
        the timeout in seconds, used when sending data over the
        connection and waiting for a response to be received from the
        listener task. Defaults to [`50.0`{.docutils .literal
        .notranslate}]{.pre}.

    -   [`subscription_response_queue_size`{.docutils .literal
        .notranslate}]{.pre} is the size of the queue used to store
        subscription responses, defaults to [`500`{.docutils .literal
        .notranslate}]{.pre}. While messages are being consumed, this
        queue should never fill up as it is a transient queue and meant
        to handle asynchronous receiving and processing of responses.
        When in sync with the socket stream, this queue should only ever
        store 1 to a few messages at a time.

    -   [`silence_listener_task_exceptions`{.docutils .literal
        .notranslate}]{.pre} is a boolean that determines whether
        exceptions raised by the listener task are silenced. Defaults to
        [`False`{.docutils .literal .notranslate}]{.pre}, raising any
        exceptions that occur in the listener task.

    -   [`max_connection_retries`{.docutils .literal
        .notranslate}]{.pre} is the maximum number of times to retry a
        connection to the provider when initializing the provider.
        Defaults to [`5`{.docutils .literal .notranslate}]{.pre}.

    -   [`request_information_cache_size`{.docutils .literal
        .notranslate}]{.pre} specifies the size of the transient cache
        for storing request details, enabling the provider to process
        responses based on the original request information. Defaults to
        [`500`{.docutils .literal .notranslate}]{.pre}.
:::

::: {#providers.xhtml#asyncipcprovider .section}
#### AsyncIPCProvider

*[class]{.pre}[ ]{.w}*[[web3.providers.persistent.]{.pre}]{.sig-prename .descclassname}[[AsyncIPCProvider]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[ipc_path]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[max_connection_retries]{.pre}]{.n}[[=]{.pre}]{.o}[[5]{.pre}]{.default_value}*[)]{.sig-paren}

:   This provider handles asynchronous, persistent interaction with an
    IPC Socket based JSON-RPC server.

    -   [`ipc_path`{.docutils .literal .notranslate}]{.pre} is the
        filesystem path to the IPC socket:

    -   [`read_buffer_limit`{.docutils .literal .notranslate}]{.pre} is
        the maximum size of data, in bytes, that can be read from the
        socket at one time. Defaults to 20MB (20 \* 1024 \* 1024).
        Raises [`ReadBufferLimitReached`{.docutils .literal
        .notranslate}]{.pre} if the limit is reached, suggesting that
        the buffer limit be increased.

    This provider inherits from the
    [[`PersistentConnectionProvider`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.PersistentConnectionProvider "web3.providers.persistent.PersistentConnectionProvider"){.reference
    .internal} class. Refer to the
    [[`PersistentConnectionProvider`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.PersistentConnectionProvider "web3.providers.persistent.PersistentConnectionProvider"){.reference
    .internal} documentation for details on additional configuration
    options available for this provider.

    If no [`ipc_path`{.docutils .literal .notranslate}]{.pre} is
    specified, it will use a default depending on your operating system.

    -   On Linux and FreeBSD: [`~/.ethereum/geth.ipc`{.docutils .literal
        .notranslate}]{.pre}

    -   On Mac OS: [`~/Library/Ethereum/geth.ipc`{.docutils .literal
        .notranslate}]{.pre}

    -   On Windows: [`\\.\pipe\geth.ipc`{.docutils .literal
        .notranslate}]{.pre}
:::

::: {#providers.xhtml#websocketprovider .section}
#### WebSocketProvider

*[class]{.pre}[ ]{.w}*[[web3.providers.persistent.]{.pre}]{.sig-prename .descclassname}[[WebSocketProvider]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[endpoint_uri]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[websocket_kwargs]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[Dict]{.pre}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}[[,]{.pre}]{.p}[ ]{.w}[Any]{.pre}[[\]]{.pre}]{.p}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[{}]{.pre}]{.default_value}*, *[[use_text_frames]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[bool]{.pre}](https://docs.python.org/3/library/functions.html#bool "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/functions.html#bool\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[False]{.pre}]{.default_value}*[)]{.sig-paren}

:   This provider handles interactions with an WS or WSS based JSON-RPC
    server.

    -   [`endpoint_uri`{.docutils .literal .notranslate}]{.pre} should
        be the full URI to the RPC endpoint such as
        [`'ws://localhost:8546'`{.docutils .literal
        .notranslate}]{.pre}.

    -   [`websocket_kwargs`{.docutils .literal .notranslate}]{.pre} this
        should be a dictionary of keyword arguments which will be passed
        onto the ws/wss websocket connection.

    -   [`use_text_frames`{.docutils .literal .notranslate}]{.pre} will
        ensure websocket data is sent as text frames for servers that do
        not support binary communication.

    This provider inherits from the
    [[`PersistentConnectionProvider`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.PersistentConnectionProvider "web3.providers.persistent.PersistentConnectionProvider"){.reference
    .internal} class. Refer to the
    [[`PersistentConnectionProvider`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.PersistentConnectionProvider "web3.providers.persistent.PersistentConnectionProvider"){.reference
    .internal} documentation for details on additional configuration
    options available for this provider.

    Under the hood, the [`WebSocketProvider`{.docutils .literal
    .notranslate}]{.pre} uses the python websockets library for making
    requests. If you would like to modify how requests are made, you can
    use the [`websocket_kwargs`{.docutils .literal .notranslate}]{.pre}
    to do so. See the [websockets
    documentation](https://websockets.readthedocs.io/en/stable/reference/asyncio/client.html#websockets.client.WebSocketClientProtocol){.reference
    .external}[
    \[https://websockets.readthedocs.io/en/stable/reference/asyncio/client.html#websockets.client.WebSocketClientProtocol\]]{.link-target}
    for available arguments.
:::

::: {#providers.xhtml#using-persistent-connection-providers .section}
[]{#providers.xhtml#subscription-examples}

#### Using Persistent Connection Providers

The [`AsyncWeb3`{.docutils .literal .notranslate}]{.pre} class may be
used as a context manager, utilizing the [`async`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`with`{.docutils .literal .notranslate}]{.pre} syntax,
when instantiating with a [[`PersistentConnectionProvider`{.xref .py
.py-class .docutils .literal
.notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.PersistentConnectionProvider "web3.providers.persistent.PersistentConnectionProvider"){.reference
.internal}. This will automatically close the connection when the
context manager exits and is the recommended way to initiate a
persistent connection to the provider.

A similar example using a [`websockets`{.docutils .literal
.notranslate}]{.pre} connection as an asynchronous context manager can
be found in the [websockets
connection](https://websockets.readthedocs.io/en/stable/reference/asyncio/client.html#websockets.client.connect){.reference
.external}[
\[https://websockets.readthedocs.io/en/stable/reference/asyncio/client.html#websockets.client.connect\]]{.link-target}
docs.

::: {.highlight-python .notranslate}
::: highlight
    >>> import asyncio
    >>> from web3 import AsyncWeb3
    >>> from web3.providers.persistent import (
    ...     AsyncIPCProvider,
    ...     WebSocketProvider,
    ... )

    >>> LOG = True  # toggle debug logging
    >>> if LOG:
    ...     import logging
    ...     # logger = logging.getLogger("web3.providers.AsyncIPCProvider")  # for the AsyncIPCProvider
    ...     logger = logging.getLogger("web3.providers.WebSocketProvider")  # for the WebSocketProvider
    ...     logger.setLevel(logging.DEBUG)
    ...     logger.addHandler(logging.StreamHandler())

    >>> async def context_manager_subscription_example():
    ...     #  async with AsyncWeb3(AsyncIPCProvider("./path/to.filename.ipc") as w3:  # for the AsyncIPCProvider
    ...     async with AsyncWeb3(WebSocketProvider(f"ws://127.0.0.1:8546")) as w3:  # for the WebSocketProvider
    ...         # subscribe to new block headers
    ...         subscription_id = await w3.eth.subscribe("newHeads")
    ...
    ...         async for response in w3.socket.process_subscriptions():
    ...             print(f"{response}\n")
    ...             # handle responses here
    ...
    ...             if some_condition:
    ...                 # unsubscribe from new block headers and break out of
    ...                 # iterator
    ...                 await w3.eth.unsubscribe(subscription_id)
    ...                 break
    ...
    ...         # still an open connection, make any other requests and get
    ...         # responses via send / receive
    ...         latest_block = await w3.eth.get_block("latest")
    ...         print(f"Latest block: {latest_block}")
    ...
    ...         # the connection closes automatically when exiting the context
    ...         # manager (the `async with` block)

    >>> asyncio.run(context_manager_subscription_example())
:::
:::

The [`AsyncWeb3`{.docutils .literal .notranslate}]{.pre} class may also
be used as an asynchronous iterator, utilizing the [`async`{.docutils
.literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`for`{.docutils .literal .notranslate}]{.pre} syntax, when
instantiating with a [[`PersistentConnectionProvider`{.xref .py
.py-class .docutils .literal
.notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.PersistentConnectionProvider "web3.providers.persistent.PersistentConnectionProvider"){.reference
.internal}. This may be used to set up an indefinite websocket
connection and reconnect automatically if the connection is lost.

A similar example using a [`websockets`{.docutils .literal
.notranslate}]{.pre} connection as an asynchronous iterator can be found
in the [websockets
connection](https://websockets.readthedocs.io/en/stable/reference/asyncio/client.html#websockets.client.connect){.reference
.external}[
\[https://websockets.readthedocs.io/en/stable/reference/asyncio/client.html#websockets.client.connect\]]{.link-target}
docs.

::: {.highlight-python .notranslate}
::: highlight
    >>> import asyncio
    >>> import websockets
    >>> from web3 import AsyncWeb3
    >>> from web3.providers.persistent import (
    ...     AsyncIPCProvider,
    ...     WebSocketProvider,
    ... )

    >>> async def subscription_iterator_example():
    ...     # async for w3 in AsyncWeb3(AsyncIPCProvider("./path/to/filename.ipc")):  # for the AsyncIPCProvider
    ...     async for w3 in AsyncWeb3(WebSocketProvider(f"ws://127.0.0.1:8546")):  # for the WebSocketProvider
    ...         try:
    ...             ...
    ...         except websockets.ConnectionClosed:
    ...             continue

    # run the example
    >>> asyncio.run(subscription_iterator_example())
:::
:::

Awaiting the instantiation with a [[`PersistentConnectionProvider`{.xref
.py .py-class .docutils .literal
.notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.PersistentConnectionProvider "web3.providers.persistent.PersistentConnectionProvider"){.reference
.internal}, or instantiating and awaiting the [`connect()`{.docutils
.literal .notranslate}]{.pre} method is also possible. Both of these
examples are shown below.

::: {.highlight-python .notranslate}
::: highlight
    >>> async def await_instantiation_example():
    ...     # w3 = await AsyncWeb3(AsyncIPCProvider("./path/to/filename.ipc"))  # for the AsyncIPCProvider
    ...     w3 = await AsyncWeb3(WebSocketProvider(f"ws://127.0.0.1:8546"))  # for the WebSocketProvider
    ...
    ...     # some code here
    ...
    ...     # manual cleanup
    ...     await w3.provider.disconnect()

    # run the example
    >>> asyncio.run(await_instantiation_example())
:::
:::

::: {.highlight-python .notranslate}
::: highlight
    >>> async def await_provider_connect_example():
    ...     # w3 = AsyncWeb3(AsyncIPCProvider("./path/to/filename.ipc"))  # for the AsyncIPCProvider
    ...     w3 = AsyncWeb3(WebSocketProvider(f"ws://127.0.0.1:8546"))  # for the WebSocketProvider
    ...     await w3.provider.connect()
    ...
    ...     # some code here
    ...
    ...     # manual cleanup
    ...     await w3.provider.disconnect()

    # run the example
    >>> asyncio.run(await_provider_connect_example())
:::
:::

[[`PersistentConnectionProvider`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.PersistentConnectionProvider "web3.providers.persistent.PersistentConnectionProvider"){.reference
.internal} classes use the [[`RequestProcessor`{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}](#internals.xhtml#web3.providers.persistent.request_processor.RequestProcessor "web3.providers.persistent.request_processor.RequestProcessor"){.reference
.internal} class under the hood to sync up the receiving of responses
and response processing for one-to-one and one-to-many
request-to-response requests. Refer to the [[`RequestProcessor`{.xref
.py .py-class .docutils .literal
.notranslate}]{.pre}](#internals.xhtml#web3.providers.persistent.request_processor.RequestProcessor "web3.providers.persistent.request_processor.RequestProcessor"){.reference
.internal} documentation for details.
:::

::: {#providers.xhtml#asyncweb3-with-persistent-connection-providers .section}
#### AsyncWeb3 with Persistent Connection Providers

When an [`AsyncWeb3`{.docutils .literal .notranslate}]{.pre} class is
connected to a [[`PersistentConnectionProvider`{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.PersistentConnectionProvider "web3.providers.persistent.PersistentConnectionProvider"){.reference
.internal}, some attributes and methods become available.

> <div>
>
> [[socket]{.pre}]{.sig-name .descname}
>
> :   The public API for interacting with the websocket connection is
>     available via the [`socket`{.docutils .literal
>     .notranslate}]{.pre} attribute of the [`Asyncweb3`{.docutils
>     .literal .notranslate}]{.pre} class. This attribute is an instance
>     of the [[`PersistentConnection`{.xref .py .py-class .docutils
>     .literal
>     .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.persistent_connection.PersistentConnection "web3.providers.persistent.persistent_connection.PersistentConnection"){.reference
>     .internal} class and is the main interface for interacting with
>     the socket connection.
>
> </div>
:::

::: {#providers.xhtml#interacting-with-the-persistent-connection .section}
#### Interacting with the Persistent Connection

*[class]{.pre}[ ]{.w}*[[web3.providers.persistent.persistent_connection.]{.pre}]{.sig-prename .descclassname}[[PersistentConnection]{.pre}]{.sig-name .descname}

:   This class handles interactions with a persistent socket connection.
    It is available via the [`socket`{.docutils .literal
    .notranslate}]{.pre} attribute on the [`AsyncWeb3`{.docutils
    .literal .notranslate}]{.pre} class. The
    [`PersistentConnection`{.docutils .literal .notranslate}]{.pre}
    class has the following methods and attributes:

    [[subscriptions]{.pre}]{.sig-name .descname}

    :   This attribute returns the current active subscriptions as a
        dict mapping the subscription [`id`{.docutils .literal
        .notranslate}]{.pre} to a dict of metadata about the
        subscription request.

    [[process_subscriptions]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

    :   This method is available for listening to websocket
        subscriptions indefinitely. It is an asynchronous iterator that
        yields strictly one-to-many (e.g. [`eth_subscription`{.docutils
        .literal .notranslate}]{.pre} responses) request-to-response
        messages from the websocket connection. To receive responses for
        one-to-one request-to-response calls, use the standard API for
        making requests via the appropriate module (e.g.
        [`block_num`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`=`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`await`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`w3.eth.block_number`{.docutils .literal
        .notranslate}]{.pre})

        The responses from this method are formatted by *web3.py*
        formatters and run through the middleware that were present at
        the time of subscription. Examples on how to use this method can
        be seen above in the [Using Persistent Connection
        Providers](#providers.xhtml#using-persistent-connection-providers){.reference
        .internal} section.

    [[send]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[method]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[RPCEndpoint]{.pre}]{.n}*, *[[params]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[Sequence]{.pre}[[\[]{.pre}]{.p}[Any]{.pre}[[\]]{.pre}]{.p}]{.n}*[)]{.sig-paren}

    :   This method is available strictly for sending raw requests to
        the socket, if desired. It is not recommended to use this method
        directly, as the responses will not be formatted by *web3.py*
        formatters or run through the middleware. Instead, use the
        methods available on the respective web3 module. For example,
        use [`w3.eth.get_block("latest")`{.docutils .literal
        .notranslate}]{.pre} instead of
        [`w3.socket.send("eth_getBlockByNumber",`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`["latest",`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`True])`{.docutils .literal .notranslate}]{.pre}.

    [[recv]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

    :   The [`recv()`{.docutils .literal .notranslate}]{.pre} method can
        be used to receive the next response for a request from the
        socket. The response from this method is the raw response. This
        is not the recommended way to receive a response for a request,
        as it is not formatted by *web3.py* formatters or run through
        the middleware. Instead, use the methods available on the
        respective web3 module (e.g. [`block_num`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`=`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`await`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`w3.eth.block_number`{.docutils .literal
        .notranslate}]{.pre}) for retrieving responses for one-to-one
        request-to-response calls.

    [[make_request]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[method]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[RPCEndpoint]{.pre}]{.n}*, *[[params]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[Sequence]{.pre}[[\[]{.pre}]{.p}[Any]{.pre}[[\]]{.pre}]{.p}]{.n}*[)]{.sig-paren}

    :   This method is available for making requests to the socket and
        retrieving the response. It is not recommended to use this
        method directly, as the responses will not be properly formatted
        by *web3.py* formatters or run through the middleware. Instead,
        use the methods available on the respective web3 module. For
        example, use [`w3.eth.get_block("latest")`{.docutils .literal
        .notranslate}]{.pre} instead of
        [`w3.socket.make_request("eth_getBlockByNumber",`{.docutils
        .literal .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`["latest",`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`True])`{.docutils .literal .notranslate}]{.pre}.
:::
:::

::: {#providers.xhtml#legacywebsocketprovider .section}
### LegacyWebSocketProvider

::: {.admonition .warning}
Warning

[`LegacyWebSocketProvider`{.docutils .literal .notranslate}]{.pre} is
deprecated and is likely to be removed in a future major release. Please
use [`WebSocketProvider`{.docutils .literal .notranslate}]{.pre}
instead.
:::

*[class]{.pre}[ ]{.w}*[[web3.providers.legacy_websocket.]{.pre}]{.sig-prename .descclassname}[[LegacyWebSocketProvider]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[endpoint_uri]{.pre}]{.n}*[\[]{.optional}, *[[websocket_timeout]{.pre}]{.n}*, *[[websocket_kwargs]{.pre}]{.n}*[\]]{.optional}[)]{.sig-paren}

:   This provider handles interactions with an WS or WSS based JSON-RPC
    server.

    -   [`endpoint_uri`{.docutils .literal .notranslate}]{.pre} should
        be the full URI to the RPC endpoint such as
        [`'ws://localhost:8546'`{.docutils .literal
        .notranslate}]{.pre}.

    -   [`websocket_timeout`{.docutils .literal .notranslate}]{.pre} is
        the timeout in seconds, used when receiving or sending data over
        the connection. Defaults to 10.

    -   [`websocket_kwargs`{.docutils .literal .notranslate}]{.pre} this
        should be a dictionary of keyword arguments which will be passed
        onto the ws/wss websocket connection.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> from web3 import Web3
        >>> w3 = Web3(Web3.LegacyWebSocketProvider("ws://127.0.0.1:8546"))
    :::
    :::

    Under the hood, [`LegacyWebSocketProvider`{.docutils .literal
    .notranslate}]{.pre} uses the python [`websockets`{.docutils
    .literal .notranslate}]{.pre} library for making requests. If you
    would like to modify how requests are made, you can use the
    [`websocket_kwargs`{.docutils .literal .notranslate}]{.pre} to do
    so. See the [websockets
    documentation](https://websockets.readthedocs.io/en/stable/reference/asyncio/client.html#websockets.client.WebSocketClientProtocol){.reference
    .external}[
    \[https://websockets.readthedocs.io/en/stable/reference/asyncio/client.html#websockets.client.WebSocketClientProtocol\]]{.link-target}
    for available arguments.

    Unlike HTTP connections, the timeout for WS connections is
    controlled by a separate [`websocket_timeout`{.docutils .literal
    .notranslate}]{.pre} argument, as shown below.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> from web3 import Web3
        >>> w3 = Web3(Web3.LegacyWebSocketProvider("ws://127.0.0.1:8546", websocket_timeout=60))
    :::
    :::
:::

::: {#providers.xhtml#autoprovider .section}
### AutoProvider

[`AutoProvider`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre} is the default used when initializing
[[`web3.Web3`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#web3.main.xhtml#web3.Web3 "web3.Web3"){.reference
.internal} without any providers. There's rarely a reason to use it
explicitly.
:::

::: {#providers.xhtml#ethereumtesterprovider .section}
### EthereumTesterProvider

::: {.admonition .warning}
Warning

Experimental: This provider is experimental. There are still significant
gaps in functionality. However it is being actively developed and
supported.
:::

*[class]{.pre}[ ]{.w}*[[web3.providers.eth_tester.]{.pre}]{.sig-prename .descclassname}[[EthereumTesterProvider]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[ethereum_tester]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[api_endpoints]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   

```{=html}
<!-- -->
```

*[class]{.pre}[ ]{.w}*[[web3.providers.eth_tester.]{.pre}]{.sig-prename .descclassname}[[AsyncEthereumTesterProvider]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[ethereum_tester]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[api_endpoints]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   This provider integrates with the [`eth-tester`{.docutils .literal
    .notranslate}]{.pre} library. The [`ethereum_tester`{.docutils
    .literal .notranslate}]{.pre} constructor argument should be an
    instance of the [`EthereumTester`{.xref .py .py-class .docutils
    .literal .notranslate}]{.pre} or a subclass of
    [`BaseChainBackend`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre} class provided by the [`eth-tester`{.docutils
    .literal .notranslate}]{.pre} library. The
    [`api_endpoints`{.docutils .literal .notranslate}]{.pre} argument
    should be a [`dict`{.docutils .literal .notranslate}]{.pre} of RPC
    endpoints. You can see the structure and defaults
    [here](https://github.com/ethereum/web3.py/blob/283b536c7d53e605c61468941e3fc07a6c5d0c09/web3/providers/eth_tester/defaults.py#L228){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/blob/283b536c7d53e605c61468941e3fc07a6c5d0c09/web3/providers/eth_tester/defaults.py#L228\]]{.link-target}.
    If you would like a custom [`eth-tester`{.docutils .literal
    .notranslate}]{.pre} instance to test with, see the
    [`eth-tester`{.docutils .literal .notranslate}]{.pre} library
    [documentation](https://github.com/ethereum/eth-tester){.reference
    .external}[
    \[https://github.com/ethereum/eth-tester\]]{.link-target} for
    details.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> from web3 import Web3, EthereumTesterProvider
        >>> w3 = Web3(EthereumTesterProvider())
    :::
    :::

::: {.admonition .note}
Note

To install the needed dependencies to use EthereumTesterProvider, you
can install the pip extras package that has the correct interoperable
versions of the [`eth-tester`{.docutils .literal .notranslate}]{.pre}
and [`py-evm`{.docutils .literal .notranslate}]{.pre} dependencies
needed: e.g. [`pip`{.docutils .literal .notranslate}]{.pre}` `{.docutils
.literal .notranslate}[`install`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`"web3[tester]"`{.docutils .literal .notranslate}]{.pre}
:::
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#web3.eth.account.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#web3.eth.account.xhtml#accounts .section}
[]{#web3.eth.account.xhtml#eth-account}

# Accounts

::: {#web3.eth.account.xhtml#local-vs-hosted-nodes .section}
[]{#web3.eth.account.xhtml#local-vs-hosted}

## Local vs Hosted Nodes

Hosted Node

:   A **hosted** node is controlled by someone else. You may also see
    these referred to as **remote** nodes. View a list of commercial
    [node
    providers](https://ethereum.org/en/developers/docs/nodes-and-clients/nodes-as-a-service/){.reference
    .external}[
    \[https://ethereum.org/en/developers/docs/nodes-and-clients/nodes-as-a-service/\]]{.link-target}.

Local Node

:   A **local** node is started and controlled by you on your computer.
    For several reasons (e.g., privacy, security), this is the
    recommended path, but it requires more resources and work to set up
    and maintain. See
    [ethereum.org](https://ethereum.org/en/developers/docs/nodes-and-clients/){.reference
    .external}[
    \[https://ethereum.org/en/developers/docs/nodes-and-clients/\]]{.link-target}
    for a guided tour.
:::

::: {#web3.eth.account.xhtml#local-vs-hosted-keys .section}
## Local vs Hosted Keys

An Ethereum private key is a 256-bit (32 bytes) random integer. For each
private key, you get one Ethereum address, also known as an Externally
Owned Account (EOA).

In Python, the private key is expressed as a 32-byte long Python
[`bytes`{.docutils .literal .notranslate}]{.pre} object. When a private
key is presented to users in a hexadecimal format, it may or may not
contain a starting [`0x`{.docutils .literal .notranslate}]{.pre}
hexadecimal prefix.

Local Private Key

:   A local private key is a locally stored secret you import to your
    Python application. Please read below how you can create and import
    a local private key and use it to sign transactions.

Hosted Private Key

:   This is a legacy way to use accounts when working with unit test
    backends like [`EthereumTesterProvider`{.docutils .literal
    .notranslate}]{.pre} or
    [Anvil](https://book.getfoundry.sh/reference/anvil/){.reference
    .external}[
    \[https://book.getfoundry.sh/reference/anvil/\]]{.link-target}.
    Calling [`web3.eth.accounts`{.docutils .literal .notranslate}]{.pre}
    gives you a predefined list of accounts that have been funded with
    test ETH. You can use [[`send_transaction()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
    .internal} on any of these accounts without further configuration.

    In the past, around 2015, this was also a way to use private keys in
    a locally hosted node, but this practice is now discouraged.

::: {.admonition .warning}
Warning

[`web3.eth.send_transaction`{.docutils .literal .notranslate}]{.pre}
does not work with modern node providers, because they relied on a node
state and all modern nodes are stateless. You must always use local
private keys when working with nodes hosted by someone else.
:::
:::

::: {#web3.eth.account.xhtml#some-common-uses-for-local-private-keys .section}
## Some Common Uses for Local Private Keys

A very common reason to work with local private keys is to interact with
a hosted node.

Some common things you might want to do with a `<cite>`{=html}Local
Private Key`</cite>`{=html} are:

-   [Sign a
    Transaction](#web3.eth.account.xhtml#sign-a-transaction){.reference
    .internal}

-   [Sign a Contract
    Transaction](#web3.eth.account.xhtml#sign-a-contract-transaction){.reference
    .internal}

-   [Sign a Message](#web3.eth.account.xhtml#sign-a-message){.reference
    .internal}

-   [Verify a
    Message](#web3.eth.account.xhtml#verify-a-message){.reference
    .internal}

Using private keys usually involves [`w3.eth.account`{.docutils .literal
.notranslate}]{.pre} in one way or another. Read on for more, or see a
full list of things you can do in the docs for
[[`eth_account.Account`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account "(in eth-account v0.14)"){.reference
.external}[
\[https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account\]]{.link-target}.
:::

::: {#web3.eth.account.xhtml#creating-a-private-key .section}
## Creating a Private Key

Each Ethereum address has a matching private key. To create a new
Ethereum account you can just generate a random number that acts as a
private key.

-   A private key is just a random unguessable, or cryptographically
    safe, 256-bit integer number

-   A valid private key is \> 0 and \< max private key value (a number
    above the elliptic curve order FFFFFFFF FFFFFFFF FFFFFFFF FFFFFFFE
    BAAEDCE6 AF48A03B BFD25E8C D0364141)

-   Private keys do not have checksums.

To create a private key using web3.py and command line you can do:

::: {.highlight-shell .notranslate}
::: highlight
    python -c "from web3 import Web3; w3 = Web3(); acc = w3.eth.account.create(); print(f'private key={w3.to_hex(acc.key)}, account={acc.address}')"
:::
:::

Which outputs a new private key and an account pair:

::: {.highlight-default .notranslate}
::: highlight
    private key=0x480c4aec9fa..., account=0x9202a9d5D2d129CB400a40e00aC822a53ED81167
:::
:::

-   *Never store private key with your source*. Use environment
    variables to store the key. Read more below.

-   You can also import the raw hex private key to MetaMask and any
    other wallet - the private key can be shared between your Python
    code and any number of wallets.
:::

::: {#web3.eth.account.xhtml#funding-a-new-account .section}
## Funding a New Account

If you create a private key, it comes with its own Ethereum address. By
default, the balance of this address is zero. Before you can send any
transactions with your account, you need to top up.

-   For a local test environment (e.g.,
    [`EthereumTesterProvider`{.docutils .literal .notranslate}]{.pre}),
    any environment is bootstrapped with accounts that have test ETH in
    them. Move ETH from default accounts to your newly created account.

-   For public mainnet, you need to buy ETH in a cryptocurrency exchange
    and send it to your privately controlled account.

-   For a testnet, find a relevant testnet [[faucet]{.std
    .std-ref}](#troubleshooting.xhtml#faucets){.reference .internal}.
:::

::: {#web3.eth.account.xhtml#reading-a-private-key-from-an-environment-variable .section}
## Reading a Private Key from an Environment Variable

In this example we pass the private key to our Python application in an
[environment
variable](https://en.wikipedia.org/wiki/Environment_variable){.reference
.external}[
\[https://en.wikipedia.org/wiki/Environment_variable\]]{.link-target}.
This private key is then added to the transaction signing keychain with
[`Signing`{.docutils .literal .notranslate}]{.pre} middleware.

If unfamiliar, note that you can [export your private keys from Metamask
and other
wallets](https://metamask.zendesk.com/hc/en-us/articles/360015289632-How-to-Export-an-Account-Private-Key){.reference
.external}[
\[https://metamask.zendesk.com/hc/en-us/articles/360015289632-How-to-Export-an-Account-Private-Key\]]{.link-target}.

::: {.admonition .warning}
Warning

-   **Never** share your private keys.

-   **Never** put your private keys in source code.

-   **Never** commit private keys to a Git repository.
:::

Example [`account_test_script.py`{.docutils .literal
.notranslate}]{.pre}

::: {.highlight-python .notranslate}
::: highlight
    import os
    from eth_account import Account
    from eth_account.signers.local import LocalAccount
    from web3 import Web3, EthereumTesterProvider
    from web3.middleware import SignAndSendRawMiddlewareBuilder

    w3 = Web3(EthereumTesterProvider())

    private_key = os.environ.get("PRIVATE_KEY")
    assert private_key is not None, "You must set PRIVATE_KEY environment variable"
    assert private_key.startswith("0x"), "Private key must start with 0x hex prefix"

    account: LocalAccount = Account.from_key(private_key)
    w3.middleware_onion.inject(SignAndSendRawMiddlewareBuilder.build(account), layer=0)

    print(f"Your hot wallet address is {account.address}")

    # Now you can use web3.eth.send_transaction(), Contract.functions.xxx.transact() functions
    # with your local private key through middleware and you no longer get the error
    # "ValueError: The method eth_sendTransaction does not exist/is not available
:::
:::

Example how to run this in UNIX shell:

::: {.highlight-shell .notranslate}
::: highlight
    # Generate a new 256-bit random integer using openssl UNIX command that acts as a private key.
    # You can also do:
    # python -c "from web3 import Web3; w3 = Web3(); acc = w3.eth.account.create(); print(f'private key={w3.to_hex(acc.key)}, account={acc.address}')"
    # Store this in a safe place, like in your password manager.
    export PRIVATE_KEY=0x`openssl rand -hex 32`

    # Run our script
    python account_test_script.py
:::
:::

This will print:

::: {.highlight-default .notranslate}
::: highlight
    Your hot wallet address is 0x27C8F899bb69E1501BBB96d09d7477a2a7518918
:::
:::
:::

::: {#web3.eth.account.xhtml#extract-private-key-from-geth-keyfile .section}
[]{#web3.eth.account.xhtml#extract-geth-pk}

## Extract private key from geth keyfile

::: {.admonition .note}
Note

The amount of available ram should be greater than 1GB.
:::

::: {.highlight-python .notranslate}
::: highlight
    with open('~/.ethereum/keystore/UTC--...--5ce9454909639D2D17A3F753ce7d93fa0b9aB12E') as keyfile:
        encrypted_key = keyfile.read()
        private_key = w3.eth.account.decrypt(encrypted_key, 'correcthorsebatterystaple')
        # tip: do not save the key or password anywhere, especially into a shared source file
:::
:::
:::

::: {#web3.eth.account.xhtml#sign-a-message .section}
## Sign a Message

::: {.admonition .warning}
Warning

There is no single message format that is broadly adopted with community
consensus. Keep an eye on several options, like
[EIP-683](https://github.com/ethereum/EIPs/pull/683){.reference
.external}[
\[https://github.com/ethereum/EIPs/pull/683\]]{.link-target},
[EIP-712](https://github.com/ethereum/EIPs/pull/712){.reference
.external}[
\[https://github.com/ethereum/EIPs/pull/712\]]{.link-target}, and
[EIP-719](https://github.com/ethereum/EIPs/pull/719){.reference
.external}[
\[https://github.com/ethereum/EIPs/pull/719\]]{.link-target}. Consider
the [[`w3.eth.sign()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.sign "web3.eth.Eth.sign"){.reference
.internal} approach be deprecated.
:::

For this example, we will use the same message hashing mechanism that is
provided by [[`w3.eth.sign()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.sign "web3.eth.Eth.sign"){.reference
.internal}.

::: {.highlight-pycon .notranslate}
::: highlight
    >>> from web3 import Web3, EthereumTesterProvider
    >>> from eth_account.messages import encode_defunct

    >>> w3 = Web3(EthereumTesterProvider())
    >>> msg = "Iâ™¥SF"
    >>> private_key = b"\xb2\\}\xb3\x1f\xee\xd9\x12''\xbf\t9\xdcv\x9a\x96VK-\xe4\xc4rm\x03[6\xec\xf1\xe5\xb3d"
    >>> message = encode_defunct(text=msg)
    >>> signed_message = w3.eth.account.sign_message(message, private_key=private_key)
    >>> signed_message
    SignedMessage(message_hash=HexBytes('0x1476abb745d423bf09273f1afd887d951181d25adc66c4834a70491911b7f750'),
     r=104389933075820307925104709181714897380569894203213074526835978196648170704563,
     s=28205917190874851400050446352651915501321657673772411533993420917949420456142,
     v=28,
     signature=HexBytes('0xe6ca9bba58c88611fad66a6ce8f996908195593807c4b38bd528d2cff09d4eb33e5bfbbf4d3e39b1a2fd816a7680c19ebebaf3a141b239934ad43cb33fcec8ce1c'))
:::
:::
:::

::: {#web3.eth.account.xhtml#verify-a-message .section}
## Verify a Message

With the original message text and a signature:

::: {.highlight-pycon .notranslate}
::: highlight
    >>> message = encode_defunct(text="Iâ™¥SF")
    >>> w3.eth.account.recover_message(message, signature=signed_message.signature)
    '0x5ce9454909639D2D17A3F753ce7d93fa0b9aB12E'
:::
:::
:::

::: {#web3.eth.account.xhtml#prepare-message-for-ecrecover-in-solidity .section}
## Prepare message for ecrecover in Solidity

Let's say you want a contract to validate a signed message, like if
you're making payment channels, and you want to validate the value in
Remix or web3.js.

You might have produced the signed_message locally, as in [Sign a
Message](#web3.eth.account.xhtml#sign-a-message){.reference .internal}.
If so, this will prepare it for Solidity:

::: {.highlight-pycon .notranslate}
::: highlight
    >>> from web3 import Web3

    # ecrecover in Solidity expects v as a uint8, but r and s as left-padded bytes32
    # Remix / web3.js expect r and s to be encoded to hex
    # This convenience method will do the pad & hex for us:
    >>> def to_32byte_hex(val):
    ...   return Web3.to_hex(Web3.to_bytes(val).rjust(32, b'\0'))

    >>> ec_recover_args = (msghash, v, r, s) = (
    ...   Web3.to_hex(signed_message.message_hash),
    ...   signed_message.v,
    ...   to_32byte_hex(signed_message.r),
    ...   to_32byte_hex(signed_message.s),
    ... )
    >>> ec_recover_args
    ('0x1476abb745d423bf09273f1afd887d951181d25adc66c4834a70491911b7f750',
     28,
     '0xe6ca9bba58c88611fad66a6ce8f996908195593807c4b38bd528d2cff09d4eb3',
     '0x3e5bfbbf4d3e39b1a2fd816a7680c19ebebaf3a141b239934ad43cb33fcec8ce')
:::
:::

Instead, you might have received a message and a signature encoded to
hex. Then this will prepare it for Solidity:

::: {.highlight-pycon .notranslate}
::: highlight
    >>> from web3 import Web3
    >>> from eth_account.messages import encode_defunct, _hash_eip191_message

    >>> hex_message = '0x49e299a55346'
    >>> hex_signature = '0xe6ca9bba58c88611fad66a6ce8f996908195593807c4b38bd528d2cff09d4eb33e5bfbbf4d3e39b1a2fd816a7680c19ebebaf3a141b239934ad43cb33fcec8ce1c'

    # ecrecover in Solidity expects an encoded version of the message

    # - encode the message
    >>> message = encode_defunct(hexstr=hex_message)

    # - hash the message explicitly
    >>> message_hash = _hash_eip191_message(message)

    # Remix / web3.js expect the message hash to be encoded to a hex string
    >>> hex_message_hash = Web3.to_hex(message_hash)

    # ecrecover in Solidity expects the signature to be split into v as a uint8,
    #   and r, s as a bytes32
    # Remix / web3.js expect r and s to be encoded to hex
    >>> sig = Web3.to_bytes(hexstr=hex_signature)
    >>> v, hex_r, hex_s = Web3.to_int(sig[-1]), Web3.to_hex(sig[:32]), Web3.to_hex(sig[32:64])

    # ecrecover in Solidity takes the arguments in order = (msghash, v, r, s)
    >>> ec_recover_args = (hex_message_hash, v, hex_r, hex_s)
    >>> ec_recover_args
    ('0x1476abb745d423bf09273f1afd887d951181d25adc66c4834a70491911b7f750',
     28,
     '0xe6ca9bba58c88611fad66a6ce8f996908195593807c4b38bd528d2cff09d4eb3',
     '0x3e5bfbbf4d3e39b1a2fd816a7680c19ebebaf3a141b239934ad43cb33fcec8ce')
:::
:::
:::

::: {#web3.eth.account.xhtml#verify-a-message-with-ecrecover-in-solidity .section}
## Verify a message with ecrecover in Solidity

Create a simple ecrecover contract in
[Remix](https://remix.ethereum.org/){.reference .external}[
\[https://remix.ethereum.org/\]]{.link-target}:

::: {.highlight-none .notranslate}
::: highlight
    pragma solidity ^0.4.19;

    contract Recover {
      function ecr (bytes32 msgh, uint8 v, bytes32 r, bytes32 s) public pure
      returns (address sender) {
        return ecrecover(msgh, v, r, s);
      }
    }
:::
:::

Then call ecr with these arguments from [Prepare message for ecrecover
in
Solidity](#web3.eth.account.xhtml#prepare-message-for-ecrecover-in-solidity){.reference
.internal} in Remix,
[`"0x1476abb745d423bf09273f1afd887d951181d25adc66c4834a70491911b7f750",`{.docutils
.literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`28,`{.docutils .literal .notranslate}]{.pre}` `{.docutils
.literal
.notranslate}[`"0xe6ca9bba58c88611fad66a6ce8f996908195593807c4b38bd528d2cff09d4eb3",`{.docutils
.literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`"0x3e5bfbbf4d3e39b1a2fd816a7680c19ebebaf3a141b239934ad43cb33fcec8ce"`{.docutils
.literal .notranslate}]{.pre}

The message is verified, because we get the correct sender of the
message back in response:
[`0x5ce9454909639d2d17a3f753ce7d93fa0b9ab12e`{.docutils .literal
.notranslate}]{.pre}.
:::

::: {#web3.eth.account.xhtml#sign-a-transaction .section}
[]{#web3.eth.account.xhtml#local-sign-transaction}

## Sign a Transaction

Create a transaction, sign it locally, and then send it to your node for
broadcasting, with [[`send_raw_transaction()`{.xref .py .py-meth
.docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_raw_transaction "web3.eth.Eth.send_raw_transaction"){.reference
.internal}.

::: {.highlight-pycon .notranslate}
::: highlight
    >>> transaction = {
    ...     'to': '0xF0109fC8DF283027b6285cc889F5aA624EaC1F55',
    ...     'value': 1000000000,
    ...     'gas': 2000000,
    ...     'maxFeePerGas': 2000000000,
    ...     'maxPriorityFeePerGas': 1000000000,
    ...     'nonce': 0,
    ...     'chainId': 1,
    ...     'type': '0x2',  # the type is optional and, if omitted, will be interpreted based on the provided transaction parameters
    ...     'accessList': (  # accessList is optional for dynamic fee transactions
    ...         {
    ...             'address': '0xde0b295669a9fd93d5f28d9ec85e40f4cb697bae',
    ...             'storageKeys': (
    ...                 '0x0000000000000000000000000000000000000000000000000000000000000003',
    ...                 '0x0000000000000000000000000000000000000000000000000000000000000007',
    ...             )
    ...         },
    ...         {
    ...             'address': '0xbb9bc244d798123fde783fcc1c72d3bb8c189413',
    ...             'storageKeys': ()
    ...         },
    ...     )
    ... }
    >>> key = '0x4c0883a69102937d6231471b5dbb6204fe5129617082792ae468d01a3f362318'
    >>> signed = w3.eth.account.sign_transaction(transaction, key)
    >>> signed.raw_transaction
    HexBytes('0x02f8e20180843b9aca008477359400831e848094f0109fc8df283027b6285cc889f5aa624eac1f55843b9aca0080f872f85994de0b295669a9fd93d5f28d9ec85e40f4cb697baef842a00000000000000000000000000000000000000000000000000000000000000003a00000000000000000000000000000000000000000000000000000000000000007d694bb9bc244d798123fde783fcc1c72d3bb8c189413c001a0b9ec671ccee417ff79e06e9e52bfa82b37cf1145affde486006072ca7a11cf8da0484a9beea46ff6a90ac76e7bbf3718db16a8b4b09cef477fb86cf4e123d98fde')
    >>> signed.hash
    HexBytes('0xe85ce7efa52c16cb5c469c7bde54fbd4911639fdfde08003f65525a85076d915')
    >>> signed.r
    84095564551732371065849105252408326384410939276686534847013731510862163857293
    >>> signed.s
    32698347985257114675470251181312399332782188326270244072370350491677872459742
    >>> signed.v
    1

    # When you run send_raw_transaction, you get back the hash of the transaction:
    >>> w3.eth.send_raw_transaction(signed.raw_transaction)  
    '0xe85ce7efa52c16cb5c469c7bde54fbd4911639fdfde08003f65525a85076d915'
:::
:::
:::

::: {#web3.eth.account.xhtml#sign-a-contract-transaction .section}
## Sign a Contract Transaction

To sign a transaction locally that will invoke a smart contract:

1.  Initialize your [[`Contract`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.contract "web3.eth.Eth.contract"){.reference
    .internal} object

2.  Build the transaction

3.  Sign the transaction, with
    [[`w3.eth.account.sign_transaction()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.sign_transaction "(in eth-account v0.14)"){.reference
    .external}[
    \[https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.sign_transaction\]]{.link-target}

4.  Broadcast the transaction with [[`send_raw_transaction()`{.xref .py
    .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_raw_transaction "web3.eth.Eth.send_raw_transaction"){.reference
    .internal}

::: {.highlight-pycon .notranslate}
::: highlight
    # When running locally, execute the statements found in the file linked below to load the EIP20_ABI variable.
    # See: https://github.com/carver/ethtoken.py/blob/v0.0.1-alpha.4/ethtoken/abi.py

    >>> from web3 import Web3, EthereumTesterProvider
    >>> w3 = Web3(EthereumTesterProvider())

    >>> unicorns = w3.eth.contract(address="0xfB6916095ca1df60bB79Ce92cE3Ea74c37c5d359", abi=EIP20_ABI)

    >>> nonce = w3.eth.get_transaction_count('0x5ce9454909639D2D17A3F753ce7d93fa0b9aB12E')  

    # Build a transaction that invokes this contract's function, called transfer
    >>> unicorn_txn = unicorns.functions.transfer(
    ...     '0xfB6916095ca1df60bB79Ce92cE3Ea74c37c5d359',
    ...     1,
    ... ).build_transaction({
    ...     'chainId': 1,
    ...     'gas': 70000,
    ...     'maxFeePerGas': w3.to_wei('2', 'gwei'),
    ...     'maxPriorityFeePerGas': w3.to_wei('1', 'gwei'),
    ...     'nonce': nonce,
    ... })

    >>> unicorn_txn
    {'value': 0,
     'chainId': 1,
     'gas': 70000,
     'maxFeePerGas': 2000000000,
     'maxPriorityFeePerGas': 1000000000,
     'nonce': 0,
     'to': '0xfB6916095ca1df60bB79Ce92cE3Ea74c37c5d359',
     'data': '0xa9059cbb000000000000000000000000fb6916095ca1df60bb79ce92ce3ea74c37c5d3590000000000000000000000000000000000000000000000000000000000000001'}

    >>> private_key = b"\xb2\\}\xb3\x1f\xee\xd9\x12''\xbf\t9\xdcv\x9a\x96VK-\xe4\xc4rm\x03[6\xec\xf1\xe5\xb3d"
    >>> signed_txn = w3.eth.account.sign_transaction(unicorn_txn, private_key=private_key)
    >>> signed_txn.hash
    HexBytes('0x748db062639a45e519dba934fce09c367c92043867409160c9989673439dc817')
    >>> signed_txn.raw_transaction
    HexBytes('0x02f8b00180843b9aca0084773594008301117094fb6916095ca1df60bb79ce92ce3ea74c37c5d35980b844a9059cbb000000000000000000000000fb6916095ca1df60bb79ce92ce3ea74c37c5d3590000000000000000000000000000000000000000000000000000000000000001c001a0cec4150e52898cf1295cc4020ac0316cbf186071e7cdc5ec44eeb7cdda05afa2a06b0b3a09c7fb0112123c0bef1fd6334853a9dcf3cb5bab3ccd1f5baae926d449')
    >>> signed_txn.r
    93522894155654168208483453926995743737629589441154283159505514235904280342434
    >>> signed_txn.s
    48417310681110102814014302147799665717176259465062324746227758019974374282313
    >>> signed_txn.v
    1

    >>> w3.eth.send_raw_transaction(signed_txn.raw_transaction)  

    # When you run send_raw_transaction, you get the same result as the hash of the transaction:
    >>> w3.to_hex(w3.keccak(signed_txn.raw_transaction))
    '0x748db062639a45e519dba934fce09c367c92043867409160c9989673439dc817'
:::
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#transactions.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#transactions.xhtml#transactions .section}
# Transactions

There are a handful of ways to interact with transactions in web3.py.
See the [[Web3.eth module]{.std
.std-ref}](#web3.eth.xhtml#web3-eth-methods){.reference .internal} for a
full list of transaction-related methods. Note that you may also [[batch
requests]{.std .std-ref}](#web3.main.xhtml#batch-requests){.reference
.internal} that read transaction data, but not send new transactions in
a batch request.

The rest of this guide covers the decision tree for how to send a
transaction.

::: {.admonition .note}
Note

Prefer to view this code in a Jupyter Notebook? View the repo
[here](https://github.com/wolovim/ethereum-notebooks/blob/master/Sending%20Transactions.ipynb){.reference
.external}[
\[https://github.com/wolovim/ethereum-notebooks/blob/master/Sending%20Transactions.ipynb\]]{.link-target}.
:::

There are two methods for sending transactions using web3.py:
[[`send_transaction()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
.internal} and [[`send_raw_transaction()`{.xref .py .py-meth .docutils
.literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_raw_transaction "web3.eth.Eth.send_raw_transaction"){.reference
.internal}. A brief guide:

1.  Want to sign a transaction offline or send pre-signed transactions?

    -   use [[`sign_transaction`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre}](https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.sign_transaction "(in eth-account v0.14)"){.reference
        .external}[
        \[https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.sign_transaction\]]{.link-target} +
        [[`send_raw_transaction()`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_raw_transaction "web3.eth.Eth.send_raw_transaction"){.reference
        .internal}

2.  Are you primarily using the same account for all transactions and
    would you prefer to save a few lines of code?

    -   configure the [`build`{.docutils .literal .notranslate}]{.pre}
        method for [[`SignAndSendRawMiddlewareBuilder`{.xref .py
        .py-class .docutils .literal
        .notranslate}]{.pre}](#middleware.xhtml#web3.middleware.SignAndSendRawMiddlewareBuilder "web3.middleware.SignAndSendRawMiddlewareBuilder"){.reference
        .internal}, then

    -   use [[`send_transaction()`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
        .internal}

3.  Otherwise:

    -   load account via eth-account
        ([[`w3.eth.account.from_key(pk)`{.xref .py .py-meth .docutils
        .literal
        .notranslate}]{.pre}](https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.from_key "(in eth-account v0.14)"){.reference
        .external}[
        \[https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.from_key\]]{.link-target}),
        then

    -   use [[`send_transaction()`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
        .internal}

Interacting with or deploying a contract?

-   Option 1: [[`transact()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction.transact "web3.contract.ContractFunction.transact"){.reference
    .internal} uses [[`send_transaction()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
    .internal} under the hood

-   Option 2: [[`build_transaction()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction.build_transaction "web3.contract.ContractFunction.build_transaction"){.reference
    .internal} + [[`sign_transaction`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.sign_transaction "(in eth-account v0.14)"){.reference
    .external}[
    \[https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.sign_transaction\]]{.link-target} +
    [[`send_raw_transaction()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_raw_transaction "web3.eth.Eth.send_raw_transaction"){.reference
    .internal}

An example for each can be found below.

::: {#transactions.xhtml#chapter-0-w3-eth-send-transaction-with-eth-tester .section}
## Chapter 0: [`w3.eth.send_transaction`{.docutils .literal .notranslate}]{.pre} with [`eth-tester`{.docutils .literal .notranslate}]{.pre}

Many tutorials use [`eth-tester`{.docutils .literal .notranslate}]{.pre}
(via EthereumTesterProvider) for convenience and speed of conveying
ideas/building a proof of concept. Transactions sent by test accounts
are auto-signed.

::: {.highlight-python .notranslate}
::: highlight
    from web3 import Web3, EthereumTesterProvider

    w3 = Web3(EthereumTesterProvider())

    # eth-tester populates accounts with test ether:
    acct1 = w3.eth.accounts[0]

    some_address = "0x0000000000000000000000000000000000000000"

    # when using one of its generated test accounts,
    # eth-tester signs the tx (under the hood) before sending:
    tx_hash = w3.eth.send_transaction({
        "from": acct1,
        "to": some_address,
        "value": 123123123123123
    })

    tx = w3.eth.get_transaction(tx_hash)
    assert tx["from"] == acct1
:::
:::
:::

::: {#transactions.xhtml#chapter-1-w3-eth-send-transaction-signer-middleware .section}
## Chapter 1: [`w3.eth.send_transaction`{.docutils .literal .notranslate}]{.pre} + signer middleware

The [[`send_transaction()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
.internal} method is convenient and to-the-point. If you want to
continue using the pattern after graduating from [`eth-tester`{.docutils
.literal .notranslate}]{.pre}, you can utilize web3.py middleware to
sign transactions from a particular account:

::: {.highlight-python .notranslate}
::: highlight
    from web3.middleware import SignAndSendRawMiddlewareBuilder
    import os

    # Note: Never commit your key in your code! Use env variables instead:
    pk = os.environ.get('PRIVATE_KEY')

    # Instantiate an Account object from your key:
    acct2 = w3.eth.account.from_key(pk)

    # For the sake of this example, fund the new account:
    w3.eth.send_transaction({
        "from": acct1,
        "value": w3.to_wei(3, 'ether'),
        "to": acct2.address
    })

    # Add acct2 as auto-signer:
    w3.middleware_onion.inject(SignAndSendRawMiddlewareBuilder.build(acct2), layer=0)
    # pk also works: w3.middleware_onion.inject(SignAndSendRawMiddlewareBuilder.build(pk), layer=0)

    # Transactions from `acct2` will then be signed, under the hood, in the middleware:
    tx_hash = w3.eth.send_transaction({
        "from": acct2.address,
        "value": 3333333333,
        "to": some_address
    })

    tx = w3.eth.get_transaction(tx_hash)
    assert tx["from"] == acct2.address

    # Optionally, you can set a default signer as well:
    # w3.eth.default_account = acct2.address
    # Then, if you omit a "from" key, acct2 will be used.
:::
:::
:::

::: {#transactions.xhtml#chapter-2-w3-eth-send-raw-transaction .section}
## Chapter 2: [`w3.eth.send_raw_transaction`{.docutils .literal .notranslate}]{.pre}

if you don't opt for the middleware, you'll need to:

-   build each transaction,

-   [[`sign_transaction`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.sign_transaction "(in eth-account v0.14)"){.reference
    .external}[
    \[https://eth-account.readthedocs.io/en/latest/eth_account.html#eth_account.account.Account.sign_transaction\]]{.link-target},
    and

-   then use [[`send_raw_transaction()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_raw_transaction "web3.eth.Eth.send_raw_transaction"){.reference
    .internal}.

::: {.highlight-python .notranslate}
::: highlight
    # 1. Build a new tx
    transaction = {
        'from': acct2.address,
        'to': some_address,
        'value': 1000000000,
        'nonce': w3.eth.get_transaction_count(acct2.address),
        'gas': 200000,
        'maxFeePerGas': 2000000000,
        'maxPriorityFeePerGas': 1000000000,
    }

    # 2. Sign tx with a private key
    signed = w3.eth.account.sign_transaction(transaction, pk)

    # 3. Send the signed transaction
    tx_hash = w3.eth.send_raw_transaction(signed.raw_transaction)
    tx = w3.eth.get_transaction(tx_hash)
    assert tx["from"] == acct2.address
:::
:::
:::

::: {#transactions.xhtml#chapter-3-contract-transactions .section}
## Chapter 3: Contract transactions

The same concepts apply for contract interactions, at least under the
hood.

Executing a function on a smart contract requires sending a transaction,
which is typically done in one of two ways:

-   executing the [[`transact()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction.transact "web3.contract.ContractFunction.transact"){.reference
    .internal} function, or

-   [[`build_transaction()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction.build_transaction "web3.contract.ContractFunction.build_transaction"){.reference
    .internal}, then signing and sending the raw transaction.

::: {.highlight-python .notranslate}
::: highlight
    #########################################
    #### SMOL CONTRACT FOR THIS EXAMPLE: ####
    #########################################
    # // SPDX-License-Identifier: MIT
    # pragma solidity 0.8.17;
    #
    # contract Billboard {
    #     string public message;
    #
    #     constructor(string memory _message) {
    #         message = _message;
    #     }
    #
    #     function writeBillboard(string memory _message) public {
    #         message = _message;
    #     }
    # }

    # After compiling the contract, initialize the contract factory:
    init_bytecode = "60806040523480156200001157600080fd5b5060..."
    abi = '[{"inputs": [{"internalType": "string","name": "_message",...'
    Billboard = w3.eth.contract(bytecode=init_bytecode, abi=abi)

    # Deploy a contract using `transact` + the signer middleware:
    tx_hash = Billboard.constructor("gm").transact({"from": acct2.address})
    receipt = w3.eth.get_transaction_receipt(tx_hash)
    deployed_addr = receipt["contractAddress"]

    # Reference the deployed contract:
    billboard = w3.eth.contract(address=deployed_addr, abi=abi)

    # Manually build and sign a transaction:
    unsent_billboard_tx = billboard.functions.writeBillboard("gn").build_transaction({
        "from": acct2.address,
        "nonce": w3.eth.get_transaction_count(acct2.address),
    })
    signed_tx = w3.eth.account.sign_transaction(unsent_billboard_tx, private_key=acct2.key)

    # Send the raw transaction:
    assert billboard.functions.message().call() == "gm"
    tx_hash = w3.eth.send_raw_transaction(signed_tx.raw_transaction)
    w3.eth.wait_for_transaction_receipt(tx_hash)
    assert billboard.functions.message().call() == "gn"
:::
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#web3.contract.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#web3.contract.xhtml#contracts .section}
[]{#web3.contract.xhtml#id1}

# Contracts

Smart contracts are programs deployed to the Ethereum network. See the
[ethereum.org
docs](https://ethereum.org/en/developers/docs/smart-contracts){.reference
.external}[
\[https://ethereum.org/en/developers/docs/smart-contracts\]]{.link-target}
for a proper introduction.

::: {#web3.contract.xhtml#interacting-with-deployed-contracts .section}
## Interacting with deployed contracts

In order to use an existing contract, you'll need its deployed address
and its ABI. Both can be found using block explorers, like Etherscan.
Once you instantiate a contract instance, you can read data and execute
transactions.

::: {.highlight-python .notranslate}
::: highlight
    # Configure w3, e.g., w3 = Web3(...)
    address = '0x1f9840a85d5aF5bf1D1762F925BDADdC4201F988'
    abi = '[{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"address","name":"minter_","type":"address"},...'
    contract_instance = w3.eth.contract(address=address, abi=abi)

    # read state:
    contract_instance.functions.storedValue().call()
    # 42

    # update state:
    tx_hash = contract_instance.functions.updateValue(43).transact()
:::
:::
:::

::: {#web3.contract.xhtml#contract-deployment-example .section}
[]{#web3.contract.xhtml#contract-example}

## Contract Deployment Example

To run this example, you will need to install a few extra features:

-   The sandbox node provided by eth-tester. You can install it with:

::: {.highlight-bash .notranslate}
::: highlight
    $ pip install -U "web3[tester]"
:::
:::

-   [`py-solc-x`{.docutils .literal .notranslate}]{.pre}. This is the
    supported route to installing the solidity compiler
    [`solc`{.docutils .literal .notranslate}]{.pre}. You can install it
    with:

::: {.highlight-bash .notranslate}
::: highlight
    $ pip install py-solc-x
:::
:::

After [`py-solc-x`{.docutils .literal .notranslate}]{.pre} is installed,
you will need to install a version of [`solc`{.docutils .literal
.notranslate}]{.pre}. You can install the latest version via a new REPL
with:

::: {.highlight-python .notranslate}
::: highlight
    >>> from solcx import install_solc
    >>> install_solc(version='latest')
:::
:::

You should now be set up to compile and deploy a contract.

The following example runs through these steps:

1.  Compile Solidity contract into bytecode and an ABI

2.  Initialize a Contract instance

3.  Deploy the contract using the Contract instance to initiate a
    transaction

4.  Interact with the contract functions using the Contract instance

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3 import Web3
    >>> from solcx import compile_source

    # Solidity source code
    >>> compiled_sol = compile_source(
    ...     '''
    ...     pragma solidity >0.5.0;
    ...
    ...     contract Greeter {
    ...         string public greeting;
    ...
    ...         constructor() public {
    ...             greeting = 'Hello';
    ...         }
    ...
    ...         function setGreeting(string memory _greeting) public {
    ...             greeting = _greeting;
    ...         }
    ...
    ...         function greet() view public returns (string memory) {
    ...             return greeting;
    ...         }
    ...     }
    ...     ''',
    ...     output_values=['abi', 'bin']
    ... )

    # retrieve the contract interface
    >>> contract_id, contract_interface = compiled_sol.popitem()

    # get bytecode / bin
    >>> bytecode = contract_interface['bin']

    # get abi
    >>> abi = contract_interface['abi']

    # web3.py instance
    >>> w3 = Web3(Web3.EthereumTesterProvider())

    # set pre-funded account as sender
    >>> w3.eth.default_account = w3.eth.accounts[0]

    >>> Greeter = w3.eth.contract(abi=abi, bytecode=bytecode)

    # Submit the transaction that deploys the contract
    >>> tx_hash = Greeter.constructor().transact()

    # Wait for the transaction to be mined, and get the transaction receipt
    >>> tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)

    >>> greeter = w3.eth.contract(
    ...     address=tx_receipt.contractAddress,
    ...     abi=abi
    ... )

    >>> greeter.functions.greet().call()
    'Hello'

    >>> tx_hash = greeter.functions.setGreeting('Nihao').transact()
    >>> tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
    >>> greeter.functions.greet().call()
    'Nihao'
:::
:::
:::

::: {#web3.contract.xhtml#contract-factories .section}
## Contract Factories

These factories are not intended to be initialized directly. Instead,
create contract objects using the [[`w3.eth.contract()`{.xref .py
.py-meth .docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.contract "web3.eth.Eth.contract"){.reference
.internal} method. By default, the contract factory is
[[`Contract`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract "web3.contract.Contract"){.reference
.internal}.

*[class]{.pre}[ ]{.w}*[[web3.contract.]{.pre}]{.sig-prename .descclassname}[[Contract]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[address]{.pre}]{.n}*[)]{.sig-paren}

:   Contract provides a default interface for deploying and interacting
    with Ethereum smart contracts.

    The address parameter can be a hex address or an ENS name, like
    [`mycontract.eth`{.docutils .literal .notranslate}]{.pre}.
:::

::: {#web3.contract.xhtml#properties .section}
## Properties

Each Contract Factory exposes the following properties.

[[Contract.]{.pre}]{.sig-prename .descclassname}[[address]{.pre}]{.sig-name .descname}

:   The hexadecimal encoded 20-byte address of the contract, or an ENS
    name. May be [`None`{.docutils .literal .notranslate}]{.pre} if not
    provided during factory creation.

```{=html}
<!-- -->
```

[[Contract.]{.pre}]{.sig-prename .descclassname}[[abi]{.pre}]{.sig-name .descname}

:   The contract [`abi`{.docutils .literal .notranslate}]{.pre}, or
    Application Binary Interface, specifies how a contract can be
    interacted with. Without an [`abi`{.docutils .literal
    .notranslate}]{.pre}, the contract cannot be decoded. The
    [`abi`{.docutils .literal .notranslate}]{.pre} enables the Contract
    instance to expose functions and events as object properties.

    For further details, see the [Solidity ABI
    specification](https://docs.soliditylang.org/en/develop/abi-spec.html){.reference
    .external}[
    \[https://docs.soliditylang.org/en/develop/abi-spec.html\]]{.link-target}.

```{=html}
<!-- -->
```

[[Contract.]{.pre}]{.sig-prename .descclassname}[[bytecode]{.pre}]{.sig-name .descname}

:   The contract bytecode string. May be [`None`{.docutils .literal
    .notranslate}]{.pre} if not provided during factory creation.

```{=html}
<!-- -->
```

[[Contract.]{.pre}]{.sig-prename .descclassname}[[bytecode_runtime]{.pre}]{.sig-name .descname}

:   The runtime part of the contract bytecode string. May be
    [`None`{.docutils .literal .notranslate}]{.pre} if not provided
    during factory creation.

```{=html}
<!-- -->
```

[[Contract.]{.pre}]{.sig-prename .descclassname}[[decode_tuples]{.pre}]{.sig-name .descname}

:   If a Tuple/Struct is returned by a contract function, this flag
    defines whether to apply the field names from the ABI to the
    returned data. If False, the returned value will be a normal Python
    [`Tuple`{.docutils .literal .notranslate}]{.pre}. If True, the
    returned value will be a Python [`NamedTuple`{.docutils .literal
    .notranslate}]{.pre} of the class [`ABIDecodedNamedTuple`{.docutils
    .literal .notranslate}]{.pre}.

    NamedTuples have some restrictions regarding field names. web3.py
    sets [`NamedTuple`{.docutils .literal .notranslate}]{.pre}'s
    [`rename=True`{.docutils .literal .notranslate}]{.pre}, so
    disallowed field names may be different than expected. See the
    [Python
    docs](https://docs.python.org/3/library/collections.html#collections.namedtuple){.reference
    .external}[
    \[https://docs.python.org/3/library/collections.html#collections.namedtuple\]]{.link-target}
    for more information.

    Defaults to [`False`{.docutils .literal .notranslate}]{.pre} if not
    provided during factory creation.

```{=html}
<!-- -->
```

[[Contract.]{.pre}]{.sig-prename .descclassname}[[functions]{.pre}]{.sig-name .descname}

:   This provides access to contract functions as attributes. For
    example: [`myContract.functions.MyMethod()`{.docutils .literal
    .notranslate}]{.pre}. The exposed contract functions are classes of
    the type [[`ContractFunction`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
    .internal}.

```{=html}
<!-- -->
```

[[Contract.]{.pre}]{.sig-prename .descclassname}[[events]{.pre}]{.sig-name .descname}

:   This provides access to contract events as attributes. For example:
    [`myContract.events.MyEvent()`{.docutils .literal
    .notranslate}]{.pre}. The exposed contract events are classes of the
    type [[`ContractEvent`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractEvent "web3.contract.ContractEvent"){.reference
    .internal}.
:::

::: {#web3.contract.xhtml#methods .section}
## Methods

Method doctests use the following ABI and bytecode.

::: {.highlight-python .notranslate}
::: highlight
    >>> bytecode = '6060604052341561000c57fe5b604051602080610acb833981016040528080519060200190919050505b620f42408114151561003b5760006000fd5b670de0b6b3a76400008102600281905550600254600060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505b505b610a27806100a46000396000f30060606040523615610097576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806306fdde0314610099578063095ea7b31461013257806318160ddd1461018957806323b872dd146101af578063313ce5671461022557806370a082311461025157806395d89b411461029b578063a9059cbb14610334578063dd62ed3e1461038b575bfe5b34156100a157fe5b6100a96103f4565b60405180806020018281038252838181518152602001915080519060200190808383600083146100f8575b8051825260208311156100f8576020820191506020810190506020830392506100d4565b505050905090810190601f1680156101245780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561013a57fe5b61016f600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061042e565b604051808215151515815260200191505060405180910390f35b341561019157fe5b610199610521565b6040518082815260200191505060405180910390f35b34156101b757fe5b61020b600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091908035906020019091905050610527565b604051808215151515815260200191505060405180910390f35b341561022d57fe5b610235610791565b604051808260ff1660ff16815260200191505060405180910390f35b341561025957fe5b610285600480803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610796565b6040518082815260200191505060405180910390f35b34156102a357fe5b6102ab6107e0565b60405180806020018281038252838181518152602001915080519060200190808383600083146102fa575b8051825260208311156102fa576020820191506020810190506020830392506102d6565b505050905090810190601f1680156103265780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b341561033c57fe5b610371600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803590602001909190505061081a565b604051808215151515815260200191505060405180910390f35b341561039357fe5b6103de600480803573ffffffffffffffffffffffffffffffffffffffff1690602001909190803573ffffffffffffffffffffffffffffffffffffffff16906020019091905050610973565b6040518082815260200191505060405180910390f35b604060405190810160405280600981526020017f54657374546f6b656e000000000000000000000000000000000000000000000081525081565b600081600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925846040518082815260200191505060405180910390a3600190505b92915050565b60025481565b600081600060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410806105f1575081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002054105b156105fc5760006000fd5b81600060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254019250508190555081600060008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600160008673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825403925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a3600190505b9392505050565b601281565b6000600060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b919050565b604060405190810160405280600481526020017f544553540000000000000000000000000000000000000000000000000000000081525081565b600081600060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205410156108695760006000fd5b81600060003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254039250508190555081600060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825401925050819055508273ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef846040518082815260200191505060405180910390a3600190505b92915050565b6000600160008473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205490505b929150505600a165627a7a723058205071371ee2a4a1be3c96e77d939cdc26161a256fdd638efc08bd33dfc65d3b850029'
    >>> abi = '[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function","stateMutability":"view"},{"constant":false,"inputs":[{"name":"_spender","type":"address"},{"name":"_value","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function","stateMutability":"nonpayable"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function","stateMutability":"view"},{"constant":false,"inputs":[{"name":"_from","type":"address"},{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function","stateMutability":"nonpayable"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"type":"function","stateMutability":"view"},{"constant":true,"inputs":[{"name":"_owner","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function","stateMutability":"view"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"type":"function","stateMutability":"view"},{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"type":"function","stateMutability":"nonpayable"},{"constant":true,"inputs":[{"name":"_owner","type":"address"},{"name":"_spender","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"type":"function","stateMutability":"view"},{"inputs":[{"name":"_totalSupply","type":"uint256"}],"payable":false,"type":"constructor","stateMutability":"nonpayable"},{"anonymous":false,"inputs":[{"indexed":true,"name":"from","type":"address"},{"indexed":true,"name":"to","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"owner","type":"address"},{"indexed":true,"name":"spender","type":"address"},{"indexed":false,"name":"value","type":"uint256"}],"name":"Approval","type":"event"}]'
    >>> contract = w3.eth.contract(abi=abi, bytecode=bytecode)
:::
:::

Each Contract Factory exposes the following methods.

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[constructor]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[\*args]{.pre}]{.n}*, *[[\*\*kwargs).transact(transaction=None]{.pre}]{.n}*[)]{.sig-paren}

:   Construct and deploy a contract by sending a new public transaction.

    If provided [`transaction`{.docutils .literal .notranslate}]{.pre}
    should be a dictionary conforming to the
    [`web3.eth.send_transaction(transaction)`{.docutils .literal
    .notranslate}]{.pre} method. This value may not contain the keys
    [`data`{.docutils .literal .notranslate}]{.pre} or [`to`{.docutils
    .literal .notranslate}]{.pre}.

    If the contract takes constructor parameters they should be provided
    as positional arguments or keyword arguments.

    If any of the arguments specified in the ABI are an
    [`address`{.docutils .literal .notranslate}]{.pre} type, they will
    accept ENS names.

    If a [`gas`{.docutils .literal .notranslate}]{.pre} value is not
    provided, then the [`gas`{.docutils .literal .notranslate}]{.pre}
    value for the deployment transaction will be created using the
    [`web3.eth.estimate_gas()`{.docutils .literal .notranslate}]{.pre}
    method.

    Returns the transaction hash for the deploy transaction.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> deploy_txn = contract.constructor(1000000).transact({'from': w3.eth.accounts[0], 'gas': 899000, 'gasPrice': Web3.to_wei(1, 'gwei')})
        >>> txn_receipt = w3.eth.get_transaction_receipt(deploy_txn)
        >>> txn_receipt['contractAddress']
        '0xF2E246BB76DF876Cef8b38ae84130F4F55De395b'
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[constructor]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[\*args]{.pre}]{.n}*, *[[\*\*kwargs).estimate_gas(transaction=None]{.pre}]{.n}*, *[[block_identifier=None]{.pre}]{.n}*[)]{.sig-paren}

:   Estimate gas for constructing and deploying the contract.

    This method behaves the same as the
    [`Contract.constructor(*args,`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}` `{.xref .py .py-meth .docutils .literal
    .notranslate}[`**kwargs).transact()`{.xref .py .py-meth .docutils
    .literal .notranslate}]{.pre} method, with transaction details being
    passed into the end portion of the function call, and function
    arguments being passed into the first portion.

    The [`block_identifier`{.docutils .literal .notranslate}]{.pre}
    parameter is passed directly to the call at the end portion of the
    function call.

    Returns the amount of gas consumed which can be used as a gas
    estimate for executing this transaction publicly.

    Returns the gas needed to deploy the contract.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.constructor(1000000).estimate_gas()
        664971
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[constructor]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[\*args]{.pre}]{.n}*, *[[\*\*kwargs).build_transaction(transaction=None]{.pre}]{.n}*[)]{.sig-paren}

:   Construct the contract deploy transaction bytecode data.

    If the contract takes constructor parameters they should be provided
    as positional arguments or keyword arguments.

    If any of the [`args`{.docutils .literal .notranslate}]{.pre}
    specified in the ABI are an [`address`{.docutils .literal
    .notranslate}]{.pre} type, they will accept ENS names.

    Returns the transaction dictionary that you can pass to
    send_transaction method.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> transaction = {
        ...   'gas': 664971,
        ...   'chainId': 131277322940537
        ... }
        >>> contract_data = contract.constructor(1000000).build_transaction(transaction)
        >>> w3.eth.send_transaction(contract_data)
        HexBytes('0x40c51804800dee88e14e69826cfe51bc5f25f61935331e8aa6d8d7771fb36350')
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.events.your_event_name.]{.pre}]{.sig-prename .descclassname}[[create_filter]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[from_block]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[to_block]{.pre}]{.n}[[=]{.pre}]{.o}[[\'latest\']{.pre}]{.default_value}*, *[[argument_filters]{.pre}]{.n}[[=]{.pre}]{.o}[[{}]{.pre}]{.default_value}*, *[[topics]{.pre}]{.n}[[=]{.pre}]{.o}[[\[\]]{.pre}]{.default_value}*[)]{.sig-paren}

:   Creates a new event filter, an instance of
    [[`web3.utils.filters.LogFilter`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.LogFilter "web3.utils.filters.LogFilter"){.reference
    .internal}.

    -   [`from_block`{.docutils .literal .notranslate}]{.pre} is a
        mandatory field. Defines the starting block (exclusive) filter
        block range. It can be either the starting block number, or
        'latest' for the last mined block, or 'pending' for unmined
        transactions. In the case of [`from_block`{.docutils .literal
        .notranslate}]{.pre}, 'latest' and 'pending' set the 'latest' or
        'pending' block as a static value for the starting filter block.

    -   [`to_block`{.docutils .literal .notranslate}]{.pre} optional.
        Defaults to 'latest'. Defines the ending block (inclusive) in
        the filter block range. Special values 'latest' and 'pending'
        set a dynamic range that always includes the 'latest' or
        'pending' blocks for the filter's upper block range.

    -   [`address`{.docutils .literal .notranslate}]{.pre} optional.
        Defaults to the contract address. The filter matches the event
        logs emanating from [`address`{.docutils .literal
        .notranslate}]{.pre}.

    -   [`argument_filters`{.docutils .literal .notranslate}]{.pre},
        optional. Expects a dictionary of argument names and values.
        When provided event logs are filtered for the event argument
        values. Event arguments can be both indexed or unindexed.
        Indexed values will be translated to their corresponding topic
        arguments. Unindexed arguments will be filtered using a regular
        expression.

    -   [`topics`{.docutils .literal .notranslate}]{.pre} optional,
        accepts the standard JSON-RPC topics argument. See the JSON-RPC
        documentation for
        [eth_newFilter](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_newfilter){.reference
        .external}[
        \[https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_newfilter\]]{.link-target}
        more information on the [`topics`{.docutils .literal
        .notranslate}]{.pre} parameters.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> filter = contract.events.Transfer.create_filter(from_block='latest')
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.events.your_event_name.]{.pre}]{.sig-prename .descclassname}[[build_filter]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   Creates a EventFilterBuilder instance with the event abi, and the
    contract address if called from a deployed contract instance. The
    EventFilterBuilder provides a convenient way to construct the filter
    parameters with value checking against the event abi. It allows for
    defining multiple match values or of single values through the
    match_any and match_single methods.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> filter_builder = contract.events.Transfer.build_filter()
        >>> filter_builder.from_block = "latest"
        >>> filter_builder.args['from'].match_any(w3.eth.accounts[0])
        >>> filter_builder.args['to'].match_single(w3.eth.accounts[1])
        >>> filter_builder.args['value'].match_single(10000)
        >>> filter_instance = filter_builder.deploy(w3)
    :::
    :::

    The [`deploy`{.docutils .literal .notranslate}]{.pre} method returns
    a [[`web3.utils.filters.LogFilter`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.LogFilter "web3.utils.filters.LogFilter"){.reference
    .internal} instance from the filter parameters generated by the
    filter builder. Defining multiple match values for array arguments
    can be accomplished easily with the filter builder:

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> filter_builder = contract.events.Transfer.build_filter()
        >>> filter_builder.args['to'].match_any(w3.eth.accounts[0], w3.eth.accounts[1])
    :::
    :::

    The filter builder blocks already defined filter parameters from
    being changed.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> filter_builder = contract.events.Transfer.build_filter()
        >>> filter_builder.from_block = "latest"
        >>> filter_builder.from_block = 0
        Traceback (most recent call last):
        web3.exceptions.Web3ValueError: from_block is already set to 'latest'. Resetting filter parameters is not permitted
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[encode_abi]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[abi_element_identifier]{.pre}]{.n}*, *[[args]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[kwargs]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[data]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Encodes the arguments using the Ethereum ABI for the contract
    function that matches the given [`abi_element_identifier`{.docutils
    .literal .notranslate}]{.pre} and arguments [`args`{.docutils
    .literal .notranslate}]{.pre}. The [`data`{.docutils .literal
    .notranslate}]{.pre} parameter defaults to the function selector.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.encode_abi("approve", args=[w3.eth.accounts[0], 10])
        '0x095ea7b30000000000000000000000007e5f4552091a69125d5dfcb7b8c2659029395bdf000000000000000000000000000000000000000000000000000000000000000a'
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[all_events]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   Returns a list of all the events present in a Contract where every
    event is an instance of [[`ContractEvent`{.xref .py .py-class
    .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractEvent "web3.contract.ContractEvent"){.reference
    .internal}.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.all_events()
        [<Event Transfer(address,address,uint256)>, <Event Approval(address,address,uint256)>]
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[get_event_by_signature]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[signature]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for a distinct event with matching signature. Returns an
    instance of [[`ContractEvent`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractEvent "web3.contract.ContractEvent"){.reference
    .internal} upon finding a match. Raises [`Web3ValueError`{.docutils
    .literal .notranslate}]{.pre} if no match is found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.get_event_by_signature('Transfer(address,address,uint256)')
        <Event Transfer(address,address,uint256)>
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[find_events_by_name]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for all events matching the provided name. Returns a list
    of matching events where every event is an instance of
    [[`ContractEvent`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractEvent "web3.contract.ContractEvent"){.reference
    .internal}. Returns an empty list when no match is found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.find_events_by_name('Transfer')
        [<Event Transfer(address,address,uint256)>]
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[get_event_by_name]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for a distinct event matching the name. Returns an instance
    of [[`ContractEvent`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractEvent "web3.contract.ContractEvent"){.reference
    .internal} upon finding a match. Raises [`Web3ValueError`{.docutils
    .literal .notranslate}]{.pre} if no match is found or if multiple
    matches are found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.get_event_by_name('Approval')
        <Event Approval(address,address,uint256)>
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[find_events_by_selector]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[selector]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for all events matching the provided selector. Returns a
    list of matching events where every event is an instance of
    [[`ContractEvent`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractEvent "web3.contract.ContractEvent"){.reference
    .internal}. Returns an empty list when no match is found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.find_events_by_selector('0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925')
        [<Event Approval(address,address,uint256)>]
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[get_event_by_selector]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[selector]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for a distinct event with matching selector. The selector
    can be a hexadecimal string, bytes or int. Returns an instance of
    [[`ContractEvent`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractEvent "web3.contract.ContractEvent"){.reference
    .internal} upon finding a match. Raises [`Web3ValueError`{.docutils
    .literal .notranslate}]{.pre} if no match is found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.get_event_by_selector('0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925')
        <Event Approval(address,address,uint256)>
        >>> contract.get_event_by_selector(b'\x8c[\xe1\xe5\xeb\xec}[\xd1OqB}\x1e\x84\xf3\xdd\x03\x14\xc0\xf7\xb2)\x1e[ \n\xc8\xc7\xc3\xb9%')
        <Event Approval(address,address,uint256)>
        >>> contract.get_event_by_selector(0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925)
        <Event Approval(address,address,uint256)>
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[find_events_by_topic]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[topic]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for all events matching the provided topic. Returns a list
    of matching events where every event is an instance of
    [[`ContractEvent`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractEvent "web3.contract.ContractEvent"){.reference
    .internal}. Returns an empty list when no match is found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.find_events_by_topic('0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925')
        [<Event Approval(address,address,uint256)>]
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[get_event_by_topic]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[topic]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for a distinct event with matching topic. The topic is a
    hexadecimal string. Returns an instance of [[`ContractEvent`{.xref
    .py .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractEvent "web3.contract.ContractEvent"){.reference
    .internal} upon finding a match. Raises [`Web3ValueError`{.docutils
    .literal .notranslate}]{.pre} if no match is found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.get_event_by_topic('0x8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925')
        <Event Approval(address,address,uint256)>
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[all_functions]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   Returns a list of all the functions present in a Contract where
    every function is an instance of [[`ContractFunction`{.xref .py
    .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
    .internal}.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.all_functions()
        [<Function allowance(address,address)>, <Function approve(address,uint256)>, <Function balanceOf(address)>, <Function decimals()>, <Function name()>, <Function symbol()>, <Function totalSupply()>, <Function transfer(address,uint256)>, <Function transferFrom(address,address,uint256)>]
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[get_function_by_signature]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[signature]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for a distinct function with matching signature. Returns an
    instance of [[`ContractFunction`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
    .internal} upon finding a match. Raises [`Web3ValueError`{.docutils
    .literal .notranslate}]{.pre} if no match is found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.get_function_by_signature('approve(address,uint256)')
        <Function approve(address,uint256)>
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[find_functions_by_name]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for all functions matching the name. Returns a list of
    matching functions where every function is an instance of
    [[`ContractFunction`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
    .internal}. Returns an empty list when no match is found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.find_functions_by_name('transferFrom')
        [<Function transferFrom(address,address,uint256)>]
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[get_function_by_name]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for a distinct function with matching name. Returns an
    instance of [[`ContractFunction`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
    .internal} upon finding a match. Raises [`Web3ValueError`{.docutils
    .literal .notranslate}]{.pre} if no match is found or if multiple
    matches are found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.get_function_by_name('decimals')
        <Function decimals()>
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[get_function_by_selector]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[selector]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for a distinct function with matching selector. The
    selector can be a hexadecimal string, bytes or int. Returns an
    instance of [[`ContractFunction`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
    .internal} upon finding a match. Raises [`Web3ValueError`{.docutils
    .literal .notranslate}]{.pre} if no match is found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.get_function_by_selector('0xdd62ed3e')
        <Function allowance(address,address)>
        >>> contract.get_function_by_selector(b'\xddb\xed>')
        <Function allowance(address,address)>
        >>> contract.get_function_by_selector(0xdd62ed3e)
        <Function allowance(address,address)>
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[find_functions_by_args]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[\*]{.pre}]{.o}[[args]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for all function with matching args. Returns a list of
    matching functions where every function is an instance of
    [[`ContractFunction`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
    .internal}. Returns an empty list when no match is found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.find_functions_by_args(w3.eth.accounts[0], 10000)
        [<Function approve(address,uint256)>, <Function transfer(address,uint256)>]
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[get_function_by_args]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[\*]{.pre}]{.o}[[args]{.pre}]{.n}*[)]{.sig-paren}

:   Searches for a distinct function with matching args. Returns an
    instance of [[`ContractFunction`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
    .internal} upon finding a match. Raises [`ValueError`{.docutils
    .literal .notranslate}]{.pre} if no match is found or if multiple
    matches are found.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> contract.get_function_by_args(w3.eth.accounts[0], w3.eth.accounts[1], 10000)
        <Function transferFrom(address,address,uint256)>
    :::
    :::

::: {.admonition .note}
Note

[`Contract`{.docutils .literal .notranslate}]{.pre} methods
[`all_functions`{.docutils .literal .notranslate}]{.pre},
[`get_function_by_signature`{.docutils .literal .notranslate}]{.pre},
[`find_functions_by_name`{.docutils .literal .notranslate}]{.pre},
[`get_function_by_name`{.docutils .literal .notranslate}]{.pre},
[`get_function_by_selector`{.docutils .literal .notranslate}]{.pre},
[`find_functions_by_args`{.docutils .literal .notranslate}]{.pre} and
[`get_function_by_args`{.docutils .literal .notranslate}]{.pre} can only
be used when abi is provided to the contract.
:::

::: {.admonition .note}
Note

web3.py rejects the initialization of contracts that have more than one
function with the same selector or signature. eg.
[`blockHashAddendsInexpansible(uint256)`{.docutils .literal
.notranslate}]{.pre} and [`blockHashAskewLimitary(uint256)`{.docutils
.literal .notranslate}]{.pre} have the same selector value equal to
[`0x00000000`{.docutils .literal .notranslate}]{.pre}. A contract
containing both of these functions will be rejected.
:::
:::

::: {#web3.contract.xhtml#disabling-strict-checks-for-bytes-types .section}
[]{#web3.contract.xhtml#disable-strict-byte-check}

## Disabling Strict Checks for Bytes Types

By default, web3 is strict when it comes to hex and bytes values, as of
[`v6`{.docutils .literal .notranslate}]{.pre}. If an abi specifies a
byte size, but the value that gets passed in is not the specified size,
web3 will invalidate the value. For example, if an abi specifies a type
of [`bytes4`{.docutils .literal .notranslate}]{.pre}, web3 will
invalidate the following values:

+-----------------+-----------------------------------------------------+
| Input           | Reason                                              |
+=================+=====================================================+
| [`''`{.docutils | Needs to be prefixed with a "0x" to be interpreted  |
| .literal        | as an empty hex string                              |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [`2`{.docutils  | Wrong type                                          |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [`              | String is not valid hex                             |
| 'ah'`{.docutils |                                                     |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [`'1            | Needs to either be a bytestring (b'1234') or be a   |
| 234'`{.docutils | hex value of the right size, prefixed with 0x (in   |
| .literal        | this case: '0x31323334')                            |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [               | Needs to have exactly 4 bytes                       |
| `b''`{.docutils |                                                     |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [`b             | Needs to have exactly 4 bytes                       |
| 'ab'`{.docutils |                                                     |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [`'0            | Needs to have exactly 4 bytes                       |
| xab'`{.docutils |                                                     |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [`'0x6162636    | Needs to have exactly 4 bytes                       |
| 464'`{.docutils |                                                     |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+

: [Invalid byte and hex strings with strict (default) bytes4 type
checking]{.caption-text}

However, you may want to be less strict with acceptable values for bytes
types. This may prove useful if you trust that values coming through are
what they are meant to be with respect to the ABI. In this case, the
automatic padding might be convenient for inferred types. For this, you
can set the [`w3.strict_bytes_type_checking()`{.xref .py .py-meth
.docutils .literal .notranslate}]{.pre} flag to [`False`{.docutils
.literal .notranslate}]{.pre}, which is available on the Web3 instance.
A Web3 instance which has this flag set to [`False`{.docutils .literal
.notranslate}]{.pre} will have a less strict set of rules on which
values are accepted. A [`bytes`{.docutils .literal .notranslate}]{.pre}
type will allow values as a hex string, a bytestring, or a regular
Python string that can be decoded as a hex. 0x-prefixed hex strings are
also not required.

> <div>
>
> -   A Python string that is not prefixed with [`0x`{.docutils .literal
>     .notranslate}]{.pre} is valid.
>
> -   A bytestring whose length is less than the specified byte size is
>     valid.
>
> </div>

+-----------------+-----------------------------------------------------+
| Input           | Normalizes to                                       |
+=================+=====================================================+
| [`''`{.docutils | [`b'\x00\x00\x00\x00'`{.docutils .literal           |
| .literal        | .notranslate}]{.pre}                                |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [`              | [`b'\x00\x00\x00\x00'`{.docutils .literal           |
| '0x'`{.docutils | .notranslate}]{.pre}                                |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [               | [`b'\x00\x00\x00\x00'`{.docutils .literal           |
| `b''`{.docutils | .notranslate}]{.pre}                                |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [`b             | [`b'ab\x00\x00'`{.docutils .literal                 |
| 'ab'`{.docutils | .notranslate}]{.pre}                                |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [`'0            | [`b'\xab\x00\x00\x00'`{.docutils .literal           |
| xab'`{.docutils | .notranslate}]{.pre}                                |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [`'1            | [`b'\x124\x00\x00'`{.docutils .literal              |
| 234'`{.docutils | .notranslate}]{.pre}                                |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [`'0x61626      | [`b'abcd'`{.docutils .literal .notranslate}]{.pre}  |
| 364'`{.docutils |                                                     |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+
| [`'1            | [`b'1234'`{.docutils .literal .notranslate}]{.pre}  |
| 234'`{.docutils |                                                     |
| .literal        |                                                     |
| .notr           |                                                     |
| anslate}]{.pre} |                                                     |
+-----------------+-----------------------------------------------------+

: [Valid byte and hex strings for a non-strict bytes4
type]{.caption-text}

Taking the following contract code as an example:

::: {.highlight-python .notranslate}
::: highlight
    >>> #  pragma solidity >=0.4.22 <0.6.0;
    ...
    ... #   contract ArraysContract {
    ... #      bytes2[] public bytes2Value;

    ... #      constructor(bytes2[] memory _bytes2Value) public {
    ... #          bytes2Value = _bytes2Value;
    ... #      }

    ... #      function setBytes2Value(bytes2[] memory _bytes2Value) public {
    ... #          bytes2Value = _bytes2Value;
    ... #      }

    ... #      function getBytes2Value() public view returns (bytes2[] memory) {
    ... #          return bytes2Value;
    ... #      }
    ... #  }

    >>> # abi = "..."
    >>> # bytecode = "6080..."
:::
:::

::: {.highlight-pycon .notranslate}
::: highlight
    >>> arrays_contract_instance = w3.eth.contract(abi=abi, bytecode=bytecode)

    >>> tx_hash = arrays_contract_instance.constructor([b'bb']).transact()
    >>> tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
    >>> arrays_contract = w3.eth.contract(
    ...     address=tx_receipt.contractAddress,
    ...     abi=abi
    ... )
    >>> arrays_contract.functions.getBytes2Value().call()
    [b'bb']

    >>> # set value with appropriate byte size
    >>> arrays_contract.functions.setBytes2Value([b'aa']).transact({'gas': 420000, "maxPriorityFeePerGas": 10 ** 9, "maxFeePerGas": 10 ** 9})
    HexBytes('0xcb95151142ea56dbf2753d70388aef202a7bb5a1e323d448bc19f1d2e1fe3dc9')
    >>> # check value
    >>> arrays_contract.functions.getBytes2Value().call()
    [b'aa']

    >>> # trying to set value without appropriate size (bytes2) is not valid
    >>> arrays_contract.functions.setBytes2Value([b'b']).transact()
    Traceback (most recent call last):
       ...
    web3.exceptions.MismatchedABI:
    Could not identify the intended function with name
    >>> # check value is still b'aa'
    >>> arrays_contract.functions.getBytes2Value().call()
    [b'aa']

    >>> # disabling strict byte checking...
    >>> w3.strict_bytes_type_checking = False

    >>> tx_hash = arrays_contract_instance.constructor([b'b']).transact()
    >>> tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
    >>> arrays_contract = w3.eth.contract(
    ...     address=tx_receipt.contractAddress,
    ...     abi=abi
    ... )
    >>> # check value is zero-padded... i.e. b'b\x00'
    >>> arrays_contract.functions.getBytes2Value().call()
    [b'b\x00']

    >>> # set the flag back to True
    >>> w3.strict_bytes_type_checking = True

    >>> arrays_contract.functions.setBytes2Value([b'a']).transact()
    Traceback (most recent call last):
       ...
    web3.exceptions.MismatchedABI:
    Could not identify the intended function with name
:::
:::
:::

::: {#web3.contract.xhtml#contract-functions .section}
[]{#web3.contract.xhtml#id2}

## Contract Functions

The named functions exposed through the [[`Contract.functions`{.xref .py
.py-attr .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.functions "web3.contract.Contract.functions"){.reference
.internal} property are of the ContractFunction type. This class is not
to be used directly, but instead through [[`Contract.functions`{.xref
.py .py-attr .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.functions "web3.contract.Contract.functions"){.reference
.internal}.

For example:

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     myContract = web3.eth.contract(address=contract_address, abi=contract_abi)
>     twentyone = myContract.functions.multiply7(3).call()
> :::
> :::
>
> </div>

If you have the function name in a variable, you might prefer this
alternative:

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     func_to_call = 'multiply7'
>     contract_func = myContract.functions[func_to_call]
>     twentyone = contract_func(3).call()
> :::
> :::
>
> </div>

You can also interact with contract functions without parentheses if the
function doesn't take any arguments. For example:

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     >>> myContract.functions.return13.call()
>     13
>     >>> myContract.functions.return13().call()
>     13
> :::
> :::
>
> </div>

In cases where functions are overloaded and use arguments of similar
types, a function may resolve to an undesired function when using the
method syntax. For example, given two functions with the same name that
take a single argument of differing types of [`bytes`{.docutils .literal
.notranslate}]{.pre} and [`bytes32`{.docutils .literal
.notranslate}]{.pre}. When a reference to
[`contract.functions.setBytes(b'1')()`{.xref .py .py-meth .docutils
.literal .notranslate}]{.pre} is used, the function will resolve as the
one that takes [`bytes`{.docutils .literal .notranslate}]{.pre}. If a
value is passed that was meant to be 32 bytes but the given argument was
off by one, the function reference will still use the one that takes
[`bytes`{.docutils .literal .notranslate}]{.pre}.

When in doubt, use explicit function references to the signature. Use
bracket notation
([`contract.functions["setBytes(bytes32)"](b'')()`{.xref .py .py-meth
.docutils .literal .notranslate}]{.pre}) or the contract API
`<cite>`{=html}contract.get_function_by_signature("setBytes(bytes32)")`</cite>`{=html}
to retrieve the desired function. This will ensure an exception is
raised if the argument is not strictly 32 bytes in length.

*[class]{.pre}[ ]{.w}*[[web3.contract.]{.pre}]{.sig-prename .descclassname}[[ContractFunction]{.pre}]{.sig-name .descname}

:   

::: {#web3.contract.xhtml#attributes .section}
### Attributes

The [[`ContractFunction`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
.internal} class provides attributes for each function. Access the
function attributes through
`<cite>`{=html}Contract.functions.myMethod`</cite>`{=html}.

[[ContractFunction.myMethod(\*args,]{.pre} [\*\*kwargs).abi_element_identifier]{.pre}]{.sig-name .descname}

:   The signature of the function assigned to the class
    [`__name__`{.docutils .literal .notranslate}]{.pre} during
    initialization. Fallback and Receive functions will be assigned as
    classes [`FallbackFn`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre} or [`ReceiveFn`{.xref .py .py-class .docutils
    .literal .notranslate}]{.pre} respectively.

```{=html}
<!-- -->
```

[[ContractFunction.myMethod(\*args,]{.pre} [\*\*kwargs).name]{.pre}]{.sig-name .descname}

:   A string representing the function, receive or fallback name.

    Use [`ContractFunction.signature`{.xref .py .py-attr .docutils
    .literal .notranslate}]{.pre} when the function arguments are
    needed.

    This is an alias of [`ContractFunction.fn_name`{.xref .py .py-attr
    .docutils .literal .notranslate}]{.pre}.

```{=html}
<!-- -->
```

[[ContractFunction.myMethod(\*args,]{.pre} [\*\*kwargs).signature]{.pre}]{.sig-name .descname}

:   A string representing the function, receive or fallback signature.

```{=html}
<!-- -->
```

[[ContractFunction.myMethod(\*args,]{.pre} [\*\*kwargs).selector]{.pre}]{.sig-name .descname}

:   A HexStr encoded from the first four bytes of the function
    signature.

```{=html}
<!-- -->
```

[[ContractFunction.myMethod(\*args,]{.pre} [\*\*kwargs).abi]{.pre}]{.sig-name .descname}

:   The function ABI with the type, name, inputs and outputs.

```{=html}
<!-- -->
```

[[ContractFunction.myMethod(\*args,]{.pre} [\*\*kwargs).arguments]{.pre}]{.sig-name .descname}

:   A tuple of all function inputs, normalized so that
    `<cite>`{=html}kwargs`</cite>`{=html} themselves are flattened into
    a tuple as returned by
    [`eth_utils.abi.get_normalized_abi_inputs()`{.xref .py .py-meth
    .docutils .literal .notranslate}]{.pre}.

```{=html}
<!-- -->
```

[[ContractFunction.myMethod(\*args,]{.pre} [\*\*kwargs).argument_names]{.pre}]{.sig-name .descname}

:   The function input names.

```{=html}
<!-- -->
```

[[ContractFunction.myMethod(\*args,]{.pre} [\*\*kwargs).argument_types]{.pre}]{.sig-name .descname}

:   The function input types.
:::

::: {#web3.contract.xhtml#id3 .section}
### Methods

[[`ContractFunction`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
.internal} provides methods to interact with contract functions.
Positional and keyword arguments supplied to the contract function
subclass will be used to find the contract function by signature, and
forwarded to the contract function when applicable.

[EIP-3668](https://eips.ethereum.org/EIPS/eip-3668){.reference
.external}[ \[https://eips.ethereum.org/EIPS/eip-3668\]]{.link-target}
introduced support for the [`OffchainLookup`{.docutils .literal
.notranslate}]{.pre} revert / CCIP Read support. CCIP Read is set to
[`True`{.docutils .literal .notranslate}]{.pre} for calls by default, as
recommended in EIP-3668. This is done via a global
[`global_ccip_read_enabled`{.docutils .literal .notranslate}]{.pre} flag
on the provider. If raising the [`OffchainLookup`{.docutils .literal
.notranslate}]{.pre} revert is preferred for a specific call, the
[`ccip_read_enabled`{.docutils .literal .notranslate}]{.pre} flag on the
call may be set to [`False`{.docutils .literal .notranslate}]{.pre}.

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     >>> # raises the revert instead of handling the offchain lookup
>     >>> myContract.functions.revertsWithOffchainLookup(myData).call(ccip_read_enabled=False)
>     *** web3.exceptions.OffchainLookup
> :::
> :::
>
> </div>

Disabling CCIP Read support can be useful if a transaction needs to be
sent to the callback function. In such cases, "preflighting" with an
[`eth_call`{.docutils .literal .notranslate}]{.pre}, handling the
[`OffchainLookup`{.docutils .literal .notranslate}]{.pre}, and sending
the data via a transaction may be necessary. See [[CCIP Read support for
offchain lookup]{.std
.std-ref}](#web3.contract.xhtml#ccip-read-example){.reference .internal}
in the examples section for how to preflight a transaction with a
contract call.

Similarly, if CCIP Read is globally set to [`False`{.docutils .literal
.notranslate}]{.pre} via the [`global_ccip_read_enabled`{.docutils
.literal .notranslate}]{.pre} flag on the provider, it may be enabled on
a per-call basis - overriding the global flag. This ensures only
explicitly enabled calls will handle the [`OffchainLookup`{.docutils
.literal .notranslate}]{.pre} revert appropriately.

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     >>> # global flag set to `False`
>     >>> w3.provider.global_ccip_read_enabled = False
>
>     >>> # does not raise the revert since explicitly enabled on the call:
>     >>> response = myContract.functions.revertsWithOffchainLookup(myData).call(ccip_read_enabled=True)
> :::
> :::
>
> </div>

If the function called results in a [`revert`{.docutils .literal
.notranslate}]{.pre} error, a [`ContractLogicError`{.docutils .literal
.notranslate}]{.pre} will be raised. If there is an error message with
the error, web3.py attempts to parse the message that comes back and
return it to the user as the error string. As of v6.3.0, the raw data is
also returned and can be accessed via the [`data`{.docutils .literal
.notranslate}]{.pre} attribute on [`ContractLogicError`{.docutils
.literal .notranslate}]{.pre}.

[[ContractFunction.]{.pre}]{.sig-prename .descclassname}[[transact]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*[)]{.sig-paren}

:   Execute the specified function by sending a new public transaction.

    Refer to the following invocation:

    ::: {.highlight-python .notranslate}
    ::: highlight
        myContract.functions.myMethod(*args, **kwargs).transact(transaction)
    :::
    :::

    The first portion of the function call [`myMethod(*args,`{.docutils
    .literal .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`**kwargs)`{.docutils .literal .notranslate}]{.pre}
    selects the appropriate contract function based on the name and
    provided argument. Arguments can be provided as positional
    arguments, keyword arguments, or a mix of the two.

    The end portion of this function call
    [`transact(transaction)`{.docutils .literal .notranslate}]{.pre}
    takes a single parameter which should be a python dictionary
    conforming to the same format as the
    [`web3.eth.send_transaction(transaction)`{.docutils .literal
    .notranslate}]{.pre} method. This dictionary may not contain the
    keys [`data`{.docutils .literal .notranslate}]{.pre}.

    If any of the [`args`{.docutils .literal .notranslate}]{.pre} or
    [`kwargs`{.docutils .literal .notranslate}]{.pre} specified in the
    ABI are an [`address`{.docutils .literal .notranslate}]{.pre} type,
    they will accept ENS names.

    If a [`gas`{.docutils .literal .notranslate}]{.pre} value is not
    provided, then the [`gas`{.docutils .literal .notranslate}]{.pre}
    value for the method transaction will be created using the
    [`web3.eth.estimate_gas()`{.docutils .literal .notranslate}]{.pre}
    method.

    Returns the transaction hash.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> token_contract.functions.transfer(web3.eth.accounts[1], 12345).transact()
        "0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd"
    :::
    :::

```{=html}
<!-- -->
```

[[ContractFunction.]{.pre}]{.sig-prename .descclassname}[[call]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*, *[[block_identifier]{.pre}]{.n}[[=]{.pre}]{.o}[[\'latest\']{.pre}]{.default_value}*[)]{.sig-paren}

:   Call a contract function, executing the transaction locally using
    the [`eth_call`{.docutils .literal .notranslate}]{.pre} API. This
    will not create a new public transaction.

    Refer to the following invocation:

    ::: {.highlight-python .notranslate}
    ::: highlight
        myContract.functions.myMethod(*args, **kwargs).call(transaction)
    :::
    :::

    This method behaves the same as the
    [[`ContractFunction.transact()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction.transact "web3.contract.ContractFunction.transact"){.reference
    .internal} method, with transaction details being passed into the
    end portion of the function call, and function arguments being
    passed into the first portion.

    Returns the return value of the executed function.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> my_contract.functions.multiply7(3).call()
        21
        >>> token_contract.functions.myBalance().call({'from': web3.eth.accounts[0]})
        12345  # the token balance for `web3.eth.accounts[0]`
        >>> token_contract.functions.myBalance().call({'from': web3.eth.accounts[1]})
        54321  # the token balance for the account `web3.eth.accounts[1]`
    :::
    :::

    You can call the method at a historical block using
    [`block_identifier`{.docutils .literal .notranslate}]{.pre}. Some
    examples:

    ::: {.highlight-python .notranslate}
    ::: highlight
        # You can call your contract method at a block number:
        >>> token_contract.functions.myBalance().call(block_identifier=10)

        # or a number of blocks back from pending,
        # in this case, the block just before the latest block:
        >>> token_contract.functions.myBalance().call(block_identifier=-2)

        # or a block hash:
        >>> token_contract.functions.myBalance().call(block_identifier='0x4ff4a38b278ab49f7739d3a4ed4e12714386a9fdf72192f2e8f7da7822f10b4d')
        >>> token_contract.functions.myBalance().call(block_identifier=b'O\xf4\xa3\x8b\'\x8a\xb4\x9fw9\xd3\xa4\xedN\x12qC\x86\xa9\xfd\xf7!\x92\xf2\xe8\xf7\xdax"\xf1\x0bM')

        # Latest is the default, so this is redundant:
        >>> token_contract.functions.myBalance().call(block_identifier='latest')

        # You can check the state after your pending transactions (if supported by your node):
        >>> token_contract.functions.myBalance().call(block_identifier='pending')
    :::
    :::

    Passing the [`block_identifier`{.docutils .literal
    .notranslate}]{.pre} parameter for past block numbers requires that
    your Ethereum API node is running in the more expensive archive node
    mode. Normally synced Ethereum nodes will fail with a "missing trie
    node" error, because Ethereum node may have purged the past state
    from its database. [More information about archival nodes
    here](https://ethereum.stackexchange.com/a/84200/620){.reference
    .external}[
    \[https://ethereum.stackexchange.com/a/84200/620\]]{.link-target}.

```{=html}
<!-- -->
```

[[ContractFunction.]{.pre}]{.sig-prename .descclassname}[[estimate_gas]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*, *[[block_identifier]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Call a contract function, executing the transaction locally using
    the [`eth_call`{.docutils .literal .notranslate}]{.pre} API. This
    will not create a new public transaction.

    Refer to the following invocation:

    ::: {.highlight-python .notranslate}
    ::: highlight
        myContract.functions.myMethod(*args, **kwargs).estimate_gas(transaction)
    :::
    :::

    This method behaves the same as the
    [[`ContractFunction.transact()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction.transact "web3.contract.ContractFunction.transact"){.reference
    .internal} method, with transaction details being passed into the
    end portion of the function call, and function arguments being
    passed into the first portion.

    Returns the amount of gas consumed which can be used as a gas
    estimate for executing this transaction publicly.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> my_contract.functions.multiply7(3).estimate_gas()
        42650
    :::
    :::

    ::: {.admonition .note}
    Note

    The parameter [`block_identifier`{.docutils .literal
    .notranslate}]{.pre} is not enabled in geth nodes, hence passing a
    value of [`block_identifier`{.docutils .literal .notranslate}]{.pre}
    when connected to a geth nodes would result in an error like:
    [`ValueError:`{.docutils .literal .notranslate}]{.pre}` `{.docutils
    .literal .notranslate}[`{'code':`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`-32602,`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'message':`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'too`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`many`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`arguments,`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`want`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`at`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`most`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`1'}`{.docutils .literal .notranslate}]{.pre}
    :::

```{=html}
<!-- -->
```

[[ContractFunction.]{.pre}]{.sig-prename .descclassname}[[build_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*[)]{.sig-paren}

:   Builds a transaction dictionary based on the contract function call
    specified.

    Refer to the following invocation:

    ::: {.highlight-python .notranslate}
    ::: highlight
        myContract.functions.myMethod(*args, **kwargs).build_transaction(transaction)
    :::
    :::

    This method behaves the same as the [`Contract.transact()`{.xref .py
    .py-meth .docutils .literal .notranslate}]{.pre} method, with
    transaction details being passed into the end portion of the
    function call, and function arguments being passed into the first
    portion.

    ::: {.admonition .note}
    Note

    `<cite>`{=html}nonce`</cite>`{=html} is not returned as part of the
    transaction dictionary unless it is specified in the first portion
    of the function call:

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> math_contract.functions.increment(5).build_transaction({'nonce': 10})
    :::
    :::

    You may use [`getTransactionCount()`{.xref .py .py-meth .docutils
    .literal .notranslate}]{.pre} to get the current nonce for an
    account. Therefore a shortcut for producing a transaction dictionary
    with nonce included looks like:

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> math_contract.functions.increment(5).build_transaction({'nonce': web3.eth.get_transaction_count('0xF5...')})
    :::
    :::
    :::

    Returns a transaction dictionary. This transaction dictionary can
    then be sent using [[`send_transaction()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
    .internal}.

    Additionally, the dictionary may be used for offline transaction
    signing using [`sign_transaction()`{.xref .py .py-meth .docutils
    .literal .notranslate}]{.pre}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> math_contract.functions.increment(5).build_transaction({'maxFeePerGas': 2000000000, 'maxPriorityFeePerGas': 1000000000})
        {
            'to': '0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD',
            'data': '0x7cf5dab00000000000000000000000000000000000000000000000000000000000000005',
            'value': 0,
            'gas': 43242,
            'maxFeePerGas': 2000000000,
            'maxPriorityFeePerGas': 1000000000,
            'chainId': 1
        }
    :::
    :::
:::

::: {#web3.contract.xhtml#fallback-function .section}
[]{#web3.contract.xhtml#id4}

### Fallback Function

> <div>
>
> The Contract Factory also offers an API to interact with the fallback
> function, which supports four methods like normal functions:
>
> </div>

[[Contract.fallback.]{.pre}]{.sig-prename .descclassname}[[call]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*[)]{.sig-paren}

:   Call fallback function, executing the transaction locally using the
    [`eth_call`{.docutils .literal .notranslate}]{.pre} API. This will
    not create a new public transaction.

```{=html}
<!-- -->
```

[[Contract.fallback.]{.pre}]{.sig-prename .descclassname}[[estimate_gas]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*[)]{.sig-paren}

:   Call fallback function and return the gas estimation.

```{=html}
<!-- -->
```

[[Contract.fallback.]{.pre}]{.sig-prename .descclassname}[[transact]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*[)]{.sig-paren}

:   Execute fallback function by sending a new public transaction.

```{=html}
<!-- -->
```

[[Contract.fallback.]{.pre}]{.sig-prename .descclassname}[[build_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*[)]{.sig-paren}

:   Builds a transaction dictionary based on the contract fallback
    function call.
:::
:::

::: {#web3.contract.xhtml#contract-events .section}
## Contract Events

The named events exposed through the [[`Contract.events`{.xref .py
.py-attr .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.events "web3.contract.Contract.events"){.reference
.internal} property are of the ContractEvent type. This class is not to
be used directly, but instead through [[`Contract.events`{.xref .py
.py-attr .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.events "web3.contract.Contract.events"){.reference
.internal}.

For example:

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     myContract = web3.eth.contract(address=contract_address, abi=contract_abi)
>     tx_hash = myContract.functions.myFunction().transact()
>     receipt = web3.eth.get_transaction_receipt(tx_hash)
>     myContract.events.MyEvent().process_receipt(receipt)
> :::
> :::
>
> </div>

*[class]{.pre}[ ]{.w}*[[web3.contract.]{.pre}]{.sig-prename .descclassname}[[ContractEvent]{.pre}]{.sig-name .descname}

:   

::: {#web3.contract.xhtml#id5 .section}
### Attributes

The [[`ContractEvent`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractEvent "web3.contract.ContractEvent"){.reference
.internal} class provides attributes for each event. Access the event
attributes through
`<cite>`{=html}Contract.events.MyEvent`</cite>`{=html}.

[[ContractEvent.MyEvent(\*args,]{.pre} [\*\*kwargs).abi_element_identifier]{.pre}]{.sig-name .descname}

:   The signature of the event assigned to the class
    [`__name__`{.docutils .literal .notranslate}]{.pre} during
    initialization.

```{=html}
<!-- -->
```

[[ContractEvent.MyEvent(\*args,]{.pre} [\*\*kwargs).name]{.pre}]{.sig-name .descname}

:   A string representing the event, receive or fallback name.

    Use [`ContractEvent.MyEvent(*args,`{.xref .py .py-attr .docutils
    .literal .notranslate}]{.pre}` `{.xref .py .py-attr .docutils
    .literal .notranslate}[`**kwargs).signature`{.xref .py .py-attr
    .docutils .literal .notranslate}]{.pre} when the event arguments are
    needed.

    This is an alias of [`ContractEvent.MyEvent(*args,`{.xref .py
    .py-attr .docutils .literal .notranslate}]{.pre}` `{.xref .py
    .py-attr .docutils .literal
    .notranslate}[`**kwargs).event_name`{.xref .py .py-attr .docutils
    .literal .notranslate}]{.pre}.

```{=html}
<!-- -->
```

[[ContractEvent.MyEvent(\*args,]{.pre} [\*\*kwargs).signature]{.pre}]{.sig-name .descname}

:   A string representing the event signature.

```{=html}
<!-- -->
```

[[ContractEvent.MyEvent(\*args,]{.pre} [\*\*kwargs).abi]{.pre}]{.sig-name .descname}

:   The event ABI with the type, name, inputs.

```{=html}
<!-- -->
```

[[ContractEvent.MyEvent(\*args,]{.pre} [\*\*kwargs).argument_names]{.pre}]{.sig-name .descname}

:   The event input names.

```{=html}
<!-- -->
```

[[ContractEvent.MyEvent(\*args,]{.pre} [\*\*kwargs).argument_types]{.pre}]{.sig-name .descname}

:   The event input types.

```{=html}
<!-- -->
```

[[ContractEvent.MyEvent(\*args,]{.pre} [\*\*kwargs).topic]{.pre}]{.sig-name .descname}

:   The event topic represented by a hex encoded string from the keccak
    signature.
:::

::: {#web3.contract.xhtml#id6 .section}
### Methods

[[`ContractEvent`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractEvent "web3.contract.ContractEvent"){.reference
.internal} provides methods to interact with contract events. Positional
and keyword arguments supplied to the contract event subclass will be
used to find the contract event by signature.

[[ContractEvent.]{.pre}]{.sig-prename .descclassname}[[get_logs]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[from_block]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[to_block]{.pre}]{.n}[[=]{.pre}]{.o}[[\'latest\']{.pre}]{.default_value}*, *[[block_hash]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[argument_filters]{.pre}]{.n}[[=]{.pre}]{.o}[[{}]{.pre}]{.default_value}*[)]{.sig-paren}

:   Fetches all logs for a given event within the specified block range
    or block hash.

    Returns a list of decoded event logs sorted by [`logIndex`{.docutils
    .literal .notranslate}]{.pre}.

    > <div>
    >
    > [`argument_filters`{.docutils .literal .notranslate}]{.pre} is an
    > optional dictionary argument that can be used to filter for logs
    > where the event's argument values match the values provided in the
    > dictionary. The keys must match the event argument names as they
    > exist in the ABI. The values can either be a single value or a
    > list of values to match against. If a list is provided, the logs
    > will be filtered for any logs that match any of the values in the
    > list. Indexed arguments are filtered pre-call by building specific
    > [`topics`{.docutils .literal .notranslate}]{.pre} to filter for.
    > Non-indexed arguments are filtered by the library after the logs
    > are fetched from the node.
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     my_contract = web3.eth.contract(address=contract_address, abi=contract_abi)
    >
    >     # get ``MyEvent`` logs from block 1337 to block 2337 where the value for the
    >     # event argument "eventArg1" is either 1, 2, or 3
    >     my_contract.events.MyEvent().get_logs(
    >         argument_filters={"eventArg1": [1, 2, 3]},
    >         from_block=1337,
    >         to_block=2337,
    >     )
    > :::
    > :::
    >
    > </div>

```{=html}
<!-- -->
```

[[ContractEvent.]{.pre}]{.sig-prename .descclassname}[[process_receipt]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction_receipt]{.pre}]{.n}*, *[[errors]{.pre}]{.n}[[=]{.pre}]{.o}[[WARN]{.pre}]{.default_value}*[)]{.sig-paren}

:   Extracts the pertinent logs from a transaction receipt.

    If there are no errors, [`process_receipt`{.docutils .literal
    .notranslate}]{.pre} returns a tuple of [[Event Log Objects]{.std
    .std-ref}](#web3.contract.xhtml#event-log-object){.reference
    .internal}, emitted from the event (e.g. [`MyEvent`{.docutils
    .literal .notranslate}]{.pre}), with decoded output.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> tx_hash = contract.functions.myFunction(12345).transact({'to':contract_address})
        >>> tx_receipt = w3.eth.get_transaction_receipt(tx_hash)
        >>> rich_logs = contract.events.MyEvent().process_receipt(tx_receipt)
        >>> rich_logs[0]['args']
        {'myArg': 12345}
    :::
    :::

    If there are errors, the logs will be handled differently depending
    on the flag that is passed in:

    > <div>
    >
    > -   [`WARN`{.docutils .literal .notranslate}]{.pre} (default) -
    >     logs a warning to the console for the log that has an error,
    >     and discards the log. Returns any logs that are able to be
    >     processed.
    >
    > -   [`STRICT`{.docutils .literal .notranslate}]{.pre} - stops all
    >     processing and raises the error encountered.
    >
    > -   [`IGNORE`{.docutils .literal .notranslate}]{.pre} - returns
    >     any raw logs that raised an error with an added "errors"
    >     field, along with any other logs were able to be processed.
    >
    > -   [`DISCARD`{.docutils .literal .notranslate}]{.pre} - silently
    >     discards any logs that have errors, and returns processed logs
    >     that don't have errors.
    >
    > </div>

    An event log error flag needs to be imported from
    [`web3/logs.py`{.docutils .literal .notranslate}]{.pre}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> tx_hash = contract.functions.myFunction(12345).transact({'to':contract_address})
        >>> tx_receipt = w3.eth.get_transaction_receipt(tx_hash)
        >>> processed_logs = contract.events.MyEvent().process_receipt(tx_receipt)
        >>> processed_logs
        (
           AttributeDict({
               'args': AttributeDict({}),
               'event': 'MyEvent',
               'logIndex': 0,
               'transactionIndex': 0,
               'transactionHash': HexBytes('0xfb95ccb6ab39e19821fb339dee33e7afe2545527725b61c64490a5613f8d11fa'),
               'address': '0xF2E246BB76DF876Cef8b38ae84130F4F55De395b',
               'blockHash': HexBytes('0xd74c3e8bdb19337987b987aee0fa48ed43f8f2318edfc84e3a8643e009592a68'),
               'blockNumber': 3
           })
        )


        # Or, if there were errors encountered during processing:
        >>> from web3.logs import STRICT, IGNORE, DISCARD, WARN
        >>> processed_logs = contract.events.MyEvent().process_receipt(tx_receipt, errors=IGNORE)
        >>> processed_logs
        (
            AttributeDict({
                'type': 'mined',
                'logIndex': 0,
                'transactionIndex': 0,
                'transactionHash': HexBytes('0x01682095d5abb0270d11a31139b9a1f410b363c84add467004e728ec831bd529'),
                'blockHash': HexBytes('0x92abf9325a3959a911a2581e9ea36cba3060d8b293b50e5738ff959feb95258a'),
                'blockNumber': 5,
                'address': '0xF2E246BB76DF876Cef8b38ae84130F4F55De395b',
                'data': '0x0000000000000000000000000000000000000000000000000000000000003039',
                'topics': [
                    HexBytes('0xf70fe689e290d8ce2b2a388ac28db36fbb0e16a6d89c6804c461f65a1b40bb15')
                ],
                'errors': LogTopicError('Expected 1 log topics.  Got 0')})
           })
        )
        >>> processed_logs = contract.events.MyEvent().process_receipt(tx_receipt, errors=DISCARD)
        >>> assert processed_logs == ()
        True
    :::
    :::

```{=html}
<!-- -->
```

[[ContractEvent.]{.pre}]{.sig-prename .descclassname}[[process_log]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[log]{.pre}]{.n}*[)]{.sig-paren}

:   Similar to
    [process_receipt](#web3.contract.xhtml#process-receipt){.reference
    .internal}, but only processes one log at a time, instead of a whole
    transaction receipt. Will return a single [[Event Log Object]{.std
    .std-ref}](#web3.contract.xhtml#event-log-object){.reference
    .internal} if there are no errors encountered during processing. If
    an error is encountered during processing, it will be raised.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> tx_hash = contract.functions.myFunction(12345).transact({'to':contract_address})
        >>> tx_receipt = w3.eth.get_transaction_receipt(tx_hash)
        >>> log_to_process = tx_receipt['logs'][0]
        >>> processed_log = contract.events.MyEvent().process_log(log_to_process)
        >>> processed_log
        AttributeDict({
            'args': AttributeDict({}),
            'event': 'MyEvent',
            'logIndex': 0,
            'transactionIndex': 0,
            'transactionHash': HexBytes('0xfb95ccb6ab39e19821fb339dee33e7afe2545527725b61c64490a5613f8d11fa'),
            'address': '0xF2E246BB76DF876Cef8b38ae84130F4F55De395b',
            'blockHash': HexBytes('0xd74c3e8bdb19337987b987aee0fa48ed43f8f2318edfc84e3a8643e009592a68'),
            'blockNumber': 3
        })
    :::
    :::
:::

::: {#web3.contract.xhtml#event-log-object .section}
[]{#web3.contract.xhtml#id7}

### Event Log Object

> <div>
>
> The Event Log Object is a python dictionary with the following keys:
>
> -   [`args`{.docutils .literal .notranslate}]{.pre}: Dictionary - The
>     arguments coming from the event.
>
> -   [`event`{.docutils .literal .notranslate}]{.pre}: String - The
>     event name.
>
> -   [`logIndex`{.docutils .literal .notranslate}]{.pre}: Number -
>     integer of the log index position in the block.
>
> -   [`transactionIndex`{.docutils .literal .notranslate}]{.pre}:
>     Number - integer of the transactions index position log was
>     created from.
>
> -   [`transactionHash`{.docutils .literal .notranslate}]{.pre}:
>     String, 32 Bytes - hash of the transactions this log was created
>     from.
>
> -   [`address`{.docutils .literal .notranslate}]{.pre}: String, 32
>     Bytes - address from which this log originated.
>
> -   [`blockHash`{.docutils .literal .notranslate}]{.pre}: String, 32
>     Bytes - hash of the block where this log was in. null when it's
>     pending.
>
> -   [`blockNumber`{.docutils .literal .notranslate}]{.pre}: Number -
>     the block number where this log was in. null when it's pending.
>
> </div>

::: {.highlight-pycon .notranslate}
::: highlight
    >>> transfer_filter = my_token_contract.events.Transfer.create_filter(from_block="0x0", argument_filters={'from': '0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf'})
    >>> transfer_filter.get_new_entries()
    [AttributeDict({'args': AttributeDict({'from': '0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf',
     'to': '0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf',
     'value': 10}),
     'event': 'Transfer',
     'logIndex': 0,
     'transactionIndex': 0,
     'transactionHash': HexBytes('0x9da859237e7259832b913d51cb128c8d73d1866056f7a41b52003c953e749678'),
     'address': '0xF2E246BB76DF876Cef8b38ae84130F4F55De395b',
     'blockHash': HexBytes('...'),
     'blockNumber': 2})]
    >>> transfer_filter.get_new_entries()
    []
    >>> tx_hash = contract.functions.transfer(alice, 10).transact({'gas': 899000, 'gasPrice': 1000000000})
    >>> tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
    >>> transfer_filter.get_new_entries()
    [AttributeDict({'args': AttributeDict({'from': '0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf',
     'to': '0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf',
     'value': 10}),
     'event': 'Transfer',
     'logIndex': 0,
     'transactionIndex': 0,
     'transactionHash': HexBytes('...'),
     'address': '0xF2E246BB76DF876Cef8b38ae84130F4F55De395b',
     'blockHash': HexBytes('...'),
     'blockNumber': 3})]
    >>> transfer_filter.get_all_entries()
    [AttributeDict({'args': AttributeDict({'from': '0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf',
     'to': '0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf',
     'value': 10}),
     'event': 'Transfer',
     'logIndex': 0,
     'transactionIndex': 0,
     'transactionHash': HexBytes('...'),
     'address': '0xF2E246BB76DF876Cef8b38ae84130F4F55De395b',
     'blockHash': HexBytes('...'),
     'blockNumber': 2}),
     AttributeDict({'args': AttributeDict({'from': '0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf',
     'to': '0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf',
     'value': 10}),
     'event': 'Transfer',
     'logIndex': 0,
     'transactionIndex': 0,
     'transactionHash': HexBytes('...'),
     'address': '0xF2E246BB76DF876Cef8b38ae84130F4F55De395b',
     'blockHash': HexBytes('...'),
     'blockNumber': 3})]
:::
:::
:::
:::

::: {#web3.contract.xhtml#utils .section}
## Utils

*[classmethod]{.pre}[ ]{.w}*[[Contract.]{.pre}]{.sig-prename .descclassname}[[decode_function_input]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[data]{.pre}]{.n}*[)]{.sig-paren}

:   Decodes the transaction data used to invoke a smart contract
    function, and returns [[`ContractFunction`{.xref .py .py-class
    .docutils .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
    .internal} and decoded parameters as [[`dict`{.xref .py .py-class
    .docutils .literal
    .notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.14)"){.reference
    .external}[
    \[https://docs.python.org/3/library/stdtypes.html#dict\]]{.link-target}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> transaction = w3.eth.get_transaction('0x5798fbc45e3b63832abc4984b0f3574a13545f415dd672cd8540cd71f735db56')
        >>> transaction.input
        '0x612e45a3000000000000000000000000b656b2a9c3b2416437a811e07466ca712f5a5b5a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000c000000000000000000000000000000000000000000000000000000000000001000000000000000000000000000000000000000000000000000000000000093a80000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000116c6f6e656c792c20736f206c6f6e656c7900000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'
        >>> contract.decode_function_input(transaction.input)
        (<Function newProposal(address,uint256,string,bytes,uint256,bool)>,
         {'_recipient': '0xB656b2a9c3b2416437A811e07466cA712F5a5b5a',
          '_amount': 0,
          '_description': b'lonely, so lonely',
          '_transactionData': b'',
          '_debatingPeriod': 604800,
          '_newCurator': True})
    :::
    :::
:::

::: {#web3.contract.xhtml#contractcaller .section}
## ContractCaller

*[class]{.pre}[ ]{.w}*[[web3.contract.]{.pre}]{.sig-prename .descclassname}[[ContractCaller]{.pre}]{.sig-name .descname}

:   

The [`ContractCaller`{.docutils .literal .notranslate}]{.pre} class
provides an API to call functions in a contract. This class is not to be
used directly, but instead through [`Contract.caller`{.docutils .literal
.notranslate}]{.pre}.

There are a number of different ways to invoke the
[`ContractCaller`{.docutils .literal .notranslate}]{.pre}.

For example:

::: {.highlight-pycon .notranslate}
::: highlight
    >>> myContract = w3.eth.contract(address=address, abi=ABI)
    >>> twentyone = myContract.caller.multiply7(3)
    >>> twentyone
    21
:::
:::

It can also be invoked using parentheses:

::: {.highlight-pycon .notranslate}
::: highlight
    >>> twentyone = myContract.caller().multiply7(3)
    >>> twentyone
    21
:::
:::

And a transaction dictionary, with or without the
[`transaction`{.docutils .literal .notranslate}]{.pre} keyword. You can
also optionally include a block identifier. For example:

::: {.highlight-pycon .notranslate}
::: highlight
    >>> from_address = w3.eth.accounts[1]
    >>> twentyone = myContract.caller({'from': from_address}).multiply7(3)
    >>> twentyone
    21
    >>> twentyone = myContract.caller(transaction={'from': from_address}).multiply7(3)
    >>> twentyone
    21
    >>> twentyone = myContract.caller(block_identifier='latest').multiply7(3)
    >>> twentyone
    21
:::
:::

Like [[`ContractFunction`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractFunction "web3.contract.ContractFunction"){.reference
.internal}, [[`ContractCaller`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.ContractCaller "web3.contract.ContractCaller"){.reference
.internal} provides methods to interact with contract functions.
Positional and keyword arguments supplied to the contract caller
subclass will be used to find the contract function by signature, and
forwarded to the contract function when applicable.
:::

::: {#web3.contract.xhtml#examples .section}
## Examples

::: {#web3.contract.xhtml#working-with-an-erc-20-token-contract .section}
### Working with an ERC-20 Token Contract

Most fungible tokens on the Ethereum blockchain conform to the
[ERC-20](https://github.com/ethereum/ERCs/blob/master/ERCS/erc-20.md){.reference
.external}[
\[https://github.com/ethereum/ERCs/blob/master/ERCS/erc-20.md\]]{.link-target}
standard. This section of the guide covers interacting with an existing
token contract which conforms to this standard.

In this guide we will interact with an existing token contract that we
have already deployed to a local testing chain. This guide assumes:

1.  An existing token contract at a known address.

2.  Access to the proper [`ABI`{.docutils .literal .notranslate}]{.pre}
    for the given contract.

3.  A [`web3.main.Web3`{.docutils .literal .notranslate}]{.pre} instance
    connected to a provider with an unlocked account which can send
    transactions.

::: {#web3.contract.xhtml#creating-the-contract-factory .section}
#### Creating the contract factory

First we need to create a contract instance with the address of our
token contract and the [`ERC-20`{.docutils .literal .notranslate}]{.pre}
ABI.

::: {.highlight-pycon .notranslate}
::: highlight
    >>> contract = w3.eth.contract(contract_address, abi=ABI)
    >>> contract.address
    '0xF2E246BB76DF876Cef8b38ae84130F4F55De395b'
:::
:::
:::

::: {#web3.contract.xhtml#querying-token-metadata .section}
#### Querying token metadata

Each token will have a total supply which represents the total number of
tokens in circulation. In this example we've initialized the token
contract to have 1 million tokens. Since this token contract is setup to
have 18 decimal places, the raw total supply returned by the contract is
going to have 18 additional decimal places.

::: {.highlight-pycon .notranslate}
::: highlight
    >>> contract.functions.name().call()
    'TestToken'
    >>> contract.functions.symbol().call()
    'TEST'
    >>> decimals = contract.functions.decimals().call()
    >>> decimals
    18
    >>> DECIMALS = 10 ** decimals
    >>> contract.functions.totalSupply().call() // DECIMALS
    1000000
:::
:::
:::

::: {#web3.contract.xhtml#query-account-balances .section}
#### Query account balances

Next we can query some account balances using the contract's
[`balanceOf`{.docutils .literal .notranslate}]{.pre} function. The token
contract we are using starts with a single account which we'll refer to
as [`alice`{.docutils .literal .notranslate}]{.pre} holding all of the
tokens.

::: {.highlight-pycon .notranslate}
::: highlight
    >>> alice = '0x7E5F4552091A69125d5DfCb7b8C2659029395Bdf'
    >>> bob = '0x2B5AD5c4795c026514f8317c7a215E218DcCD6cF'
    >>> raw_balance = contract.functions.balanceOf(alice).call()
    >>> raw_balance
    1000000000000000000000000
    >>> raw_balance // DECIMALS
    1000000
    >>> contract.functions.balanceOf(bob).call()
    0
:::
:::
:::

::: {#web3.contract.xhtml#sending-tokens .section}
#### Sending tokens

Next we can transfer some tokens from [`alice`{.docutils .literal
.notranslate}]{.pre} to [`bob`{.docutils .literal .notranslate}]{.pre}
using the contract's [`transfer`{.docutils .literal .notranslate}]{.pre}
function.

::: {.highlight-pycon .notranslate}
::: highlight
    >>> tx_hash = contract.functions.transfer(bob, 100).transact({'from': alice})
    >>> tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
    >>> contract.functions.balanceOf(alice).call()
    999999999999999999999900
    >>> contract.functions.balanceOf(bob).call()
    100
:::
:::
:::

::: {#web3.contract.xhtml#creating-an-approval-for-external-transfers .section}
#### Creating an approval for external transfers

Alice could also *approve* someone else to spend tokens from her account
using the [`approve`{.docutils .literal .notranslate}]{.pre} function.
We can also query how many tokens we're approved to spend using the
[`allowance`{.docutils .literal .notranslate}]{.pre} function.

::: {.highlight-pycon .notranslate}
::: highlight
    >>> contract.functions.allowance(alice, bob).call()
    0
    >>> tx_hash = contract.functions.approve(bob, 200).transact({'from': alice})
    >>> tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
    >>> contract.functions.allowance(alice, bob).call()
    200
:::
:::
:::

::: {#web3.contract.xhtml#performing-an-external-transfer .section}
#### Performing an external transfer

When someone has an allowance they can transfer those tokens using the
[`transferFrom`{.docutils .literal .notranslate}]{.pre} function.

::: {.highlight-pycon .notranslate}
::: highlight
    >>> contract.functions.allowance(alice, bob).call()
    200
    >>> contract.functions.balanceOf(bob).call()
    100
    >>> tx_hash = contract.functions.transferFrom(alice, bob, 75).transact({'from': bob})
    >>> tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash)
    >>> contract.functions.allowance(alice, bob).call()
    125
    >>> contract.functions.balanceOf(bob).call()
    175
:::
:::
:::
:::

::: {#web3.contract.xhtml#using-a-struct-as-a-function-argument .section}
### Using a struct as a function argument

web3.py accepts struct arguments as dictionaries. This format also
supports nested structs. Let's take a look at a quick example. Given the
following Solidity contract:

::: {.highlight-none .notranslate}
::: highlight
    contract Example {
      address addr;

      struct S1 {
        address a1;
        address a2;
      }

      struct S2 {
        bytes32 b1;
        bytes32 b2;
      }

      struct X {
        S1 s1;
        S2 s2;
        address[] users;
      }

      function update(X memory x) public {
        addr = x.s1.a2;
      }

      function retrieve() public view returns (address) {
        return addr;
      }
    }
:::
:::

You can interact with the web3.py contract API as follows:

::: {.highlight-python .notranslate}
::: highlight
    # deploy or lookup the deployed contract, then:

    >>> deployed_contract.functions.retrieve().call()
    '0x0000000000000000000000000000000000000000'

    >>> deployed_contract.functions.update({'s1': ['0x0000000000000000000000000000000000000001', '0x0000000000000000000000000000000000000002'], 's2': [b'0'*32, b'1'*32], 'users': []}).transact()

    >>> deployed_contract.functions.retrieve().call()
    '0x0000000000000000000000000000000000000002'
:::
:::
:::

::: {#web3.contract.xhtml#invoke-ambiguous-contract-functions .section}
[]{#web3.contract.xhtml#ambiguous-contract-functions}

### Invoke Ambiguous Contract Functions

Calling overloaded functions can be done as you would expect. Passing
arguments will disambiguate which function you want to call.

For example, if you have a contract with two functions with the name
[`identity`{.docutils .literal .notranslate}]{.pre} that accept
different types of arguments, you can call them like this:

::: {.highlight-python .notranslate}
::: highlight
    >>> ambiguous_contract = w3.eth.contract(address=..., abi=...)
    >>> ambiguous_contract.functions.identity(1, True).call()
    1
    >>> ambiguous_contract.functions.identity("one", 1, True).call()
    1
:::
:::

If there is a need to first retrieve the function, you can use the
contract instance's [`get_function_by_signature`{.docutils .literal
.notranslate}]{.pre} method to get the function you want to call.

Below is an example of a contract that has multiple functions of the
same name, and the arguments are ambiguous. You can use the
[[`Contract.get_function_by_signature()`{.xref .py .py-meth .docutils
.literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.get_function_by_signature "web3.contract.Contract.get_function_by_signature"){.reference
.internal} method to reference the intended function and call it with
the correct arguments.

::: {.highlight-python .notranslate}
::: highlight
    >>> contract_source_code = """
    pragma solidity ^0.8.24;
    contract AmbiguousDuo {
      function identity(uint256 input, bool uselessFlag) public pure returns (uint256) {
        return input;
      }
      function identity(int256 input, bool uselessFlag) public pure returns (int256) {
        return input;
      }
    }
    """
    # fast forward all the steps of compiling and deploying the contract.

    >>> identity_func = ambiguous_contract.get_function_by_signature('identity(uint256,bool)')
    >>> identity_func(1, True)
    <Function identity(uint256,bool) bound to (1, True)>
    >>> identity_func(1, True).call()
    1
:::
:::
:::

::: {#web3.contract.xhtml#ccip-read-support-for-offchain-lookup .section}
[]{#web3.contract.xhtml#ccip-read-example}

### CCIP Read support for offchain lookup

Contract calls support CCIP Read by default, via a
[`ccip_read_enabled`{.docutils .literal .notranslate}]{.pre} flag on the
call and, more globally, a [`global_ccip_read_enabled`{.docutils
.literal .notranslate}]{.pre} flag on the provider. The following should
work by default without raising an [`OffchainLookup`{.docutils .literal
.notranslate}]{.pre} and instead handling it appropriately as per the
specification outlined in
[EIP-3668](https://eips.ethereum.org/EIPS/eip-3668){.reference
.external}[ \[https://eips.ethereum.org/EIPS/eip-3668\]]{.link-target}.

::: {.highlight-python .notranslate}
::: highlight
    myContract.functions.revertsWithOffchainLookup(myData).call()
:::
:::

If the offchain lookup requires the user to send a transaction rather
than make a call, this may be handled appropriately in the following
way:

::: {.highlight-python .notranslate}
::: highlight
    from web3 import Web3, WebSocketProvider
    from web3.utils import handle_offchain_lookup

    w3 = Web3(WebSocketProvider(...))

    myContract = w3.eth.contract(address=...)
    myData = b'data for offchain lookup function call'

    # preflight with an `eth_call` and handle the exception
    try:
        myContract.functions.revertsWithOffchainLookup(myData).call(ccip_read_enabled=False)
    except OffchainLookup as ocl:
        tx = {'to': myContract.address, 'from': my_account}
        data_for_callback_function = handle_offchain_lookup(ocl.payload)
        tx['data'] = data_for_callback_function

        # send the built transaction with `eth_sendTransaction` or sign and send with `eth_sendRawTransaction`
        tx_hash = w3.eth.send_transaction(tx)
:::
:::
:::

::: {#web3.contract.xhtml#contract-unit-tests-in-python .section}
### Contract Unit Tests in Python

Here is an example of how one can use the
[pytest](https://docs.pytest.org/en/latest/){.reference .external}[
\[https://docs.pytest.org/en/latest/\]]{.link-target} framework in
python, web3.py, eth-tester, and PyEVM to perform unit tests entirely in
python without any additional need for a full featured ethereum
node/client. To install needed dependencies you can use the pinned extra
for testing:

::: {.highlight-bash .notranslate}
::: highlight
    $ pip install web3[test] pytest
:::
:::

Once you have an environment set up for testing, you can then write your
tests like so:

::: {.code .python .highlight-default .notranslate}
::: highlight
    # of how to write unit tests with web3.py
    import pytest

    import pytest_asyncio

    from web3 import (
        AsyncWeb3,
        EthereumTesterProvider,
        Web3,
    )
    from web3.providers.eth_tester.main import (
        AsyncEthereumTesterProvider,
    )


    @pytest.fixture
    def tester_provider():
        return EthereumTesterProvider()


    @pytest.fixture
    def eth_tester(tester_provider):
        return tester_provider.ethereum_tester


    @pytest.fixture
    def w3(tester_provider):
        return Web3(tester_provider)


    @pytest.fixture
    def foo_contract(eth_tester, w3):
        # For simplicity of this example we statically define the
        # contract code here. You might read your contracts from a
        # file, or something else to test with in your own code
        #
        # pragma solidity^0.5.3;
        #
        # contract Foo {
        #
        #     string public bar;
        #     event barred(string _bar);
        #
        #     constructor() public {
        #         bar = "hello world";
        #     }
        #
        #     function setBar(string memory _bar) public {
        #         bar = _bar;
        #         emit barred(_bar);
        #     }
        #
        # }

        deploy_address = eth_tester.get_accounts()[0]

        abi = """[{"anonymous":false,"inputs":[{"indexed":false,"name":"_bar","type":"string"}],"name":"barred","type":"event"},{"constant":false,"inputs":[{"name":"_bar","type":"string"}],"name":"setBar","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"constant":true,"inputs":[],"name":"bar","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"}]"""  # noqa: E501
        # This bytecode is the output of compiling with
        # solc version:0.5.3+commit.10d17f24.Emscripten.clang
        bytecode = """608060405234801561001057600080fd5b506040805190810160405280600b81526020017f68656c6c6f20776f726c640000000000000000000000000000000000000000008152506000908051906020019061005c929190610062565b50610107565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100a357805160ff19168380011785556100d1565b828001600101855582156100d1579182015b828111156100d05782518255916020019190600101906100b5565b5b5090506100de91906100e2565b5090565b61010491905b808211156101005760008160009055506001016100e8565b5090565b90565b6103bb806101166000396000f3fe608060405234801561001057600080fd5b5060043610610053576000357c01000000000000000000000000000000000000000000000000000000009004806397bc14aa14610058578063febb0f7e14610113575b600080fd5b6101116004803603602081101561006e57600080fd5b810190808035906020019064010000000081111561008b57600080fd5b82018360208201111561009d57600080fd5b803590602001918460018302840111640100000000831117156100bf57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610196565b005b61011b61024c565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561015b578082015181840152602081019050610140565b50505050905090810190601f1680156101885780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b80600090805190602001906101ac9291906102ea565b507f5f71ad82e16f082de5ff496b140e2fbc8621eeb37b36d59b185c3f1364bbd529816040518080602001828103825283818151815260200191508051906020019080838360005b8381101561020f5780820151818401526020810190506101f4565b50505050905090810190601f16801561023c5780820380516001836020036101000a031916815260200191505b509250505060405180910390a150565b60008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156102e25780601f106102b7576101008083540402835291602001916102e2565b820191906000526020600020905b8154815290600101906020018083116102c557829003601f168201915b505050505081565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061032b57805160ff1916838001178555610359565b82800160010185558215610359579182015b8281111561035857825182559160200191906001019061033d565b5b509050610366919061036a565b5090565b61038c91905b80821115610388576000816000905550600101610370565b5090565b9056fea165627a7a72305820ae6ca683d45ee8a71bba45caee29e4815147cd308f772c853a20dfe08214dbb50029"""  # noqa: E501

        # Create our contract class.
        FooContract = w3.eth.contract(abi=abi, bytecode=bytecode)
        # issue a transaction to deploy the contract.
        tx_hash = FooContract.constructor().transact(
            {
                "from": deploy_address,
            }
        )
        # wait for the transaction to be mined
        tx_receipt = w3.eth.wait_for_transaction_receipt(tx_hash, 180)
        # instantiate and return an instance of our contract.
        return FooContract(tx_receipt.contractAddress)


    def test_initial_greeting(foo_contract):
        hw = foo_contract.caller.bar()
        assert hw == "hello world"


    def test_can_update_greeting(w3, foo_contract):
        # send transaction that updates the greeting
        tx_hash = foo_contract.functions.setBar("testing contracts is easy").transact(
            {
                "from": w3.eth.accounts[1],
            }
        )
        w3.eth.wait_for_transaction_receipt(tx_hash, 180)

        # verify that the contract is now using the updated greeting
        hw = foo_contract.caller.bar()
        assert hw == "testing contracts is easy"


    def test_updating_greeting_emits_event(w3, foo_contract):
        # send transaction that updates the greeting
        tx_hash = foo_contract.functions.setBar("testing contracts is easy").transact(
            {
                "from": w3.eth.accounts[1],
            }
        )
        receipt = w3.eth.wait_for_transaction_receipt(tx_hash, 180)

        # get all of the `barred` logs for the contract
        logs = foo_contract.events.barred.get_logs()
        assert len(logs) == 1

        # verify that the log's data matches the expected value
        event = logs[0]
        assert event.blockHash == receipt.blockHash
        assert event.args._bar == "testing contracts is easy"


    @pytest.fixture
    def async_eth_tester():
        return AsyncEthereumTesterProvider().ethereum_tester


    @pytest_asyncio.fixture()
    async def async_w3():
        async_w3 = AsyncWeb3(AsyncEthereumTesterProvider())
        accounts = await async_w3.eth.accounts
        async_w3.eth.default_account = accounts[0]
        return async_w3


    @pytest_asyncio.fixture()
    async def async_foo_contract(async_w3):
        # For simplicity of this example we statically define the
        # contract code here. You might read your contracts from a
        # file, or something else to test with in your own code
        #
        # pragma solidity^0.5.3;
        #
        # contract Foo {
        #
        #     string public bar;
        #     event barred(string _bar);
        #
        #     constructor() public {
        #         bar = "hello world";
        #     }
        #
        #     function setBar(string memory _bar) public {
        #         bar = _bar;
        #         emit barred(_bar);
        #     }
        #
        # }

        abi = """[{"anonymous":false,"inputs":[{"indexed":false,"name":"_bar","type":"string"}],"name":"barred","type":"event"},{"constant":false,"inputs":[{"name":"_bar","type":"string"}],"name":"setBar","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"constant":true,"inputs":[],"name":"bar","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"}]"""  # noqa: E501
        # This bytecode is the output of compiling with
        # solc version:0.5.3+commit.10d17f24.Emscripten.clang
        bytecode = """608060405234801561001057600080fd5b506040805190810160405280600b81526020017f68656c6c6f20776f726c640000000000000000000000000000000000000000008152506000908051906020019061005c929190610062565b50610107565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100a357805160ff19168380011785556100d1565b828001600101855582156100d1579182015b828111156100d05782518255916020019190600101906100b5565b5b5090506100de91906100e2565b5090565b61010491905b808211156101005760008160009055506001016100e8565b5090565b90565b6103bb806101166000396000f3fe608060405234801561001057600080fd5b5060043610610053576000357c01000000000000000000000000000000000000000000000000000000009004806397bc14aa14610058578063febb0f7e14610113575b600080fd5b6101116004803603602081101561006e57600080fd5b810190808035906020019064010000000081111561008b57600080fd5b82018360208201111561009d57600080fd5b803590602001918460018302840111640100000000831117156100bf57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050610196565b005b61011b61024c565b6040518080602001828103825283818151815260200191508051906020019080838360005b8381101561015b578082015181840152602081019050610140565b50505050905090810190601f1680156101885780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b80600090805190602001906101ac9291906102ea565b507f5f71ad82e16f082de5ff496b140e2fbc8621eeb37b36d59b185c3f1364bbd529816040518080602001828103825283818151815260200191508051906020019080838360005b8381101561020f5780820151818401526020810190506101f4565b50505050905090810190601f16801561023c5780820380516001836020036101000a031916815260200191505b509250505060405180910390a150565b60008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156102e25780601f106102b7576101008083540402835291602001916102e2565b820191906000526020600020905b8154815290600101906020018083116102c557829003601f168201915b505050505081565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061032b57805160ff1916838001178555610359565b82800160010185558215610359579182015b8281111561035857825182559160200191906001019061033d565b5b509050610366919061036a565b5090565b61038c91905b80821115610388576000816000905550600101610370565b5090565b9056fea165627a7a72305820ae6ca683d45ee8a71bba45caee29e4815147cd308f772c853a20dfe08214dbb50029"""  # noqa: E501

        # Create our contract class.
        FooContract = async_w3.eth.contract(abi=abi, bytecode=bytecode)
        # issue a transaction to deploy the contract.
        tx_hash = await FooContract.constructor().transact(
            {
                "from": async_w3.eth.default_account,
            }
        )
        # wait for the transaction to be mined
        tx_receipt = await async_w3.eth.wait_for_transaction_receipt(tx_hash, 180)
        # instantiate and return an instance of our contract.
        return FooContract(tx_receipt["contractAddress"])


    @pytest.mark.asyncio
    async def test_async_initial_greeting(async_foo_contract):
        hw = await async_foo_contract.caller.bar()
        assert hw == "hello world"


    @pytest.mark.asyncio
    async def test_async_can_update_greeting(async_w3, async_foo_contract):
        tx_hash = await async_foo_contract.functions.setBar(
            "testing contracts is easy",
        ).transact(
            {
                "from": async_w3.eth.default_account,
            }
        )
        await async_w3.eth.wait_for_transaction_receipt(tx_hash, 180)

        # verify that the contract is now using the updated greeting
        hw = await async_foo_contract.caller.bar()
        assert hw == "testing contracts is easy"


    @pytest.mark.asyncio
    async def test_async_updating_greeting_emits_event(async_w3, async_foo_contract):
        # send transaction that updates the greeting
        tx_hash = await async_foo_contract.functions.setBar(
            "testing contracts is easy",
        ).transact(
            {
                "from": async_w3.eth.default_account,
            }
        )
        receipt = await async_w3.eth.wait_for_transaction_receipt(tx_hash, 180)

        # get all of the `barred` logs for the contract
        logs = await async_foo_contract.events.barred.get_logs()
        assert len(logs) == 1

        # verify that the log's data matches the expected value
        event = logs[0]
        assert event.blockHash == receipt.blockHash
        assert event.args._bar == "testing contracts is easy"
:::
:::
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#filters.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#filters.xhtml#events-and-logs .section}
[]{#filters.xhtml#filtering}

# Events and Logs

If you're on this page, you're likely looking for an answer to this
question: **How do I know when a specific contract is used?** You have
several options:

1.  Query blocks for transactions that include the contract address in
    the [`"to"`{.docutils .literal .notranslate}]{.pre} field. This
    contrived example is searching the latest block for any transactions
    sent to the
    [WETH](https://etherscan.io/token/0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2#code){.reference
    .external}[
    \[https://etherscan.io/token/0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2#code\]]{.link-target}
    contract.

::: {.highlight-python .notranslate}
::: highlight
    WETH_ADDRESS = '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2'

    block = w3.eth.get_block('latest')
    for tx_hash in block.transactions:
        tx = w3.eth.get_transaction(tx_hash)
        if tx['to'] == WETH_ADDRESS:
            print(f'Found interaction with WETH contract! {tx}')
:::
:::

2.  Query for logs emitted by a contract. After instantiating a web3.py
    Contract object, you can [[fetch logs]{.std
    .std-ref}](#web3.contract.xhtml#contract-get-logs){.reference
    .internal} for any event listed in the ABI. In this example, we
    query for [`Transfer`{.docutils .literal .notranslate}]{.pre} events
    in the latest block and log out the results.

::: {.highlight-python .notranslate}
::: highlight
    WETH_ADDRESS = '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2'
    WETH_ABI = '[{"constant":true,"inputs":[],"name":"name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"guy","type":"address"},{"name":"wad","type":"uint256"}],"name":"approve","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"src","type":"address"},{"name":"dst","type":"address"},{"name":"wad","type":"uint256"}],"name":"transferFrom","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"wad","type":"uint256"}],"name":"withdraw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"balanceOf","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"dst","type":"address"},{"name":"wad","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"deposit","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"address"},{"name":"","type":"address"}],"name":"allowance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":true,"name":"src","type":"address"},{"indexed":true,"name":"guy","type":"address"},{"indexed":false,"name":"wad","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"src","type":"address"},{"indexed":true,"name":"dst","type":"address"},{"indexed":false,"name":"wad","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"dst","type":"address"},{"indexed":false,"name":"wad","type":"uint256"}],"name":"Deposit","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"src","type":"address"},{"indexed":false,"name":"wad","type":"uint256"}],"name":"Withdrawal","type":"event"}]'

    weth_contract = w3.eth.contract(address=WETH_ADDRESS, abi=WETH_ABI)

    # fetch transfer events in the last block
    logs = weth_contract.events.Transfer().get_logs(from_block=w3.eth.block_number)

    for log in logs:
       print(f"Transfer of {w3.from_wei(log.args.wad, 'ether')} WETH from {log.args.src} to {log.args.dst}")
:::
:::

See an advanced example of fetching log history [[here]{.std
.std-ref}](#filters.xhtml#advanced-token-fetch){.reference .internal}.

3.  Subscribe to events for real-time updates. When using a persistent
    connection provider ([[`WebSocketProvider`{.xref .py .py-class
    .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.WebSocketProvider "web3.providers.persistent.WebSocketProvider"){.reference
    .internal} or [[`AsyncIPCProvider`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.AsyncIPCProvider "web3.providers.persistent.AsyncIPCProvider"){.reference
    .internal}), the [[`subscribe()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.subscribe "web3.eth.Eth.subscribe"){.reference
    .internal} method can be used to establish a new event subscription.
    This example subscribes to [`Transfer`{.docutils .literal
    .notranslate}]{.pre} events of the WETH contract.

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     import asyncio
>     from web3 import AsyncWeb3, WebSocketProvider
>     from eth_abi.abi import decode
>
>     WETH_ADDRESS = "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"
>
>
>     async def subscribe_to_transfer_events():
>         async with AsyncWeb3(WebSocketProvider("...")) as w3:
>             transfer_event_topic = w3.keccak(text="Transfer(address,address,uint256)")
>             filter_params = {
>                 "address": WETH_ADDRESS,
>                 "topics": [transfer_event_topic],
>             }
>             subscription_id = await w3.eth.subscribe("logs", filter_params)
>             print(f"Subscribing to transfer events for WETH at {subscription_id}")
>
>             async for payload in w3.socket.process_subscriptions():
>                 result = payload["result"]
>
>                 from_addr = decode(["address"], result["topics"][1])[0]
>                 to_addr = decode(["address"], result["topics"][2])[0]
>                 amount = decode(["uint256"], result["data"])[0]
>                 print(f"{w3.from_wei(amount, 'ether')} WETH from {from_addr} to {to_addr}")
>
>     asyncio.run(subscribe_to_transfer_events())
> :::
> :::
>
> For more usage examples see the docs on [[Using Persistent Connection
> Providers]{.std
> .std-ref}](#providers.xhtml#subscription-examples){.reference
> .internal}.
>
> </div>

4.  Use a filter.

::: {.admonition .warning}
Warning

While filters can be a very convenient way to monitor for blocks,
transactions, or events, they are notoriously unreliable. Both remote
and locally hosted nodes have a reputation for occasionally dropping
filters, and some remote node providers don't support filter-related RPC
calls at all.
:::

The [[`web3.eth.Eth.filter()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.filter "web3.eth.Eth.filter"){.reference
.internal} method can be used to set up filters for:

-   Pending Transactions: [`w3.eth.filter("pending")`{.docutils .literal
    .notranslate}]{.pre}

-   New Blocks [`w3.eth.filter("latest")`{.docutils .literal
    .notranslate}]{.pre}

-   Event Logs

    > <div>
    >
    > Through the contract instance api:
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     event_filter = my_contract.events.myEvent.create_filter(from_block='latest', argument_filters={'arg1':10})
    > :::
    > :::
    >
    > Or built manually by supplying [valid filter
    > params](https://github.com/ethereum/execution-apis/blob/bea0266c42919a2fb3ee524fb91e624a23bc17c5/src/schemas/filter.json#L28){.reference
    > .external}[
    > \[https://github.com/ethereum/execution-apis/blob/bea0266c42919a2fb3ee524fb91e624a23bc17c5/src/schemas/filter.json#L28\]]{.link-target}:
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     event_filter = w3.eth.filter({"address": contract_address})
    > :::
    > :::
    >
    > </div>

-   Attaching to an existing filter

    > <div>
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     existing_filter = w3.eth.filter(filter_id="0x0")
    > :::
    > :::
    >
    > </div>

::: {.admonition .note}
Note

Creating event filters requires that your Ethereum node has an API
support enabled for filters. Note that Infura support for filters does
not offer access to `<cite>`{=html}pending`</cite>`{=html} filters. To
get event logs on other stateless nodes please see
[`web3.contract.ContractEvents`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}.
:::

::: {#filters.xhtml#filter-class .section}
## Filter Class

*[class]{.pre}[ ]{.w}*[[web3.utils.filters.]{.pre}]{.sig-prename .descclassname}[[Filter]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[web3]{.pre}]{.n}*, *[[filter_id]{.pre}]{.n}*[)]{.sig-paren}

:   

```{=html}
<!-- -->
```

[[Filter.]{.pre}]{.sig-prename .descclassname}[[filter_id]{.pre}]{.sig-name .descname}

:   The [`filter_id`{.docutils .literal .notranslate}]{.pre} for this
    filter as returned by the [`eth_newFilter`{.docutils .literal
    .notranslate}]{.pre} RPC method when this filter was created.

```{=html}
<!-- -->
```

[[Filter.]{.pre}]{.sig-prename .descclassname}[[get_new_entries]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   Retrieve new entries for this filter.

    Logs will be retrieved using the
    [[`web3.eth.Eth.get_filter_changes()`{.xref .py .py-func .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_filter_changes "web3.eth.Eth.get_filter_changes"){.reference
    .internal} which returns only new entries since the last poll.

```{=html}
<!-- -->
```

[[Filter.]{.pre}]{.sig-prename .descclassname}[[get_all_entries]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   Retrieve all entries for this filter.

    Logs will be retrieved using the
    [[`web3.eth.Eth.get_filter_logs()`{.xref .py .py-func .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_filter_logs "web3.eth.Eth.get_filter_logs"){.reference
    .internal} which returns all entries that match the given filter.

```{=html}
<!-- -->
```

[[Filter.]{.pre}]{.sig-prename .descclassname}[[format_entry]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[entry]{.pre}]{.n}*[)]{.sig-paren}

:   Hook for subclasses to modify the format of the log entries this
    filter returns, or passes to its callback functions.

    By default this returns the [`entry`{.docutils .literal
    .notranslate}]{.pre} parameter unmodified.

```{=html}
<!-- -->
```

[[Filter.]{.pre}]{.sig-prename .descclassname}[[is_valid_entry]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[entry]{.pre}]{.n}*[)]{.sig-paren}

:   Hook for subclasses to add additional programmatic filtering. The
    default implementation always returns [`True`{.docutils .literal
    .notranslate}]{.pre}.
:::

::: {#filters.xhtml#block-and-transaction-filter-classes .section}
## Block and Transaction Filter Classes

*[class]{.pre}[ ]{.w}*[[web3.utils.filters.]{.pre}]{.sig-prename .descclassname}[[BlockFilter]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[\...]{.pre}]{.n}*[)]{.sig-paren}

:   

[`BlockFilter`{.docutils .literal .notranslate}]{.pre} is a subclass of
[[`Filter`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.Filter "web3.utils.filters.Filter"){.reference
.internal}.

You can setup a filter for new blocks using
[`web3.eth.filter('latest')`{.docutils .literal .notranslate}]{.pre}
which will return a new [[`BlockFilter`{.xref .py .py-class .docutils
.literal
.notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.BlockFilter "web3.utils.filters.BlockFilter"){.reference
.internal} object.

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     new_block_filter = w3.eth.filter('latest')
>     new_block_filter.get_new_entries()
> :::
> :::
>
> ::: {.admonition .note}
> Note
>
> [`"safe"`{.docutils .literal .notranslate}]{.pre} and
> [`"finalized"`{.docutils .literal .notranslate}]{.pre} block
> identifiers are not yet supported for [`eth_newBlockFilter`{.docutils
> .literal .notranslate}]{.pre}.
> :::
>
> </div>

*[class]{.pre}[ ]{.w}*[[web3.utils.filters.]{.pre}]{.sig-prename .descclassname}[[TransactionFilter]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[\...]{.pre}]{.n}*[)]{.sig-paren}

:   

[`TransactionFilter`{.docutils .literal .notranslate}]{.pre} is a
subclass of [[`Filter`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.Filter "web3.utils.filters.Filter"){.reference
.internal}.

You can setup a filter for new blocks using
[`web3.eth.filter('pending')`{.docutils .literal .notranslate}]{.pre}
which will return a new [[`TransactionFilter`{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.TransactionFilter "web3.utils.filters.TransactionFilter"){.reference
.internal} object.

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     new_transaction_filter = w3.eth.filter('pending')
>     new_transaction_filter.get_new_entries()
> :::
> :::
>
> </div>
:::

::: {#filters.xhtml#event-log-filters .section}
## Event Log Filters

You can set up a filter for event logs using the web3.py contract api:
[[`web3.contract.Contract.events.your_event_name.create_filter()`{.xref
.py .py-meth .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.events.your_event_name.create_filter "web3.contract.Contract.events.your_event_name.create_filter"){.reference
.internal}, which provides some conveniences for creating event log
filters. Refer to the following example:

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     event_filter = my_contract.events.<event_name>.create_filter(from_block="latest", argument_filters={'arg1':10})
>     event_filter.get_new_entries()
> :::
> :::
>
> </div>

See
[[`web3.contract.Contract.events.your_event_name.create_filter()`{.xref
.py .py-meth .docutils .literal
.notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract.events.your_event_name.create_filter "web3.contract.Contract.events.your_event_name.create_filter"){.reference
.internal} documentation for more information.

You can set up an event log filter like the one above with
[`web3.eth.filter`{.docutils .literal .notranslate}]{.pre} by supplying
a dictionary containing the standard filter parameters. Assuming that
[`arg1`{.docutils .literal .notranslate}]{.pre} is indexed, the
equivalent filter creation would look like:

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     event_signature_hash = web3.keccak(text="eventName(uint32)").hex()
>     event_filter = web3.eth.filter({
>         "address": myContract_address,
>         "topics": [event_signature_hash,
>                    "0x000000000000000000000000000000000000000000000000000000000000000a"],
>         })
> :::
> :::
>
> </div>

The [`topics`{.docutils .literal .notranslate}]{.pre} argument is
order-dependent. For non-anonymous events, the first item in the topic
list is always the keccack hash of the event signature. Subsequent topic
items are the hex encoded values for indexed event arguments. In the
above example, the second item is the [`arg1`{.docutils .literal
.notranslate}]{.pre} value [`10`{.docutils .literal .notranslate}]{.pre}
encoded to its hex string representation.

In addition to being order-dependent, there are a few more points to
recognize when specifying topic filters:

> <div>
>
> Given a transaction log with topics \[A, B\], the following topic
> filters will yield a match:
>
> -   \[\] "anything"
>
> -   \[A\] "A in first position (and anything after)"
>
> -   \[None, B\] "anything in first position AND B in second position
>     (and anything after)"
>
> -   \[A, B\] "A in first position AND B in second position (and
>     anything after)"
>
> -   \[\[A, B\], \[A, B\]\] "(A OR B) in first position AND (A OR B) in
>     second position (and anything after)"
>
> </div>

See the JSON-RPC documentation for
[eth_newFilter](https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_newfilter){.reference
.external}[
\[https://ethereum.org/en/developers/docs/apis/json-rpc/#eth_newfilter\]]{.link-target}
more information on the standard filter parameters.

> <div>
>
> ::: {.admonition .note}
> Note
>
> Though [`"finalized"`{.docutils .literal .notranslate}]{.pre} and
> [`"safe"`{.docutils .literal .notranslate}]{.pre} block identifiers
> are not yet part of the specifications for [`eth_newFilter`{.docutils
> .literal .notranslate}]{.pre}, they are supported by web3.py and may
> or may not yield expected results depending on the node being
> accessed.
> :::
>
> </div>

Creating a log filter by either of the above methods will return a
[[`LogFilter`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.LogFilter "web3.utils.filters.LogFilter"){.reference
.internal} instance.

*[class]{.pre}[ ]{.w}*[[web3.utils.filters.]{.pre}]{.sig-prename .descclassname}[[LogFilter]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[web3]{.pre}]{.n}*, *[[filter_id]{.pre}]{.n}*, *[[log_entry_formatter]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[data_filter_set]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   

The [[`LogFilter`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.LogFilter "web3.utils.filters.LogFilter"){.reference
.internal} class is a subclass of [[`Filter`{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.Filter "web3.utils.filters.Filter"){.reference
.internal}. See the [[`Filter`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.Filter "web3.utils.filters.Filter"){.reference
.internal} documentation for inherited methods.

[[`LogFilter`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#filters.xhtml#web3.utils.filters.LogFilter "web3.utils.filters.LogFilter"){.reference
.internal} provides the following additional methods:

[[LogFilter.]{.pre}]{.sig-prename .descclassname}[[set_data_filters]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[data_filter_set]{.pre}]{.n}*[)]{.sig-paren}

:   

Provides a means to filter on the log data, in other words the ability
to filter on values from un-indexed event arguments. The parameter
[`data_filter_set`{.docutils .literal .notranslate}]{.pre} should be a
list or set of 32-byte hex encoded values.
:::

::: {#filters.xhtml#examples-listening-for-events .section}
## Examples: Listening For Events

::: {#filters.xhtml#synchronous .section}
### Synchronous

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     from web3 import Web3, IPCProvider
>     import time
>
>     # instantiate Web3 instance
>     w3 = Web3(IPCProvider(...))
>
>     def handle_event(event):
>         print(event)
>
>     def log_loop(event_filter, poll_interval):
>         while True:
>             for event in event_filter.get_new_entries():
>                 handle_event(event)
>             time.sleep(poll_interval)
>
>     def main():
>         block_filter = w3.eth.filter('latest')
>         log_loop(block_filter, 2)
>
>     if __name__ == '__main__':
>         main()
> :::
> :::
>
> </div>
:::

::: {#filters.xhtml#asynchronous-filter-polling .section}
[]{#filters.xhtml#asynchronous-filters}

### Asynchronous Filter Polling

Starting with web3 version 4, the [`watch`{.docutils .literal
.notranslate}]{.pre} method was taken out of the web3 filter objects.
There are many decisions to be made when designing a system regarding
threading and concurrency. Rather than force a decision, web3 leaves
these choices up to the user. Below are some example implementations of
asynchronous filter-event handling that can serve as starting points.

::: {#filters.xhtml#single-threaded-concurrency-with-async-and-await .section}
#### Single threaded concurrency with [`async`{.docutils .literal .notranslate}]{.pre} and [`await`{.docutils .literal .notranslate}]{.pre}

Beginning in python 3.5, the [`async`{.docutils .literal
.notranslate}]{.pre} and [`await`{.docutils .literal
.notranslate}]{.pre} built-in keywords were added. These provide a
shared api for coroutines that can be utilized by modules such as the
built-in
[asyncio](https://docs.python.org/3/library/asyncio.html){.reference
.external}[
\[https://docs.python.org/3/library/asyncio.html\]]{.link-target}. Below
is an example event loop using
[asyncio](https://docs.python.org/3/library/asyncio.html){.reference
.external}[
\[https://docs.python.org/3/library/asyncio.html\]]{.link-target}, that
polls multiple web3 filter object, and passes new entries to a handler.

> <div>
>
> > <div>
> >
> > ::: {.highlight-python .notranslate}
> > ::: highlight
> >     from web3 import Web3, IPCProvider
> >     import asyncio
> >
> >     # instantiate Web3 instance
> >     w3 = Web3(IPCProvider(...))
> >
> >     def handle_event(event):
> >         print(event)
> >         # and whatever
> >
> >     async def log_loop(event_filter, poll_interval):
> >         while True:
> >             for event in event_filter.get_new_entries():
> >                 handle_event(event)
> >             await asyncio.sleep(poll_interval)
> >
> >     def main():
> >         block_filter = w3.eth.filter('latest')
> >         tx_filter = w3.eth.filter('pending')
> >         loop = asyncio.get_event_loop()
> >         try:
> >             loop.run_until_complete(
> >                 asyncio.gather(
> >                     log_loop(block_filter, 2),
> >                     log_loop(tx_filter, 2)))
> >         finally:
> >             loop.close()
> >
> >     if __name__ == '__main__':
> >         main()
> > :::
> > :::
> >
> > </div>
>
> Read the
> [asyncio](https://docs.python.org/3/library/asyncio.html){.reference
> .external}[
> \[https://docs.python.org/3/library/asyncio.html\]]{.link-target}
> documentation for more information.
>
> </div>
:::

::: {#filters.xhtml#running-the-event-loop-in-a-separate-thread .section}
#### Running the event loop in a separate thread

Here is an extended version of above example, where the event loop is
run in a separate thread, releasing the [`main`{.docutils .literal
.notranslate}]{.pre} function for other tasks.

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     from web3 import Web3, IPCProvider
>     from threading import Thread
>     import time
>
>     # instantiate Web3 instance
>     w3 = Web3(IPCProvider(...))
>
>     def handle_event(event):
>         print(event)
>         # and whatever
>
>
>     def log_loop(event_filter, poll_interval):
>         while True:
>             for event in event_filter.get_new_entries():
>                 handle_event(event)
>             time.sleep(poll_interval)
>
>
>     def main():
>         block_filter = w3.eth.filter('latest')
>         worker = Thread(target=log_loop, args=(block_filter, 5), daemon=True)
>         worker.start()
>             # .. do some other stuff
>
>     if __name__ == '__main__':
>         main()
> :::
> :::
>
> </div>

Here are some other libraries that provide frameworks for writing
asynchronous python:

> <div>
>
> -   [gevent](https://www.gevent.org/){.reference .external}[
>     \[https://www.gevent.org/\]]{.link-target}
>
> -   [twisted](https://twistedmatrix.com/){.reference .external}[
>     \[https://twistedmatrix.com/\]]{.link-target}
>
> -   [celery](https://www.celeryproject.org/){.reference .external}[
>     \[https://www.celeryproject.org/\]]{.link-target}
>
> </div>
:::
:::
:::

::: {#filters.xhtml#examples .section}
## Examples

::: {#filters.xhtml#advanced-example-fetching-all-token-transfer-events .section}
[]{#filters.xhtml#advanced-token-fetch}

### Advanced example: Fetching all token transfer events

In this example, we show how to fetch all events of a certain event type
from the Ethereum blockchain. There are three challenges when working
with a large set of events:

-   How to incrementally update an existing database of fetched events

-   How to deal with interruptions in long running processes

-   How to deal with `<cite>`{=html}eth_getLogs`</cite>`{=html} JSON-RPC
    call query limitations

-   How to handle Ethereum minor chain reorganisations in (near)
    real-time data

::: {#filters.xhtml#eth-getlogs-limitations .section}
#### eth_getLogs limitations

Ethereum JSON-RPC API servers, like Geth, do not provide an easy way to
paginate over events, only over blocks. There's no request that can find
the first block with an event or how many events occur within a range of
blocks. The only feedback the JSON-RPC service will give you is whether
the [`eth_getLogs`{.docutils .literal .notranslate}]{.pre} call failed.

In this example script, we provide two kinds of heuristics to deal with
this issue. The script scans events in a chunk of blocks (start block
number - end block number). Then it uses two methods to find how many
events there are likely to be in a block window:

-   Dynamically set the block range window size, while never exceeding a
    threshold (e.g., 10,000 blocks).

-   In the case of [`eth_getLogs`{.docutils .literal
    .notranslate}]{.pre}, the JSON-RPC call gives a timeout error,
    decrease the end block number and tries again with a smaller block
    range window.
:::

::: {#filters.xhtml#example-code .section}
#### Example code

The following example code is divided into a reusable
[`EventScanner`{.docutils .literal .notranslate}]{.pre} class and then a
demo script that:

-   fetches all transfer events for [RCC
    token](https://etherscan.io/token/0x9b6443b0fb9c241a7fdac375595cea13e6b7807a){.reference
    .external}[
    \[https://etherscan.io/token/0x9b6443b0fb9c241a7fdac375595cea13e6b7807a\]]{.link-target},

-   can incrementally run again to check if there are new events,

-   handles interruptions (e.g., CTRL+C abort) gracefully,

-   writes all [`Transfer`{.docutils .literal .notranslate}]{.pre}
    events in a single file JSON database, so that other process can
    consume them,

-   uses the [tqdm](https://pypi.org/project/tqdm/){.reference
    .external}[ \[https://pypi.org/project/tqdm/\]]{.link-target}
    library for progress bar output in a console,

-   only supports [`HTTPS`{.docutils .literal .notranslate}]{.pre}
    providers, because JSON-RPC retry logic depends on the
    implementation details of the underlying protocol,

-   disables the default exception retry configuration because it does
    not know how to handle the shrinking block range window for
    [`eth_getLogs`{.docutils .literal .notranslate}]{.pre}, and

-   consumes around 20k JSON-RPC API calls.

The script can be run with: [`python`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`./eventscanner.py`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`<your`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`JSON-RPC`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal .notranslate}[`API`{.docutils
.literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`URL>`{.docutils .literal .notranslate}]{.pre}.

::: {.highlight-python .notranslate}
::: highlight
    """A stateful event scanner for Ethereum-based blockchains using web3.py.

    With the stateful mechanism, you can do one batch scan or incremental scans,
    where events are added wherever the scanner left off.
    """

    import datetime
    import time
    import logging
    from abc import ABC, abstractmethod
    from typing import Tuple, Optional, Callable, List, Iterable, Dict, Any

    from web3 import Web3
    from web3.contract import Contract
    from web3.datastructures import AttributeDict
    from web3.exceptions import BlockNotFound
    from eth_abi.codec import ABICodec

    # Currently this method is not exposed over official web3 API,
    # but we need it to construct eth_getLogs parameters
    from web3._utils.filters import construct_event_filter_params
    from web3._utils.events import get_event_data


    logger = logging.getLogger(__name__)


    class EventScannerState(ABC):
        """Application state that remembers what blocks we have scanned in the case of crash.
        """

        @abstractmethod
        def get_last_scanned_block(self) -> int:
            """Number of the last block we have scanned on the previous cycle.

            :return: 0 if no blocks scanned yet
            """

        @abstractmethod
        def start_chunk(self, block_number: int):
            """Scanner is about to ask data of multiple blocks over JSON-RPC.

            Start a database session if needed.
            """

        @abstractmethod
        def end_chunk(self, block_number: int):
            """Scanner finished a number of blocks.

            Persistent any data in your state now.
            """

        @abstractmethod
        def process_event(self, block_when: datetime.datetime, event: AttributeDict) -> object:
            """Process incoming events.

            This function takes raw events from Web3, transforms them to your application internal
            format, then saves them in a database or some other state.

            :param block_when: When this block was mined

            :param event: Symbolic dictionary of the event data

            :return: Internal state structure that is the result of event transformation.
            """

        @abstractmethod
        def delete_data(self, since_block: int) -> int:
            """Delete any data since this block was scanned.

            Purges any potential minor reorg data.
            """


    class EventScanner:
        """Scan blockchain for events and try not to abuse JSON-RPC API too much.

        Can be used for real-time scans, as it detects minor chain reorganisation and rescans.
        Unlike the easy web3.contract.Contract, this scanner can scan events from multiple contracts at once.
        For example, you can get all transfers from all tokens in the same scan.

        You *should* disable the default ``exception_retry_configuration`` on your provider for Web3,
        because it cannot correctly throttle and decrease the `eth_getLogs` block number range.
        """

        def __init__(self, w3: Web3, contract: Contract, state: EventScannerState, events: List, filters: Dict[str, Any],
                     max_chunk_scan_size: int = 10000, max_request_retries: int = 30, request_retry_seconds: float = 3.0):
            """
            :param contract: Contract
            :param events: List of web3 Event we scan
            :param filters: Filters passed to get_logs
            :param max_chunk_scan_size: JSON-RPC API limit in the number of blocks we query. (Recommendation: 10,000 for mainnet, 500,000 for testnets)
            :param max_request_retries: How many times we try to reattempt a failed JSON-RPC call
            :param request_retry_seconds: Delay between failed requests to let JSON-RPC server to recover
            """

            self.logger = logger
            self.contract = contract
            self.w3 = w3
            self.state = state
            self.events = events
            self.filters = filters

            # Our JSON-RPC throttling parameters
            self.min_scan_chunk_size = 10  # 12 s/block = 120 seconds period
            self.max_scan_chunk_size = max_chunk_scan_size
            self.max_request_retries = max_request_retries
            self.request_retry_seconds = request_retry_seconds

            # Factor how fast we increase the chunk size if results are found
            # # (slow down scan after starting to get hits)
            self.chunk_size_decrease = 0.5

            # Factor how fast we increase chunk size if no results are found
            self.chunk_size_increase = 2.0

        @property
        def address(self):
            return self.token_address

        def get_block_timestamp(self, block_num) -> datetime.datetime:
            """Get Ethereum block timestamp"""
            try:
                block_info = self.w3.eth.get_block(block_num)
            except BlockNotFound:
                # Block was not mined yet,
                # minor chain reorganisation?
                return None
            last_time = block_info["timestamp"]
            return datetime.datetime.utcfromtimestamp(last_time)

        def get_suggested_scan_start_block(self):
            """Get where we should start to scan for new token events.

            If there are no prior scans, start from block 1.
            Otherwise, start from the last end block minus ten blocks.
            We rescan the last ten scanned blocks in the case there were forks to avoid
            misaccounting due to minor single block works (happens once in an hour in Ethereum).
            These heuristics could be made more robust, but this is for the sake of simple reference implementation.
            """

            end_block = self.get_last_scanned_block()
            if end_block:
                return max(1, end_block - self.NUM_BLOCKS_RESCAN_FOR_FORKS)
            return 1

        def get_suggested_scan_end_block(self):
            """Get the last mined block on Ethereum chain we are following."""

            # Do not scan all the way to the final block, as this
            # block might not be mined yet
            return self.w3.eth.block_number - 1

        def get_last_scanned_block(self) -> int:
            return self.state.get_last_scanned_block()

        def delete_potentially_forked_block_data(self, after_block: int):
            """Purge old data in the case of blockchain reorganisation."""
            self.state.delete_data(after_block)

        def scan_chunk(self, start_block, end_block) -> Tuple[int, datetime.datetime, list]:
            """Read and process events between to block numbers.

            Dynamically decrease the size of the chunk if the case JSON-RPC server pukes out.

            :return: tuple(actual end block number, when this block was mined, processed events)
            """

            block_timestamps = {}
            get_block_timestamp = self.get_block_timestamp

            # Cache block timestamps to reduce some RPC overhead
            # Real solution might include smarter models around block
            def get_block_when(block_num):
                if block_num not in block_timestamps:
                    block_timestamps[block_num] = get_block_timestamp(block_num)
                return block_timestamps[block_num]

            all_processed = []

            for event_type in self.events:

                # Callable that takes care of the underlying web3 call
                def _fetch_events(_start_block, _end_block):
                    return _fetch_events_for_all_contracts(self.w3,
                                                           event_type,
                                                           self.filters,
                                                           from_block=_start_block,
                                                           to_block=_end_block)

                # Do `n` retries on `eth_getLogs`,
                # throttle down block range if needed
                end_block, events = _retry_web3_call(
                    _fetch_events,
                    start_block=start_block,
                    end_block=end_block,
                    retries=self.max_request_retries,
                    delay=self.request_retry_seconds)

                for evt in events:
                    idx = evt["logIndex"]  # Integer of the log index position in the block, null when its pending

                    # We cannot avoid minor chain reorganisations, but
                    # at least we must avoid blocks that are not mined yet
                    assert idx is not None, "Somehow tried to scan a pending block"

                    block_number = evt["blockNumber"]

                    # Get UTC time when this event happened (block mined timestamp)
                    # from our in-memory cache
                    block_when = get_block_when(block_number)

                    logger.debug("Processing event %s, block: %s count: %s", evt['event'], block_number, block_number)
                    processed = self.state.process_event(block_when, evt)
                    all_processed.append(processed)

            end_block_timestamp = get_block_when(end_block)
            return end_block, end_block_timestamp, all_processed

        def estimate_next_chunk_size(self, current_chuck_size: int, event_found_count: int):
            """Try to figure out optimal chunk size

            Our scanner might need to scan the whole blockchain for all events

            * We want to minimize API calls over empty blocks

            * We want to make sure that one scan chunk does not try to process too many entries once, as we try to control commit buffer size and potentially asynchronous busy loop

            * Do not overload node serving JSON-RPC API by asking data for too many events at a time

            Currently Ethereum JSON-API does not have an API to tell when a first event occurred in a blockchain
            and our heuristics try to accelerate block fetching (chunk size) until we see the first event.

            These heuristics exponentially increase the scan chunk size depending on if we are seeing events or not.
            When any transfers are encountered, we are back to scanning only a few blocks at a time.
            It does not make sense to do a full chain scan starting from block 1, doing one JSON-RPC call per 20 blocks.
            """

            if event_found_count > 0:
                # When we encounter first events, reset the chunk size window
                current_chuck_size = self.min_scan_chunk_size
            else:
                current_chuck_size *= self.chunk_size_increase

            current_chuck_size = max(self.min_scan_chunk_size, current_chuck_size)
            current_chuck_size = min(self.max_scan_chunk_size, current_chuck_size)
            return int(current_chuck_size)

        def scan(self, start_block, end_block, start_chunk_size=20, progress_callback=Optional[Callable]) -> Tuple[
            list, int]:
            """Perform a token balances scan.

            Assumes all balances in the database are valid before start_block (no forks sneaked in).

            :param start_block: The first block included in the scan

            :param end_block: The last block included in the scan

            :param start_chunk_size: How many blocks we try to fetch over JSON-RPC on the first attempt

            :param progress_callback: If this is an UI application, update the progress of the scan

            :return: [All processed events, number of chunks used]
            """

            assert start_block <= end_block

            current_block = start_block

            # Scan in chunks, commit between
            chunk_size = start_chunk_size
            last_scan_duration = last_logs_found = 0
            total_chunks_scanned = 0

            # All processed entries we got on this scan cycle
            all_processed = []

            while current_block <= end_block:

                self.state.start_chunk(current_block, chunk_size)

                # Print some diagnostics to logs to try to fiddle with real world JSON-RPC API performance
                estimated_end_block = min(current_block + chunk_size, end_block)
                logger.debug(
                    "Scanning token transfers for blocks: %s - %s, chunk size %s, last chunk scan took %s, last logs found %s",
                    current_block, estimated_end_block, chunk_size, last_scan_duration, last_logs_found,
                )

                start = time.time()
                actual_end_block, end_block_timestamp, new_entries = self.scan_chunk(current_block, estimated_end_block)

                # Where does our current chunk scan ends - are we out of chain yet?
                current_end = actual_end_block

                last_scan_duration = time.time() - start
                all_processed += new_entries

                # Print progress bar
                if progress_callback:
                    progress_callback(start_block, end_block, current_block, end_block_timestamp, chunk_size, len(new_entries))

                # Try to guess how many blocks to fetch over `eth_getLogs` API next time
                chunk_size = self.estimate_next_chunk_size(chunk_size, len(new_entries))

                # Set where the next chunk starts
                current_block = current_end + 1
                total_chunks_scanned += 1
                self.state.end_chunk(current_end)

            return all_processed, total_chunks_scanned


    def _retry_web3_call(func, start_block, end_block, retries, delay) -> Tuple[int, list]:
        """A custom retry loop to throttle down block range.

        If our JSON-RPC server cannot serve all incoming `eth_getLogs` in a single request,
        we retry and throttle down block range for every retry.

        For example, Go Ethereum does not indicate what is an acceptable response size.
        It just fails on the server-side with a "context was cancelled" warning.

        :param func: A callable that triggers Ethereum JSON-RPC, as func(start_block, end_block)
        :param start_block: The initial start block of the block range
        :param end_block: The initial start block of the block range
        :param retries: How many times we retry
        :param delay: Time to sleep between retries
        """
        for i in range(retries):
            try:
                return end_block, func(start_block, end_block)
            except Exception as e:
                # Assume this is HTTPConnectionPool(host='localhost', port=8545): Read timed out. (read timeout=10)
                # from Go Ethereum. This translates to the error "context was cancelled" on the server side:
                # https://github.com/ethereum/go-ethereum/issues/20426
                if i < retries - 1:
                    # Give some more verbose info than the default middleware
                    logger.warning(
                        "Retrying events for block range %s - %s (%s) failed with %s , retrying in %s seconds",
                        start_block, end_block, end_block-start_block, e, delay,
                    )
                    # Decrease the `eth_getBlocks` range
                    end_block = start_block + ((end_block - start_block) // 2)
                    # Let the JSON-RPC to recover e.g. from restart
                    time.sleep(delay)
                    continue
                else:
                    logger.warning("Out of retries")
                    raise


    def _fetch_events_for_all_contracts(
            w3,
            event,
            argument_filters: Dict[str, Any],
            from_block: int,
            to_block: int) -> Iterable:
        """Get events using eth_getLogs API.

        This method is detached from any contract instance.

        This is a stateless method, as opposed to create_filter.
        It can be safely called against nodes which do not provide `eth_newFilter` API, like Infura.
        """

        if from_block is None:
            raise Web3TypeError("Missing mandatory keyword argument to get_logs: from_block")

        # Currently no way to poke this using a public web3.py API.
        # This will return raw underlying ABI JSON object for the event
        abi = event._get_event_abi()

        # Depending on the Solidity version used to compile
        # the contract that uses the ABI,
        # it might have Solidity ABI encoding v1 or v2.
        # We just assume the default that you set on Web3 object here.
        # More information here https://eth-abi.readthedocs.io/en/latest/index.html
        codec: ABICodec = w3.codec

        # Here we need to poke a bit into Web3 internals, as this
        # functionality is not exposed by default.
        # Construct JSON-RPC raw filter presentation based on human readable Python descriptions
        # Namely, convert event names to their keccak signatures
        # More information here:
        # https://github.com/ethereum/web3.py/blob/e176ce0793dafdd0573acc8d4b76425b6eb604ca/web3/_utils/filters.py#L71
        data_filter_set, event_filter_params = construct_event_filter_params(
            abi,
            codec,
            address=argument_filters.get("address"),
            argument_filters=argument_filters,
            from_block=from_block,
            to_block=to_block
        )

        logger.debug("Querying eth_getLogs with the following parameters: %s", event_filter_params)

        # Call JSON-RPC API on your Ethereum node.
        # get_logs() returns raw AttributedDict entries
        logs = w3.eth.get_logs(event_filter_params)

        # Convert raw binary data to Python proxy objects as described by ABI
        all_events = []
        for log in logs:
            # Convert raw JSON-RPC log result to human readable event by using ABI data
            # More information how process_log works here
            # https://github.com/ethereum/web3.py/blob/fbaf1ad11b0c7fac09ba34baff2c256cffe0a148/web3/_utils/events.py#L200
            evt = get_event_data(codec, abi, log)
            # Note: This was originally yield,
            # but deferring the timeout exception caused the throttle logic not to work
            all_events.append(evt)
        return all_events


    if __name__ == "__main__":
        # Simple demo that scans all the token transfers of RCC token (11k).
        # The demo supports persistent state by using a JSON file.
        # You will need an Ethereum node for this.
        # Running this script will consume around 20k JSON-RPC calls.
        # With locally running Geth, the script takes 10 minutes.
        # The resulting JSON state file is 2.9 MB.
        import sys
        import json
        from web3.providers.rpc import HTTPProvider

        # We use tqdm library to render a nice progress bar in the console
        # https://pypi.org/project/tqdm/
        from tqdm import tqdm

        # RCC has around 11k Transfer events
        # https://etherscan.io/token/0x9b6443b0fb9c241a7fdac375595cea13e6b7807a
        RCC_ADDRESS = "0x9b6443b0fb9c241a7fdac375595cea13e6b7807a"

        # Reduced ERC-20 ABI, only Transfer event
        ABI = """[
            {
                "anonymous": false,
                "inputs": [
                    {
                        "indexed": true,
                        "name": "from",
                        "type": "address"
                    },
                    {
                        "indexed": true,
                        "name": "to",
                        "type": "address"
                    },
                    {
                        "indexed": false,
                        "name": "value",
                        "type": "uint256"
                    }
                ],
                "name": "Transfer",
                "type": "event"
            }
        ]
        """

        class JSONifiedState(EventScannerState):
            """Store the state of scanned blocks and all events.

            All state is an in-memory dict.
            Simple load/store massive JSON on start up.
            """

            def __init__(self):
                self.state = None
                self.fname = "test-state.json"
                # How many second ago we saved the JSON file
                self.last_save = 0

            def reset(self):
                """Create initial state of nothing scanned."""
                self.state = {
                    "last_scanned_block": 0,
                    "blocks": {},
                }

            def restore(self):
                """Restore the last scan state from a file."""
                try:
                    self.state = json.load(open(self.fname, "rt"))
                    print(f"Restored the state, previously {self.state['last_scanned_block']} blocks have been scanned")
                except (IOError, json.decoder.JSONDecodeError):
                    print("State starting from scratch")
                    self.reset()

            def save(self):
                """Save everything we have scanned so far in a file."""
                with open(self.fname, "wt") as f:
                    json.dump(self.state, f)
                self.last_save = time.time()

            #
            # EventScannerState methods implemented below
            #

            def get_last_scanned_block(self):
                """The number of the last block we have stored."""
                return self.state["last_scanned_block"]

            def delete_data(self, since_block):
                """Remove potentially reorganised blocks from the scan data."""
                for block_num in range(since_block, self.get_last_scanned_block()):
                    if block_num in self.state["blocks"]:
                        del self.state["blocks"][block_num]

            def start_chunk(self, block_number, chunk_size):
                pass

            def end_chunk(self, block_number):
                """Save at the end of each block, so we can resume in the case of a crash or CTRL+C"""
                # Next time the scanner is started we will resume from this block
                self.state["last_scanned_block"] = block_number

                # Save the database file for every minute
                if time.time() - self.last_save > 60:
                    self.save()

            def process_event(self, block_when: datetime.datetime, event: AttributeDict) -> str:
                """Record a ERC-20 transfer in our database."""
                # Events are keyed by their transaction hash and log index
                # One transaction may contain multiple events
                # and each one of those gets their own log index

                # event_name = event.event # "Transfer"
                log_index = event.logIndex  # Log index within the block
                # transaction_index = event.transactionIndex  # Transaction index within the block
                txhash = event.transactionHash.hex()  # Transaction hash
                block_number = event.blockNumber

                # Convert ERC-20 Transfer event to our internal format
                args = event["args"]
                transfer = {
                    "from": args["from"],
                    "to": args.to,
                    "value": args.value,
                    "timestamp": block_when.isoformat(),
                }

                # Create empty dict as the block that contains all transactions by txhash
                if block_number not in self.state["blocks"]:
                    self.state["blocks"][block_number] = {}

                block = self.state["blocks"][block_number]
                if txhash not in block:
                    # We have not yet recorded any transfers in this transaction
                    # (One transaction may contain multiple events if executed by a smart contract).
                    # Create a tx entry that contains all events by a log index
                    self.state["blocks"][block_number][txhash] = {}

                # Record ERC-20 transfer in our database
                self.state["blocks"][block_number][txhash][log_index] = transfer

                # Return a pointer that allows us to look up this event later if needed
                return f"{block_number}-{txhash}-{log_index}"

        def run():

            if len(sys.argv) < 2:
                print("Usage: eventscanner.py http://your-node-url")
                sys.exit(1)

            api_url = sys.argv[1]

            # Enable logs to the stdout.
            # DEBUG is very verbose level
            logging.basicConfig(level=logging.INFO)

            provider = HTTPProvider(api_url)

            # Disable the default JSON-RPC retry configuration
            # as it correctly cannot handle eth_getLogs block range
            provider.exception_retry_configuration = None

            w3 = Web3(provider)

            # Prepare stub ERC-20 contract object
            abi = json.loads(ABI)
            ERC20 = w3.eth.contract(abi=abi)

            # Restore/create our persistent state
            state = JSONifiedState()
            state.restore()

            # chain_id: int, w3: Web3, abi: Dict, state: EventScannerState, events: List, filters: Dict, max_chunk_scan_size: int=10000
            scanner = EventScanner(
                w3=w3,
                contract=ERC20,
                state=state,
                events=[ERC20.events.Transfer],
                filters={"address": RCC_ADDRESS},
                # How many maximum blocks at the time we request from JSON-RPC
                # and we are unlikely to exceed the response size limit of the JSON-RPC server
                max_chunk_scan_size=10000
            )

            # Assume we might have scanned the blocks all the way to the last Ethereum block
            # that mined a few seconds before the previous scan run ended.
            # Because there might have been a minor Ethereum chain reorganisations
            # since the last scan ended, we need to discard
            # the last few blocks from the previous scan results.
            chain_reorg_safety_blocks = 10
            scanner.delete_potentially_forked_block_data(state.get_last_scanned_block() - chain_reorg_safety_blocks)

            # Scan from [last block scanned] - [latest ethereum block]
            # Note that our chain reorg safety blocks cannot go negative
            start_block = max(state.get_last_scanned_block() - chain_reorg_safety_blocks, 0)
            end_block = scanner.get_suggested_scan_end_block()
            blocks_to_scan = end_block - start_block

            print(f"Scanning events from blocks {start_block} - {end_block}")

            # Render a progress bar in the console
            start = time.time()
            with tqdm(total=blocks_to_scan) as progress_bar:
                def _update_progress(start, end, current, current_block_timestamp, chunk_size, events_count):
                    if current_block_timestamp:
                        formatted_time = current_block_timestamp.strftime("%d-%m-%Y")
                    else:
                        formatted_time = "no block time available"
                    progress_bar.set_description(f"Current block: {current} ({formatted_time}), blocks in a scan batch: {chunk_size}, events processed in a batch {events_count}")
                    progress_bar.update(chunk_size)

                # Run the scan
                result, total_chunks_scanned = scanner.scan(start_block, end_block, progress_callback=_update_progress)

            state.save()
            duration = time.time() - start
            print(f"Scanned total {len(result)} Transfer events, in {duration} seconds, total {total_chunks_scanned} chunk scans performed")

        run()
:::
:::
:::
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#subscriptions.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#subscriptions.xhtml#event-subscriptions .section}
[]{#subscriptions.xhtml#subscriptions}

# Event Subscriptions

Most Ethereum clients include [`eth_subscribe`{.docutils .literal
.notranslate}]{.pre} support, allowing you to listen for specific events
as they occur. This applies to a limited set of events: new block
headers, the syncing status of a node, new pending transactions, and
emitted logs from smart contracts.

::: {.admonition .warning}
Warning

Subscriptions require a persistent socket connection between you and the
Ethereum client. For that reason, you must use web3.py's
[[`WebSocketProvider`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.WebSocketProvider "web3.providers.persistent.WebSocketProvider"){.reference
.internal} or [[`AsyncIPCProvider`{.xref .py .py-class .docutils
.literal
.notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.AsyncIPCProvider "web3.providers.persistent.AsyncIPCProvider"){.reference
.internal} to utilize subscriptions. As it is the more common of the
two, examples in this guide will leverage the
[`WebSocketProvider`{.docutils .literal .notranslate}]{.pre}.
:::

::: {#subscriptions.xhtml#an-introduction-to-subscriptions .section}
## An introduction to subscriptions

When you subscribe to an event -- new block headers, for example --
you'll receive a subscription ID. The Ethereum client will then maintain
a connection to your application and send along any related event until
you unsubscribe with that ID. That example in code:

::: {.highlight-python .notranslate}
::: highlight
    import asyncio
    from web3 import AsyncWeb3, WebSocketProvider

    async def example():
        # connect to a node:
        async with AsyncWeb3(WebSocketProvider("wss://...")) as w3:

            # subscribe to new block headers:
            subscription_id = await w3.eth.subscribe("newHeads")
            print(subscription_id)

            # listen for events as they occur:
            async for response in w3.socket.process_subscriptions():
                # handle each event:
                print(response)

                # unsubscribe:
                if response["number"] > 42012345:
                    await w3.eth.unsubscribe(subscription_id)
                    break

    asyncio.run(example())
:::
:::
:::

::: {#subscriptions.xhtml#web3-py-s-subscription-manager .section}
## web3.py's [`subscription_manager`{.docutils .literal .notranslate}]{.pre}

The example above is the "manual" approach to managing subscriptions.
It's not so complicated in the case of listening for new block headers,
but things get considerably more complex once you start listening for
smart contract event logs or managing multiple subscriptions. As of
v7.7.0, web3.py includes some additional convenient subscription
management features. We'll step through them now.

::: {#subscriptions.xhtml#the-subscription-manager .section}
### 1.) The subscription_manager

The [`w3`{.docutils .literal .notranslate}]{.pre}
([`AsyncWeb3`{.docutils .literal .notranslate}]{.pre}) instance has a
[`subscription_manager`{.docutils .literal .notranslate}]{.pre} module.
While you may still use the [`w3.eth.subscribe`{.docutils .literal
.notranslate}]{.pre} method from the previous example, the
[`subscription_manager`{.docutils .literal .notranslate}]{.pre} offers
an additional way to start one or more subscriptions and provides better
management of those subscriptions. We're going to pass in a list of
events we want to subscribe to within the
[`w3.subscription_manager.subscribe`{.docutils .literal
.notranslate}]{.pre} method.

::: {.highlight-python .notranslate}
::: highlight
    await w3.subscription_manager.subscribe([sub1, sub2, ...])
:::
:::
:::

::: {#subscriptions.xhtml#subscription-types .section}
### 2.) Subscription types

To aid in defining those subscriptions, subscription type classes have
been introduced: [`NewHeadsSubscription`{.docutils .literal
.notranslate}]{.pre}, [`PendingTxSubscription`{.docutils .literal
.notranslate}]{.pre}, [`LogsSubscription`{.docutils .literal
.notranslate}]{.pre}, and [`SyncingSubscription`{.docutils .literal
.notranslate}]{.pre}. Each class is context aware, meaning it will throw
an error if you provide an unexpected data type.

::: {.highlight-python .notranslate}
::: highlight
    from web3.utils.subscriptions import (
        NewHeadsSubscription,
        PendingTxSubscription,
        LogsSubscription,
    )

    sub1 = NewHeadsSubscription(
        label="new-heads-mainnet",  # optional label
        handler=new_heads_handler,
    )

    sub2 = PendingTxSubscription(
        label="pending-tx-mainnet",  # optional label
        full_transactions=True,
        handler=pending_tx_handler,
        # optional parallelization flag (see Parallelizing subscriptions section below)
        parallelize=True,
    )

    sub3 = LogsSubscription(
        label="WETH transfers",  # optional label
        address=weth_contract.address,
        topics=[weth_contract.events.Transfer().topic],
        handler=log_handler,
        # optional `handler_context` args to help parse a response
        handler_context={"transfer_event": weth_contract.events.Transfer()},
    )
:::
:::
:::

::: {#subscriptions.xhtml#handlers .section}
### 3.) Handlers

In the example above, there is a handler specified for each
subscription. These are context-aware functions that you can declare
separate from the subscription logic. Within each handler, parse and
perform whatever logic you require. Note that in addition to the result
being processed, the [`handler_context`{.docutils .literal
.notranslate}]{.pre} in each handler provides access to your
[`AsyncWeb3`{.docutils .literal .notranslate}]{.pre} instance, the
subscription instance, and any custom values declared within the
[`handler_context`{.docutils .literal .notranslate}]{.pre} of the
subscription: [`from`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`web3.utils.subscriptions`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`import`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`LogsSubscriptionContext`{.docutils .literal
.notranslate}]{.pre}

::: {.highlight-python .notranslate}
::: highlight
    async def new_heads_handler(
        handler_context: LogsSubscriptionContext,
    ) -> None:
        log_receipt = handler_context.result
        print(f"New log: {log_receipt}\n")

        event_data = handler_context.transfer_event.process_log(log_receipt)
        print(f"Log event data: {event_data}\n")

        if log_receipt["blockNumber"] > 42012345:
            await handler_context.subscription.unsubscribe()
:::
:::
:::

::: {#subscriptions.xhtml#handle-subscriptions .section}
### 4.) handle_subscriptions

Finally, when all your subscriptions are configured, utilize the
handle_subscriptions method to begin processing them. If you need to
listen for events on multiple chains, create one w3 instance per chain.

::: {.highlight-python .notranslate}
::: highlight
    async def sub_manager():
        ...

        # handle subscriptions via configured handlers:
        await w3.subscription_manager.handle_subscriptions()

        # or, gather one w3 instance per chain:
        await asyncio.gather(
            w3.subscription_manager.handle_subscriptions(),
            l2_w3.subscription_manager.handle_subscriptions(),
        )

    asyncio.run(sub_manager())
:::
:::
:::

::: {#subscriptions.xhtml#unsubscribing .section}
### 5.) Unsubscribing

If you don't want to subscribe indefinitely to an event, you can
unsubscribe at any point. The first example in this post demonstrated
the manual approach: [`await`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`w3.eth.unsubscribe(subscription_id)`{.docutils .literal
.notranslate}]{.pre}

The new handler pattern will keep track of the subscription ID for you
however, so the same can be accomplished via the
[`handler_context`{.docutils .literal .notranslate}]{.pre} without an
ID:

::: {.highlight-python .notranslate}
::: highlight
    async def new_heads_handler(handler_context):
        ...
        if some_condition:
            await handler_context.subscription.unsubscribe()
:::
:::

Lastly, if you're wrapping up the whole show, you can reach for
[`unsubscribe_all`{.docutils .literal .notranslate}]{.pre} on the
subscription_manager:

::: {.highlight-python .notranslate}
::: highlight
    await w3.subscription_manager.unsubscribe_all()
    assert subscription_manager.subscriptions == []
:::
:::
:::
:::

::: {#subscriptions.xhtml#an-example .section}
## An example

Let's put all the pieces together. This example will subscribe to new
block headers and transfer events from the WETH contract. It should work
as written if you provide a WebSocket RPC URL.

::: {.highlight-python .notranslate}
::: highlight
    import asyncio
    from web3 import AsyncWeb3, WebSocketProvider
    from web3.utils.subscriptions import (
        NewHeadsSubscription,
        NewHeadsSubscriptionContext,
        LogsSubscription,
        LogsSubscriptionContext,
    )

    # -- declare handlers --
    async def new_heads_handler(
        handler_context: NewHeadsSubscriptionContext,
    ) -> None:
        header = handler_context.result
        print(f"New block header: {header}\n")

    async def log_handler(
        handler_context: LogsSubscriptionContext,
    ) -> None:
        log_receipt = handler_context.result
        print(f"Log receipt: {log_receipt}\n")

    async def sub_manager():

        # -- initialize provider --
        w3 = await AsyncWeb3(WebSocketProvider("wss://..."))

        # -- subscribe to event(s) --
        await w3.subscription_manager.subscribe(
            [
                NewHeadsSubscription(
                    label="new-heads-mainnet",
                    handler=new_heads_handler
                ),
                LogsSubscription(
                    label="WETH transfers",
                    address=w3.to_checksum_address(
                        "0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"
                    ),
                    topics=["0xddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef"],
                    handler=log_handler,
                ),
            ]
        )

        # -- listen for events --
        await w3.subscription_manager.handle_subscriptions()

    asyncio.run(sub_manager())
:::
:::
:::

::: {#subscriptions.xhtml#parallelizing-subscriptions .section}
## Parallelizing subscriptions

::: {.admonition .important}
Important

Parallelizing subscriptions does not guarantee that events will be
processed in the order they are received. Most events should still be
processed in the order they are received, but if a particular handler
takes a long time to execute, newer events may be processed first. It is
recommended to set the [`parallelize`{.docutils .literal
.notranslate}]{.pre} flag to [`False`{.docutils .literal
.notranslate}]{.pre} (default behavior) for subscriptions that depend on
the order of events.
:::

If you have multiple subscriptions that can be processed in parallel,
you can set the [`parallelize`{.docutils .literal .notranslate}]{.pre}
flag to [`True`{.docutils .literal .notranslate}]{.pre} - either
globally on the subscription manager, or individually on each
subscription. This control allows the subscription manager to handle
subscription processing concurrently. This flag can be set on the
manager, as a global setting, or on individual subscriptions. This can
help with performance if subscriptions are independent of each other, or
do not rely on some external shared state (no race conditions are
present).

Global parallelization is off by default, meaning all subscriptions will
be processed sequentially unless you set the [`parallelize`{.docutils
.literal .notranslate}]{.pre} flag to [`True`{.docutils .literal
.notranslate}]{.pre} on the subscription manager or individual
subscriptions.

::: {.highlight-python .notranslate}
::: highlight
    sub1 = NewHeadsSubscription(
        label="new-heads-mainnet",
        handler=new_heads_handler,
        parallelize=True,  # process this subscription in parallel
    )

    sub2 = LogsSubscription(
        label="WETH transfers",
        address=weth_contract.address,
        topics=[weth_contract.events.Transfer().topic],
        handler=log_handler,
        parallelize=False,  # process sequentially (this is the default behavior)
    )

    sub3 = LogsSubscription(
        label="WETH approvals",
        address=weth_contract.address,
        topics=[weth_contract.events.Approval().topic],
        handler=approval_handler,
        parallelize=True,  # process this subscription in parallel
    )

    await w3.subscription_manager.subscribe([sub1, sub2])
:::
:::

Global parallelization can also be set on the subscription manager,
which will apply to all subscriptions unless overridden by an individual
subscription's [`parallelize`{.docutils .literal .notranslate}]{.pre}
flag:

::: {.highlight-python .notranslate}
::: highlight
    # or set the parallelize flag globally on the subscription manager:
    w3.subscription_manager.parallelize = True

    # parallelize is set globally, so this will be processed in parallel
    sub1 = NewHeadsSubscription(
        label="new-heads-mainnet",
        handler=new_heads_handler,
    )

    # this will be processed sequentially since ``parallelize`` is set to ``False``,
    # overriding the global setting
    sub2 = LogsSubscription(
        label="WETH transfers",
        address=weth_contract.address,
        topics=[weth_contract.events.Transfer().topic],
        handler=log_handler,
        parallelize=False,  # process sequentially
    )

    # this will also be processed in parallel
    sub3 = LogsSubscription(
        label="WETH approvals",
        address=weth_contract.address,
        topics=[weth_contract.events.Approval().topic],
        handler=approval_handler,
    )

    await w3.subscription_manager.subscribe([sub1, sub2, sub3])
:::
:::
:::

::: {#subscriptions.xhtml#faq .section}
## FAQ

::: {#subscriptions.xhtml#how-can-i-subscribe-to-additional-events-once-my-application-is-running .section}
### How can I subscribe to additional events once my application is running?

Wherever you have a [`w3`{.docutils .literal .notranslate}]{.pre}
instance of the [`AsyncWeb3`{.docutils .literal .notranslate}]{.pre}
object, you can use the [`subscription_manager`{.docutils .literal
.notranslate}]{.pre} to subscribe to new events.

For example, the handler of one subscription could initialize a new
subscription:

::: {.highlight-python .notranslate}
::: highlight
    async def log_handler(
        handler_context: LogsSubscriptionContext,
    ) -> None:
        log_receipt = handler_context.result
        print(f"Log receipt: {log_receipt}\n")

        # reference the w3 instance
        w3 = handler_context.async_w3

        # initialize a new subscription
        await w3.subscription_manager.subscribe(
            NewHeadsSubscription(handler=new_heads_handler)
        )
:::
:::
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#middleware.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#middleware.xhtml#middleware .section}
[]{#middleware.xhtml#middleware-internals}

# Middleware

[`Web3`{.docutils .literal .notranslate}]{.pre} is instantiated with
layers of middleware by default. They sit between the public
[`Web3`{.docutils .literal .notranslate}]{.pre} methods and the
[[Providers]{.doc}](#providers.xhtml){.reference .internal}, and are
used to perform sanity checks, convert data types, enable ENS support,
and more. Each layer can modify the request and/or response. While
several middleware are enabled by default, others are available for
optional use, and you're free to create your own!

Each middleware layer gets invoked before the request reaches the
provider, and then processes the result after the provider returns, in
reverse order. However, it is possible for a middleware to return early
from a call without the request ever getting to the provider (or even
reaching the middleware that are in deeper layers).

::: {#middleware.xhtml#configuring-middleware .section}
[]{#middleware.xhtml#modifying-middleware}

## Configuring Middleware

Middleware can be added, removed, replaced, and cleared at runtime. To
make that easier, you can name the middleware for later reference.

::: {#middleware.xhtml#middleware-order .section}
### Middleware Order

Think of the middleware as being layered in an onion, where you initiate
a web3.py request at the outermost layer of the onion, and the Ethereum
node (like geth) receives and responds to the request inside the
innermost layer of the onion. Here is a (simplified) diagram:

::: {.highlight-none .notranslate}
::: highlight
                                New request from web3.py

                                            |
                                            |
                                            v

                                    `````Layer 2``````
                             ```````                  ```````
                        `````               |                ````
                     ````                   v                    ````
                  ```                                                ```
                `.               ````````Layer 1```````                `.`
              ``             ````                      `````              .`
            `.            ```               |               ```            `.`
           .`          ```                  v                  ```           `.
         `.          `.`                                         ```           .`
        ``          .`                  `Layer 0`                  ``           .`
       ``         `.               `````        ``````               .           .`
      `.         ``             ```         |        ```              .`          .
      .         ``            `.`           |           ``             .           .
     .         `.            ``       JSON-RPC call       .`            .          .`
     .         .            ``              |              .            ``          .
    ``         .            .               v               .            .          .
    .         .`           .                                .            .          ``
    .         .            .          Ethereum node         .`           .           .
    .         .            .                                .            .           .
    .         ``           `.               |               .            .           .
    .          .            .`              |              .`            .          .
    `.         .`            .`          Response         .`            .`          .
     .          .             `.`           |           `.`            `.           .
     `.          .              ```         |        ````             `.           .
      .          `.               `````     v     ````               `.           ``
       .           .`                 ```Layer 0``                  ``           `.
        .           `.                                            `.`           `.
         .            `.                    |                   `.`            `.
          .`            ```                 |                 ```             .`
           `.              ```              v             ````              `.`
             ``               ``````                 `````                 .`
               ``                   `````Layer 1`````                   `.`
                 ```                                                  ```
                   ````                     |                      ```
                      `````                 v                  ````
                          ``````                          `````
                                `````````Layer 2``````````

                                            |
                                            v

                                 Returned value in web3.py
:::
:::

The middleware are maintained in [`Web3.middleware_onion`{.docutils
.literal .notranslate}]{.pre}. See below for the API.

When specifying middleware in a list, or retrieving the list of
middleware, they will be returned in the order of outermost layer first
and innermost layer last. In the above example, that means that
[`w3.middleware_onion.middleware`{.docutils .literal
.notranslate}]{.pre} would return the middleware in the order of:
[`[2,`{.docutils .literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`1,`{.docutils .literal .notranslate}]{.pre}` `{.docutils
.literal .notranslate}[`0]`{.docutils .literal .notranslate}]{.pre}.
:::

::: {#middleware.xhtml#middleware-stack-api .section}
[]{#middleware.xhtml#id1}

### Middleware Stack API

To add or remove items in different layers, use the following API:

[[Web3.middleware_onion.]{.pre}]{.sig-prename .descclassname}[[add]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[middleware]{.pre}]{.n}*, *[[name]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Middleware will be added to the outermost layer. That means the new
    middleware will modify the request first, and the response last. You
    can optionally name it with any hashable object, typically a string.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> w3 = Web3(...)
        >>> w3.middleware_onion.add(web3.middleware.GasPriceStrategyMiddleware)
        # or
        >>> w3.middleware_onion.add(web3.middleware.GasPriceStrategyMiddleware, 'gas_price_strategy')
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.middleware_onion.]{.pre}]{.sig-prename .descclassname}[[inject]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[middleware]{.pre}]{.n}*, *[[name]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[layer]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Inject a named middleware to an arbitrary layer.

    The current implementation only supports injection at the innermost
    or outermost layers. Note that injecting to the outermost layer is
    equivalent to calling [[`Web3.middleware_onion.add()`{.xref .py
    .py-meth .docutils .literal
    .notranslate}]{.pre}](#middleware.xhtml#Web3.middleware_onion.add "Web3.middleware_onion.add"){.reference
    .internal} .

    ::: {.highlight-python .notranslate}
    ::: highlight
        # Either of these will put the gas_price_strategy middleware at the innermost layer
        >>> w3 = Web3(...)
        >>> w3.middleware_onion.inject(web3.middleware.GasPriceStrategyMiddleware, layer=0)
        # or
        >>> w3.middleware_onion.inject(web3.middleware.GasPriceStrategyMiddleware, 'gas_price_strategy', layer=0)
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.middleware_onion.]{.pre}]{.sig-prename .descclassname}[[remove]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[middleware]{.pre}]{.n}*[)]{.sig-paren}

:   Middleware will be removed from whatever layer it was in. If you
    added the middleware with a name, use the name to remove it. If you
    added the middleware as an object, use the object again later to
    remove it:

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> w3 = Web3(...)
        >>> w3.middleware_onion.remove(web3.middleware.GasPriceStrategyMiddleware)
        # or
        >>> w3.middleware_onion.remove('gas_price_strategy')
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.middleware_onion.]{.pre}]{.sig-prename .descclassname}[[replace]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[old_middleware]{.pre}]{.n}*, *[[new_middleware]{.pre}]{.n}*[)]{.sig-paren}

:   Middleware will be replaced from whatever layer it was in. If the
    middleware was named, it will continue to have the same name. If it
    was un-named, then you will now reference it with the new middleware
    object.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> from web3.middleware import GasPriceStrategyMiddleware, AttributeDictMiddleware
        >>> w3 = Web3(provider, middleware=[GasPriceStrategyMiddleware, AttributeDictMiddleware])

        >>> w3.middleware_onion.replace(GasPriceStrategyMiddleware, AttributeDictMiddleware)
        # this is now referenced by the new middleware object, so to remove it:
        >>> w3.middleware_onion.remove(AttributeDictMiddleware)

        # or, if it was named

        >>> w3.middleware_onion.replace('gas_price_strategy', AttributeDictMiddleware)
        # this is still referenced by the original name, so to remove it:
        >>> w3.middleware_onion.remove('gas_price_strategy')
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.middleware_onion.]{.pre}]{.sig-prename .descclassname}[[clear]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   Empty all the middleware, including the default ones.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> w3 = Web3(...)
        >>> w3.middleware_onion.clear()
        >>> assert len(w3.middleware_onion) == 0
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.middleware_onion.]{.pre}]{.sig-prename .descclassname}[[middleware]{.pre}]{.sig-name .descname}

:   Return all the current middleware for the [`Web3`{.docutils .literal
    .notranslate}]{.pre} instance in the appropriate order for importing
    into a new [`Web3`{.docutils .literal .notranslate}]{.pre} instance.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> w3_1 = Web3(...)
        # add uniquely named middleware:
        >>> w3_1.middleware_onion.add(web3.middleware.GasPriceStrategyMiddleware, 'test_middleware')
        # export middleware from first w3 instance
        >>> middleware = w3_1.middleware_onion.middleware

        # import into second instance
        >>> w3_2 = Web3(..., middleware=middleware)
        >>> assert w3_1.middleware_onion.middleware == w3_2.middleware_onion.middleware
        >>> assert w3_2.middleware_onion.get('test_middleware')
    :::
    :::
:::

::: {#middleware.xhtml#instantiate-with-custom-middleware .section}
### Instantiate with Custom Middleware

Instead of working from the default list, you can specify a custom list
of middleware when initializing Web3:

::: {.highlight-python .notranslate}
::: highlight
    Web3(middleware=[my_middleware1, my_middleware2])
:::
:::

::: {.admonition .warning}
Warning

This will *replace* the default middleware. To keep the default
functionality, either use [`middleware_onion.add()`{.docutils .literal
.notranslate}]{.pre} from above, or add the default middleware to your
list of new middleware.
:::
:::
:::

::: {#middleware.xhtml#default-middleware .section}
[]{#middleware.xhtml#id2}

## Default Middleware

The following middleware are included by default:

-   [`gas_price_strategy`{.docutils .literal .notranslate}]{.pre}

-   [`ens_name_to_address`{.docutils .literal .notranslate}]{.pre}

-   [`attrdict`{.docutils .literal .notranslate}]{.pre}

-   [`validation`{.docutils .literal .notranslate}]{.pre}

-   [`gas_estimate`{.docutils .literal .notranslate}]{.pre}

The defaults are defined in the [`get_default_middleware()`{.docutils
.literal .notranslate}]{.pre} method in [`web3/manager.py`{.docutils
.literal .notranslate}]{.pre}.

::: {#middleware.xhtml#attributedict .section}
### AttributeDict

*[class]{.pre}[ ]{.w}*[[web3.middleware.]{.pre}]{.sig-prename .descclassname}[[AttributeDictMiddleware]{.pre}]{.sig-name .descname}

:   This middleware recursively converts any dictionary type in the
    result of a call to an [`AttributeDict`{.docutils .literal
    .notranslate}]{.pre}. This enables dot-syntax access, like
    [`eth.get_block('latest').number`{.docutils .literal
    .notranslate}]{.pre} in addition to
    [`eth.get_block('latest')['number']`{.docutils .literal
    .notranslate}]{.pre}.

    ::: {.admonition .note}
    Note

    Accessing a property via attribute breaks type hinting. For this
    reason, this feature is available as a middleware, which may be
    removed if desired.
    :::
:::

::: {#middleware.xhtml#ens-name-to-address-resolution .section}
### ENS Name to Address Resolution

*[class]{.pre}[ ]{.w}*[[web3.middleware.]{.pre}]{.sig-prename .descclassname}[[ENSNameToAddressMiddleware]{.pre}]{.sig-name .descname}

:   This middleware converts Ethereum Name Service (ENS) names into the
    address that the name points to. For example
    [[`w3.eth.send_transaction`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
    .internal} will accept .eth names in the 'from' and 'to' fields.

    ::: {.admonition .note}
    Note

    This middleware only converts ENS names on chains where the proper
    ENS contracts are deployed to support this functionality. All other
    cases will result in a [`NameNotFound`{.docutils .literal
    .notranslate}]{.pre} error.
    :::
:::

::: {#middleware.xhtml#gas-price-strategy .section}
### Gas Price Strategy

*[class]{.pre}[ ]{.w}*[[web3.middleware.]{.pre}]{.sig-prename .descclassname}[[GasPriceStrategyMiddleware]{.pre}]{.sig-name .descname}

:   ::: {.admonition .warning}
    Warning

    Gas price strategy is only supported for legacy transactions. The
    London fork introduced [`maxFeePerGas`{.docutils .literal
    .notranslate}]{.pre} and [`maxPriorityFeePerGas`{.docutils .literal
    .notranslate}]{.pre} transaction parameters which should be used
    over [`gasPrice`{.docutils .literal .notranslate}]{.pre} whenever
    possible.
    :::

    This adds a [`gasPrice`{.docutils .literal .notranslate}]{.pre} to
    transactions if applicable and when a gas price strategy has been
    set. See [[Gas Price API]{.std
    .std-ref}](#gas_price.xhtml#gas-price){.reference .internal} for
    information about how gas price is derived.
:::

::: {#middleware.xhtml#buffered-gas-estimate .section}
### Buffered Gas Estimate

*[class]{.pre}[ ]{.w}*[[web3.middleware.]{.pre}]{.sig-prename .descclassname}[[BufferedGasEstimateMiddleware]{.pre}]{.sig-name .descname}

:   This adds a gas estimate to transactions if [`gas`{.docutils
    .literal .notranslate}]{.pre} is not present in the transaction
    parameters. Sets gas to: [`min(w3.eth.estimate_gas`{.docutils
    .literal .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`+`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`gas_buffer,`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`gas_limit)`{.docutils .literal .notranslate}]{.pre}
    where the gas_buffer default is 100,000
:::

::: {#middleware.xhtml#validation .section}
### Validation

*[class]{.pre}[ ]{.w}*[[web3.middleware.]{.pre}]{.sig-prename .descclassname}[[ValidationMiddleware]{.pre}]{.sig-name .descname}

:   This middleware includes block and transaction validators which
    perform validations for transaction parameters.
:::
:::

::: {#middleware.xhtml#optional-middleware .section}
## Optional Middleware

[`Web3`{.docutils .literal .notranslate}]{.pre} includes optional
middleware for common use cases. Below is a list of available middleware
which are not enabled by default.

::: {#middleware.xhtml#stalecheck .section}
### Stalecheck

[[web3.middleware.]{.pre}]{.sig-prename .descclassname}[[StalecheckMiddlewareBuilder]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   This middleware checks how stale the blockchain is, and interrupts
    calls with a failure if the blockchain is too old.

    -   [`allowable_delay`{.docutils .literal .notranslate}]{.pre} is
        the length in seconds that the blockchain is allowed to be
        behind of [`time.time()`{.docutils .literal .notranslate}]{.pre}

    Because this middleware takes an argument, you must create the
    middleware with a method call.

    ::: {.highlight-python .notranslate}
    ::: highlight
        two_day_stalecheck = StalecheckMiddlewareBuilder.build(60 * 60 * 24 * 2)
        web3.middleware_onion.add(two_day_stalecheck)
    :::
    :::

    If the latest block in the blockchain is older than 2 days in this
    example, then the middleware will raise a
    [`StaleBlockchain`{.docutils .literal .notranslate}]{.pre} exception
    on every call except [`web3.eth.get_block()`{.docutils .literal
    .notranslate}]{.pre}.
:::

::: {#middleware.xhtml#proof-of-authority .section}
[]{#middleware.xhtml#geth-poa}

### Proof of Authority

*[class]{.pre}[ ]{.w}*[[web3.middleware.]{.pre}]{.sig-prename .descclassname}[[ExtraDataToPOAMiddleware]{.pre}]{.sig-name .descname}

:   

::: {.admonition .important}
Important

It is **crucial** that this middleware is injected at the 0th layer of
the middleware onion, using
[`w3.middleware_onion.inject(ExtraDataToPOAMiddleware,`{.docutils
.literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`layer=0)`{.docutils .literal .notranslate}]{.pre}, to
guarantee it is the *first* middleware to process the response and
modify the [`extraData`{.docutils .literal .notranslate}]{.pre} field.
This ensures it processes the field before any other middleware attempts
to validate it.
:::

[`ExtraDataToPOAMiddleware`{.docutils .literal .notranslate}]{.pre} is
required to connect to [`geth`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`--dev`{.docutils .literal .notranslate}]{.pre} and may
also be needed for other EVM compatible blockchains like Polygon or BNB
Chain (Binance Smart Chain).

If the middleware is not injected at the 0th layer of the middleware
onion, you may get errors like the example below when interacting with
your EVM node.

::: {.highlight-shell .notranslate}
::: highlight
    web3.exceptions.ExtraDataLengthError: The field extraData is 97 bytes, but should be
    32.  It is quite likely that you are connected to a POA chain. Refer to
    http://web3py.readthedocs.io/en/stable/middleware.html#proof-of-authority
    for more details. The full extraData is: HexBytes('...')
:::
:::

The easiest way to connect to a default [`geth`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`--dev`{.docutils .literal .notranslate}]{.pre} instance
which loads the middleware is:

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3.auto.gethdev import w3

    # confirm that the connection succeeded
    >>> w3.client_version
    'Geth/v1.14.12-stable-4bb3c89d/linux-amd64/go1.22.4'
:::
:::

This example connects to a local [`geth`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`--dev`{.docutils .literal .notranslate}]{.pre} instance
on Linux with a unique IPC location and loads the middleware:

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3 import Web3, IPCProvider

    # connect to the IPC location started with 'geth --dev --datadir ~/mynode'
    >>> w3 = Web3(IPCProvider('~/mynode/geth.ipc'))

    >>> from web3.middleware import ExtraDataToPOAMiddleware

    # inject the poa compatibility middleware to the innermost layer (0th layer)
    >>> w3.middleware_onion.inject(ExtraDataToPOAMiddleware, layer=0)

    # confirm that the connection succeeded
    >>> w3.client_version
    'Geth/v1.14.12-stable-4bb3c89d/linux-amd64/go1.22.4'
:::
:::

::: {#middleware.xhtml#why-is-extradatatopoamiddleware-necessary .section}
#### Why is [`ExtraDataToPOAMiddleware`{.docutils .literal .notranslate}]{.pre} necessary?

There is no strong community consensus on a single Proof-of-Authority
(PoA) standard yet. Some nodes have successful experiments running
though. One is go-ethereum (geth), which uses a prototype PoA for its
development mode and the Goerli test network.

Unfortunately, it does deviate from the yellow paper specification,
which constrains the [`extraData`{.docutils .literal
.notranslate}]{.pre} field in each block to a maximum of 32-bytes. Geth
is one such example where PoA uses more than 32 bytes, so this
middleware modifies the block data a bit before returning it.
:::
:::

::: {#middleware.xhtml#locally-managed-log-and-block-filters .section}
[]{#middleware.xhtml#local-filter}

### Locally Managed Log and Block Filters

[[web3.middleware.]{.pre}]{.sig-prename .descclassname}[[LocalFilterMiddleware]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   

This middleware provides an alternative to ethereum node managed
filters. When used, Log and Block filter logic are handled locally while
using the same web3 filter api. Filter results are retrieved using
JSON-RPC endpoints that don't rely on server state.

::: {.highlight-pycon .notranslate}
::: highlight
    >>> from web3 import Web3, EthereumTesterProvider
    >>> w3 = Web3(EthereumTesterProvider())
    >>> from web3.middleware import LocalFilterMiddleware
    >>> w3.middleware_onion.add(LocalFilterMiddleware)
:::
:::

::: {.highlight-python .notranslate}
::: highlight
    #  Normal block and log filter apis behave as before.
    >>> block_filter = w3.eth.filter("latest")

    >>> log_filter = myContract.events.myEvent.build_filter().deploy()
:::
:::
:::

::: {#middleware.xhtml#signing .section}
### Signing

[[web3.middleware.]{.pre}]{.sig-prename .descclassname}[[SignAndSendRawMiddlewareBuilder]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   

This middleware automatically captures transactions, signs them, and
sends them as raw transactions. The [`from`{.docutils .literal
.notranslate}]{.pre} field on the transaction, or
[`w3.eth.default_account`{.docutils .literal .notranslate}]{.pre} must
be set to the address of the private key for this middleware to have any
effect.

The [`build`{.docutils .literal .notranslate}]{.pre} method for this
middleware builder takes a single argument:

> <div>
>
> -   [`private_key_or_account`{.docutils .literal .notranslate}]{.pre}
>     A single private key or a tuple, list or set of private keys.
>
>     > <div>
>     >
>     > Keys can be in any of the following formats:
>     >
>     > -   An [`eth_account.LocalAccount`{.docutils .literal
>     >     .notranslate}]{.pre} object
>     >
>     > -   An [`eth_keys.PrivateKey`{.docutils .literal
>     >     .notranslate}]{.pre} object
>     >
>     > -   A raw private key as a hex string or byte string
>     >
>     > </div>
>
> </div>

::: {.admonition .important}
Important

Since this middleware signs transactions, it must always run after any
middleware that modifies the transaction. Therefore, it is recommended
to inject the signing middleware at the 0th layer of the middleware
onion using
[`w3.middleware_onion.inject(SignAndSendRawMiddlewareBuilder.build(...),`{.docutils
.literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`layer=0)`{.docutils .literal .notranslate}]{.pre}. Ensure
that any transaction-modifying middleware exists in a higher layer
within the onion so that it runs before the signing middleware.
:::

::: {.admonition .note}
Note

If used with [`ExtraDataToPOAMiddleware`{.docutils .literal
.notranslate}]{.pre}, the injection order doesn't matter, as the
[`extraData`{.docutils .literal .notranslate}]{.pre} field isn't
involved in transaction signing. The key is ensuring
[`SignAndSendRawMiddlewareBuilder`{.docutils .literal
.notranslate}]{.pre} runs after any middleware that modifies the
transaction.
:::

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3 import Web3, EthereumTesterProvider
    >>> w3 = Web3(EthereumTesterProvider)
    >>> from web3.middleware import SignAndSendRawMiddlewareBuilder
    >>> from eth_account import Account
    >>> acct = Account.create('KEYSMASH FJAFJKLDSKF7JKFDJ 1530')
    >>> w3.middleware_onion.inject(SignAndSendRawMiddlewareBuilder.build(acct), layer=0)
    >>> w3.eth.default_account = acct.address
:::
:::

[[Hosted nodes]{.std
.std-ref}](#web3.eth.account.xhtml#local-vs-hosted){.reference
.internal} (like Infura or Alchemy) only support signed transactions.
This often results in [`send_raw_transaction`{.docutils .literal
.notranslate}]{.pre} being used repeatedly. Instead, we can automate
this process with
[`SignAndSendRawMiddlewareBuilder.build(private_key_or_account)`{.docutils
.literal .notranslate}]{.pre}.

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3 import Web3
    >>> w3 = Web3(Web3.HTTPProvider('HTTP_ENDPOINT'))
    >>> from web3.middleware import SignAndSendRawMiddlewareBuilder
    >>> from eth_account import Account
    >>> import os
    >>> acct = w3.eth.account.from_key(os.environ.get('PRIVATE_KEY'))
    >>> w3.middleware_onion.inject(SignAndSendRawMiddlewareBuilder.build(acct), layer=0)
    >>> w3.eth.default_account = acct.address

    >>> # use `eth_sendTransaction` to automatically sign and send the raw transaction
    >>> w3.eth.send_transaction(tx_dict)
    HexBytes('0x09511acf75918fd03de58141d2fd409af4fd6d3dce48eb3aa1656c8f3c2c5c21')
:::
:::

Similarly, with AsyncWeb3:

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3 import AsyncWeb3
    >>> async_w3 = AsyncWeb3(AsyncHTTPProvider('HTTP_ENDPOINT'))
    >>> from web3.middleware import SignAndSendRawMiddlewareBuilder
    >>> from eth_account import Account
    >>> import os
    >>> acct = async_w3.eth.account.from_key(os.environ.get('PRIVATE_KEY'))
    >>> async_w3.middleware_onion.inject(SignAndSendRawMiddlewareBuilder.build(acct), layer=0)
    >>> async_w3.eth.default_account = acct.address

    >>> # use `eth_sendTransaction` to automatically sign and send the raw transaction
    >>> await async_w3.eth.send_transaction(tx_dict)
    HexBytes('0x09511acf75918fd03de58141d2fd409af4fd6d3dce48eb3aa1656c8f3c2c5c21')
:::
:::

Now you can send a transaction from acct.address without having to build
and sign each raw transaction.

When making use of this signing middleware, when sending dynamic fee
transactions (recommended over legacy transactions), the transaction
[`type`{.docutils .literal .notranslate}]{.pre} of [`2`{.docutils
.literal .notranslate}]{.pre} (or [`'0x2'`{.docutils .literal
.notranslate}]{.pre}) is necessary. This is because transaction signing
is validated based on the transaction [`type`{.docutils .literal
.notranslate}]{.pre} parameter. This value defaults to
[`'0x2'`{.docutils .literal .notranslate}]{.pre} when
[`maxFeePerGas`{.docutils .literal .notranslate}]{.pre} and / or
[`maxPriorityFeePerGas`{.docutils .literal .notranslate}]{.pre} are
present as parameters in the transaction as these params imply a dynamic
fee transaction. Since these values effectively replace the legacy
[`gasPrice`{.docutils .literal .notranslate}]{.pre} value, do not set a
[`gasPrice`{.docutils .literal .notranslate}]{.pre} for dynamic fee
transactions. Doing so will lead to validation issues.

::: {.highlight-python .notranslate}
::: highlight
    # dynamic fee transaction, introduced by EIP-1559:
    >>> dynamic_fee_transaction = {
    ...     'type': '0x2',  # optional - defaults to '0x2' when dynamic fee transaction params are present
    ...     'from': acct.address,  # optional if w3.eth.default_account was set with acct.address
    ...     'to': receiving_account_address,
    ...     'value': 22,
    ...     'maxFeePerGas': 2000000000,  # required for dynamic fee transactions
    ...     'maxPriorityFeePerGas': 1000000000,  # required for dynamic fee transactions
    ... }
    >>> w3.eth.send_transaction(dynamic_fee_transaction)
:::
:::

A legacy transaction still works in the same way as it did before
EIP-1559 was introduced:

::: {.highlight-python .notranslate}
::: highlight
    >>> legacy_transaction = {
    ...     'to': receiving_account_address,
    ...     'value': 22,
    ...     'gasPrice': 123456,  # optional - if not provided, gas_price_strategy (if exists) or eth_gasPrice is used
    ... }
    >>> w3.eth.send_transaction(legacy_transaction)
:::
:::
:::
:::

::: {#middleware.xhtml#creating-custom-middleware .section}
## Creating Custom Middleware

To write your own middleware, create a class and extend from the base
[`Web3Middleware`{.docutils .literal .notranslate}]{.pre} class, then
override only the parts of the middleware that make sense for your use
case.

::: {.admonition .note}
Note

The Middleware API borrows from the Django middleware API introduced in
version 1.10.0.
:::

If all you need is to modify the params before a request is made, you
can override the [`request_processor`{.docutils .literal
.notranslate}]{.pre} method, make the necessary tweaks to the params,
and pass the arguments to the next element in the middleware stack. Need
to do some processing on the response? Override the
[`response_processor`{.docutils .literal .notranslate}]{.pre} method and
return the modified response.

The pattern:

::: {.highlight-python .notranslate}
::: highlight
    from web3.middleware import Web3Middleware

    class CustomMiddleware(Web3Middleware):

        def request_processor(self, method, params):
            # Pre-request processing goes here before passing to the next middleware.
            return (method, params)

        def response_processor(self, method, response):
            # Response processing goes here before passing to the next middleware.
            return response

        # If your provider is asynchronous, override the async methods instead:

        async def async_request_processor(self, method, params):
            # Pre-request processing goes here before passing to the next middleware.
            return (method, params)

        async def async_response_processor(self, method, response):
            # Response processing goes here before passing to the next middleware.
            return response
:::
:::

If you wish to prevent making a call under certain conditions, you can
override the [`wrap_make_request`{.docutils .literal
.notranslate}]{.pre} method. This allows for defining pre-request
processing, skipping or making the request under certain conditions, as
well as response processing before passing it to the next middleware.

::: {.highlight-python .notranslate}
::: highlight
    from web3.middleware import Web3Middleware

    class CustomMiddleware(Web3Middleware):

        def wrap_make_request(self, make_request):
            def middleware(method, params):
                # pre-request processing goes here
                response = make_request(method, params)  # make the request
                # response processing goes here
                return response

            return middleware

        # If your provider is asynchronous, override the async method instead:

        async def async_wrap_make_request(self, make_request):
            async def middleware(method, params):
                # pre-request processing goes here
                response = await make_request(method, params)
                # response processing goes here
                return response

            return middleware
:::
:::

Custom middleware can be added to the stack via the class itself, using
the [[Middleware Stack API]{.std
.std-ref}](#middleware.xhtml#middleware-stack-api){.reference
.internal}. The [`name`{.docutils .literal .notranslate}]{.pre} kwarg is
optional. For example:

::: {.highlight-python .notranslate}
::: highlight
    from web3 import Web3
    from my_module import (
        CustomMiddleware,
    )

    w3 = Web3(HTTPProvider(endpoint_uri="..."))

    # add the middleware to the stack as the class
    w3.middleware_onion.add(CustomMiddleware, name="custom_middleware")
:::
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#formatters.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#formatters.xhtml#formatters .section}
[]{#formatters.xhtml#id1}

# Formatters

Formatters are a core part of web3.py's data transformation pipeline.
They convert data between Python-friendly formats and the hexadecimal
formats required by the Ethereum JSON-RPC specification. This page
explains how formatters work, what the default formatters do, and how to
customize them.

::: {.admonition .note}
Note

For a deep dive into how requests flow through web3.py, including
formatters, see the excellent blog post: [Web3.py Internals: JSON-RPC
Round
Trips](https://snakecharmers.ethereum.org/web3py-internals-json-rpc-round-trips/){.reference
.external}[
\[https://snakecharmers.ethereum.org/web3py-internals-json-rpc-round-trips/\]]{.link-target}
:::

::: {#formatters.xhtml#how-formatters-work .section}
## How Formatters Work

When you make a call like [`w3.eth.get_balance("0x123...")`{.docutils
.literal .notranslate}]{.pre}, your request goes through several
transformation steps before reaching the Ethereum node, and the response
goes through similar transformations before being returned to you.

::: {#formatters.xhtml#the-request-response-flow .section}
### The Request/Response Flow

::: {.highlight-none .notranslate}
::: highlight
    Your Python Code
          |
          v
    +-----------------+
    |  Input Mungers  |  <- Set default values (e.g., block_identifier="latest")
    +-----------------+
          |
          v
    +---------------------+
    | Request Formatters  |  <- Convert Python types to JSON-RPC format
    +---------------------+
          |
          v
    +-----------------+
    |   Middleware    |  <- Additional processing (e.g., ENS resolution)
    +-----------------+
          |
          v
    +-----------------+
    |    Provider     |  <- Send JSON-RPC request to Ethereum node
    +-----------------+
          |
          v
      Ethereum Node
          |
          v
    +-----------------+
    |    Provider     |  <- Receive JSON-RPC response
    +-----------------+
          |
          v
    +-----------------+
    |   Middleware    |  <- Process response
    +-----------------+
          |
          v
    +--------------------+
    | Result Formatters  |  <- Convert JSON-RPC format to Python types
    +--------------------+
          |
          v
    Your Python Code
:::
:::
:::

::: {#formatters.xhtml#types-of-formatters .section}
### Types of Formatters

web3.py uses several types of formatters:

1.  **Request Formatters**: Transform outgoing request parameters from
    Python types to the format expected by Ethereum nodes (e.g.,
    integers to hex strings).

2.  **Result Formatters**: Transform incoming response data from
    JSON-RPC format to Python-friendly types (e.g., hex strings to
    integers or [`HexBytes`{.docutils .literal .notranslate}]{.pre}).

3.  **Error Formatters**: Process error responses to raise appropriate
    exceptions with meaningful messages.

4.  **Null Result Formatters**: Handle cases where the response is
    [`None`{.docutils .literal .notranslate}]{.pre} or empty.
:::
:::

::: {#formatters.xhtml#default-formatters .section}
## Default Formatters

web3.py includes a comprehensive set of default formatters that handle
common data transformations. These are defined in
[`web3._utils.method_formatters`{.docutils .literal
.notranslate}]{.pre}.

::: {#formatters.xhtml#pythonic-request-formatters .section}
### Pythonic Request Formatters

The [`PYTHONIC_REQUEST_FORMATTERS`{.docutils .literal
.notranslate}]{.pre} convert Python types to JSON-RPC compatible formats
before sending requests:

+---------------------------+------------------------------------------+
| Transformation            | Example                                  |
+===========================+==========================================+
| Integers to hex strings   | [`500000`{.docutils .literal             |
|                           | .notranslate}]{.pre} â†’                   |
|                           | [`"0x7a120"`{.docutils .literal          |
|                           | .notranslate}]{.pre}                     |
+---------------------------+------------------------------------------+
| Block identifiers         | [`"latest"`{.docutils .literal           |
|                           | .notranslate}]{.pre} (unchanged) or      |
|                           | [`12345`{.docutils .literal              |
|                           | .notranslate}]{.pre} â†’                   |
|                           | [`"0x3039"`{.docutils .literal           |
|                           | .notranslate}]{.pre}                     |
+---------------------------+------------------------------------------+
| Addresses to checksummed  | Validates and formats addresses          |
| format                    |                                          |
+---------------------------+------------------------------------------+
| Transaction parameters    | Formats [`gas`{.docutils .literal        |
|                           | .notranslate}]{.pre},                    |
|                           | [`gasPrice`{.docutils .literal           |
|                           | .notranslate}]{.pre}, [`value`{.docutils |
|                           | .literal .notranslate}]{.pre},           |
|                           | [`nonce`{.docutils .literal              |
|                           | .notranslate}]{.pre} to hex              |
+---------------------------+------------------------------------------+

Example transformations by method:

-   **eth_getBalance**: Block number parameter converted to hex

-   **eth_call**: Transaction object fields formatted, block identifier
    converted

-   **eth_sendTransaction**: All numeric fields (gas, value, nonce)
    converted to hex

-   **eth_getBlockByNumber**: Block identifier converted to hex

-   **eth_getLogs**: [`fromBlock`{.docutils .literal
    .notranslate}]{.pre} and [`toBlock`{.docutils .literal
    .notranslate}]{.pre} converted to hex
:::

::: {#formatters.xhtml#pythonic-result-formatters .section}
### Pythonic Result Formatters

The [`PYTHONIC_RESULT_FORMATTERS`{.docutils .literal
.notranslate}]{.pre} convert JSON-RPC responses to Python types:

+--------------------+------------------------+------------------------+
| Method             | Transformation         | Example                |
+====================+========================+========================+
| eth_getBalance     | Hex to integer         | [`"0x83a3c             |
|                    |                        | 396d1a7b40"`{.docutils |
|                    |                        | .literal               |
|                    |                        | .notranslate}]{.pre} â†’ |
|                    |                        | [`5837606              |
|                    |                        | 63573639744`{.docutils |
|                    |                        | .literal               |
|                    |                        | .notranslate}]{.pre}   |
+--------------------+------------------------+------------------------+
| eth_blockNumber    | Hex to integer         | [`"0xf4240"`{.docutils |
|                    |                        | .literal               |
|                    |                        | .notranslate}]{.pre} â†’ |
|                    |                        | [`1000000`{.docutils   |
|                    |                        | .literal               |
|                    |                        | .notranslate}]{.pre}   |
+--------------------+------------------------+------------------------+
| eth_getBlock       | Full block formatting  | Formats all block      |
|                    |                        | fields                 |
+--------------------+------------------------+------------------------+
| eth_getTransaction | Full transaction       | Formats all            |
|                    | formatting             | transaction fields     |
+--------------------+------------------------+------------------------+
| eth_get            | Receipt formatting     | Formats logs, status,  |
| TransactionReceipt |                        | gas used               |
+--------------------+------------------------+------------------------+
| eth_chainId        | Hex to integer         | [`"0x1"`{.docutils     |
|                    |                        | .literal               |
|                    |                        | .notranslate}]{.pre} â†’ |
|                    |                        | [`1`{.docutils         |
|                    |                        | .literal               |
|                    |                        | .notranslate}]{.pre}   |
+--------------------+------------------------+------------------------+
| eth_gasPrice       | Hex to integer         | [`"                    |
|                    |                        | 0x3b9aca00"`{.docutils |
|                    |                        | .literal               |
|                    |                        | .notranslate}]{.pre} â†’ |
|                    |                        | [                      |
|                    |                        | `1000000000`{.docutils |
|                    |                        | .literal               |
|                    |                        | .notranslate}]{.pre}   |
+--------------------+------------------------+------------------------+
:::

::: {#formatters.xhtml#block-result-formatters .section}
### Block Result Formatters

Block responses are formatted with [`BLOCK_RESULT_FORMATTERS`{.docutils
.literal .notranslate}]{.pre}:

::: {.highlight-python .notranslate}
::: highlight
    {
        "baseFeePerGas": to_integer_if_hex,
        "difficulty": to_integer_if_hex,
        "gasLimit": to_integer_if_hex,
        "gasUsed": to_integer_if_hex,
        "number": to_integer_if_hex,
        "size": to_integer_if_hex,
        "timestamp": to_integer_if_hex,
        "totalDifficulty": to_integer_if_hex,
        "hash": to_hexbytes(32),
        "parentHash": to_hexbytes(32),
        "miner": to_checksum_address,
        "transactions": [list of tx hashes or full tx objects],
        # ... and more
    }
:::
:::
:::

::: {#formatters.xhtml#transaction-result-formatters .section}
### Transaction Result Formatters

Transaction responses are formatted with
[`TRANSACTION_RESULT_FORMATTERS`{.docutils .literal
.notranslate}]{.pre}:

::: {.highlight-python .notranslate}
::: highlight
    {
        "blockNumber": to_integer_if_hex,
        "gas": to_integer_if_hex,
        "gasPrice": to_integer_if_hex,
        "nonce": to_integer_if_hex,
        "transactionIndex": to_integer_if_hex,
        "value": to_integer_if_hex,
        "v": to_integer_if_hex,
        "from": to_checksum_address,
        "to": to_checksum_address,
        "hash": to_hexbytes(32),
        "input": HexBytes,
        "r": to_hexbytes(32),
        "s": to_hexbytes(32),
        # ... and more
    }
:::
:::
:::

::: {#formatters.xhtml#log-entry-formatters .section}
### Log Entry Formatters

Log entries (events) are formatted with
[`LOG_ENTRY_FORMATTERS`{.docutils .literal .notranslate}]{.pre}:

::: {.highlight-python .notranslate}
::: highlight
    {
        "blockNumber": to_integer_if_hex,
        "logIndex": to_integer_if_hex,
        "transactionIndex": to_integer_if_hex,
        "address": to_checksum_address,
        "blockHash": to_hexbytes(32),
        "transactionHash": to_hexbytes(32),
        "data": HexBytes,
        "topics": [list of HexBytes(32)],
    }
:::
:::
:::
:::

::: {#formatters.xhtml#using-formattingmiddlewarebuilder .section}
## Using FormattingMiddlewareBuilder

For custom formatting needs, you can use the
[`FormattingMiddlewareBuilder`{.docutils .literal .notranslate}]{.pre}
class to create middleware that applies your own formatters.

::: {#formatters.xhtml#basic-usage .section}
### Basic Usage

::: {.highlight-python .notranslate}
::: highlight
    from web3 import Web3
    from web3.middleware import FormattingMiddlewareBuilder

    w3 = Web3(Web3.HTTPProvider("http://localhost:8545"))

    # Create middleware with custom formatters
    custom_middleware = FormattingMiddlewareBuilder.build(
        request_formatters={
            "eth_myCustomMethod": lambda params: [p.upper() for p in params]
        },
        result_formatters={
            "eth_myCustomMethod": lambda result: result.lower()
        },
    )

    # Add to middleware stack
    w3.middleware_onion.add(custom_middleware)
:::
:::
:::

::: {#formatters.xhtml#request-formatters-example .section}
### Request Formatters Example

Request formatters receive the parameters list and should return the
transformed parameters:

::: {.highlight-python .notranslate}
::: highlight
    from web3.middleware import FormattingMiddlewareBuilder

    def my_request_formatter(params):
        """Transform request parameters before sending."""
        # params is a list of parameters for the RPC method
        address, block_id = params
        # Ensure address is lowercase
        return [address.lower(), block_id]

    custom_middleware = FormattingMiddlewareBuilder.build(
        request_formatters={
            "eth_getBalance": my_request_formatter,
        }
    )
:::
:::
:::

::: {#formatters.xhtml#result-formatters-example .section}
### Result Formatters Example

Result formatters receive the result value and should return the
transformed result:

::: {.highlight-python .notranslate}
::: highlight
    from web3.middleware import FormattingMiddlewareBuilder
    from decimal import Decimal

    def balance_to_ether(result):
        """Convert balance from wei to ether."""
        wei_balance = int(result, 16) if isinstance(result, str) else result
        return Decimal(wei_balance) / Decimal(10**18)

    custom_middleware = FormattingMiddlewareBuilder.build(
        result_formatters={
            "eth_getBalance": balance_to_ether,
        }
    )

    w3.middleware_onion.add(custom_middleware)

    # Now get_balance returns Decimal in ether instead of int in wei
    balance = w3.eth.get_balance("0x...")  # Returns Decimal("1.5") instead of 1500000000000000000
:::
:::
:::

::: {#formatters.xhtml#error-formatters-example .section}
### Error Formatters Example

Error formatters process error responses:

::: {.highlight-python .notranslate}
::: highlight
    from web3.middleware import FormattingMiddlewareBuilder

    def custom_error_formatter(error):
        """Add custom error handling."""
        if "revert" in str(error.get("message", "")):
            error["message"] = f"Contract reverted: {error['message']}"
        return error

    custom_middleware = FormattingMiddlewareBuilder.build(
        error_formatters={
            "eth_call": custom_error_formatter,
        }
    )
:::
:::
:::

::: {#formatters.xhtml#dynamic-formatters-with-builders .section}
### Dynamic Formatters with Builders

For formatters that need access to the [`Web3`{.docutils .literal
.notranslate}]{.pre} instance or need to be built dynamically
per-request, use the [`sync_formatters_builder`{.docutils .literal
.notranslate}]{.pre} and [`async_formatters_builder`{.docutils .literal
.notranslate}]{.pre} options:

::: {.highlight-python .notranslate}
::: highlight
    from web3.middleware import FormattingMiddlewareBuilder

    def build_formatters(w3, method):
        """Build formatters dynamically based on method and w3 instance."""
        request_formatters = {}
        result_formatters = {}
        error_formatters = {}

        if method == "eth_getBalance":
            # Access w3 instance for dynamic behavior
            chain_id = w3.eth.chain_id
            if chain_id == 1:  # Mainnet
                result_formatters["eth_getBalance"] = lambda x: int(x, 16)

        return {
            "request_formatters": request_formatters,
            "result_formatters": result_formatters,
            "error_formatters": error_formatters,
        }

    # For async usage
    async def async_build_formatters(async_w3, method):
        """Async version of formatter builder."""
        chain_id = await async_w3.eth.chain_id
        # ... build formatters
        return {
            "request_formatters": {},
            "result_formatters": {},
            "error_formatters": {},
        }

    custom_middleware = FormattingMiddlewareBuilder.build(
        sync_formatters_builder=build_formatters,
        async_formatters_builder=async_build_formatters,
    )
:::
:::
:::
:::

::: {#formatters.xhtml#common-formatter-utilities .section}
## Common Formatter Utilities

web3.py provides several utility functions for building formatters in
[`web3._utils.formatters`{.docutils .literal .notranslate}]{.pre} and
[`eth_utils`{.docutils .literal .notranslate}]{.pre}:

::: {.highlight-python .notranslate}
::: highlight
    from eth_utils import (
        to_checksum_address,
        to_hex,
        to_int,
    )
    from eth_utils.curried import (
        apply_formatter_at_index,
        apply_formatter_if,
        apply_formatter_to_array,
        apply_formatters_to_dict,
        apply_formatters_to_sequence,
    )
    from web3._utils.formatters import (
        apply_key_map,
        hex_to_integer,
        integer_to_hex,
    )

    # Apply formatter to specific index in params list
    formatter = apply_formatter_at_index(to_hex, 1)  # Format 2nd parameter

    # Apply formatter conditionally
    formatter = apply_formatter_if(
        lambda x: isinstance(x, int),  # condition
        to_hex  # formatter to apply if condition is True
    )

    # Apply formatters to each element of an array
    formatter = apply_formatter_to_array(to_checksum_address)

    # Apply different formatters to dict keys
    formatter = apply_formatters_to_dict({
        "gasPrice": to_hex,
        "value": to_hex,
        "from": to_checksum_address,
    })
:::
:::
:::

::: {#formatters.xhtml#built-in-middleware-using-formatters .section}
## Built-in Middleware Using Formatters

Several built-in middleware use the formatting system:

::: {#formatters.xhtml#pythonicmiddleware .section}
### PythonicMiddleware

The [`PythonicMiddleware`{.docutils .literal .notranslate}]{.pre}
applies the default Pythonic formatters to convert between Python types
and JSON-RPC formats. This is included in the default middleware stack.

::: {.highlight-python .notranslate}
::: highlight
    from web3.middleware import PythonicMiddleware

    # This is equivalent to:
    PythonicMiddleware = FormattingMiddlewareBuilder.build(
        request_formatters=PYTHONIC_REQUEST_FORMATTERS,
        result_formatters=PYTHONIC_RESULT_FORMATTERS,
    )
:::
:::
:::

::: {#formatters.xhtml#validationmiddleware .section}
### ValidationMiddleware

The [`ValidationMiddleware`{.docutils .literal .notranslate}]{.pre} uses
formatters to validate transaction parameters like [`chainId`{.docutils
.literal .notranslate}]{.pre} before sending:

::: {.highlight-python .notranslate}
::: highlight
    from web3.middleware import ValidationMiddleware

    # Included by default, validates transactions have correct chainId
:::
:::
:::

::: {#formatters.xhtml#ethereumtestermiddleware .section}
### EthereumTesterMiddleware

The [`ethereum_tester_middleware`{.docutils .literal
.notranslate}]{.pre} uses formatters to transform data between web3.py
and the eth-tester backend:

::: {.highlight-python .notranslate}
::: highlight
    from web3.providers.eth_tester.middleware import ethereum_tester_middleware
:::
:::
:::
:::

::: {#formatters.xhtml#best-practices .section}
## Best Practices

1.  **Order Matters**: Request formatters are applied in order, and
    result formatters are applied in reverse order. Be mindful of the
    order when adding multiple formatting middleware.

2.  **Don't Duplicate**: The default [`PythonicMiddleware`{.docutils
    .literal .notranslate}]{.pre} handles most common transformations.
    Only add custom formatters for specific needs.

3.  **Test Your Formatters**: Formatters can silently transform data
    incorrectly. Always test with real RPC calls.

4.  **Use Type Hints**: When writing custom formatters, use type hints
    to catch errors early:

    ::: {.highlight-python .notranslate}
    ::: highlight
        from typing import Any

        def my_formatter(value: str) -> int:
            return int(value, 16)
    :::
    :::

5.  **Handle Edge Cases**: Always handle [`None`{.docutils .literal
    .notranslate}]{.pre} values and unexpected types:

    ::: {.highlight-python .notranslate}
    ::: highlight
        def safe_formatter(value):
            if value is None:
                return None
            return int(value, 16) if isinstance(value, str) else value
    :::
    :::
:::

::: {#formatters.xhtml#see-also .section}
## See Also

-   [[Middleware]{.std
    .std-ref}](#middleware.xhtml#middleware-internals){.reference
    .internal} - How middleware works in web3.py

-   [[Configuring Middleware]{.std
    .std-ref}](#middleware.xhtml#modifying-middleware){.reference
    .internal} - How to add, remove, and configure middleware

-   [JSON-RPC
    Specification](https://www.jsonrpc.org/specification){.reference
    .external}[
    \[https://www.jsonrpc.org/specification\]]{.link-target} - The
    underlying protocol

-   [Ethereum JSON-RPC
    API](https://ethereum.org/en/developers/docs/apis/json-rpc/){.reference
    .external}[
    \[https://ethereum.org/en/developers/docs/apis/json-rpc/\]]{.link-target} -
    Ethereum-specific methods
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#internals.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#internals.xhtml#web3-internals .section}
# Web3 Internals

::: {.admonition .warning}
Warning

This section of the documentation is for advanced users. You should
probably stay away from these APIs if you don't know what you are doing.
:::

The Web3 library has multiple layers of abstraction between the public
api exposed by the web3 object and the backend or node that web3 is
connecting to.

-   **Providers** are responsible for the actual communication with the
    blockchain such as sending JSON-RPC requests over HTTP or an IPC
    socket.

-   **Middleware** provide hooks for monitoring and modifying requests
    and responses to and from the provider.

-   **Managers** provide thread safety and primitives to allow for
    asynchronous usage of web3.

Here are some common things you might want to do with these APIs.

-   Redirect certain RPC requests to different providers such as sending
    all *read* operations to a provider backed by a remote node and all
    *write* operations to a local node that you control.

-   Transparently intercept transactions sent over
    [`eth_sendTransaction`{.docutils .literal .notranslate}]{.pre}, sign
    them locally, and then send them through
    [`eth_sendRawTransaction`{.docutils .literal .notranslate}]{.pre}.

-   Modify the response from an RPC request so that it is returned in
    different format such as converting all integer values to their
    hexadecimal representation.

-   Validate the inputs to RPC requests

::: {#internals.xhtml#request-lifecycle .section}
## Request Lifecycle

Each web3 RPC call passes through these layers in the following manner.

::: {.highlight-none .notranslate}
::: highlight
      ***********    ************
      | Request |    | Response |
      ***********    ************
          |                ^
          v                |
    +-----------------------------+
    |           Manager           |
    +-----------------------------+
          |                ^
          v                |
    +-----------------------------+
    |         Middleware          |
    +-----------------------------+
          |                ^
          v                |
    +-----------------------------+
    |          Provider           |
    +-----------------------------+
:::
:::

You can visualize this relationship like an onion, with the Provider at
the center. The request originates from the [`Manager`{.docutils
.literal .notranslate}]{.pre}, outside of the onion, passing down
through each layer of the onion until it reaches the
[`Provider`{.docutils .literal .notranslate}]{.pre} at the center. The
[`Provider`{.docutils .literal .notranslate}]{.pre} then handles the
request, producing a response which will then pass back out from the
center of the onion, through each layer until it is finally returned by
the [`Manager`{.docutils .literal .notranslate}]{.pre}.
:::

::: {#internals.xhtml#providers .section}
## Providers

A provider is responsible for all direct blockchain interactions. In
most cases this means interacting with the JSON-RPC server for an
ethereum node over HTTP or an IPC socket. There is however nothing which
requires providers to be RPC based, allowing for providers designed for
testing purposes which use an in-memory EVM to fulfill requests.

::: {#internals.xhtml#writing-your-own-provider .section}
### Writing your own Provider

Writing your own provider requires implementing two required methods as
well as setting the middleware the provider should use.

[[BaseProvider.]{.pre}]{.sig-prename .descclassname}[[make_request]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[method]{.pre}]{.n}*, *[[params]{.pre}]{.n}*[)]{.sig-paren}

:   Each provider class **must** implement this method. This method
    **should** return a JSON object with either a [`'result'`{.docutils
    .literal .notranslate}]{.pre} key in the case of success, or an
    [`'error'`{.docutils .literal .notranslate}]{.pre} key in the case
    of failure.

    -   [`method`{.docutils .literal .notranslate}]{.pre} This will be a
        string representing the JSON-RPC method that is being called
        such as [`'eth_sendTransaction'`{.docutils .literal
        .notranslate}]{.pre}.

    -   [`params`{.docutils .literal .notranslate}]{.pre} This will be a
        list or other iterable of the parameters for the JSON-RPC method
        being called.

```{=html}
<!-- -->
```

[[BaseProvider.]{.pre}]{.sig-prename .descclassname}[[is_connected]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[show_traceback]{.pre}]{.n}[[=]{.pre}]{.o}[[False]{.pre}]{.default_value}*[)]{.sig-paren}

:   This function should return [`True`{.docutils .literal
    .notranslate}]{.pre} or [`False`{.docutils .literal
    .notranslate}]{.pre} depending on whether the provider should be
    considered *connected*. For example, an IPC socket based provider
    should return [`True`{.docutils .literal .notranslate}]{.pre} if the
    socket is open and [`False`{.docutils .literal .notranslate}]{.pre}
    if the socket is closed.

    If set to [`True`{.docutils .literal .notranslate}]{.pre}, the
    optional [`show_traceback`{.docutils .literal .notranslate}]{.pre}
    boolean will raise a [`ProviderConnectionError`{.docutils .literal
    .notranslate}]{.pre} and provide information on why the provider
    should not be considered *connected*.

```{=html}
<!-- -->
```

[[BaseProvider.]{.pre}]{.sig-prename .descclassname}[[middleware]{.pre}]{.sig-name .descname}

:   This should be an iterable of middleware.

You can set a new list of middleware by assigning to
[`provider.middleware`{.docutils .literal .notranslate}]{.pre}, with the
first middleware that processes the request at the beginning of the
list.
:::

::: {#internals.xhtml#provider-configurations .section}
### Provider Configurations

::: {#internals.xhtml#request-caching .section}
[]{#internals.xhtml#id1}

#### Request Caching

::: {.admonition .important}
Important

Familiarize yourself with the validation logic for request caching
before enabling it. Since this feature often requires making additional
requests under the hood to try to guarantee the validity of the data, it
may create unnecessary overhead for your use case. Validation can be
turned off by setting the
[`request_cache_validation_threshold`{.docutils .literal
.notranslate}]{.pre} option to [`None`{.docutils .literal
.notranslate}]{.pre}, caching all allowed requests, or configured for
adjusting performance to your needs.
:::

Request caching can be configured at the provider level via the
following configuration options on the provider instance:

-   [`cache_allowed_requests:`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`bool`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`=`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`False`{.docutils .literal .notranslate}]{.pre}

-   [`cacheable_requests:`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`Optional[Set[RPCEndpoint]]`{.docutils .literal
    .notranslate}]{.pre}

-   [`request_cache_validation_threshold:`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`Optional[Union[RequestCacheValidationThreshold,`{.docutils
    .literal .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`int]]`{.docutils .literal .notranslate}]{.pre}

For requests that don't rely on block data (e.g.,
[`eth_chainId`{.docutils .literal .notranslate}]{.pre}), enabling
request caching by setting the [`cache_allowed_requests`{.docutils
.literal .notranslate}]{.pre} option to [`True`{.docutils .literal
.notranslate}]{.pre} will cache all responses. This is safe to do.

However, for requests that rely on block data (e.g.,
[`eth_getBlockByNumber`{.docutils .literal .notranslate}]{.pre}), it is
not safe to always cache their responses because block data can change -
during a chain reorganization or while finality has not been reached,
for example. The [`request_cache_validation_threshold`{.docutils
.literal .notranslate}]{.pre} option allows configuring a safe threshold
for caching responses that depend on block data. By default, this option
is configured to internal values deemed "safe" for the chain id you are
connected to. If you are connected to mainnet Ethereum, this value is
set to the [`finalized`{.docutils .literal .notranslate}]{.pre} block
number. If you are connected to another chain, this value is set to a
time interval in seconds, from the current time, that is deemed "safe"
for that chain's finality mechanism.

**It's important to understand that, in order to perform these
validations, extra requests are sometimes made to the node to get the
appropriate information. For a transaction request, for example, it is
necessary to get the block information to validate the transaction is
beyond the safe threshold. This can create overhead, especially for
high-frequency requests. For this reason, it is important to understand
when to turn on caching and how to configure the validation
appropriately for your use case in order to avoid unnecessary
overhead.**

We keep a list of some reasonable values for bigger chains and use the
time interval of 1 hour for everything else. Below is a list of the
default values for internally configured chains:

> <div>
>
> -   ETH: RequestCacheValidationThreshold.FINALIZED ("finalized" block)
>
> -   ARB1: 7 days
>
> -   ZKSYNC: 1 hour
>
> -   OETH: 3 minutes
>
> -   MATIC: 30 minutes
>
> -   ZKEVM: 1 hour
>
> -   BASE: 7 days
>
> -   SCR: 1 hour
>
> -   GNO: 5 minutes
>
> -   AVAX: 2 minutes
>
> -   BNB: 2 minutes
>
> -   FTM: 1 minute
>
> </div>

For Ethereum mainnet, for example, this means that a request's response
will be cached if the block number the request relies on is less than or
equal to the [`finalized`{.docutils .literal .notranslate}]{.pre} block
number. If the block number exceeds the [`finalized`{.docutils .literal
.notranslate}]{.pre} block number, the response won't be cached. For all
others, the response will be cached if the block timestamp related to
the data that is being requested is older than or equal to the time
interval configured for that chain. For any chain not on this list, the
default value is set to 1 hour (this includes all testnets).

This behavior can be modified by setting the
[`request_cache_validation_threshold`{.docutils .literal
.notranslate}]{.pre} option to
[`RequestCacheValidationThreshold.SAFE`{.docutils .literal
.notranslate}]{.pre}, which uses the [`safe`{.docutils .literal
.notranslate}]{.pre} block as the threshold (Ethereum mainnet only), to
your own time interval in seconds (for any chain, including mainnet
Ethereum), or to [`None`{.docutils .literal .notranslate}]{.pre}, which
disables any validation and caches all requests (this is not recommended
for non testnet chains). The
[`RequestCacheValidationThreshold`{.docutils .literal
.notranslate}]{.pre} enum, for mainnet [`finalized`{.docutils .literal
.notranslate}]{.pre} and [`safe`{.docutils .literal .notranslate}]{.pre}
values, is imported from the [`web3.utils`{.docutils .literal
.notranslate}]{.pre} module.

Note that the [`cacheable_requests`{.docutils .literal
.notranslate}]{.pre} option can be used to specify a set of RPC
endpoints that are allowed to be cached. By default, this option is set
to an internal list of deemed-safe-to-cache endpoints, excluding
endpoints such as [`eth_call`{.docutils .literal .notranslate}]{.pre},
whose responses can vary and are not safe to cache. The default list of
cacheable requests is below, with requests validated by the
[`request_cache_validation_threshold`{.docutils .literal
.notranslate}]{.pre} option in bold:

> <div>
>
> -   eth_chainId
>
> -   web3_clientVersion
>
> -   net_version
>
> -   **eth_getBlockByNumber**
>
> -   **eth_getRawTransactionByBlockNumberAndIndex**
>
> -   **eth_getBlockTransactionCountByNumber**
>
> -   **eth_getUncleByBlockNumberAndIndex**
>
> -   **eth_getUncleCountByBlockNumber**
>
> -   **eth_getBlockByHash**
>
> -   **eth_getTransactionByHash**
>
> -   **eth_getTransactionByBlockNumberAndIndex**
>
> -   **eth_getTransactionByBlockHashAndIndex**
>
> -   **eth_getBlockTransactionCountByHash**
>
> -   **eth_getRawTransactionByBlockHashAndIndex**
>
> -   **eth_getUncleByBlockHashAndIndex**
>
> -   **eth_getUncleCountByBlockHash**
>
> </div>

::: {.highlight-python .notranslate}
::: highlight
    from web3 import Web3, HTTPProvider
    from web3.utils import RequestCacheValidationThreshold

    w3 = Web3(HTTPProvider(
        endpoint_uri="...",

        # optional flag to turn on cached requests, defaults to ``False``
        cache_allowed_requests=True,

        # optional, defaults to an internal list of deemed-safe-to-cache endpoints (see above)
        cacheable_requests={"eth_chainId", "eth_getBlockByNumber"},

        # optional, defaults to a value that is based on the chain id (see above)
        request_cache_validation_threshold=60 * 60,  # 1 hour
        # request_cache_validation_threshold=RequestCacheValidationThreshold.SAFE,  # Ethereum mainnet only
    ))
:::
:::
:::

::: {#internals.xhtml#retry-requests-for-http-providers .section}
[]{#internals.xhtml#http-retry-requests}

#### Retry Requests for HTTP Providers

[`HTTPProvider`{.docutils .literal .notranslate}]{.pre} and
[`AsyncHTTPProvider`{.docutils .literal .notranslate}]{.pre} instances
retry certain requests by default on exceptions. This can be configured
via the [`exception_retry_configuration`{.docutils .literal
.notranslate}]{.pre} property on the provider instance, which takes a
[[`ExceptionRetryConfiguration`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](#internals.xhtml#web3.providers.rpc.utils.ExceptionRetryConfiguration "web3.providers.rpc.utils.ExceptionRetryConfiguration"){.reference
.internal} class as its value. The retry mechanism employs an
exponential backoff strategy, starting from the initial value determined
by the [`backoff_factor`{.docutils .literal .notranslate}]{.pre}, and
doubling the delay with each attempt, up to the [`retries`{.docutils
.literal .notranslate}]{.pre} value. Below is an example showing the
default options for the retry configuration and how to override them.

*[class]{.pre}[ ]{.w}*[[web3.providers.rpc.utils.]{.pre}]{.sig-prename .descclassname}[[ExceptionRetryConfiguration]{.pre}]{.sig-name .descname}

:   

    [[errors]{.pre}]{.sig-name .descname}

    :   A tuple of exceptions that the provider should retry on. The
        default is [`HTTPProvider`{.docutils .literal
        .notranslate}]{.pre}: [`(ConnectionError,`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`requests.HTTPError,`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`requests.Timeout)`{.docutils .literal
        .notranslate}]{.pre} and [`AsyncHTTPProvider`{.docutils .literal
        .notranslate}]{.pre}: [`(aiohttp.ClientError,`{.docutils
        .literal .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`asyncio.TimeoutError)`{.docutils .literal
        .notranslate}]{.pre}.

    [[retries]{.pre}]{.sig-name .descname}

    :   The number of retries to attempt. The default is 5.

    [[backoff_factor]{.pre}]{.sig-name .descname}

    :   The initial delay multiplier, which doubles with each retry
        attempt. The default is 0.125.

    [[method_allowlist]{.pre}]{.sig-name .descname}

    :   A list of retryable methods. The default is an in-house list of
        deemed-safe-to- retry methods.

::: {.highlight-python .notranslate}
::: highlight
    from web3 import Web3, HTTPProvider
    from web3.providers.rpc.utils import (
        REQUEST_RETRY_ALLOWLIST,
        ExceptionRetryConfiguration,
    )

    w3 = Web3(HTTPProvider(
        endpoint_uri="...",
        exception_retry_configuration=ExceptionRetryConfiguration(
            errors=DEFAULT_EXCEPTIONS,

            # number of retries to attempt
            retries=5,

            # initial delay multiplier, doubles with each retry attempt
            backoff_factor=0.125,

            # an in-house default list of retryable methods
            method_allowlist=REQUEST_RETRY_ALLOWLIST,
        ),
    ))
:::
:::

For the different http providers, [`DEFAULT_EXCEPTIONS`{.docutils
.literal .notranslate}]{.pre} is defined as:

-   [`HTTPProvider`{.docutils .literal .notranslate}]{.pre}:
    [`(ConnectionError,`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`requests.HTTPError,`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`requests.Timeout)`{.docutils .literal
    .notranslate}]{.pre}

-   [`AsyncHTTPProvider`{.docutils .literal .notranslate}]{.pre}:
    [`(ConnectionError,`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`aiohttp.ClientError,`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`asyncio.TimeoutError)`{.docutils .literal
    .notranslate}]{.pre}

Setting [`retry_configuration`{.docutils .literal .notranslate}]{.pre}
to [`None`{.docutils .literal .notranslate}]{.pre} will disable retries
on exceptions for the provider instance.

::: {.highlight-python .notranslate}
::: highlight
    from web3 import Web3, HTTPProvider

    w3 = Web3(HTTPProvider(endpoint_uri="...", retry_configuration=None)
:::
:::
:::
:::
:::

::: {#internals.xhtml#managers .section}
## Managers

The Manager acts as a gatekeeper for the request/response lifecycle. It
is unlikely that you will need to change the Manager as most
functionality can be implemented in the Middleware layer.
:::

::: {#internals.xhtml#request-processing-for-persistent-connection-providers .section}
[]{#internals.xhtml#internals-persistent-connection-providers}

## Request Processing for Persistent Connection Providers

*[class]{.pre}[ ]{.w}*[[web3.providers.persistent.request_processor.]{.pre}]{.sig-prename .descclassname}[[RequestProcessor]{.pre}]{.sig-name .descname}

:   

The [`RequestProcessor`{.docutils .literal .notranslate}]{.pre} class is
responsible for the storing and syncing up of asynchronous requests to
responses for a [`PersistentConnectionProvider`{.docutils .literal
.notranslate}]{.pre}. The [[`WebSocketProvider`{.xref .py .py-class
.docutils .literal
.notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.WebSocketProvider "web3.providers.persistent.WebSocketProvider"){.reference
.internal} and the [[`AsyncIPCProvider`{.xref .py .py-class .docutils
.literal
.notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.AsyncIPCProvider "web3.providers.persistent.AsyncIPCProvider"){.reference
.internal} are two persistent connection providers. In order to send a
request and receive a response to that same request,
[`PersistentConnectionProvider`{.docutils .literal .notranslate}]{.pre}
instances have to match request *id* values to response *id* values
coming back from the socket connection. Any provider that does not
adhere to the [JSON-RPC 2.0
specification](https://www.jsonrpc.org/specification){.reference
.external}[ \[https://www.jsonrpc.org/specification\]]{.link-target} in
this way will not work with [`PersistentConnectionProvider`{.docutils
.literal .notranslate}]{.pre} instances. The specifics of how the
request processor handles this are outlined below.

::: {#internals.xhtml#listening-for-responses .section}
### Listening for Responses

Implementations of the [`PersistentConnectionProvider`{.docutils
.literal .notranslate}]{.pre} class have a message listener background
task that is called when the socket connection is established. This task
is responsible for listening for any and all messages coming in over the
socket connection and storing them in the [`RequestProcessor`{.docutils
.literal .notranslate}]{.pre} instance internal to the
[`PersistentConnectionProvider`{.docutils .literal .notranslate}]{.pre}
instance. The [`RequestProcessor`{.docutils .literal
.notranslate}]{.pre} instance is responsible for storing the messages in
the correct cache, either the one-to-one cache or the one-to-many
(subscriptions) queue, depending on whether the message has a JSON-RPC
*id* value or not.
:::

::: {#internals.xhtml#one-to-one-requests .section}
### One-To-One Requests

One-to-one requests can be summarized as any request that expects only
one response back. An example is using the [`eth`{.docutils .literal
.notranslate}]{.pre} module API to request the latest block number.

::: {.highlight-python .notranslate}
::: highlight
    >>> async def ws_one_to_one_example():
    ...     async with AsyncWeb3(WebSocketProvider(f"ws://127.0.0.1:8546")) as w3:
    ...         # make a request and expect a single response returned on the same line
    ...         latest_block_num = await w3.eth.block_number

    >>> asyncio.run(ws_one_to_one_example())
:::
:::

With persistent socket connections, we have to call [`send()`{.docutils
.literal .notranslate}]{.pre} and asynchronously receive responses via
another means, generally by calling [`recv()`{.docutils .literal
.notranslate}]{.pre} or by iterating on the socket connection for
messages. As outlined above, the
[`PersistentConnectionProvider`{.docutils .literal .notranslate}]{.pre}
class has a message listener background task that handles the receiving
of messages.

Due to this asynchronous nature of sending and receiving, in order to
make one-to-one request-to-response calls work, we have to save the
request information somewhere so that, when the response is received, we
can match it to the original request that was made (i.e. the request
with a matching *id* to the response that was received). The stored
request information is then used to process the response when it is
received, piping it through the response formatters and middleware
internal to the *web3.py* library.

In order to store the request information, the
[`RequestProcessor`{.docutils .literal .notranslate}]{.pre} class has an
internal [`RequestInformation`{.docutils .literal .notranslate}]{.pre}
cache. The [`RequestInformation`{.docutils .literal .notranslate}]{.pre}
class saves important information about a request.

*[class]{.pre}[ ]{.w}*[[web3.\_utils.caching.]{.pre}]{.sig-prename .descclassname}[[RequestInformation]{.pre}]{.sig-name .descname}

:   

    [[method]{.pre}]{.sig-name .descname}

    :   The name of the method - e.g. "eth_subscribe".

    [[params]{.pre}]{.sig-name .descname}

    :   The params used when the call was made - e.g.
        ("newPendingTransactions", True).

    [[response_formatters]{.pre}]{.sig-name .descname}

    :   The formatters that will be used to process the response.

    [[middleware_response_processors]{.pre}]{.sig-name .descname}

    :   Any middleware that processes responses that is present on the
        instance at the time of the request is appended here, in order,
        so the response may be piped through that logic when it comes
        in.

    [[subscription_id]{.pre}]{.sig-name .descname}

    :   If the request is an [`eth_subscribe`{.docutils .literal
        .notranslate}]{.pre} request, rather than popping this
        information from the cache when the response to the subscription
        call comes in (i.e. the subscription *id*), we save the
        subscription id with the request information so that we can
        correctly process all subscription messages that come in with
        that subscription *id*. For one-to-one request-to-response
        calls, this value is always [`None`{.docutils .literal
        .notranslate}]{.pre}.

One-to-one responses, those that include a JSON-RPC *id* in the response
object, are stored in an internal [`SimpleCache`{.docutils .literal
.notranslate}]{.pre} class, isolated from any one-to-many responses.
When the [`PersistentConnectionProvider`{.docutils .literal
.notranslate}]{.pre} is looking for a response internally, it will
expect the message listener task to store the response in this cache.
Since the request *id* is used in the cache key generation, it will then
look for a cache key that matches the response *id* with that of the
request *id*. If the cache key is found, the response is processed and
returned to the user. If the cache key is not found, the operation will
time out and raise a [`TimeExhausted`{.docutils .literal
.notranslate}]{.pre} exception. This timeout can be configured by the
user when instantiating the [`PersistentConnectionProvider`{.docutils
.literal .notranslate}]{.pre} instance via the
[`response_timeout`{.docutils .literal .notranslate}]{.pre} keyword
argument.
:::

::: {#internals.xhtml#one-to-many-requests .section}
### One-To-Many Requests

One-to-many requests can be summarized by any request that expects many
responses as a result of the initial request. The only current example
is the [`eth_subscribe`{.docutils .literal .notranslate}]{.pre} request.
The initial [`eth_subscribe`{.docutils .literal .notranslate}]{.pre}
request expects only one response, the subscription *id* value, but it
also expects to receive many [`eth_subscription`{.docutils .literal
.notranslate}]{.pre} messages if and when the request is successful. For
this reason, the original request is considered a one-to-one request so
that a subscription *id* can be returned to the user on the same line.
The many responses this call will produce can be handled in one of a few
ways.

The recommended way to handle one-to-many responses is to use the
subscription manager API. The subscription manager API is a public API
on the [`AsyncWeb3`{.docutils .literal .notranslate}]{.pre} class, when
connected to a [`PersistentConnectionProvider`{.docutils .literal
.notranslate}]{.pre} instance, that allows the user to subscribe to a
subscription and handle the many responses asynchronously. The
[`subscription_manager`{.docutils .literal .notranslate}]{.pre} instance
is responsible for handling the many responses that come in over the
socket connection, as long as handlers are passed to each subscription
call. The subscription manager can also be used to unsubscribe from a
subscription when the user is done with it.

::: {.highlight-python .notranslate}
::: highlight
    >>> async def new_heads_handler(
    ...     handler_context: NewHeadsSubscriptionContext,
    ... ) -> None:
    ...     result = handler_context.result
    ...     print(f"New block header: {result}\n")
    ...     if result["number"] > 1234567:
    ...         await handler_context.subscription.unsubscribe()

    >>> async def ws_subscription_example():
    ...     async with AsyncWeb3(WebSocketProvider(f"ws://127.0.0.1:8546")) as w3:
    ...         # Subscribe to new block headers and receive the subscription_id.
    ...         # A one-to-one call with a trigger for many responses
    ...         subscription_id = await w3.eth.subscribe("newHeads", handler=new_heads_handler)
    ...
    ...         # Handle the subscription messages asynchronously using the subscription
    ...         # manager. This will continue until no more subscriptions are present in
    ...         # the subscription manager, or indefinitely if the `run_forever` flag
    ...         # is set to `True`.
    ...         await w3.subscription_manager.handle_subscriptions(run_forever=False)
    >>> asyncio.run(ws_subscription_example())
:::
:::

The manager can also subscribe to many subscriptions at one time. The
[`EthSubscription`{.docutils .literal .notranslate}]{.pre} classes,
available via [`web3.utils.subscriptions`{.docutils .literal
.notranslate}]{.pre}, provide a friendly API for managing subscriptions.
Since each connection and provider instance has its own message listener
task and subscription manager instance, you can subscribe to many
subscriptions at once and handle the many responses that come in over
the socket connections via handlers. The handlers contain:

-   [`async_w3`{.docutils .literal .notranslate}]{.pre}: The
    [`AsyncWeb3`{.docutils .literal .notranslate}]{.pre} instance that
    the subscription was made on.

-   [`subscription`{.docutils .literal .notranslate}]{.pre}: The
    subscription instance that the handler is attached to.

-   [`result`{.docutils .literal .notranslate}]{.pre}: The response that
    came in over the socket connection for the subscription.

Subscriptions also accept a [`handler_context`{.docutils .literal
.notranslate}]{.pre} argument that can be used to pass additional
information to the handler when subscribing to a subscription. This can
be used to pass in an event object, for example, that can be used to
parse a log event when it comes in.

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3 import (
    ...     AsyncWeb3,
    ...     WebSocketProvider,
    ...     AsyncIPCProvider,
    ... )
    >>> from web3.utils.subscriptions import (
    ...     EthSubscription,
    ...     NewHeadsSubscription,
    ...     NewHeadsSubscriptionContext,
    ...     PendingTxSubscription,
    ...     PendingTxSubscriptionContext,
    ...     LogsSubscription,
    ...     LogsSubscriptionContext,
    ... )

    >>> async def new_heads_handler(
    ...     handler_context: NewHeadsSubscriptionContext,
    ... ) -> None:
    ...     header = handler_context.result
    ...     print(f"New block header: {header}\n")
    ...     if header["number"] > 1234567:
    ...         await handler_context.subscription.unsubscribe()

    >>> async def pending_txs_handler(
    ...     handler_context: PendingTxSubscriptionContext,
    ... ) -> None:
    ...     ...

    >>> async def log_handler(
    ...     handler_context: LogsSubscriptionContext,
    ... ) -> None:
    ...     log_receipt = handler_context.result
    ...     # event is now available in the handler context, because we pass it to in the
    ...     # ``handler_context`` when subscribing to the log
    ...     event_data = handler_context.transfer_event.process_log(log_receipt)
    ...     print(f"Log event data: {event_data}\n")

    >>> async def sub_manager():
    ...     local_w3 = await AsyncWeb3(AsyncIPCProvider(LOCAL_IPC))
    ...
    ...     # subscribe to many subscriptions via the subscription manager with handlers
    ...     weth_contract = local_w3.eth.contract(
    ...         address=local_w3.to_checksum_address("0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"),
    ...         abi=WETH_ABI,
    ...     )
    ...     transfer_event = weth_contract.events.Transfer()
    ...     await local_w3.subscription_manager.subscribe(
    ...         [
    ...             NewHeadsSubscription(label="new-heads-mainnet", handler=new_heads_handler),
    ...             PendingTxSubscription(
    ...                 label="pending-tx-mainnet",  # optional label
    ...                 full_transactions=True,
    ...                 handler=pending_tx_handler,
    ...             ),
    ...             LogsSubscription(
    ...                 label="WETH transfers",  # optional label
    ...                 address=weth_contract.address,
    ...                 topics=[transfer_event.topic],
    ...                 handler=log_handler,
    ...                 # optional ``handler_context`` args to help parse a response
    ...                 handler_context={"transfer_event": transfer_event},
    ...             ),
    ...         ]
    ...     )
    ...
    ...     public_w3 = await AsyncWeb3(WebSocketProvider(PUBLIC_PROVIDER_WS))
    ...     # subscribe via eth_subscribe, with handler and label (optional)
    ...     await public_w3.eth.subscribe("public_newHeads", handler=pending_tx_handler, label="new-heads-public-ws")

    >>>     # This will handle all subscriptions until no more subscriptions are present
    ...     # in either subscription manager instance. If the `run_forever` flag is set
    ...     # to `True` on any manager instance, this will run indefinitely.
    >>>     await asyncio.gather(
    ...         public_w3.subscription_manager.handle_subscriptions(),
    ...         local_w3.subscription_manager.handle_subscriptions(),
    ...     )
    ...
    ...     # close the connections
    ...     await local_w3.provider.disconnect()
    ...     await public_w3.provider.disconnect()

    >>> asyncio.run(sub_manager())
:::
:::

The [`process_subscriptions()`{.docutils .literal .notranslate}]{.pre}
method on the [`PersistentConnection`{.xref .py .py-class .docutils
.literal .notranslate}]{.pre} class, the public API for interacting with
the active persistent socket connection, is also set up to receive
[`eth_subscription`{.docutils .literal .notranslate}]{.pre} responses
over an asynchronous iterator pattern. You can use this method to listen
for raw messages and process them as they come in.

::: {.highlight-python .notranslate}
::: highlight
    >>> async def ws_subscription_example():
    ...     async with AsyncWeb3(WebSocketProvider(f"ws://127.0.0.1:8546")) as w3:
    ...         # Subscribe to new block headers and receive the subscription_id.
    ...         # A one-to-one call with a trigger for many responses
    ...         subscription_id = await w3.eth.subscribe("newHeads")
    ...
    ...         # Listen to the socket for the many responses utilizing the
    ...         # ``w3.socket`` ``PersistentConnection`` public API method
    ...         # ``process_subscriptions()``
    ...         async for response in w3.socket.process_subscriptions():
    ...             # Receive only one-to-many responses here so that we don't
    ...             # accidentally return the response for a one-to-one request in this
    ...             # block
    ...
    ...             print(f"{response}\n")
    ...
    ...             if some_condition:
    ...                 # unsubscribe from new block headers, another one-to-one request
    ...                 is_unsubscribed = await w3.eth.unsubscribe(subscription_id)
    ...                 if is_unsubscribed:
    ...                     break

    >>> asyncio.run(ws_subscription_example())
:::
:::

One-to-many responses, those that do not include a JSON-RPC *id* in the
response object, are stored in an internal [`asyncio.Queue`{.docutils
.literal .notranslate}]{.pre} instance, isolated from any one-to-one
responses. When the [`PersistentConnectionProvider`{.docutils .literal
.notranslate}]{.pre} is looking for one-to-many responses internally, it
will expect the message listener task to store these messages in this
queue. Since the order of the messages is important, the queue is a FIFO
queue. The [`process_subscriptions()`{.docutils .literal
.notranslate}]{.pre} method on the [`PersistentConnection`{.docutils
.literal .notranslate}]{.pre} class is set up to pop messages from this
queue as FIFO over an asynchronous iterator pattern.

If the stream of messages from the socket is not being interrupted by
any other tasks, the queue will generally be in sync with the messages
coming in over the socket. That is, the message listener will put a
message in the queue and the [`process_subscriptions()`{.docutils
.literal .notranslate}]{.pre} method will pop that message from the
queue and yield control of the loop back to the listener. This will
continue until the socket connection is closed or the user unsubscribes
from the subscription. If the stream of messages lags a bit, or the
provider is not consuming messages but has subscribed to a subscription,
this internal queue may fill up with messages until it reaches its max
size and then trigger a waiting [`asyncio.Event`{.docutils .literal
.notranslate}]{.pre} until the provider begins consuming messages from
the queue again. For this reason, it's important to begin consuming
messages from the queue, via the [`process_subscriptions()`{.docutils
.literal .notranslate}]{.pre} method, as soon as a subscription is made.
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#ens_overview.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#ens_overview.xhtml#ethereum-name-service-ens .section}
[]{#ens_overview.xhtml#ens-overview}

# Ethereum Name Service (ENS)

The Ethereum Name Service (ENS) is analogous to the Domain Name Service.
It enables users and developers to use human-friendly names in place of
error-prone hexadecimal addresses, content hashes, and more.

The [[`ens`{.xref .py .py-mod .docutils .literal
.notranslate}]{.pre}](#ens.xhtml#module-ens "ens"){.reference .internal}
module is included with web3.py. It provides an interface to look up
domains and addresses, add resolver records, or get and set metadata.

::: {#ens_overview.xhtml#setup .section}
## Setup

Create an [`ENS`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre} object (named [`ns`{.docutils .literal
.notranslate}]{.pre} below) in one of three ways:

1.  Automatic detection

2.  Specify an instance of a [[provider]{.std
    .std-ref}](#providers.xhtml#providers){.reference .internal}

3.  From an existing [[`web3.Web3`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#web3.main.xhtml#web3.Web3 "web3.Web3"){.reference
    .internal} object

::: {.highlight-python .notranslate}
::: highlight
    # automatic detection
    from ens.auto import ns

    # or, with a provider
    from web3 import IPCProvider
    from ens import ENS

    provider = IPCProvider(...)
    ns = ENS(provider)

    # or, with a w3 instance
    # Note: This inherits the w3 middleware from the w3 instance and adds a stalecheck middleware to the middleware onion.
    # It also inherits the provider and codec from the w3 instance, as well as the ``strict_bytes_type_checking`` flag value.
    from ens import ENS
    w3 = Web3(...)
    ns = ENS.from_web3(w3)
:::
:::

Asynchronous support is available via the [`AsyncENS`{.docutils .literal
.notranslate}]{.pre} module:

::: {.highlight-python .notranslate}
::: highlight
    from ens import AsyncENS

    ns = AsyncENS(provider)
:::
:::

Note that an [`ens`{.docutils .literal .notranslate}]{.pre} module
instance is also available on the [`w3`{.docutils .literal
.notranslate}]{.pre} instance. The first time it's used, web3.py will
create the [`ens`{.docutils .literal .notranslate}]{.pre} instance using
[`ENS.from_web3(w3)`{.docutils .literal .notranslate}]{.pre} or
[`AsyncENS.from_web3(w3)`{.docutils .literal .notranslate}]{.pre} as
appropriate.

::: {.highlight-python .notranslate}
::: highlight
    # instantiate w3 instance
    from web3 import Web3, IPCProvider
    w3 = Web3(IPCProvider(...))

    # use the module
    w3.ens.address('ethereum.eth')
:::
:::

[[ens.]{.pre}]{.sig-prename .descclassname}[[strict_bytes_type_checking]{.pre}]{.sig-name .descname}

:   The [`ENS`{.docutils .literal .notranslate}]{.pre} instance has a
    [`strict_bytes_type_checking`{.docutils .literal
    .notranslate}]{.pre} flag that toggles the flag with the same name
    on the [`Web3`{.docutils .literal .notranslate}]{.pre} instance
    attached to the [`ENS`{.docutils .literal .notranslate}]{.pre}
    instance. You may disable the stricter bytes type checking that is
    loaded by default using this flag. For more examples, see
    [[Disabling Strict Checks for Bytes Types]{.std
    .std-ref}](#web3.contract.xhtml#disable-strict-byte-check){.reference
    .internal}

    If instantiating a standalone ENS instance using
    [`ENS.from_web3()`{.docutils .literal .notranslate}]{.pre}, the ENS
    instance will inherit the value of the flag on the Web3 instance at
    time of instantiation.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> from web3 import Web3, EthereumTesterProvider
        >>> from ens import ENS
        >>> w3 = Web3(EthereumTesterProvider())

        >>> assert w3.strict_bytes_type_checking  # assert strict by default
        >>> w3.is_encodable('bytes2', b'1')
        False

        >>> w3.strict_bytes_type_checking = False
        >>> w3.is_encodable('bytes2', b'1')  # zero-padded, so encoded to: b'1\x00'
        True

        >>> ns = ENS.from_web3(w3)
        >>> # assert inherited from w3 at time of instantiation via ENS.from_web3()
        >>> assert ns.strict_bytes_type_checking is False
        >>> ns.w3.is_encodable('bytes2', b'1')
        True

        >>> # assert these are now separate instances
        >>> ns.strict_bytes_type_checking = True
        >>> ns.w3.is_encodable('bytes2', b'1')
        False

        >>> # assert w3 flag value remains
        >>> assert w3.strict_bytes_type_checking is False
        >>> w3.is_encodable('bytes2', b'1')
        True
    :::
    :::

    However, if accessing the [`ENS`{.docutils .literal
    .notranslate}]{.pre} class via the [`Web3`{.docutils .literal
    .notranslate}]{.pre} instance as a module ([`w3.ens`{.docutils
    .literal .notranslate}]{.pre}), since all modules use the same
    [`Web3`{.docutils .literal .notranslate}]{.pre} object reference
    under the hood (the parent [`w3`{.docutils .literal
    .notranslate}]{.pre} object), changing the
    [`strict_bytes_type_checking`{.docutils .literal
    .notranslate}]{.pre} flag value on [`w3`{.docutils .literal
    .notranslate}]{.pre} also changes the flag state for
    [`w3.ens.w3`{.docutils .literal .notranslate}]{.pre} and all
    modules.

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> from web3 import Web3, EthereumTesterProvider
        >>> w3 = Web3(EthereumTesterProvider())

        >>> assert w3.strict_bytes_type_checking  # assert strict by default
        >>> w3.is_encodable('bytes2', b'1')
        False

        >>> w3.strict_bytes_type_checking = False
        >>> w3.is_encodable('bytes2', b'1')  # zero-padded, so encoded to: b'1\x00'
        True

        >>> assert w3 == w3.ens.w3  # assert same object
        >>> assert not w3.ens.w3.strict_bytes_type_checking
        >>> w3.ens.w3.is_encodable('bytes2', b'1')
        True

        >>> # sanity check on eth module as well
        >>> assert not w3.eth.w3.strict_bytes_type_checking
        >>> w3.eth.w3.is_encodable('bytes2', b'1')
        True
    :::
    :::
:::

::: {#ens_overview.xhtml#usage .section}
## Usage

::: {#ens_overview.xhtml#name-info .section}
### Name Info

::: {#ens_overview.xhtml#get-the-address-for-an-ens-name .section}
[]{#ens_overview.xhtml#ens-get-address}

#### Get the Address for an ENS Name

::: {.highlight-python .notranslate}
::: highlight
    from ens.auto import ns
    eth_address = ns.address('ens.eth')
    assert eth_address == '0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7'
:::
:::

The [`ENS`{.docutils .literal .notranslate}]{.pre} module has no opinion
as to which **TLD (Top Level Domain)** you can use, but will not infer a
TLD if it is not provided with the name.

::: {#ens_overview.xhtml#multichain-address-resolution .section}
##### Multichain Address Resolution

[ENSIP-9](https://docs.ens.domains/ensip/9){.reference .external}[
\[https://docs.ens.domains/ensip/9\]]{.link-target} introduced
multichain address resolution, allowing users to resolve addresses from
different chains, specified by the coin type index from
[SLIP44](https://github.com/satoshilabs/slips/blob/master/slip-0044.md){.reference
.external}[
\[https://github.com/satoshilabs/slips/blob/master/slip-0044.md\]]{.link-target}.
The [`address()`{.docutils .literal .notranslate}]{.pre} method on the
[`ENS`{.docutils .literal .notranslate}]{.pre} class supports multichain
address resolution via the [`coin_type`{.docutils .literal
.notranslate}]{.pre} keyword argument.

::: {.highlight-python .notranslate}
::: highlight
    from ens.auto import ns
    eth_address = ns.address('ens.eth', coin_type=60)  # ETH is coin_type 60
    assert eth_address == '0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7'
:::
:::
:::
:::

::: {#ens_overview.xhtml#get-the-ens-name-for-an-address .section}
#### Get the ENS Name for an Address

::: {.highlight-python .notranslate}
::: highlight
    domain = ns.name('0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7')

    # name() also accepts the bytes version of the address
    assert ns.name(b'\xfe\x89\xccz\xbb,A\x83h:\xb7\x16S\xc4\xcd\xc9\xb0-D\xb7') == domain

    # confirm that the name resolves back to the address that you looked up:
    assert ns.address(domain) == '0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7'
:::
:::

::: {.admonition .note}
Note

For accuracy, and as a recommendation from the ENS documentation on
[reverse
resolution](https://docs.ens.domains/web/resolution#reverse-resolution){.reference
.external}[
\[https://docs.ens.domains/web/resolution#reverse-resolution\]]{.link-target},
the [`ENS`{.docutils .literal .notranslate}]{.pre} module now verifies
that the forward resolution matches the address with every call to get
the [`name()`{.docutils .literal .notranslate}]{.pre} for an address.
This is the only sure way to know whether the reverse resolution is
correct. Anyone can claim any name, only forward resolution implies that
the owner of the name gave their stamp of approval.
:::
:::

::: {#ens_overview.xhtml#get-the-owner-of-a-name .section}
#### Get the Owner of a Name

::: {.highlight-python .notranslate}
::: highlight
    eth_address = ns.owner('exchange.eth')
:::
:::
:::
:::

------------------------------------------------------------------------

::: {#ens_overview.xhtml#set-up-your-name-and-address .section}
### Set Up Your Name and Address

::: {#ens_overview.xhtml#link-a-name-to-an-address .section}
#### Link a Name to an Address

You can set up your name so that [`address()`{.xref .py .py-meth
.docutils .literal .notranslate}]{.pre} will show the address it points
to. In order to do so, you must already be the owner of the domain (or
its parent).

::: {.highlight-python .notranslate}
::: highlight
    ns.setup_address('ens.eth', '0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7')
:::
:::

In the common case where you want to point the name to the owning
address, you can skip the address.

::: {.highlight-python .notranslate}
::: highlight
    ns.setup_address('ens.eth')
:::
:::

You can claim arbitrarily deep subdomains.

::: {.highlight-python .notranslate}
::: highlight
    ns.setup_address('supreme.executive.power.derives.from.a.mandate.from.the.masses.ens.eth')

    # wait for the transaction to be mined, then:
    assert (
        ns.address('supreme.executive.power.derives.from.a.mandate.from.the.masses.ens.eth')
        == '0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7'
    )
:::
:::

::: {.admonition .warning}
Warning

Gas costs scale up with the number of subdomains!
:::

::: {#ens_overview.xhtml#multichain-address-support .section}
##### Multichain Address Support

[ENSIP-9](https://docs.ens.domains/ensip/9){.reference .external}[
\[https://docs.ens.domains/ensip/9\]]{.link-target} introduced
multichain address resolution, allowing users to resolve addresses from
different chains, specified by the coin type index from
[SLIP44](https://github.com/satoshilabs/slips/blob/master/slip-0044.md){.reference
.external}[
\[https://github.com/satoshilabs/slips/blob/master/slip-0044.md\]]{.link-target}.
The [`setup_address()`{.docutils .literal .notranslate}]{.pre} method on
the [`ENS`{.docutils .literal .notranslate}]{.pre} class supports
multichain address setup via the [`coin_type`{.docutils .literal
.notranslate}]{.pre} keyword argument.

::: {.highlight-python .notranslate}
::: highlight
    from ens.auto import ns
    ns.setup_address('ens.eth', coin_type=60)  # ETH is coin_type 60
    assert ns.address('ens.eth', coin_type=60) == '0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7'
:::
:::
:::
:::

::: {#ens_overview.xhtml#link-an-address-to-a-name .section}
#### Link an Address to a Name

You can set up your address so that [`name()`{.xref .py .py-meth
.docutils .literal .notranslate}]{.pre} will show the name that points
to it.

This is like Caller ID. It enables you and others to take an account and
determine what name points to it. Sometimes this is referred to as
"reverse" resolution. The ENS Reverse Resolver is used for this
functionality.

::: {.highlight-python .notranslate}
::: highlight
    ns.setup_name('ens.eth', '0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7')
:::
:::

If you don't supply the address, [`setup_name()`{.xref .py .py-meth
.docutils .literal .notranslate}]{.pre} will assume you want the address
returned by [`address()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}.

::: {.highlight-python .notranslate}
::: highlight
    ns.setup_name('ens.eth')
:::
:::

If the name doesn't already point to an address, [`setup_name()`{.xref
.py .py-meth .docutils .literal .notranslate}]{.pre} will call
[`setup_address()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre} for you.

Wait for the transaction to be mined, then:

::: {.highlight-python .notranslate}
::: highlight
    assert ns.name('0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7') == 'ens.eth'
:::
:::
:::
:::

------------------------------------------------------------------------

::: {#ens_overview.xhtml#text-records .section}
### Text Records

::: {#ens_overview.xhtml#set-text-metadata-for-an-ens-record .section}
#### Set Text Metadata for an ENS Record

As the owner of an ENS record, you can add text metadata. A list of
supported fields can be found in the [ENS
documentation](https://docs.ens.domains/resolvers/public#get-text-data){.reference
.external}[
\[https://docs.ens.domains/resolvers/public#get-text-data\]]{.link-target}.
You'll need to setup the address first, and then the text can be set:

::: {.highlight-python .notranslate}
::: highlight
    ns.setup_address('ens.eth', '0xFe89cc7aBB2C4183683ab71653C4cdc9B02D44b7')
    ns.set_text('ens.eth', 'url', 'https://example.com')
:::
:::

A transaction dictionary can be passed as the last argument if desired:

::: {.highlight-python .notranslate}
::: highlight
    transaction_dict = {'from': '0x123...'}
    ns.set_text('ens.eth', 'url', 'https://example.com', transaction_dict)
:::
:::

If the transaction dictionary is not passed, sensible defaults will be
used, and if a transaction dictionary is passed but does not have a
[`from`{.docutils .literal .notranslate}]{.pre} value, the default will
be the [`owner`{.docutils .literal .notranslate}]{.pre}.
:::

::: {#ens_overview.xhtml#read-text-metadata-for-an-ens-record .section}
#### Read Text Metadata for an ENS Record

Anyone can read the data from an ENS Record:

::: {.highlight-python .notranslate}
::: highlight
    url = ns.get_text('ens.eth', 'url')
    assert url == 'https://example.com'
:::
:::
:::
:::

------------------------------------------------------------------------

::: {#ens_overview.xhtml#working-with-resolvers .section}
### Working With Resolvers

::: {#ens_overview.xhtml#get-the-resolver-for-an-ens-record .section}
#### Get the Resolver for an ENS Record

You can get the resolver for an ENS name via the [`resolver()`{.xref .py
.py-meth .docutils .literal .notranslate}]{.pre} method.

::: {.highlight-python .notranslate}
::: highlight
    >>> resolver = ns.resolver('ens.eth')
    >>> resolver.address
    '0x5B2063246F2191f18F2675ceDB8b28102e957458'
:::
:::
:::
:::
:::

------------------------------------------------------------------------

::: {#ens_overview.xhtml#wildcard-resolution-support .section}
## Wildcard Resolution Support

The [`ENS`{.docutils .literal .notranslate}]{.pre} module supports
Wildcard Resolution for resolvers that implement the
[`ExtendedResolver`{.docutils .literal .notranslate}]{.pre} interface as
described in [ENSIP-10](https://docs.ens.domains/ensip/10){.reference
.external}[ \[https://docs.ens.domains/ensip/10\]]{.link-target}.
Resolvers that implement the extended resolver interface should return
[`True`{.docutils .literal .notranslate}]{.pre} when calling the
[`supportsInterface()`{.docutils .literal .notranslate}]{.pre} function
with the extended resolver interface id [`"0x9061b923"`{.docutils
.literal .notranslate}]{.pre} and should resolve subdomains to a unique
address.
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#troubleshooting.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#troubleshooting.xhtml#troubleshooting .section}
# Troubleshooting

::: {#troubleshooting.xhtml#set-up-a-clean-environment .section}
[]{#troubleshooting.xhtml#setup-environment}

## Set up a clean environment

Many things can cause a broken environment. You might be on an
unsupported version of Python. Another package might be installed that
has a name or version conflict. Often, the best way to guarantee a
correct environment is with [`virtualenv`{.docutils .literal
.notranslate}]{.pre}, like:

::: {.highlight-shell .notranslate}
::: highlight
    # Install pip if it is not available:
    $ which pip || curl https://bootstrap.pypa.io/get-pip.py | python

    # Install virtualenv if it is not available:
    $ which virtualenv || pip install --upgrade virtualenv

    # *If* the above command displays an error, you can try installing as root:
    $ sudo pip install virtualenv

    # Create a virtual environment:
    $ virtualenv -p python3 ~/.venv-py3

    # Activate your new virtual environment:
    $ source ~/.venv-py3/bin/activate

    # With virtualenv active, make sure you have the latest packaging tools
    $ pip install --upgrade pip setuptools

    # Now we can install web3.py...
    $ pip install --upgrade web3
:::
:::

::: {.admonition .note}
Note

Remember that each new terminal session requires you to reactivate your
virtualenv, like: [`$`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`source`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`~/.venv-py3/bin/activate`{.docutils .literal
.notranslate}]{.pre}
:::
:::

::: {#troubleshooting.xhtml#why-can-t-i-use-a-particular-function .section}
[]{#troubleshooting.xhtml#instance-troubleshooting}

## Why can't I use a particular function?

Note that a web3.py instance must be configured before you can use most
of its capabilities. One symptom of not configuring the instance first
is an error that looks something like this: [`AttributeError:`{.docutils
.literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`type`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`object`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`'Web3'`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal .notranslate}[`has`{.docutils
.literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`no`{.docutils .literal .notranslate}]{.pre}` `{.docutils
.literal .notranslate}[`attribute`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`'eth'`{.docutils .literal .notranslate}]{.pre}.

To properly configure your web3.py instance, specify which provider
you're using to connect to the Ethereum network. An example
configuration, if you're connecting to a locally run node, might be:

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3 import Web3
    >>> w3 = Web3(Web3.HTTPProvider('http://localhost:8545'))

    # now `w3` is available to use:
    >>> w3.is_connected()
    True
    >>> w3.eth.send_transaction(...)
:::
:::

Refer to the [[Providers]{.std
.std-ref}](#providers.xhtml#providers){.reference .internal}
documentation for further help with configuration.
:::

::: {#troubleshooting.xhtml#why-isn-t-my-web3-instance-connecting-to-the-network .section}
[]{#troubleshooting.xhtml#use-metamask-accounts}

## Why isn't my web3 instance connecting to the network?

You can check that your instance is connected via the
[`is_connected`{.docutils .literal .notranslate}]{.pre} method:

::: {.highlight-python .notranslate}
::: highlight
    >>> w3.is_connected()
    False
:::
:::

There are a variety of explanations for why you may see
[`False`{.docutils .literal .notranslate}]{.pre} here. To help you
diagnose the problem, [`is_connected`{.docutils .literal
.notranslate}]{.pre} has an optional [`show_traceback`{.docutils
.literal .notranslate}]{.pre} argument:

::: {.highlight-python .notranslate}
::: highlight
    >>> w3.is_connected(show_traceback=True)
    # this is an example, your error may differ

    # <long stack trace output>
    ProviderConnectionError: Problem connecting to provider with error: <class 'FileNotFoundError'>: cannot connect to IPC socket at path: None
:::
:::

If you're running a local node, such as Geth, double-check that you've
indeed started the binary and that you've started it from the intended
directory - particularly if you've specified a relative path to its ipc
file.

If that does not address your issue, it's probable that you still have a
Provider configuration issue. There are several options for configuring
a Provider, detailed [[here]{.std
.std-ref}](#providers.xhtml#providers){.reference .internal}.
:::

::: {#troubleshooting.xhtml#how-do-i-get-ether-for-my-test-network .section}
[]{#troubleshooting.xhtml#faucets}

## How do I get ether for my test network?

Test networks usually have something called a "faucet" to help get test
ether to people who want to use it. The faucet simply sends you test
ether when you visit a web page, or ping a chat bot, etc.

Each test network has its own version of test ether, so each one must
maintain its own faucet. Faucet mechanisms tend to come and go, so a web
search for "ethereum testnet faucet" should give you the most up-to-date
options.
:::

::: {#troubleshooting.xhtml#how-do-i-use-my-metamask-accounts-from-web3-py .section}
## How do I use my MetaMask accounts from web3.py?

Export your private key from MetaMask, and use the local private key
tools in web3.py to sign and send transactions.

See [how to export your private
key](https://ethereum.stackexchange.com/questions/33053/what-is-a-private-key-in-an-ethereum-wallet-like-metamask-and-how-do-i-find-it){.reference
.external}[
\[https://ethereum.stackexchange.com/questions/33053/what-is-a-private-key-in-an-ethereum-wallet-like-metamask-and-how-do-i-find-it\]]{.link-target}
and [[Accounts]{.std
.std-ref}](#web3.eth.account.xhtml#eth-account){.reference .internal}.
:::

::: {#troubleshooting.xhtml#how-do-i-create-an-account .section}
[]{#troubleshooting.xhtml#account-troubleshooting}

## How do I create an account?

In general, your options for accounts are:

-   Import a keystore file for an account and [[extract the private
    key]{.std
    .std-ref}](#web3.eth.account.xhtml#extract-geth-pk){.reference
    .internal}.

-   Create an account via the [[eth-account]{.std
    .std-ref}](#web3.eth.account.xhtml#eth-account){.reference
    .internal} API, e.g., [`new_acct`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`=`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`w3.eth.account.create()`{.docutils .literal
    .notranslate}]{.pre}.

-   Use an external service (e.g. Metamask) to generate a new account,
    then securely import its private key.

::: {.admonition .warning}
Warning

Don't store real value in an account until you are familiar with
security best practices. If you lose your private key, you lose your
account!
:::
:::

::: {#troubleshooting.xhtml#why-doesn-t-my-transaction-work-on-another-network .section}
## Why doesn't my transaction work on another network?

web3.py is an Ethereum-specific library, which defaults to ["type 2"
EIP-1559
transactions](https://ethereum.org/en/developers/docs/transactions/#typed-transaction-envelope){.reference
.external}[
\[https://ethereum.org/en/developers/docs/transactions/#typed-transaction-envelope\]]{.link-target}
as of the London network upgrade. Some chains (including Ethereum L2s)
do not support the same transaction types.

If your chain doesn't support this transaction type, you likely need to
create a "legacy" transaction, i.e., include [`gasPrice`{.docutils
.literal .notranslate}]{.pre}, but not [`type`{.docutils .literal
.notranslate}]{.pre}, [`maxFeePerGas`{.docutils .literal
.notranslate}]{.pre}, or [`maxPriorityFeePerGas`{.docutils .literal
.notranslate}]{.pre} in your transaction body.

If that doesn't resolve your issue, open a GitHub issue or reach out for
help in the community
[Discord](https://discord.gg/GHryRvPB84){.reference .external}[
\[https://discord.gg/GHryRvPB84\]]{.link-target} server if you're having
trouble with an Ethereum-ecosystem chain. If you're debugging in an
alternative ecosystem, please find another appropriate forum to raise
your question.
:::

::: {#troubleshooting.xhtml#how-do-i-conform-to-abi-types .section}
## How do I conform to ABI types?

The web3 library follows the following conventions:

::: {#troubleshooting.xhtml#bytes-vs-text .section}
### Bytes vs Text

-   The term *bytes* is used to refer to the binary representation of a
    string.

-   The term *text* is used to refer to unicode representations of
    strings.
:::

::: {#troubleshooting.xhtml#hexadecimal-representations .section}
### Hexadecimal Representations

-   All hexadecimal values will be returned as text.

-   All hexadecimal values will be [`0x`{.docutils .literal
    .notranslate}]{.pre} prefixed.
:::

::: {#troubleshooting.xhtml#ethereum-addresses .section}
### Ethereum Addresses

All addresses must be supplied in one of three ways:

-   A 20-byte hexadecimal that is checksummed using the
    [EIP-55](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-55.md){.reference
    .external}[
    \[https://github.com/ethereum/EIPs/blob/master/EIPS/eip-55.md\]]{.link-target}
    spec.

-   A 20-byte binary address (python bytes type).

-   While connected to an Ethereum Name Service (ENS) supported chain,
    an ENS name (often in the form [`myname.eth`{.docutils .literal
    .notranslate}]{.pre}).
:::

::: {#troubleshooting.xhtml#disabling-strict-bytes-type-checking .section}
### Disabling Strict Bytes Type Checking

There is a boolean flag on the [`Web3`{.docutils .literal
.notranslate}]{.pre} class and the [`ENS`{.docutils .literal
.notranslate}]{.pre} class that will disable strict bytes type checking.
This allows bytes values of Python strings and allows byte strings less
than the specified byte size, appropriately padding values that need
padding. To disable stricter checks, set the
[`w3.strict_bytes_type_checking`{.docutils .literal .notranslate}]{.pre}
(or [`ns.strict_bytes_type_checking`{.docutils .literal
.notranslate}]{.pre}) flag to [`False`{.docutils .literal
.notranslate}]{.pre}. This will no longer cause the [`Web3`{.docutils
.literal .notranslate}]{.pre} / [`ENS`{.docutils .literal
.notranslate}]{.pre} instance to raise an error if a Python string is
passed in without a "0x" prefix. It will also render valid byte strings
or hex strings that are below the exact number of bytes specified by the
ABI type by padding the value appropriately, according to the ABI type.
See the [[Disabling Strict Checks for Bytes Types]{.std
.std-ref}](#web3.contract.xhtml#disable-strict-byte-check){.reference
.internal} section for an example on using the flag and more details.

::: {.admonition .note}
Note

If a standalone [`ENS`{.docutils .literal .notranslate}]{.pre} instance
is instantiated from a [`Web3`{.docutils .literal .notranslate}]{.pre}
instance, i.e. [`ns`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal .notranslate}[`=`{.docutils
.literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`ENS.from_web3(w3)`{.docutils .literal
.notranslate}]{.pre}, it will inherit the value of the
[`w3.strict_bytes_type_checking`{.docutils .literal .notranslate}]{.pre}
flag from the [`Web3`{.docutils .literal .notranslate}]{.pre} instance
at the time of instantiation.

Also of note, all modules on the [`Web3`{.docutils .literal
.notranslate}]{.pre} class will inherit the value of this flag, since
all modules use the parent [`w3`{.docutils .literal .notranslate}]{.pre}
object reference under the hood. This means that
[`w3.eth.w3.strict_bytes_type_checking`{.docutils .literal
.notranslate}]{.pre} will always have the same value as
[`w3.strict_bytes_type_checking`{.docutils .literal
.notranslate}]{.pre}.
:::

For more details on the ABI specification, refer to the [Solidity ABI
Spec](https://docs.soliditylang.org/en/latest/abi-spec.html){.reference
.external}[
\[https://docs.soliditylang.org/en/latest/abi-spec.html\]]{.link-target}.
:::

::: {#troubleshooting.xhtml#types-by-example .section}
### Types by Example

Let's use a contrived contract to demonstrate input types in web3.py:

::: {.highlight-none .notranslate}
::: highlight
    contract ManyTypes {
        // booleans
        bool public b;

        // unsigned ints
        uint8 public u8;
        uint256 public u256;
        uint256[] public u256s;

        // signed ints
        int8 public i8;

        // addresses
        address public addr;
        address[] public addrs;

        // bytes
        bytes1 public b1;

        // structs
        struct S {
          address sa;
          bytes32 sb;
        }
        mapping(address => S) addrStructs;

        function updateBool(bool x) public { b = x; }
        function updateUint8(uint8 x) public { u8 = x; }
        function updateUint256(uint256 x) public { u256 = x; }
        function updateUintArray(uint256[] memory x) public { u256s = x; }
        function updateInt8(int8 x) public { i8 = x; }
        function updateAddr(address x) public { addr = x; }
        function updateBytes1(bytes1 x) public { b1 = x; }
        function updateMapping(S memory x) public { addrStructs[x.sa] = x; }
    }
:::
:::

::: {#troubleshooting.xhtml#booleans .section}
#### Booleans

::: {.highlight-python .notranslate}
::: highlight
    contract_instance.functions.updateBool(True).transact()
:::
:::
:::

::: {#troubleshooting.xhtml#unsigned-integers .section}
#### Unsigned Integers

::: {.highlight-python .notranslate}
::: highlight
    contract_instance.functions.updateUint8(255).transact()
    contract_instance.functions.updateUint256(2**256 - 1).transact()
    contract_instance.functions.updateUintArray([1, 2, 3]).transact()
:::
:::
:::

::: {#troubleshooting.xhtml#signed-integers .section}
#### Signed Integers

::: {.highlight-python .notranslate}
::: highlight
    contract_instance.functions.updateInt8(-128).transact()
:::
:::
:::

::: {#troubleshooting.xhtml#addresses .section}
#### Addresses

::: {.highlight-python .notranslate}
::: highlight
    contract_instance.functions.updateAddr("0x0000000000000000000000000000000000000000").transact()
:::
:::
:::

::: {#troubleshooting.xhtml#bytes .section}
#### Bytes

::: {.highlight-python .notranslate}
::: highlight
    contract_instance.functions.updateBytes1(HexBytes(255)).transact()
:::
:::
:::

::: {#troubleshooting.xhtml#structs .section}
#### Structs

::: {.highlight-python .notranslate}
::: highlight
    contract_instance.functions.updateMapping({"sa": "0x0000000000000000000000000000000000000000", "sb": HexBytes(123)}).transact()
:::
:::
:::
:::
:::

::: {#troubleshooting.xhtml#how-can-i-optimize-ethereum-json-rpc-api-access .section}
## How can I optimize Ethereum JSON-RPC API access?

Your Ethereum node JSON-RPC API might be slow when fetching multiple and
large requests, especially when running batch jobs. Here are some tips
for how to speed up your web3.py application.

-   Run your client locally, e.g., [Go
    Ethereum](https://github.com/ethereum/go-ethereum){.reference
    .external}[
    \[https://github.com/ethereum/go-ethereum\]]{.link-target} or
    [TurboGeth](https://github.com/ledgerwatch/turbo-geth){.reference
    .external}[
    \[https://github.com/ledgerwatch/turbo-geth\]]{.link-target}. The
    network latency and speed are the major limiting factors for fast
    API access.

-   Use IPC communication instead of HTTP/WebSockets. See [[Choosing a
    Provider]{.std
    .std-ref}](#providers.xhtml#choosing-provider){.reference
    .internal}.

-   Use an optimised JSON decoder. A future iteration of web3.py may
    change the default decoder or provide an API to configure one, but
    for now, you may patch the provider class to use
    [ujson](https://pypi.org/project/ujson/){.reference .external}[
    \[https://pypi.org/project/ujson/\]]{.link-target}.

::: {.highlight-python .notranslate}
::: highlight
    """JSON-RPC decoding optimised for web3.py"""

    from typing import cast

    import ujson

    from web3.providers import JSONBaseProvider
    from web3.types import RPCResponse


    def _fast_decode_rpc_response(raw_response: bytes) -> RPCResponse:
        decoded = ujson.loads(raw_response)
        return cast(RPCResponse, decoded)


    def patch_provider(provider: JSONBaseProvider):
        """Monkey-patch web3.py provider for faster JSON decoding.

        Call this on your provider after construction.

        This greatly improves JSON-RPC API access speeds, when fetching
        multiple and large responses.
        """
        provider.decode_rpc_response = _fast_decode_rpc_response
:::
:::
:::

::: {#troubleshooting.xhtml#why-am-i-getting-visual-c-or-cython-not-installed-error .section}
## Why am I getting Visual C++ or Cython not installed error?

Some Windows users that do not have Microsoft Visual C++ version 14.0 or
greater installed may see an error message when installing web3.py as
shown below:

::: {.highlight-shell .notranslate}
::: highlight
    error: Microsoft Visual C++ 14.0 or greater is required. Get it with "Microsoft C++ Build Tools": https://visualstudio.microsoft.com/visual-cpp-build-tools/
:::
:::

To fix this error, download and install Microsoft Visual C++ from here :

[Microsoft Visual C++ Redistributable for Visual
Studio](https://visualstudio.microsoft.com/downloads/#microsoft-visual-c-redistributable-for-visual-studio-2019){.reference
.external}[
\[https://visualstudio.microsoft.com/downloads/#microsoft-visual-c-redistributable-for-visual-studio-2019\]]{.link-target}

-   [x64 Visual
    C++](https://aka.ms/vs/16/release/VC_redist.x64.exe){.reference
    .external}[
    \[https://aka.ms/vs/16/release/VC_redist.x64.exe\]]{.link-target}

-   [x86 Visual
    C++](https://aka.ms/vs/16/release/VC_redist.x86.exe){.reference
    .external}[
    \[https://aka.ms/vs/16/release/VC_redist.x86.exe\]]{.link-target}

-   [ARM64 Visual
    C++](https://aka.ms/vs/16/release/VC_redist.arm64.exe){.reference
    .external}[
    \[https://aka.ms/vs/16/release/VC_redist.arm64.exe\]]{.link-target}
:::

::: {#troubleshooting.xhtml#how-do-i-convert-currency-denominations .section}
## How do I convert currency denominations?

The following denominations are supported:

  -------------- ---------------------------------
  denomination   amount in wei
  wei            1
  kwei           1000
  babbage        1000
  femtoether     1000
  mwei           1000000
  lovelace       1000000
  picoether      1000000
  gwei           1000000000
  shannon        1000000000
  nanoether      1000000000
  nano           1000000000
  szabo          1000000000000
  microether     1000000000000
  micro          1000000000000
  finney         1000000000000000
  milliether     1000000000000000
  milli          1000000000000000
  ether          1000000000000000000
  kether         1000000000000000000000
  grand          1000000000000000000000
  mether         1000000000000000000000000
  gether         1000000000000000000000000000
  tether         1000000000000000000000000000000
  -------------- ---------------------------------

You can use the [`from_wei()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre} method to convert a balance to ether (or another
denomination).

::: {.highlight-python .notranslate}
::: highlight
    >>> web3.from_wei(3841357360894980500000001, 'ether')
    Decimal('3841357.360894980500000001')
:::
:::

To convert back to wei, you can use the inverse function,
[`to_wei()`{.xref .py .py-meth .docutils .literal .notranslate}]{.pre}.
Note that Python's default floating point precision is insufficient for
this use case, so it's necessary to cast the value to a
[Decimal](https://docs.python.org/3/library/decimal.html){.reference
.external}[
\[https://docs.python.org/3/library/decimal.html\]]{.link-target} if it
isn't already.

::: {.highlight-python .notranslate}
::: highlight
    >>> from decimal import Decimal
    >>> web3.to_wei(Decimal('3841357.360894980500000001'), 'ether')
    3841357360894980500000001
:::
:::

Best practice: If you need to work with multiple currency denominations,
default to wei. A typical workflow may require a conversion from some
denomination to wei, then from wei to whatever you need.

::: {.highlight-python .notranslate}
::: highlight
    >>> web3.to_wei(Decimal('0.000000005'), 'ether')
    5000000000
    >>> web3.from_wei(5000000000, 'gwei')
    Decimal('5')
:::
:::
:::

::: {#troubleshooting.xhtml#how-do-i-adjust-the-log-levels .section}
## How do I adjust the log levels?

web3.py internally uses [Python logging
subsystem](https://docs.python.org/3/library/logging.html){.reference
.external}[
\[https://docs.python.org/3/library/logging.html\]]{.link-target}.

If you want to run your application logging in debug mode, below is an
example of how to make some JSON-RPC traffic quieter.

::: {.highlight-python .notranslate}
::: highlight
    import logging
    import coloredlogs

    def setup_logging(log_level=logging.DEBUG):
        """Setup root logger and quiet some levels."""
        logger = logging.getLogger()

        # Set log format to display the logger name to hunt down verbose logging modules
        fmt = "%(name)-25s %(levelname)-8s %(message)s"

        # Use colored logging output for console with the coloredlogs package
        # https://pypi.org/project/coloredlogs/
        coloredlogs.install(level=log_level, fmt=fmt, logger=logger)

        # Disable logging of JSON-RPC requests and replies
        logging.getLogger("web3.RequestManager").setLevel(logging.WARNING)
        logging.getLogger("web3.providers.HTTPProvider").setLevel(logging.WARNING)
        # logging.getLogger("web3.RequestManager").propagate = False

        # Disable all internal debug logging of requests and urllib3
        # E.g. HTTP traffic
        logging.getLogger("requests").setLevel(logging.WARNING)
        logging.getLogger("urllib3").setLevel(logging.WARNING)

        return logger
:::
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#migration.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#migration.xhtml#migration-guide .section}
# Migration Guide

::: {#migration.xhtml#migrating-from-v6-to-v7 .section}
[]{#migration.xhtml#migrating-v6-to-v7}

## Migrating from v6 to v7

web3.py follows [Semantic Versioning](http://semver.org){.reference
.external}[ \[http://semver.org\]]{.link-target}, which means that
version 7 introduced backwards-incompatible changes. If you're upgrading
from web3.py [`v6`{.docutils .literal .notranslate}]{.pre} or earlier,
you can expect to need to make some changes. Refer to this guide for a
summary of breaking changes when updating from [`v6`{.docutils .literal
.notranslate}]{.pre} to [`v7`{.docutils .literal .notranslate}]{.pre}.
If you are more than one major version behind, you should also review
the migration guides for the versions in between.

::: {#migration.xhtml#provider-updates .section}
### Provider Updates

::: {#migration.xhtml#websocketprovider .section}
#### WebSocketProvider

[`WebsocketProviderV2`{.docutils .literal .notranslate}]{.pre},
introduced in web3.py [`v6`{.docutils .literal .notranslate}]{.pre}, has
taken priority over the legacy [`WebsocketProvider`{.docutils .literal
.notranslate}]{.pre}. The [`LegacyWebSocketProvider`{.docutils .literal
.notranslate}]{.pre} has been deprecated in [`v7`{.docutils .literal
.notranslate}]{.pre} and is slated for removal in the next major version
of the library. In summary:

-   [`WebsocketProvider`{.docutils .literal .notranslate}]{.pre} -\>
    [`LegacyWebSocketProvider`{.docutils .literal .notranslate}]{.pre}
    (and deprecated)

-   [`WebsocketProviderV2`{.docutils .literal .notranslate}]{.pre} -\>
    [`WebSocketProvider`{.docutils .literal .notranslate}]{.pre}

If migrating from [`WebSocketProviderV2`{.docutils .literal
.notranslate}]{.pre} to [`WebSocketProvider`{.docutils .literal
.notranslate}]{.pre}, you can expect the following changes:

-   Instantiation no longer requires the
    [`persistent_websocket`{.docutils .literal .notranslate}]{.pre}
    method:

    ::: {.highlight-python .notranslate}
    ::: highlight
        # WebsocketsProviderV2:
        AsyncWeb3.persistent_websocket(WebsocketProviderV2('...'))

        # WebSocketProvider:
        AsyncWeb3(WebSocketProvider('...'))
    :::
    :::

-   Handling incoming subscription messages now occurs under a more
    flexible namespace: [`socket`{.docutils .literal
    .notranslate}]{.pre}. The [`AsyncIPCProvider`{.docutils .literal
    .notranslate}]{.pre} uses the same API to listen for messages via an
    IPC socket.

    ::: {.highlight-python .notranslate}
    ::: highlight
        # WebsocketsProviderV2:
        async for message in w3.ws.process_subscriptions():
          ...

        # WebSocketProvider:
        async for message in w3.socket.process_subscriptions():
          ...
    :::
    :::
:::

::: {#migration.xhtml#asyncipcprovider-non-breaking-feature .section}
#### AsyncIPCProvider (non-breaking feature)

An asynchronous IPC provider, [`AsyncIPCProvider`{.docutils .literal
.notranslate}]{.pre}, is newly available in [`v7`{.docutils .literal
.notranslate}]{.pre}. This provider makes use of some of the same
internals that the new [`WebSocketProvider`{.docutils .literal
.notranslate}]{.pre} introduced, allowing it to also support
[`eth_subscription`{.docutils .literal .notranslate}]{.pre}.
:::

::: {#migration.xhtml#ethereumtesterprovider .section}
#### EthereumTesterProvider

[`EthereumTesterProvider`{.docutils .literal .notranslate}]{.pre} now
returns [`input`{.docutils .literal .notranslate}]{.pre} instead of
[`data`{.docutils .literal .notranslate}]{.pre} for
[`eth_getTransaction*`{.docutils .literal .notranslate}]{.pre} calls, as
expected.
:::
:::

::: {#migration.xhtml#middlewares-middleware .section}
### Middlewares -\> Middleware

All references to [`middlewares`{.docutils .literal .notranslate}]{.pre}
have been replaced with the more grammatically correct
[`middleware`{.docutils .literal .notranslate}]{.pre}. Notably, this
includes when a provider needs to be instantiated with custom
middleware.
:::

::: {#migration.xhtml#class-based-middleware-model .section}
### Class-Based Middleware Model

The middleware model has been changed to a class-based model.

::: {.highlight-python .notranslate}
::: highlight
    # v6 (no longer supported)
    from web3.middleware import pythonic_middleware
    w3.middleware_onion.add(pythonic_middleware)

    # v7
    from web3.middleware import PythonicMiddleware
    w3.middleware_onion.add(PythonicMiddleware)
:::
:::

Previously, middleware were defined as functions that tightly wrapped
the provider's [`make_request`{.docutils .literal .notranslate}]{.pre}
function, where transformations could be conditionally applied before
and after the request was made.

Now, middleware logic can be separated into
[`request_processor`{.docutils .literal .notranslate}]{.pre} and
[`response_processor`{.docutils .literal .notranslate}]{.pre} functions
that enable pre-request and post-response logic, respectively. This
change offers a simpler, clearer interface for defining middleware,
gives more flexibility for asynchronous operations and also paved the
way for supporting [[Batch Requests]{.std
.std-ref}](#web3.main.xhtml#batch-requests){.reference .internal}.

Major changes for migration are highlighted in this section. Consult the
[[Middleware]{.std
.std-ref}](#middleware.xhtml#middleware-internals){.reference .internal}
section of the documentation for specifics and examples on the new
class-based design.
:::

::: {#migration.xhtml#middleware-builder-classes .section}
### Middleware Builder Classes

In [`v6`{.docutils .literal .notranslate}]{.pre}, certain middleware
needed to be constructed with parameters. This was done by passing the
parameters to a constructor method.

::: {.highlight-python .notranslate}
::: highlight
    # v6 (no longer supported)
    from web3.middleware import construct_sign_and_send_raw_middleware
    w3.middleware_onion.add(construct_sign_and_send_raw_middleware(private_key))
:::
:::

In the class-based [`v7`{.docutils .literal .notranslate}]{.pre}
middleware model, a middleware builder class is instantiated with the
necessary parameters via the [`build()`{.docutils .literal
.notranslate}]{.pre} method.

::: {.highlight-python .notranslate}
::: highlight
    # v7
    from web3.middleware import SignAndSendRawMiddlewareBuilder
    w3.middleware_onion.inject(SignAndSendRawMiddlewareBuilder.build(private_key), layer=0)
:::
:::
:::

::: {#migration.xhtml#middleware-renaming-and-removals .section}
### Middleware Renaming and Removals

The following middleware have been renamed for generalization or
clarity:

-   [`name_to_address_middleware`{.docutils .literal
    .notranslate}]{.pre} -\> [`ENSNameToAddressMiddleware`{.docutils
    .literal .notranslate}]{.pre}

-   [`geth_poa_middleware`{.docutils .literal .notranslate}]{.pre} -\>
    [`ExtraDataToPOAMiddleware`{.docutils .literal .notranslate}]{.pre}

The following middleware have been removed:

::: {#migration.xhtml#abi-middleware .section}
#### ABI Middleware

[`abi_middleware`{.docutils .literal .notranslate}]{.pre} is no longer
necessary and has been removed. All of the functionality of the
[`abi_middleware`{.docutils .literal .notranslate}]{.pre} was already
handled by web3.py's ABI formatters. For additional context: a bug in
the ENS name-to-address middleware would override the formatters. Fixing
this bug has removed the need for the [`abi_middleware`{.docutils
.literal .notranslate}]{.pre}.
:::

::: {#migration.xhtml#caching-middleware .section}
#### Caching Middleware

The following middleware have been removed:

-   [`simple_cache_middleware`{.docutils .literal .notranslate}]{.pre}

-   [`latest_block_based_cache_middleware`{.docutils .literal
    .notranslate}]{.pre}

-   [`time_based_cache_middleware`{.docutils .literal
    .notranslate}]{.pre}

All caching middleware has been removed in favor of a decorator/wrapper
around the [`make_request`{.docutils .literal .notranslate}]{.pre}
methods of providers with configuration options on the provider class.
The configuration options are outlined in the documentation in the
[[Request Caching]{.std
.std-ref}](#internals.xhtml#request-caching){.reference .internal}
section.

If desired, the previous caching middleware can be re-created using the
new class-based middleware model overriding the
[`wrap_make_request`{.docutils .literal .notranslate}]{.pre} (or
[`async_wrap_make_request`{.docutils .literal .notranslate}]{.pre})
method in the middleware class.
:::

::: {#migration.xhtml#result-generating-middleware .section}
#### Result Generating Middleware

The following middleware have been removed:

-   [`fixture_middleware`{.docutils .literal .notranslate}]{.pre}

-   [`result_generator_middleware`{.docutils .literal
    .notranslate}]{.pre}

The [`fixture_middleware`{.docutils .literal .notranslate}]{.pre} and
[`result_generator_middleware`{.docutils .literal .notranslate}]{.pre}
which were used for testing/mocking purposes have been removed. These
have been replaced internally by the [`RequestMocker`{.docutils .literal
.notranslate}]{.pre} class, utilized for testing via a
[`request_mocker`{.docutils .literal .notranslate}]{.pre} pytest
fixture.
:::

::: {#migration.xhtml#http-retry-request-middleware .section}
#### HTTP Retry Request Middleware

The [`http_retry_request_middleware`{.docutils .literal
.notranslate}]{.pre} has been removed in favor of a configuration option
on the [`HTTPProvider`{.docutils .literal .notranslate}]{.pre} and
[`AsyncHTTPProvider`{.docutils .literal .notranslate}]{.pre} classes.
The configuration options are outlined in the documentation in the
[[Retry Requests for HTTP Providers]{.std
.std-ref}](#internals.xhtml#http-retry-requests){.reference .internal}
section.
:::

::: {#migration.xhtml#normalize-request-parameters-middleware .section}
#### Normalize Request Parameters Middleware

The [`normalize_request_parameters`{.docutils .literal
.notranslate}]{.pre} middleware was not used anywhere internally and has
been removed.
:::
:::

::: {#migration.xhtml#remaining-camelcase-snake-case-updates .section}
### Remaining camelCase -\> snake_case Updates

The following arguments have been renamed across the library from
camelCase to snake_case in all methods where they are passed in as a
kwarg.

-   [`fromBlock`{.docutils .literal .notranslate}]{.pre} -\>
    [`from_block`{.docutils .literal .notranslate}]{.pre}

-   [`toBlock`{.docutils .literal .notranslate}]{.pre} -\>
    [`to_block`{.docutils .literal .notranslate}]{.pre}

-   [`blockHash`{.docutils .literal .notranslate}]{.pre} -\>
    [`block_hash`{.docutils .literal .notranslate}]{.pre}

Note that if a dictionary is used instead, say to a call such as
`<cite>`{=html}eth_getLogs`</cite>`{=html}, the keys in the dictionary
should be camelCase. This is because the dictionary is passed directly
to the JSON-RPC request, where the keys are expected to be in camelCase.
:::

::: {#migration.xhtml#changes-to-exception-handling .section}
### Changes to Exception Handling

All Python standard library exceptions that were raised from within
web3.py have been replaced with custom [`Web3Exception`{.docutils
.literal .notranslate}]{.pre} classes. This change allows for better
control over exception handling, being able to distinguish between
exceptions raised by web3.py and those raised from elsewhere in a
codebase. The following exceptions have been replaced:

-   [`AssertionError`{.docutils .literal .notranslate}]{.pre} -\>
    [`Web3AssertionError`{.docutils .literal .notranslate}]{.pre}

-   [`ValueError`{.docutils .literal .notranslate}]{.pre} -\>
    [`Web3ValueError`{.docutils .literal .notranslate}]{.pre}

-   [`TypeError`{.docutils .literal .notranslate}]{.pre} -\>
    [`Web3TypeError`{.docutils .literal .notranslate}]{.pre}

-   [`AttributeError`{.docutils .literal .notranslate}]{.pre} -\>
    [`Web3AttributeError`{.docutils .literal .notranslate}]{.pre}

A new [`MethodNotSupported`{.docutils .literal .notranslate}]{.pre}
exception is now raised when a method is not supported by web3.py. This
allows a user to distinguish between when a method is not available on
the current provider, [`MethodUnavailable`{.docutils .literal
.notranslate}]{.pre}, and when a method is not supported by web3.py
under certain conditions, [`MethodNotSupported`{.docutils .literal
.notranslate}]{.pre}.

A [`MismatchedABI`{.docutils .literal .notranslate}]{.pre} exception is
now raised instead of a [`Web3ValidationError`{.docutils .literal
.notranslate}]{.pre} in cases where an ABI is not compatible with the
data being passed to it. This change allows for more specific error
handling when using certain ABI types.

::: {#migration.xhtml#json-rpc-error-handling .section}
#### JSON-RPC Error Handling

Rather than a [`ValueError`{.docutils .literal .notranslate}]{.pre}
being replaced with a [`Web3ValueError`{.docutils .literal
.notranslate}]{.pre} when a JSON-RPC response comes back with an
[`error`{.docutils .literal .notranslate}]{.pre} object, a new
[`Web3RPCError`{.docutils .literal .notranslate}]{.pre} exception is now
raised to provide more distinction for JSON-RPC error responses. Some
previously existing exceptions now extend from this class since they too
are related to JSON-RPC errors:

-   [`MethodUnavailable`{.docutils .literal .notranslate}]{.pre}

-   [`BlockNotFound`{.docutils .literal .notranslate}]{.pre}

-   [`TransactionNotFound`{.docutils .literal .notranslate}]{.pre}

-   [`TransactionIndexingInProgress`{.docutils .literal
    .notranslate}]{.pre}
:::
:::

::: {#migration.xhtml#end-of-support-and-feature-removals .section}
### End of Support and Feature Removals

::: {#migration.xhtml#python-3-7-support-dropped .section}
#### Python 3.7 Support Dropped

Python 3.7 support has been dropped in favor of Python 3.8+. Python 3.7
is no longer supported by the Python core team, and we want to focus our
efforts on supporting the latest versions of Python.
:::

::: {#migration.xhtml#ethpm-module-removed .section}
#### EthPM Module Removed

The EthPM module has been removed from the library. It was not widely
used and has not been functional since around October 2022. It was
deprecated in [`v6`{.docutils .literal .notranslate}]{.pre} and has been
completely removed in [`v7`{.docutils .literal .notranslate}]{.pre}.

Types in the
[eth_typing.ethpm](https://github.com/ethereum/eth-typing/blob/ef9c2d566b7747bb6799214e2c89006b8cde4c36/eth_typing/ethpm.py){.reference
.external}[
\[https://github.com/ethereum/eth-typing/blob/ef9c2d566b7747bb6799214e2c89006b8cde4c36/eth_typing/ethpm.py\]]{.link-target}
module have been deprecated and will be removed from
[`eth-typing`{.docutils .literal .notranslate}]{.pre} in the next major
release.
:::

::: {#migration.xhtml#geth-miner-namespace-removed .section}
#### Geth Miner Namespace Removed

The [`geth.miner`{.docutils .literal .notranslate}]{.pre} namespace,
deprecated in [`v6`{.docutils .literal .notranslate}]{.pre}, has been
removed in [`v7`{.docutils .literal .notranslate}]{.pre}. The
[`miner`{.docutils .literal .notranslate}]{.pre} namespace was used for
managing the concept of a miner in geth. This is no longer a feature in
geth and is planned for complete removal in the future, with Ethereum
having transitioned to proof-of-stake.
:::

::: {#migration.xhtml#geth-personal-namespace-removed .section}
#### Geth Personal Namespace Removed

The [`geth.personal`{.docutils .literal .notranslate}]{.pre} namespace,
deprecated in [`v6`{.docutils .literal .notranslate}]{.pre}, has been
removed in [`v7`{.docutils .literal .notranslate}]{.pre}. The
[`personal`{.docutils .literal .notranslate}]{.pre} namespace was used
for managing accounts and keys and was deprecated in geth in
[`v1.11.0`{.docutils .literal .notranslate}]{.pre}. Geth has moved to
using [`clef`{.docutils .literal .notranslate}]{.pre} for account and
key management.
:::

::: {#migration.xhtml#abi-types-removed .section}
#### ABI Types Removed

The type definitions for ABIs, deprecated in [`v6`{.docutils .literal
.notranslate}]{.pre}, have been removed in [`v7`{.docutils .literal
.notranslate}]{.pre}. New types have been introduced in the
[`eth_typing`{.docutils .literal .notranslate}]{.pre} [`v5`{.docutils
.literal .notranslate}]{.pre} package for ABIs. Improvements have been
made to make required types more explicit and to offer better semantics.

The following types from [`web3.types`{.docutils .literal
.notranslate}]{.pre} have been removed: - [`ABIEventParams`{.docutils
.literal .notranslate}]{.pre} is no longer available. Use
[`ABIComponentIndexed`{.docutils .literal .notranslate}]{.pre} from
[`eth_typing`{.docutils .literal .notranslate}]{.pre} to represent event
input components. - [`ABIEvent`{.docutils .literal .notranslate}]{.pre}
now resides in [`eth_typing`{.docutils .literal .notranslate}]{.pre}.
[`ABIEvent.type`{.docutils .literal .notranslate}]{.pre} and
[`ABIEvent.name`{.docutils .literal .notranslate}]{.pre} are now
required fields. - [`ABIFunctionComponents`{.docutils .literal
.notranslate}]{.pre} and [`ABIFunctionParams`{.docutils .literal
.notranslate}]{.pre} are no longer available. Use
[`ABIComponent`{.docutils .literal .notranslate}]{.pre} from
[`eth_typing`{.docutils .literal .notranslate}]{.pre} to represent
function input components. - [`ABIFunction`{.docutils .literal
.notranslate}]{.pre} now resides in [`eth_typing`{.docutils .literal
.notranslate}]{.pre}. [`ABIFunction.type`{.docutils .literal
.notranslate}]{.pre} and [`ABIFunction.name`{.docutils .literal
.notranslate}]{.pre} are now required fields. - [`ABIElement`{.docutils
.literal .notranslate}]{.pre} now resides in [`eth_typing`{.docutils
.literal .notranslate}]{.pre} and represents a [`Union`{.docutils
.literal .notranslate}]{.pre} of all valid ABI element types,
[`ABICallable`{.docutils .literal .notranslate}]{.pre},
[`ABIEvent`{.docutils .literal .notranslate}]{.pre} and
[`ABIError`{.docutils .literal .notranslate}]{.pre}.
:::
:::

::: {#migration.xhtml#miscellaneous-changes .section}
### Miscellaneous Changes

-   [`LRU`{.docutils .literal .notranslate}]{.pre} has been removed from
    the library and dependency on [`lru-dict`{.docutils .literal
    .notranslate}]{.pre} library was dropped.

-   [`CallOverride`{.docutils .literal .notranslate}]{.pre} type was
    changed to [`StateOverride`{.docutils .literal .notranslate}]{.pre}
    since more methods than [`eth_call`{.docutils .literal
    .notranslate}]{.pre} utilize the state override params.

-   [`User-Agent`{.docutils .literal .notranslate}]{.pre} header was
    changed to a more readable format.

-   [`BaseContractFunctions`{.docutils .literal .notranslate}]{.pre}
    iterator now returns instances of [`ContractFunction`{.docutils
    .literal .notranslate}]{.pre} rather than the function names.

-   [`BaseContractFunction`{.docutils .literal .notranslate}]{.pre}
    class attribute [`function_identifier`{.docutils .literal
    .notranslate}]{.pre} has been removed in favor of the
    [`abi_element_identifier`{.docutils .literal .notranslate}]{.pre}
    attribute.

-   [`web3.contract.utils.call_contract_function()`{.docutils .literal
    .notranslate}]{.pre} no longer uses [`fn_abi`{.docutils .literal
    .notranslate}]{.pre} as a parameter. Instead, the
    [`abi_callable`{.docutils .literal .notranslate}]{.pre} parameter of
    type [`ABICallable`{.docutils .literal .notranslate}]{.pre} is used.

-   Beacon API filename change: [`beacon/main.py`{.docutils .literal
    .notranslate}]{.pre} -\> [`beacon/beacon.py`{.docutils .literal
    .notranslate}]{.pre}.

-   The asynchronous version of
    [`w3.eth.wait_for_transaction_receipt()`{.docutils .literal
    .notranslate}]{.pre} changes its signature to use
    [`Optional[float]`{.docutils .literal .notranslate}]{.pre} instead
    of [`float`{.docutils .literal .notranslate}]{.pre} since it may be
    [`None`{.docutils .literal .notranslate}]{.pre}.

-   [`get_default_ipc_path()`{.docutils .literal .notranslate}]{.pre}
    and [`get_dev_ipc_path()`{.docutils .literal .notranslate}]{.pre}
    now return the path value without checking if the
    [`geth.ipc`{.docutils .literal .notranslate}]{.pre} file exists.

-   [`Web3.is_address()`{.docutils .literal .notranslate}]{.pre} returns
    [`True`{.docutils .literal .notranslate}]{.pre} for non-checksummed
    addresses.

-   [`Contract.encodeABI()`{.docutils .literal .notranslate}]{.pre} has
    been renamed to [`Contract.encode_abi()`{.docutils .literal
    .notranslate}]{.pre}. The [`fn_name`{.docutils .literal
    .notranslate}]{.pre} argument has been changed to
    [`abi_element_identifier`{.docutils .literal .notranslate}]{.pre}.

-   JSON-RPC responses are now more strictly validated against the
    JSON-RPC 2.0 specification while providing more informative error
    messages for invalid responses.
:::
:::

::: {#migration.xhtml#migrating-from-v5-to-v6 .section}
[]{#migration.xhtml#migrating-v5-to-v6}

## Migrating from v5 to v6

web3.py follows [Semantic Versioning](http://semver.org){.reference
.external}[ \[http://semver.org\]]{.link-target}, which means that
version 6 introduced backwards-incompatible changes. If your project
depends on web3.py v6, then you'll probably need to make some changes.

Breaking Changes:

::: {#migration.xhtml#strict-bytes-checking-by-default .section}
### Strict Bytes Checking by Default

web3.py v6 moved to requiring strict bytes checking by default. This
means that if an ABI specifies a [`bytes4`{.docutils .literal
.notranslate}]{.pre} argument, web3.py will invalidate any entry that is
not encodable as a bytes type with length of 4. This means only
0x-prefixed hex strings with a length of 4 and bytes types with a length
of 4 will be considered valid. This removes doubt that comes from
inferring values and assuming they should be padded.

This behavior was previously available in via the
[`w3.enable_strict_bytes_checking()`{.docutils .literal
.notranslate}]{.pre} method. This is now, however, a toggleable flag on
the [`Web3`{.docutils .literal .notranslate}]{.pre} instance via the
[`w3.strict_bytes_type_checking`{.docutils .literal .notranslate}]{.pre}
property. As outlined above, this property is set to [`True`{.docutils
.literal .notranslate}]{.pre} by default but can be toggled on and off
via the property's setter (e.g.
[`w3.strict_bytes_type_checking`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal .notranslate}[`=`{.docutils
.literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`False`{.docutils .literal .notranslate}]{.pre}).
:::

::: {#migration.xhtml#snake-case .section}
### Snake Case

web3.py v6 moved to the more Pythonic convention of snake_casing
wherever possible. There are some exceptions to this pattern:

-   Contract methods and events use whatever is listed in the ABI. If
    the smart contract convention is to use camelCase for method and
    event names, web3.py won't do any magic to convert it to
    snake_casing.

-   Arguments to JSON-RPC methods. For example: transaction and filter
    parameters still use camelCasing. The reason for this is primarily
    due to error messaging. It would be confusing to pass in a
    snake_cased parameter and get an error message with a camelCased
    parameter.

-   Data that is returned from JSON-RPC methods. For example: The keys
    in a transaction receipt will still be returned as camelCase.
:::

::: {#migration.xhtml#python-3-10-and-3-11-support .section}
### Python 3.10 and 3.11 Support

Support for Python 3.10 and 3.11 is here. In order to support Python
3.10, we had to update the [`websockets`{.docutils .literal
.notranslate}]{.pre} dependency to v10+.
:::

::: {#migration.xhtml#exceptions .section}
### Exceptions

::: {#migration.xhtml#exceptions-inherit-from-a-base-class .section}
#### Exceptions inherit from a base class

In v5, some web3.py exceptions inherited from
[`AttributeError`{.docutils .literal .notranslate}]{.pre}, namely:

-   [`NoABIFunctionsFound`{.docutils .literal .notranslate}]{.pre}

-   [`NoABIFound`{.docutils .literal .notranslate}]{.pre}

-   [`NoABIEventsFound`{.docutils .literal .notranslate}]{.pre}

Others inherited from [`ValueError`{.docutils .literal
.notranslate}]{.pre}, namely:

-   [`InvalidAddress`{.docutils .literal .notranslate}]{.pre}

-   [`NameNotFound`{.docutils .literal .notranslate}]{.pre}

-   [`LogTopicError`{.docutils .literal .notranslate}]{.pre}

-   [`InvalidEventABI`{.docutils .literal .notranslate}]{.pre}

Now web3.py exceptions inherit from the same base
[`Web3Exception`{.docutils .literal .notranslate}]{.pre}.

As such, any code that was expecting a [`ValueError`{.docutils .literal
.notranslate}]{.pre} or an [`AttributeError`{.docutils .literal
.notranslate}]{.pre} from web3.py must update to expecting one of the
exceptions listed above, or [`Web3Exception`{.docutils .literal
.notranslate}]{.pre}.

Similarly, exceptions raised in the EthPM and ENS modules inherit from
the base [`EthPMException`{.docutils .literal .notranslate}]{.pre} and
[`ENSException`{.docutils .literal .notranslate}]{.pre}, respectively.
:::

::: {#migration.xhtml#validationerror .section}
#### ValidationError

The Python dev tooling ecosystem is moving towards standardizing
[`ValidationError`{.docutils .literal .notranslate}]{.pre}, so users
know that they're catching the correct [`ValidationError`{.docutils
.literal .notranslate}]{.pre}. The base [`ValidationError`{.docutils
.literal .notranslate}]{.pre} is imported from [`eth_utils`{.docutils
.literal .notranslate}]{.pre}. However, we also wanted to empower users
to catch all errors emitted by a particular module. So we now have a
[`Web3ValidationError`{.docutils .literal .notranslate}]{.pre},
[`EthPMValidationError`{.docutils .literal .notranslate}]{.pre}, and an
[`ENSValidationError`{.docutils .literal .notranslate}]{.pre} that all
inherit from the generic
[`eth_utils.exceptions.ValidationError`{.docutils .literal
.notranslate}]{.pre}.
:::
:::

::: {#migration.xhtml#web3-class-split-into-web3-and-asyncweb3 .section}
### Web3 class split into Web3 and AsyncWeb3

The `<cite>`{=html}Web3`</cite>`{=html} class previously contained both
sync and async methods. We've separated
`<cite>`{=html}Web3`</cite>`{=html} and
`<cite>`{=html}AsyncWeb3`</cite>`{=html} functionality to tighten up
typing. For example:

::: {.highlight-python .notranslate}
::: highlight
    from web3 import Web3, AsyncWeb3

    w3 = Web3(Web3.HTTPProvider(<provider.url>))
    async_w3 = AsyncWeb3(AsyncWeb3.AsyncHTTPProvider(<provider.url>))
:::
:::
:::

::: {#migration.xhtml#dict-to-attributedict-conversion-moved-to-middleware .section}
### `<cite>`{=html}dict`</cite>`{=html} to `<cite>`{=html}AttributeDict`</cite>`{=html} conversion moved to middleware

`<cite>`{=html}Eth`</cite>`{=html} module data returned as key-value
pairs was previously automatically converted to an
`<cite>`{=html}AttributeDict`</cite>`{=html} by result formatters, which
could cause problems with typing. This conversion has been moved to a
default `<cite>`{=html}attrdict_middleware`</cite>`{=html} where it can
be easily removed if necessary. See the [Eth
module](web3.eth.html#web3.eth.Eth){.reference .external} docs for more
detail.
:::

::: {#migration.xhtml#other-misc-changes .section}
### Other Misc Changes

-   [`InfuraKeyNotFound`{.docutils .literal .notranslate}]{.pre}
    exception has been changed to [`InfuraProjectIdNotFound`{.docutils
    .literal .notranslate}]{.pre}

-   [`SolidityError`{.docutils .literal .notranslate}]{.pre} has been
    removed in favor of [`ContractLogicError`{.docutils .literal
    .notranslate}]{.pre}

-   When a method is unavailable from a node provider (i.e. a response
    error code of -32601 is returned), a [`MethodUnavailable`{.docutils
    .literal .notranslate}]{.pre} error is now raised instead of
    [`ValueError`{.docutils .literal .notranslate}]{.pre}

-   Logs' `<cite>`{=html}data`</cite>`{=html} field was previously
    formatted with `<cite>`{=html}to_ascii_if_bytes`</cite>`{=html}, now
    formatted to `<cite>`{=html}HexBytes`</cite>`{=html}

-   Receipts' `<cite>`{=html}type`</cite>`{=html} field was previously
    not formatted, now formatted with
    `<cite>`{=html}to_integer_if_hex`</cite>`{=html}
:::

::: {#migration.xhtml#removals .section}
### Removals

-   Removed unused IBAN module

-   Removed [`WEB3_INFURA_API_KEY`{.docutils .literal
    .notranslate}]{.pre} environment variable in favor of
    [`WEB3_INFURA_PROJECT_ID`{.docutils .literal .notranslate}]{.pre}

-   Removed Kovan auto provider

-   Removed deprecated [`sha3`{.docutils .literal .notranslate}]{.pre}
    and [`soliditySha3`{.docutils .literal .notranslate}]{.pre} methods
    in favor of [`keccak`{.docutils .literal .notranslate}]{.pre} and
    [`solidityKeccak`{.docutils .literal .notranslate}]{.pre}

-   Remove Parity Module and References
:::

::: {#migration.xhtml#other-notable-changes .section}
### Other notable changes

-   The [`ipfshttpclient`{.docutils .literal .notranslate}]{.pre}
    library is now opt-in via a web3 install extra. This only affects
    the ethpm ipfs backends, which rely on the library.
:::
:::

::: {#migration.xhtml#migrating-from-v4-to-v5 .section}
[]{#migration.xhtml#migrating-v4-to-v5}

## Migrating from v4 to v5

Web3.py follows [Semantic Versioning](http://semver.org){.reference
.external}[ \[http://semver.org\]]{.link-target}, which means that
version 5 introduced backwards-incompatible changes. If your project
depends on Web3.py v4, then you'll probably need to make some changes.

Here are the most common required updates:

::: {#migration.xhtml#python-3-5-no-longer-supported .section}
### Python 3.5 no longer supported

You will need to upgrade to either Python 3.6 or 3.7
:::

::: {#migration.xhtml#eth-abi-v1-no-longer-supported .section}
### [`eth-abi`{.docutils .literal .notranslate}]{.pre} v1 no longer supported

You will need to upgrade the [`eth-abi`{.docutils .literal
.notranslate}]{.pre} dependency to v2
:::

::: {#migration.xhtml#changes-to-base-api .section}
### Changes to base API

::: {#migration.xhtml#json-rpc-updates .section}
#### JSON-RPC Updates

In v4, JSON-RPC calls that looked up transactions or blocks and didn't
find them, returned [`None`{.docutils .literal .notranslate}]{.pre}. Now
if a transaction or block is not found, a [`BlockNotFound`{.docutils
.literal .notranslate}]{.pre} or a [`TransactionNotFound`{.docutils
.literal .notranslate}]{.pre} error will be thrown as appropriate. This
applies to the following web3 methods:

-   [`getTransaction()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} will throw a [`TransactionNotFound`{.docutils
    .literal .notranslate}]{.pre} error

-   [`getTransactionReceipt()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} will throw a [`TransactionNotFound`{.docutils
    .literal .notranslate}]{.pre} error

-   [`getTransactionByBlock()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} will throw a [`TransactionNotFound`{.docutils
    .literal .notranslate}]{.pre} error

-   [`getTransactionCount()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} will throw a [`BlockNotFound`{.docutils
    .literal .notranslate}]{.pre} error

-   [`getBlock()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} will throw a [`BlockNotFound`{.docutils
    .literal .notranslate}]{.pre} error

-   [`getUncleCount()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} will throw a [`BlockNotFound`{.docutils
    .literal .notranslate}]{.pre} error

-   [`getUncleByBlock()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} will throw a [`BlockNotFound`{.docutils
    .literal .notranslate}]{.pre} error
:::

::: {#migration.xhtml#removed-methods .section}
#### Removed Methods

-   [`contract.buildTransaction`{.docutils .literal .notranslate}]{.pre}
    was removed for
    [`contract.functions.buildTransaction.<method`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`name>`{.docutils .literal .notranslate}]{.pre}

-   [`contract.deploy`{.docutils .literal .notranslate}]{.pre} was
    removed for [`contract.constructor.transact`{.docutils .literal
    .notranslate}]{.pre}

-   [`contract.estimateGas`{.docutils .literal .notranslate}]{.pre} was
    removed for [`contract.functions.<method`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`name>.estimateGas`{.docutils .literal
    .notranslate}]{.pre}

-   [`contract.call`{.docutils .literal .notranslate}]{.pre} was removed
    for [`contract.<functions/events>.<method`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`name>.call`{.docutils .literal .notranslate}]{.pre}

-   [`contract.transact`{.docutils .literal .notranslate}]{.pre} was
    removed for [`contract.<functions/events>.<method`{.docutils
    .literal .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`name>.transact`{.docutils .literal
    .notranslate}]{.pre}

-   [`contract.eventFilter`{.docutils .literal .notranslate}]{.pre} was
    removed for [`contract.events.<event`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`name>.createFilter`{.docutils .literal
    .notranslate}]{.pre}

-   [`middleware_stack`{.docutils .literal .notranslate}]{.pre} was
    renamed to [`middleware_onion()`{.xref .py .py-meth .docutils
    .literal .notranslate}]{.pre}

-   [`web3.miner.hashrate`{.docutils .literal .notranslate}]{.pre} was a
    duplicate of [`hashrate()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} and was removed.

-   [`web3.version.network`{.docutils .literal .notranslate}]{.pre} was
    a duplicate of [`version()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} and was removed.

-   [`web3.providers.tester.EthereumTesterProvider`{.docutils .literal
    .notranslate}]{.pre} and
    [`web3.providers.tester.TestRPCProvider`{.docutils .literal
    .notranslate}]{.pre} have been removed for
    [[`EthereumTesterProvider()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.eth_tester.EthereumTesterProvider "web3.providers.eth_tester.EthereumTesterProvider"){.reference
    .internal}

-   [`web3.eth.enableUnauditedFeatures`{.docutils .literal
    .notranslate}]{.pre} was removed

-   [`web3.txpool`{.docutils .literal .notranslate}]{.pre} was moved to
    [[`txpool()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.geth.xhtml#module-web3.geth.txpool "web3.geth.txpool"){.reference
    .internal}

-   [`web3.version.node`{.docutils .literal .notranslate}]{.pre} was
    removed for [`web3.clientVersion`{.docutils .literal
    .notranslate}]{.pre}

-   [`web3.version.ethereum`{.docutils .literal .notranslate}]{.pre} was
    removed for [`protocolVersion()`{.xref .py .py-meth .docutils
    .literal .notranslate}]{.pre}

-   Relocated personal RPC endpoints to reflect Parity and Geth
    implementations:

    -   [`web3.personal.listAccounts`{.docutils .literal
        .notranslate}]{.pre} was removed for [`listAccounts()`{.xref .py
        .py-meth .docutils .literal .notranslate}]{.pre} or
        [`listAccounts()`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre}

    -   [`web3.personal.importRawKey`{.docutils .literal
        .notranslate}]{.pre} was removed for [`importRawKey()`{.xref .py
        .py-meth .docutils .literal .notranslate}]{.pre} or
        [`importRawKey()`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre}

    -   [`web3.personal.newAccount`{.docutils .literal
        .notranslate}]{.pre} was removed for [`newAccount()`{.xref .py
        .py-meth .docutils .literal .notranslate}]{.pre} or
        [`newAccount()`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre}

    -   [`web3.personal.lockAccount`{.docutils .literal
        .notranslate}]{.pre} was removed for [`lockAccount()`{.xref .py
        .py-meth .docutils .literal .notranslate}]{.pre}

    -   [`web3.personal.unlockAccount`{.docutils .literal
        .notranslate}]{.pre} was removed for [`unlockAccount()`{.xref
        .py .py-meth .docutils .literal .notranslate}]{.pre} or
        [`unlockAccount()`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre}

    -   [`web3.personal.sendTransaction`{.docutils .literal
        .notranslate}]{.pre} was removed for [`sendTransaction()`{.xref
        .py .py-meth .docutils .literal .notranslate}]{.pre} or
        [`sendTransaction()`{.xref .py .py-meth .docutils .literal
        .notranslate}]{.pre}

-   Relocated [`web3.admin`{.docutils .literal .notranslate}]{.pre}
    module to [`web3.geth`{.docutils .literal .notranslate}]{.pre}
    namespace

-   Relocated [`web3.miner`{.docutils .literal .notranslate}]{.pre}
    module to [`web3.geth`{.docutils .literal .notranslate}]{.pre}
    namespace
:::

::: {#migration.xhtml#deprecated-methods .section}
#### Deprecated Methods

Expect the following methods to be removed in v6:

-   [`web3.sha3`{.docutils .literal .notranslate}]{.pre} was deprecated
    for [`keccak()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}

-   [`web3.soliditySha3`{.docutils .literal .notranslate}]{.pre} was
    deprecated for [`solidityKeccak()`{.xref .py .py-meth .docutils
    .literal .notranslate}]{.pre}

-   [`chainId()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} was deprecated for [`chainId()`{.xref .py
    .py-meth .docutils .literal .notranslate}]{.pre}. Follow issue
    [#1293](https://github.com/ethereum/web3.py/issues/1293){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/1293\]]{.link-target}
    for details

-   [`web3.eth.getCompilers()`{.docutils .literal .notranslate}]{.pre}
    was deprecated and will not be replaced

-   [`getTransactionFromBlock()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre} was deprecated for
    [`getTransactionByBlock()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}
:::

::: {#migration.xhtml#deprecated-concisecontract-and-implicitcontract .section}
#### Deprecated ConciseContract and ImplicitContract

The ConciseContract and ImplicitContract have been deprecated and will
be removed in v6.

ImplicitContract instances will need to use the verbose syntax. For
example:

[`contract.functions.<function`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`name>.transact({})`{.docutils .literal
.notranslate}]{.pre}

ConciseContract has been replaced with the ContractCaller API. Instead
of using the ConciseContract factory, you can now use:

[`contract.caller.<function_name>`{.docutils .literal
.notranslate}]{.pre}

or the classic contract syntax:

[`contract.functions.<function`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`name>.call()`{.docutils .literal .notranslate}]{.pre}.

Some more concrete examples can be found in the [ContractCaller
docs](https://web3py.readthedocs.io/en/stable/web3.contract.html#contractcaller){.reference
.external}[
\[https://web3py.readthedocs.io/en/stable/web3.contract.html#contractcaller\]]{.link-target}
:::
:::

::: {#migration.xhtml#manager-provider .section}
### Manager Provider

In v5, only a single provider will be allowed. While allowing multiple
providers is a feature we'd like to support in the future, the way that
multiple providers was handled in v4 wasn't ideal. The only thing they
could do was fall back. There was no mechanism for any round robin, nor
was there any control around which provider was chosen. Eventually, the
idea is to expand the Manager API to support injecting custom logic into
the provider selection process.

For now, [`manager.providers`{.docutils .literal .notranslate}]{.pre}
has changed to [`manager.provider`{.docutils .literal
.notranslate}]{.pre}. Similarly, instances of
[`web3.providers`{.docutils .literal .notranslate}]{.pre} have been
changed to [`web3.provider`{.docutils .literal .notranslate}]{.pre}.
:::

::: {#migration.xhtml#testnet-changes .section}
### Testnet Changes

Web3.py will no longer automatically look up a testnet connection in
IPCProvider.
:::

::: {#migration.xhtml#ens .section}
### ENS

Web3.py has stopped inferring the [`.eth`{.docutils .literal
.notranslate}]{.pre} TLD on domain names. If a domain name is used
instead of an address, you'll need to specify the TLD. An
[`InvalidTLD`{.docutils .literal .notranslate}]{.pre} error will be
thrown if the TLD is missing.
:::

::: {#migration.xhtml#required-infura-api-key .section}
### Required Infura API Key

In order to interact with Infura after March 27, 2019, you'll need to
set an environment variable called [`WEB3_INFURA_PROJECT_ID`{.docutils
.literal .notranslate}]{.pre}. You can get a project id by visiting
[https://infura.io/register](https://infura.io/register){.reference
.external}.
:::
:::

::: {#migration.xhtml#migrating-from-v3-to-v4 .section}
## Migrating from v3 to v4

Web3.py follows [Semantic Versioning](http://semver.org){.reference
.external}[ \[http://semver.org\]]{.link-target}, which means that
version 4 introduced backwards-incompatible changes. If your project
depends on Web3.py v3, then you'll probably need to make some changes.

Here are the most common required updates:

::: {#migration.xhtml#python-2-to-python-3 .section}
### Python 2 to Python 3

Only Python 3 is supported in v4. If you are running in Python 2, it's
time to upgrade. We recommend using `<cite>`{=html}2to3`</cite>`{=html}
which can make most of your code compatible with Python 3,
automatically.

The most important update, relevant to Web3.py, is the new
[[`bytes`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#bytes "(in Python v3.14)"){.reference
.external}[
\[https://docs.python.org/3/library/stdtypes.html#bytes\]]{.link-target}
type. It is used regularly, throughout the library, whenever dealing
with data that is not guaranteed to be text.

Many different methods in Web3.py accept text or binary data, like
contract methods, transaction details, and cryptographic functions. The
following example uses [`sha3()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}, but the same pattern applies elsewhere.

In v3 & Python 2, you might have calculated the hash of binary data this
way:

::: {.highlight-python .notranslate}
::: highlight
    >>> Web3.sha3('I\xe2\x99\xa5SF')
    '0x50a826df121f4d076a3686d74558f40082a8e70b3469d8e9a16ceb2a79102e5e'
:::
:::

Or, you might have calculated the hash of text data this way:

::: {.highlight-python .notranslate}
::: highlight
    >>> Web3.sha3(text=u'Iâ™¥SF')
    '0x50a826df121f4d076a3686d74558f40082a8e70b3469d8e9a16ceb2a79102e5e'
:::
:::

After switching to Python 3, these would instead be executed as:

::: {.highlight-python .notranslate}
::: highlight
    >>> Web3.sha3(b'I\xe2\x99\xa5SF')
    HexBytes('0x50a826df121f4d076a3686d74558f40082a8e70b3469d8e9a16ceb2a79102e5e')

    >>> Web3.sha3(text='Iâ™¥SF')
    HexBytes('0x50a826df121f4d076a3686d74558f40082a8e70b3469d8e9a16ceb2a79102e5e')
:::
:::

Note that the return value is different too: you can treat
[[`hexbytes.main.HexBytes`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes "(in HexBytes v2.0)"){.reference
.external}[
\[https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes\]]{.link-target}
like any other bytes value, but the representation on the console shows
you the hex encoding of those bytes, for easier visual comparison.

It takes a little getting used to, but the new py3 types are much
better. We promise.
:::

::: {#migration.xhtml#filters .section}
### Filters

Filters usually don't work quite the way that people want them to.

The first step toward fixing them was to simplify them by removing the
polling logic. Now, you must request an update on your filters
explicitly. That means that any exceptions during the request will
bubble up into your code.

In v3, those exceptions (like "filter is not found") were swallowed
silently in the automated polling logic. Here was the invocation for
printing out new block hashes as they appear:

::: {.highlight-python .notranslate}
::: highlight
    >>> def new_block_callback(block_hash):
    ...     print(f"New Block: {block_hash}")
    ...
    >>> new_block_filter = web3.eth.filter('latest')
    >>> new_block_filter.watch(new_block_callback)
:::
:::

In v4, that same logic:

::: {.highlight-python .notranslate}
::: highlight
    >>> new_block_filter = web3.eth.filter('latest')
    >>> for block_hash in new_block_filter.get_new_entries():
    ...     print(f"New Block: {block_hash}")
:::
:::

The caller is responsible for polling the results from
[`get_new_entries()`{.docutils .literal .notranslate}]{.pre}. See
[[Asynchronous Filter Polling]{.std
.std-ref}](#filters.xhtml#asynchronous-filters){.reference .internal}
for examples of filter-event handling with web3 v4.
:::

::: {#migration.xhtml#testrpcprovider-and-ethereumtesterprovider .section}
### TestRPCProvider and EthereumTesterProvider

These providers are fairly uncommon. If you don't recognize the names,
you can probably skip the section.

However, if you were using web3.py for testing contracts, you might have
been using TestRPCProvider or EthereumTesterProvider.

In v4 there is a new [`EthereumTesterProvider`{.xref .py .py-class
.docutils .literal .notranslate}]{.pre}, and the old v3 implementation
has been removed. Web3.py v4 uses
[`eth_tester.main.EthereumTester`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre} under the hood, instead of eth-testrpc. While
[`eth-tester`{.docutils .literal .notranslate}]{.pre} is still in beta,
many parts are already in better shape than testrpc, so we decided to
replace it in v4.

If you were using TestRPC, or were explicitly importing
EthereumTesterProvider, like: [`from`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`web3.providers.tester`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`import`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`EthereumTesterProvider`{.docutils .literal
.notranslate}]{.pre}, then you will need to update.

With v4 you should import with [`from`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`web3`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`import`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`EthereumTesterProvider`{.docutils .literal
.notranslate}]{.pre}. As before, you'll need to install Web3.py with the
[`tester`{.docutils .literal .notranslate}]{.pre} extra to get these
features, like:

::: {.highlight-bash .notranslate}
::: highlight
    $ pip install web3[tester]
:::
:::
:::

::: {#migration.xhtml#changes-to-base-api-convenience-methods .section}
### Changes to base API convenience methods

::: {#migration.xhtml#web3-todecimal .section}
#### Web3.toDecimal()

In v4 [`Web3.toDecimal()`{.docutils .literal .notranslate}]{.pre} is
renamed: [`toInt()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre} for improved clarity. It does not return a
[[`decimal.Decimal`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](https://docs.python.org/3/library/decimal.html#decimal.Decimal "(in Python v3.14)"){.reference
.external}[
\[https://docs.python.org/3/library/decimal.html#decimal.Decimal\]]{.link-target},
it returns an [[`int`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference
.external}[
\[https://docs.python.org/3/library/functions.html#int\]]{.link-target}.
:::

::: {#migration.xhtml#id5 .section}
#### Removed Methods

-   [`Web3.toUtf8`{.docutils .literal .notranslate}]{.pre} was removed
    for [`toText()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}.

-   [`Web3.fromUtf8`{.docutils .literal .notranslate}]{.pre} was removed
    for [`toHex()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}.

-   [`Web3.toAscii`{.docutils .literal .notranslate}]{.pre} was removed
    for [`toBytes()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}.

-   [`Web3.fromAscii`{.docutils .literal .notranslate}]{.pre} was
    removed for [`toHex()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}.

-   [`Web3.fromDecimal`{.docutils .literal .notranslate}]{.pre} was
    removed for [`toHex()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}.
:::
:::

::: {#migration.xhtml#provider-access .section}
### Provider Access

In v4, [`w3.currentProvider`{.docutils .literal .notranslate}]{.pre} was
removed, in favor of [`w3.providers`{.docutils .literal
.notranslate}]{.pre}.
:::

::: {#migration.xhtml#disambiguating-string-inputs .section}
### Disambiguating String Inputs

There are a number of places where an arbitrary string input might be
either a byte-string that has been hex-encoded, or unicode characters in
text. These are named [`hexstr`{.docutils .literal .notranslate}]{.pre}
and [`text`{.docutils .literal .notranslate}]{.pre} in Web3.py. You
specify which kind of [[`str`{.xref .py .py-class .docutils .literal
.notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
.external}[
\[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target}
you have by using the appropriate keyword argument. See examples in
[[Encoding and Decoding Helpers]{.std
.std-ref}](#web3.main.xhtml#overview-type-conversions){.reference
.internal}.

In v3, some methods accepted a [[`str`{.xref .py .py-class .docutils
.literal
.notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
.external}[
\[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target}
as the first positional argument. In v4, you must pass strings as one of
[`hexstr`{.docutils .literal .notranslate}]{.pre} or [`text`{.docutils
.literal .notranslate}]{.pre} keyword arguments.

Notable methods that no longer accept ambiguous strings:

-   [`sha3()`{.xref .py .py-meth .docutils .literal .notranslate}]{.pre}

-   [`toBytes()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}
:::

::: {#migration.xhtml#contracts .section}
### Contracts

-   When a contract returns the ABI type [`string`{.docutils .literal
    .notranslate}]{.pre}, Web3.py v4 now returns a [[`str`{.xref .py
    .py-class .docutils .literal
    .notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
    .external}[
    \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target}
    value by decoding the underlying bytes using UTF-8.

-   When a contract returns the ABI type [`bytes`{.docutils .literal
    .notranslate}]{.pre} (of any length), Web3.py v4 now returns a
    [[`bytes`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](https://docs.python.org/3/library/stdtypes.html#bytes "(in Python v3.14)"){.reference
    .external}[
    \[https://docs.python.org/3/library/stdtypes.html#bytes\]]{.link-target}
    value
:::

::: {#migration.xhtml#personal-api .section}
### Personal API

[`w3.personal.signAndSendTransaction`{.docutils .literal
.notranslate}]{.pre} is no longer available. Use
[`w3.personal.sendTransaction()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre} instead.
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#web3.main.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#web3.main.xhtml#web3-api .section}
[]{#web3.main.xhtml#web3-base}

# Web3 API

```{=html}
<nav class="contents local" id="contents">
```
-   [Providers](#web3.main.xhtml#providers){#web3.main.xhtml#id2
    .reference .internal}

-   [Attributes](#web3.main.xhtml#attributes){#web3.main.xhtml#id3
    .reference .internal}

-   [Batch
    Requests](#web3.main.xhtml#batch-requests){#web3.main.xhtml#id4
    .reference .internal}

-   [Encoding and Decoding
    Helpers](#web3.main.xhtml#encoding-and-decoding-helpers){#web3.main.xhtml#id5
    .reference .internal}

-   [Currency
    Conversions](#web3.main.xhtml#currency-conversions){#web3.main.xhtml#id6
    .reference .internal}

-   [Addresses](#web3.main.xhtml#addresses){#web3.main.xhtml#id7
    .reference .internal}

-   [Cryptographic
    Hashing](#web3.main.xhtml#cryptographic-hashing){#web3.main.xhtml#id8
    .reference .internal}

-   [Check
    Encodability](#web3.main.xhtml#check-encodability){#web3.main.xhtml#id9
    .reference .internal}

-   [RPC API
    Modules](#web3.main.xhtml#rpc-api-modules){#web3.main.xhtml#id10
    .reference .internal}

-   [Custom
    Methods](#web3.main.xhtml#custom-methods){#web3.main.xhtml#id11
    .reference .internal}

-   [External
    Modules](#web3.main.xhtml#external-modules){#web3.main.xhtml#id12
    .reference .internal}

```{=html}
</nav>
```

*[class]{.pre}[ ]{.w}*[[web3.]{.pre}]{.sig-prename .descclassname}[[Web3]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[provider]{.pre}]{.n}*[)]{.sig-paren}

:   

Each [`Web3`{.docutils .literal .notranslate}]{.pre} instance exposes
the following APIs.

::: {#web3.main.xhtml#providers .section}
## [Providers](#web3.main.xhtml#id2){.toc-backref role="doc-backlink"}

[[Web3.]{.pre}]{.sig-prename .descclassname}[[HTTPProvider]{.pre}]{.sig-name .descname}

:   Convenience API to access [[`web3.providers.rpc.HTTPProvider`{.xref
    .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.rpc.HTTPProvider "web3.providers.rpc.HTTPProvider"){.reference
    .internal}

```{=html}
<!-- -->
```

[[Web3.]{.pre}]{.sig-prename .descclassname}[[IPCProvider]{.pre}]{.sig-name .descname}

:   Convenience API to access [[`web3.providers.ipc.IPCProvider`{.xref
    .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.ipc.IPCProvider "web3.providers.ipc.IPCProvider"){.reference
    .internal}
:::

::: {#web3.main.xhtml#attributes .section}
## [Attributes](#web3.main.xhtml#id3){.toc-backref role="doc-backlink"}

[[Web3.]{.pre}]{.sig-prename .descclassname}[[api]{.pre}]{.sig-name .descname}

:   Returns the current Web3 version.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.api
        "4.7.0"
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.]{.pre}]{.sig-prename .descclassname}[[client_version]{.pre}]{.sig-name .descname}

:   -   Delegates to [`web3_clientVersion`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the current client version.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.client_version
        'Geth/v1.4.11-stable-fed692f6/darwin/go1.7'
    :::
    :::
:::

::: {#web3.main.xhtml#batch-requests .section}
[]{#web3.main.xhtml#id1}

## [Batch Requests](#web3.main.xhtml#id4){.toc-backref role="doc-backlink"}

[[Web3.]{.pre}]{.sig-prename .descclassname}[[batch_requests]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   <div>
    >
    > The JSON-RPC API allows for batch requests, meaning you can send a
    > single request that contains an array of request objects.
    > Generally, this may be useful when you want to limit the number of
    > requests you send to a node.
    >
    > You can choose to build a batch of requests within or outside of a
    > context manager:
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     with w3.batch_requests() as batch:
    >         batch.add(w3.eth.get_block(6))
    >         batch.add(w3.eth.get_block(4))
    >         batch.add(w3.eth.get_block(2))
    >
    >         responses = batch.execute()
    >         assert len(responses) == 3
    > :::
    > :::
    >
    > ::: {.admonition .note}
    > Note
    >
    > Within the batching context above, calls are suspended until
    > [`batch.execute()`{.docutils .literal .notranslate}]{.pre} is
    > called. Calling a method without passing it to
    > [`batch.add`{.docutils .literal .notranslate}]{.pre} might result
    > in unexpected behavior.
    > :::
    >
    > Using the batch object directly:
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     batch = w3.batch_requests()
    >     batch.add(w3.eth.get_block(1))
    >     batch.add(w3.eth.get_block(2))
    >     responses = batch.execute()
    >     assert len(responses) == 2
    > :::
    > :::
    >
    > Contract interactions can be included in batch requests by
    > omitting the [`call()`{.docutils .literal .notranslate}]{.pre}
    > method:
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     batch.add(math_contract.functions.multiply7(0))
    > :::
    > :::
    >
    > Additionally, if you need to make multiple calls of the same
    > function, you can add a mapping of the function to its arguments:
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     batch = w3.batch_requests()
    >     batch.add_mapping(
    >         {
    >             math_contract.functions.multiply7: [1, 2],
    >             w3.eth.get_block: [3, 4],
    >         }
    >     )
    >     responses = batch.execute()
    >     assert len(responses) == 4
    > :::
    > :::
    >
    > The [`execute`{.docutils .literal .notranslate}]{.pre} method
    > returns a list of responses in the order they were included in the
    > batch.
    >
    > If you need to abandon or rebuild a batch request, utilize the
    > [`clear`{.docutils .literal .notranslate}]{.pre} method:
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     batch = w3.batch_requests()
    >     batch.add(w3.eth.get_block(1))
    >     batch.add(w3.eth.get_block(2))
    >     assert len(batch._requests_info) == 2
    >
    >     batch.clear()
    >     assert batch._requests_info == []
    > :::
    > :::
    >
    > ::: {.admonition .note}
    > Note
    >
    > Only read-only operations that exist within modules on the
    > [`Web3`{.docutils .literal .notranslate}]{.pre} class (e.g.
    > [`w3.eth`{.docutils .literal .notranslate}]{.pre},
    > [`w3.net`{.docutils .literal .notranslate}]{.pre}) are supported
    > by [`batch_requests`{.docutils .literal .notranslate}]{.pre}.
    > Unsupported methods include:
    >
    > -   [[`subscribe`{.xref .py .py-meth .docutils .literal
    >     .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.subscribe "web3.eth.Eth.subscribe"){.reference
    >     .internal}
    >
    > -   [[`unsubscribe`{.xref .py .py-meth .docutils .literal
    >     .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.unsubscribe "web3.eth.Eth.unsubscribe"){.reference
    >     .internal}
    >
    > -   [[`send_raw_transaction`{.xref .py .py-meth .docutils .literal
    >     .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_raw_transaction "web3.eth.Eth.send_raw_transaction"){.reference
    >     .internal}
    >
    > -   [[`send_transaction`{.xref .py .py-meth .docutils .literal
    >     .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
    >     .internal}
    >
    > -   [[`sign_transaction`{.xref .py .py-meth .docutils .literal
    >     .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.sign_transaction "web3.eth.Eth.sign_transaction"){.reference
    >     .internal}
    >
    > -   [[`sign`{.xref .py .py-meth .docutils .literal
    >     .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.sign "web3.eth.Eth.sign"){.reference
    >     .internal}
    >
    > -   [[`sign_typed_data`{.xref .py .py-meth .docutils .literal
    >     .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.sign_typed_data "web3.eth.Eth.sign_typed_data"){.reference
    >     .internal}
    >
    > -   [`w3.provider.make_request()`{.docutils .literal
    >     .notranslate}]{.pre}.
    > :::
    >
    > </div>

    ::: {#web3.main.xhtml#async-batch-requests .section}
    ### Async Batch Requests

    If using one of the asynchronous providers, you'll need to make use
    of the [`async_execute`{.docutils .literal .notranslate}]{.pre}
    method and the [`async`{.docutils .literal .notranslate}]{.pre} and
    [`await`{.docutils .literal .notranslate}]{.pre} keywords as
    appropriate.

    ::: {.admonition .note}
    Note

    If performance is a concern, consider using
    [`asyncio.gather()`{.docutils .literal .notranslate}]{.pre} with
    single concurrent requests instead of an asynchronous batch request.
    It will generally be the faster option due to the overhead of
    batching.
    :::

    ::: {.highlight-python .notranslate}
    ::: highlight
        # context manager:
        async with w3.batch_requests() as batch:
            batch.add(w3.eth.get_block(6))
            batch.add(w3.eth.get_block(4))
            batch.add(w3.eth.get_block(2))

            responses = await batch.async_execute()
            assert len(responses) == 3

        # object:
        batch = w3.batch_requests()
        batch.add(w3.eth.get_block(1))
        batch.add(w3.eth.get_block(2))
        responses = await batch.async_execute()
        assert len(responses) == 2
    :::
    :::
    :::
:::

::: {#web3.main.xhtml#encoding-and-decoding-helpers .section}
[]{#web3.main.xhtml#overview-type-conversions}

## [Encoding and Decoding Helpers](#web3.main.xhtml#id5){.toc-backref role="doc-backlink"}

[[Web3.]{.pre}]{.sig-prename .descclassname}[[to_hex]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[primitive]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[hexstr]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[text]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Takes a variety of inputs and returns it in its hexadecimal
    representation. It follows the rules for converting to hex in the
    [JSON-RPC
    spec](https://ethereum.org/en/developers/docs/apis/json-rpc/#hex-encoding){.reference
    .external}[
    \[https://ethereum.org/en/developers/docs/apis/json-rpc/#hex-encoding\]]{.link-target}

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> Web3.to_hex(0)
        '0x0'
        >>> Web3.to_hex(1)
        '0x1'
        >>> Web3.to_hex(0x0)
        '0x0'
        >>> Web3.to_hex(0x000F)
        '0xf'
        >>> Web3.to_hex(b'')
        '0x'
        >>> Web3.to_hex(b'\x00\x0F')
        '0x000f'
        >>> Web3.to_hex(False)
        '0x0'
        >>> Web3.to_hex(True)
        '0x1'
        >>> Web3.to_hex(hexstr='0x000F')
        '0x000f'
        >>> Web3.to_hex(hexstr='000F')
        '0x000f'
        >>> Web3.to_hex(text='')
        '0x'
        >>> Web3.to_hex(text='cowmÃ¶')
        '0x636f776dc3b6'
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.]{.pre}]{.sig-prename .descclassname}[[to_text]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[primitive]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[hexstr]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[text]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Takes a variety of inputs and returns its string equivalent. Text
    gets decoded as UTF-8.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> Web3.to_text(0x636f776dc3b6)
        'cowmÃ¶'
        >>> Web3.to_text(b'cowm\xc3\xb6')
        'cowmÃ¶'
        >>> Web3.to_text(hexstr='0x636f776dc3b6')
        'cowmÃ¶'
        >>> Web3.to_text(hexstr='636f776dc3b6')
        'cowmÃ¶'
        >>> Web3.to_text(text='cowmÃ¶')
        'cowmÃ¶'
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.]{.pre}]{.sig-prename .descclassname}[[to_bytes]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[primitive]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[hexstr]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[text]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Takes a variety of inputs and returns its bytes equivalent. Text
    gets encoded as UTF-8.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> Web3.to_bytes(0)
        b'\x00'
        >>> Web3.to_bytes(0x000F)
        b'\x0f'
        >>> Web3.to_bytes(b'')
        b''
        >>> Web3.to_bytes(b'\x00\x0F')
        b'\x00\x0f'
        >>> Web3.to_bytes(False)
        b'\x00'
        >>> Web3.to_bytes(True)
        b'\x01'
        >>> Web3.to_bytes(hexstr='0x000F')
        b'\x00\x0f'
        >>> Web3.to_bytes(hexstr='000F')
        b'\x00\x0f'
        >>> Web3.to_bytes(text='')
        b''
        >>> Web3.to_bytes(text='cowmÃ¶')
        b'cowm\xc3\xb6'
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.]{.pre}]{.sig-prename .descclassname}[[to_int]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[primitive]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[hexstr]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[text]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Takes a variety of inputs and returns its integer equivalent.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> Web3.to_int(0)
        0
        >>> Web3.to_int(0x000F)
        15
        >>> Web3.to_int(b'\x00\x0F')
        15
        >>> Web3.to_int(False)
        0
        >>> Web3.to_int(True)
        1
        >>> Web3.to_int(hexstr='0x000F')
        15
        >>> Web3.to_int(hexstr='000F')
        15
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.]{.pre}]{.sig-prename .descclassname}[[to_json]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[obj]{.pre}]{.n}*[)]{.sig-paren}

:   Takes a variety of inputs and returns its JSON equivalent.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> Web3.to_json(3)
        '3'
        >>> Web3.to_json({'one': 1})
        '{"one": 1}'
    :::
    :::
:::

::: {#web3.main.xhtml#currency-conversions .section}
[]{#web3.main.xhtml#overview-currency-conversions}

## [Currency Conversions](#web3.main.xhtml#id6){.toc-backref role="doc-backlink"}

[[Web3.]{.pre}]{.sig-prename .descclassname}[[to_wei]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[value]{.pre}]{.n}*, *[[currency]{.pre}]{.n}*[)]{.sig-paren}

:   Returns the value in the denomination specified by the
    [`currency`{.docutils .literal .notranslate}]{.pre} argument
    converted to wei.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> Web3.to_wei(1, 'ether')
        1000000000000000000
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.]{.pre}]{.sig-prename .descclassname}[[from_wei]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[value]{.pre}]{.n}*, *[[currency]{.pre}]{.n}*[)]{.sig-paren}

:   Returns the value in wei converted to the given currency. The value
    is returned as a [`Decimal`{.docutils .literal .notranslate}]{.pre}
    to ensure precision down to the wei.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> Web3.from_wei(1000000000000000000, 'ether')
        Decimal('1')
    :::
    :::
:::

::: {#web3.main.xhtml#addresses .section}
[]{#web3.main.xhtml#overview-addresses}

## [Addresses](#web3.main.xhtml#id7){.toc-backref role="doc-backlink"}

[[Web3.]{.pre}]{.sig-prename .descclassname}[[is_address]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[value]{.pre}]{.n}*[)]{.sig-paren}

:   Returns [`True`{.docutils .literal .notranslate}]{.pre} if the value
    is one of the recognized address formats.

    -   Allows for both [`0x`{.docutils .literal .notranslate}]{.pre}
        prefixed and non-prefixed values.

    -   If the address contains mixed upper and lower cased characters
        this function also checks if the address checksum is valid
        according to
        [EIP55](https://github.com/ethereum/EIPs/issues/55){.reference
        .external}[
        \[https://github.com/ethereum/EIPs/issues/55\]]{.link-target}

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> Web3.is_address('0xd3CdA913deB6f67967B99D67aCDFa1712C293601')
        True
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.]{.pre}]{.sig-prename .descclassname}[[is_checksum_address]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[value]{.pre}]{.n}*[)]{.sig-paren}

:   Returns [`True`{.docutils .literal .notranslate}]{.pre} if the value
    is a valid
    [EIP55](https://github.com/ethereum/EIPs/issues/55){.reference
    .external}[
    \[https://github.com/ethereum/EIPs/issues/55\]]{.link-target}
    checksummed address

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> Web3.is_checksum_address('0xd3CdA913deB6f67967B99D67aCDFa1712C293601')
        True
        >>> Web3.is_checksum_address('0xd3cda913deb6f67967b99d67acdfa1712c293601')
        False
    :::
    :::

```{=html}
<!-- -->
```

[[Web3.]{.pre}]{.sig-prename .descclassname}[[to_checksum_address]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[value]{.pre}]{.n}*[)]{.sig-paren}

:   Returns the given address with an
    [EIP55](https://github.com/ethereum/EIPs/issues/55){.reference
    .external}[
    \[https://github.com/ethereum/EIPs/issues/55\]]{.link-target}
    checksum.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> Web3.to_checksum_address('0xd3cda913deb6f67967b99d67acdfa1712c293601')
        '0xd3CdA913deB6f67967B99D67aCDFa1712C293601'
    :::
    :::
:::

::: {#web3.main.xhtml#cryptographic-hashing .section}
[]{#web3.main.xhtml#overview-hashing}

## [Cryptographic Hashing](#web3.main.xhtml#id8){.toc-backref role="doc-backlink"}

*[classmethod]{.pre}[ ]{.w}*[[Web3.]{.pre}]{.sig-prename .descclassname}[[keccak]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[primitive]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[hexstr]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[text]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Returns the Keccak-256 of the given value. Text is encoded to UTF-8
    before computing the hash, just like Solidity. Any of the following
    are valid and equivalent:

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> Web3.keccak(0x747874)
        >>> Web3.keccak(b'\x74\x78\x74')
        >>> Web3.keccak(hexstr='0x747874')
        >>> Web3.keccak(hexstr='747874')
        >>> Web3.keccak(text='txt')
        HexBytes('0xd7278090a36507640ea6b7a0034b69b0d240766fa3f98e3722be93c613b29d2e')
    :::
    :::

```{=html}
<!-- -->
```

*[classmethod]{.pre}[ ]{.w}*[[Web3.]{.pre}]{.sig-prename .descclassname}[[solidity_keccak]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[abi_types]{.pre}]{.n}*, *[[value]{.pre}]{.n}*[)]{.sig-paren}

:   Returns the Keccak-256 as it would be computed by the solidity
    [`keccak`{.docutils .literal .notranslate}]{.pre} function on a
    *packed* ABI encoding of the [`value`{.docutils .literal
    .notranslate}]{.pre} list contents. The [`abi_types`{.docutils
    .literal .notranslate}]{.pre} argument should be a list of solidity
    type strings which correspond to each of the provided values.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> Web3.solidity_keccak(['bool'], [True])
        HexBytes("0x5fe7f977e71dba2ea1a68e21057beebb9be2ac30c6410aa38d4f3fbe41dcffd2")

        >>> Web3.solidity_keccak(['uint8', 'uint8', 'uint8'], [97, 98, 99])
        HexBytes("0x4e03657aea45a94fc7d47ba826c8d667c0d1e6e33a64a036ec44f58fa12d6c45")

        >>> Web3.solidity_keccak(['uint8[]'], [[97, 98, 99]])
        HexBytes("0x233002c671295529bcc50b76a2ef2b0de2dac2d93945fca745255de1a9e4017e")

        >>> Web3.solidity_keccak(['address'], ["0x49EdDD3769c0712032808D86597B84ac5c2F5614"])
        HexBytes("0x2ff37b5607484cd4eecf6d13292e22bd6e5401eaffcc07e279583bc742c68882")

        >>> Web3.solidity_keccak(['address'], ["ethereumfoundation.eth"])
        HexBytes("0x913c99ea930c78868f1535d34cd705ab85929b2eaaf70fcd09677ecd6e5d75e9")
    :::
    :::

    Comparable solidity usage:

    ::: {.highlight-solidity .notranslate}
    ::: highlight
        bytes32 data1 = keccak256(abi.encodePacked(true));
        assert(data1 == hex"5fe7f977e71dba2ea1a68e21057beebb9be2ac30c6410aa38d4f3fbe41dcffd2");
        bytes32 data2 = keccak256(abi.encodePacked(uint8(97), uint8(98), uint8(99)));
        assert(data2 == hex"4e03657aea45a94fc7d47ba826c8d667c0d1e6e33a64a036ec44f58fa12d6c45");
    :::
    :::
:::

::: {#web3.main.xhtml#check-encodability .section}
## [Check Encodability](#web3.main.xhtml#id9){.toc-backref role="doc-backlink"}

[[w3.]{.pre}]{.sig-prename .descclassname}[[is_encodable]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[\_type]{.pre}]{.n}*, *[[value]{.pre}]{.n}*[)]{.sig-paren}

:   Returns [`True`{.docutils .literal .notranslate}]{.pre} if a value
    can be encoded as the given type. Otherwise returns
    [`False`{.docutils .literal .notranslate}]{.pre}.

    > <div>
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     >>> from web3.auto.gethdev import w3
    >     >>> w3.is_encodable('bytes2', b'12')
    >     True
    >     >>> w3.is_encodable('bytes2', '0x1234')
    >     True
    >     >>> w3.is_encodable('bytes2', '1234')  # not 0x-prefixed, no assumptions will be made
    >     False
    >     >>> w3.is_encodable('bytes2', b'1')  # does not match specified bytes size
    >     False
    >     >>> w3.is_encodable('bytes2', b'123')  # does not match specified bytes size
    >     False
    > :::
    > :::
    >
    > </div>

```{=html}
<!-- -->
```

[[w3.]{.pre}]{.sig-prename .descclassname}[[strict_bytes_type_checking]{.pre}]{.sig-name .descname}

:   Disable the stricter bytes type checking that is loaded by default.
    For more examples, see [[Disabling Strict Checks for Bytes
    Types]{.std
    .std-ref}](#web3.contract.xhtml#disable-strict-byte-check){.reference
    .internal}

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> from web3.auto.gethdev import w3

        >>> w3.is_encodable('bytes2', b'12')
        True

        >>>  # not of exact size bytes2
        >>> w3.is_encodable('bytes2', b'1')
        False

        >>> w3.strict_bytes_type_checking = False

        >>> # zero-padded, so encoded to: b'1\x00'
        >>> w3.is_encodable('bytes2', b'1')
        True

        >>> # re-enable it
        >>> w3.strict_bytes_type_checking = True
        >>> w3.is_encodable('bytes2', b'1')
        False
    :::
    :::
:::

::: {#web3.main.xhtml#rpc-api-modules .section}
## [RPC API Modules](#web3.main.xhtml#id10){.toc-backref role="doc-backlink"}

Each [`Web3`{.docutils .literal .notranslate}]{.pre} instance also
exposes these namespaced API modules.

[[Web3.]{.pre}]{.sig-prename .descclassname}[[eth]{.pre}]{.sig-name .descname}

:   See [[web3.eth API]{.doc}](#web3.eth.xhtml){.reference .internal}

```{=html}
<!-- -->
```

[[Web3.]{.pre}]{.sig-prename .descclassname}[[geth]{.pre}]{.sig-name .descname}

:   See [[Geth API]{.doc}](#web3.geth.xhtml){.reference .internal}

These internal modules inherit from the [`web3.module.Module`{.docutils
.literal .notranslate}]{.pre} class which give them some configurations
internal to the web3.py library.
:::

::: {#web3.main.xhtml#custom-methods .section}
## [Custom Methods](#web3.main.xhtml#id11){.toc-backref role="doc-backlink"}

You may add or overwrite methods within any module using the
[`attach_methods`{.docutils .literal .notranslate}]{.pre} function. To
create a property instead, set [`is_property`{.docutils .literal
.notranslate}]{.pre} to [`True`{.docutils .literal .notranslate}]{.pre}.

::: {.highlight-python .notranslate}
::: highlight
    >>> w3.eth.attach_methods({
    ...    'example_method': Method(
    ...      'eth_example',
    ...       mungers=[...],
    ...       request_formatters=[...],
    ...       result_formatters=[...],
    ...       is_property=False,
    ...    ),
    ... })
    >>> w3.eth.example_method()
:::
:::
:::

::: {#web3.main.xhtml#external-modules .section}
## [External Modules](#web3.main.xhtml#id12){.toc-backref role="doc-backlink"}

External modules can be used to introduce custom or third-party APIs to
your [`Web3`{.docutils .literal .notranslate}]{.pre} instance. External
modules are simply classes whose methods and properties can be made
available within the [`Web3`{.docutils .literal .notranslate}]{.pre}
instance. Optionally, the external module may make use of the parent
[`Web3`{.docutils .literal .notranslate}]{.pre} instance by accepting it
as the first argument within the [`__init__`{.docutils .literal
.notranslate}]{.pre} function:

::: {.highlight-python .notranslate}
::: highlight
    >>> class ExampleModule:
    ...     def __init__(self, w3):
    ...         self.w3 = w3
    ...
    ...     def print_balance_of_shaq(self):
    ...         print(self.w3.eth.get_balance('shaq.eth'))
:::
:::

::: {.admonition .warning}
Warning

Given the flexibility of external modules, use caution and only import
modules from trusted third parties and open source code you've vetted!
:::

Configuring external modules can occur either at instantiation of the
[`Web3`{.docutils .literal .notranslate}]{.pre} instance or by making
use of the [`attach_modules()`{.docutils .literal .notranslate}]{.pre}
method. To instantiate the [`Web3`{.docutils .literal
.notranslate}]{.pre} instance with external modules use the
[`external_modules`{.docutils .literal .notranslate}]{.pre} keyword
argument:

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3 import Web3, HTTPProvider
    >>> from external_module_library import (
    ...     ModuleClass1,
    ...     ModuleClass2,
    ...     ModuleClass3,
    ...     ModuleClass4,
    ...     ModuleClass5,
    ... )
    >>> w3 = Web3(
    ...     HTTPProvider(provider_uri),
    ...     external_modules={
    ...         'module1': ModuleClass1,
    ...         'module2': (ModuleClass2, {
    ...             'submodule1': ModuleClass3,
    ...             'submodule2': (ModuleClass4, {
    ...                 'submodule2a': ModuleClass5,  # submodule children may be nested further if necessary
    ...             })
    ...         })
    ...     }
    ... )

    # `return_zero`, in this case, is an example attribute of the `ModuleClass1` object
    >>> w3.module1.return_zero()
    0
    >>> w3.module2.submodule1.return_one()
    1
    >>> w3.module2.submodule2.submodule2a.return_two()
    2
:::
:::

[[w3.]{.pre}]{.sig-prename .descclassname}[[attach_modules]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[modules]{.pre}]{.n}*[)]{.sig-paren}

:   The [`attach_modules()`{.docutils .literal .notranslate}]{.pre}
    method can be used to attach external modules after the
    [`Web3`{.docutils .literal .notranslate}]{.pre} instance has been
    instantiated.

    Modules are attached via a `<cite>`{=html}dict`</cite>`{=html} with
    module names as the keys. The values can either be the module
    classes themselves, if there are no submodules, or two-item tuples
    with the module class as the 0th index and a similarly built
    `<cite>`{=html}dict`</cite>`{=html} containing the submodule
    information as the 1st index. This pattern may be repeated as
    necessary.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> from web3 import Web3, HTTPProvider
        >>> from external_module_library import (
        ...     ModuleClass1,
        ...     ModuleClass2,
        ...     ModuleClass3,
        ...     ModuleClass4,
        ...     ModuleClass5,
        ... )
        >>> w3 = Web3(HTTPProvider(provider_uri))

        >>> w3.attach_modules({
        ...     'module1': ModuleClass1,  # the module class itself may be used for a single module with no submodules
        ...     'module2': (ModuleClass2, {  # a tuple with module class and corresponding submodule dict may be used for modules with submodules
        ...         'submodule1': ModuleClass3,
        ...         'submodule2': (ModuleClass4, {  # this pattern may be repeated as necessary
        ...             'submodule2a': ModuleClass5,
        ...         })
        ...     })
        ... })
        >>> w3.module1.return_zero()
        0
        >>> w3.module2.submodule1.return_one()
        1
        >>> w3.module2.submodule2.submodule2a.return_two()
        2
    :::
    :::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#web3.eth.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#web3.eth.xhtml#module-web3.eth .section}
[]{#web3.eth.xhtml#web3-eth-api}[]{#web3.eth.xhtml#web3-eth}

# web3.eth API

*[class]{.pre}[ ]{.w}*[[web3.eth.]{.pre}]{.sig-prename .descclassname}[[Eth]{.pre}]{.sig-name .descname}

:   

The [`web3.eth`{.docutils .literal .notranslate}]{.pre} object exposes
the following properties and methods to interact with the RPC APIs under
the [`eth_`{.docutils .literal .notranslate}]{.pre} namespace.

By default, when a property or method returns a mapping of keys to
values, it will return an [`AttributeDict`{.docutils .literal
.notranslate}]{.pre} which acts like a [`dict`{.docutils .literal
.notranslate}]{.pre} but you can access the keys as attributes and
cannot modify its fields. For example, you can find the latest block
number in these two ways:

> <div>
>
> ::: {.highlight-python .notranslate}
> ::: highlight
>     >>> block = web3.eth.get_block('latest')
>     AttributeDict({
>       'hash': '0xe8ad537a261e6fff80d551d8d087ee0f2202da9b09b64d172a5f45e818eb472a',
>       'number': 4022281,
>       # ... etc ...
>     })
>
>     >>> block['number']
>     4022281
>     >>> block.number
>     4022281
>
>     >>> block.number = 4022282
>     Traceback # ... etc ...
>     TypeError: This data is immutable -- create a copy instead of modifying
> :::
> :::
>
> </div>

This feature is available via the [`AttributeDictMiddleware`{.docutils
.literal .notranslate}]{.pre} which is a default middleware.

::: {.admonition .note}
Note

Accessing an [`AttributeDict`{.docutils .literal .notranslate}]{.pre}
property via attribute will break type hinting. If typing is crucial for
your application, accessing via key / value, as well as removing the
[`AttributeDictMiddleware`{.docutils .literal .notranslate}]{.pre}
altogether, may be desired.
:::

::: {#web3.eth.xhtml#properties .section}
## Properties

The following properties are available on the [`web3.eth`{.docutils
.literal .notranslate}]{.pre} namespace.

[[Eth.]{.pre}]{.sig-prename .descclassname}[[default_account]{.pre}]{.sig-name .descname}

:   The ethereum address that will be used as the default
    [`from`{.docutils .literal .notranslate}]{.pre} address for all
    transactions. Defaults to empty.

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[default_block]{.pre}]{.sig-name .descname}

:   The default block number that will be used for any RPC methods that
    accept a block identifier. Defaults to [`'latest'`{.docutils
    .literal .notranslate}]{.pre}.

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[syncing]{.pre}]{.sig-name .descname}

:   -   Delegates to [`eth_syncing`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns either [`False`{.docutils .literal .notranslate}]{.pre} if
    the node is not syncing or a dictionary showing sync status.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.syncing
        AttributeDict({
            'currentBlock': 2177557,
            'highestBlock': 2211611,
            'knownStates': 0,
            'pulledStates': 0,
            'startingBlock': 2177365,
        })
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[max_priority_fee]{.pre}]{.sig-name .descname}

:   -   Delegates to [`eth_maxPriorityFeePerGas`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns a suggestion for a max priority fee for dynamic fee
    transactions in Wei.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.max_priority_fee
        2000000000
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[gas_price]{.pre}]{.sig-name .descname}

:   -   Delegates to [`eth_gasPrice`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the current gas price in Wei.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.gas_price
        20000000000
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[accounts]{.pre}]{.sig-name .descname}

:   -   Delegates to [`eth_accounts`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the list of known accounts.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.accounts
        ['0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD']
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[block_number]{.pre}]{.sig-name .descname}

:   -   Delegates to [`eth_blockNumber`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the number of the most recent block

    Alias for [[`get_block_number()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_block_number "web3.eth.Eth.get_block_number"){.reference
    .internal}

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.block_number
        2206939
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[chain_id]{.pre}]{.sig-name .descname}

:   <div>
    >
    > -   Delegates to [`eth_chainId`{.docutils .literal
    >     .notranslate}]{.pre} RPC Method
    >
    > Returns an integer value for the currently configured "Chain Id"
    > value introduced in
    > [EIP-155](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md){.reference
    > .external}[
    > \[https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md\]]{.link-target}.
    > Returns [`None`{.docutils .literal .notranslate}]{.pre} if no
    > Chain Id is available.
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     >>> web3.eth.chain_id
    >     61
    > :::
    > :::
    >
    > </div>

    ::: {.admonition .note}
    Note

    This property gets called frequently in validation middleware, but
    `<cite>`{=html}eth_chainId`</cite>`{=html} is an allowed method for
    caching by default. Simply turn on request caching to avoid repeated
    calls to this method.

    > <div>
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     >>> w3.provider.cache_allowed_requests = True
    > :::
    > :::
    >
    > </div>
    :::
:::

::: {#web3.eth.xhtml#methods .section}
[]{#web3.eth.xhtml#web3-eth-methods}

## Methods

The following methods are available on the [`web3.eth`{.docutils
.literal .notranslate}]{.pre} namespace.

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_balance]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[account]{.pre}]{.n}*, *[[block_identifier]{.pre}]{.n}[[=]{.pre}]{.o}[[eth.default_block]{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`eth_getBalance`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the balance of the given [`account`{.docutils .literal
    .notranslate}]{.pre} at the block specified by
    [`block_identifier`{.docutils .literal .notranslate}]{.pre}.

    [`account`{.docutils .literal .notranslate}]{.pre} may be a checksum
    address or an ENS name

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_balance('0xd3CdA913deB6f67967B99D67aCDFa1712C293601')
        77320681768999138915
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_block_number]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   -   Delegates to [`eth_blockNumber`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the number of the most recent block.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_block_number()
        2206939
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_storage_at]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[account]{.pre}]{.n}*, *[[position]{.pre}]{.n}*, *[[block_identifier]{.pre}]{.n}[[=]{.pre}]{.o}[[eth.default_block]{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`eth_getStorageAt`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the value from a storage position for the given
    [`account`{.docutils .literal .notranslate}]{.pre} at the block
    specified by [`block_identifier`{.docutils .literal
    .notranslate}]{.pre}.

    [`account`{.docutils .literal .notranslate}]{.pre} may be a checksum
    address or an ENS name

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_storage_at('0x6C8f2A135f6ed072DE4503Bd7C4999a1a17F824B', 0)
        '0x00000000000000000000000000000000000000000000000000120a0b063499d4'
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[blob_base_fee]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   Fetches the expected base fee for blobs in the next block.

    -   Delegates to [`eth_blobBaseFee`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the expected base fee in Wei.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.blob_base_fee()
        537070730
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_proof]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[account]{.pre}]{.n}*, *[[positions]{.pre}]{.n}*, *[[block_identifier]{.pre}]{.n}[[=]{.pre}]{.o}[[eth.default_block]{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`eth_getProof`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the values from an array of storage positions for the given
    [`account`{.docutils .literal .notranslate}]{.pre} at the block
    specified by [`block_identifier`{.docutils .literal
    .notranslate}]{.pre}.

    [`account`{.docutils .literal .notranslate}]{.pre} may be a checksum
    address or an ENS name

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_proof('0x6C8f2A135f6ed072DE4503Bd7C4999a1a17F824B', [0], 3391)
        AttributeDict({
            'address': '0x4CB06C43fcdABeA22541fcF1F856A6a296448B6c',
            'accountProof': ['0xf90211a03841a7ddd65c70c94b8efa79190d00f0ab134b26f18dcad508f60a7e74559d0ba0464b07429a05039e22931492d6c6251a860c018ea390045d596b1ac11b5c7aa7a011f4b89823a03c9c4b5a8ab079ee1bc0e2a83a508bb7a5dc7d7fb4f2e95d3186a0b5f7c51c3b2d51d97f171d2b38a4df1a7c0acc5eb0de46beeff4d07f5ed20e19a0b591a2ce02367eda31cf2d16eca7c27fd44dbf0864b64ea8259ad36696eb2a04a02b646a7552b8392ae94263757f699a27d6e9176b4c06b9fc0a722f893b964795a02df05d68bceb88eebf68aafde61d10ab942097afc1c58b8435ffd3895358a742a0c2f16143c4d1db03276c433696dddb3e9f3b113bcd854b127962262e98f43147a0828820316cc02bfefd899aba41340659fd06df1e0a0796287ec2a4110239f6d2a050496598670b04df7bbff3718887fa36437d6d8c7afb4eff86f76c5c7097dcc4a0c14e9060c6b3784e35b9e6ae2ad2984142a75910ccc89eb89dc1e2f44b6c58c2a009804db571d0ce07913e1cbacc4f1dc4fb8265c936f5c612e3a47e91c64d8e9fa063d96f38b3cb51b1665c6641e25ffe24803f2941e5df79942f6a53b7169647e4a0899f71abb18c6c956118bf567fac629b75f7e9526873e429d3d8abb6dbb58021a00fd717235298742623c0b3cafb3e4bd86c0b5ab1f71097b4dd19f3d6925d758da0096437146c16097f2ccc1d3e910d65a4132803baee2249e72c8bf0bcaaeb37e580',
                             '0xf90151a097b17a89fd2c03ee98cb6459c08f51b269da5cee46650e84470f62bf83b43efe80a03b269d284a4c3cf8f8deacafb637c6d77f607eec8d75e8548d778e629612310480a01403217a7f1416830c870087c524dabade3985271f6f369a12b010883c71927aa0f592ac54c879817389663be677166f5022943e2fe1b52617a1d15c2f353f27dda0ac8d015a9e668f5877fcc391fae33981c00577096f0455b42df4f8e8089ece24a003ba34a13e2f2fb4bf7096540b42d4955c5269875b9cf0f7b87632585d44c9a580a0b179e3230b07db294473ae57f0170262798f8c551c755b5665ace1215cee10ca80a0552d24252639a6ae775aa1df700ffb92c2411daea7286f158d44081c8172d072a0772a87d08cf38c4c68bfde770968571abd16fd3835cb902486bd2e515d53c12d80a0413774f3d900d2d2be7a3ad999ffa859a471dc03a74fb9a6d8275455f5496a548080',
                             '0xf869a020d13b52a61d3c1325ce3626a51418adebd6323d4840f1bdd93906359d11c933b846f8440180a01ab7c0b0a2a4bbb5a1495da8c142150891fc64e0c321e1feb70bd5f881951f7ea0551332d96d085185ab4019ad8bcf89c45321e136c261eb6271e574a2edf1461f'
                             ],
            'balance': 0,
            'codeHash': '0x551332d96d085185ab4019ad8bcf89c45321e136c261eb6271e574a2edf1461f',
            'nonce': 1,
            'storageHash': '0x1ab7c0b0a2a4bbb5a1495da8c142150891fc64e0c321e1feb70bd5f881951f7e',
            'storageProof': [
                AttributeDict({
                    'key': '0x00',
                    'value': '0x48656c6c6f00000000000000000000000000000000000000000000000000000a',
                    'proof': ['0xf9019180a01ace80e7bed79fbadbe390876bd1a7d9770edf9462049ef8f4b555d05715d53ea049347a3c2eac6525a3fd7e3454dab19d73b4adeb9aa27d29493b9843f3f88814a085079b4abcd07fd4a5d6c52d35f4c4574aecc85830e90c478ca8c18fcbe590de80a02e3f8ad7ea29e784007f51852b9c3e470aef06b11bac32586a8b691134e4c27da064d2157a14bc31f195f73296ea4dcdbe7698edbf3ca81c44bf7730179d98d94ca09e7dc2597c9b7f72ddf84d7eebb0fe2a2fa2ab54fe668cd14fee44d9b40b1a53a0aa5d4acc7ac636d16bc9655556770bc325e1901fb62dc53770ef9110009e080380a0d5fde962bd2fb5326ddc7a9ca7fe0ee47c5bb3227f838b6d73d3299c22457596a08691410eff46b88f929ef649ea25025f62a5362ca8dc8876e5e1f4fc8e79256d80a0673e88d3a8a4616f676793096b5ae87cff931bd20fb8dd466f97809a1126aad8a08b774a45c2273553e2daf4bbc3a8d44fb542ea29b6f125098f79a4d211b3309ca02fed3139c1791269acb9365eddece93e743900eba6b42a6a8614747752ba268f80',
                              '0xf891808080a0c7d094301e0c54da37b696d85f72de5520b224ab2cf4f045d8db1a3374caf0488080a0fc5581783bfe27fab9423602e1914d719fd71433e9d7dd63c95fe7e58d10c9c38080a0c64f346fc7a21f6679cba8abdf37ca2de8c4fcd8f8bcaedb261b5f77627c93908080808080a0ddef2936a67a3ac7d3d4ff15a935a45f2cc4976c8f0310aed85daf763780e2b480',
                              '0xf843a0200decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563a1a048656c6c6f00000000000000000000000000000000000000000000000000000a'
                              ]
                })
            ]
        })
    :::
    :::

    -   Merkle proof verification using py-trie.

    The following example verifies that the values returned in the
    [`AttributeDict`{.docutils .literal .notranslate}]{.pre} are
    included in the state of given trie [`root`{.docutils .literal
    .notranslate}]{.pre}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        from eth_utils import (
            keccak,
        )
        import rlp
        from rlp.sedes import (
            Binary,
            big_endian_int,
        )
        from trie import (
            HexaryTrie,
        )
        from web3._utils.encoding import (
            pad_bytes,
        )

        def format_proof_nodes(proof):
            trie_proof = []
            for rlp_node in proof:
                trie_proof.append(rlp.decode(bytes(rlp_node)))
            return trie_proof

        def verify_eth_get_proof(proof, root):
            trie_root = Binary.fixed_length(32, allow_empty=True)
            hash32 = Binary.fixed_length(32)

            class _Account(rlp.Serializable):
                fields = [
                            ('nonce', big_endian_int),
                            ('balance', big_endian_int),
                            ('storage', trie_root),
                            ('code_hash', hash32)
                        ]
            acc = _Account(
                proof.nonce, proof.balance, proof.storageHash, proof.codeHash
            )
            rlp_account = rlp.encode(acc)
            trie_key = keccak(bytes.fromhex(proof.address[2:]))

            assert rlp_account == HexaryTrie.get_from_proof(
                root, trie_key, format_proof_nodes(proof.accountProof)
            ), f"Failed to verify account proof {proof.address}"

            for storage_proof in proof.storageProof:
                trie_key = keccak(pad_bytes(b'\x00', 32, storage_proof.key))
                root = proof.storageHash
                if storage_proof.value == b'\x00':
                    rlp_value = b''
                else:
                    rlp_value = rlp.encode(storage_proof.value)

                assert rlp_value == HexaryTrie.get_from_proof(
                    root, trie_key, format_proof_nodes(storage_proof.proof)
                ), f"Failed to verify storage proof {storage_proof.key}"

            return True

        block = w3.eth.get_block(3391)
        proof = w3.eth.get_proof('0x6C8f2A135f6ed072DE4503Bd7C4999a1a17F824B', [0, 1], 3391)
        assert verify_eth_get_proof(proof, block.stateRoot)
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_code]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[account]{.pre}]{.n}*, *[[block_identifier]{.pre}]{.n}[[=]{.pre}]{.o}[[eth.default_block]{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`eth_getCode`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the bytecode for the given [`account`{.docutils .literal
    .notranslate}]{.pre} at the block specified by
    [`block_identifier`{.docutils .literal .notranslate}]{.pre}.

    [`account`{.docutils .literal .notranslate}]{.pre} may be a checksum
    address or an ENS name

    ::: {.highlight-python .notranslate}
    ::: highlight
        # For a contract address.
        >>> web3.eth.get_code('0x6C8f2A135f6ed072DE4503Bd7C4999a1a17F824B')
        '0x6060604052361561027c5760e060020a60003504630199.....'
        # For a private key address.
        >>> web3.eth.get_code('0xd3CdA913deB6f67967B99D67aCDFa1712C293601')
        '0x'
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_block]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[block_identifier]{.pre}]{.n}[[=]{.pre}]{.o}[[eth.default_block]{.pre}]{.default_value}*, *[[full_transactions]{.pre}]{.n}[[=]{.pre}]{.o}[[False]{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`eth_getBlockByNumber`{.docutils .literal
        .notranslate}]{.pre} or [`eth_getBlockByHash`{.docutils .literal
        .notranslate}]{.pre} RPC Methods

    Returns the block specified by [`block_identifier`{.docutils
    .literal .notranslate}]{.pre}. Delegates to
    [`eth_getBlockByNumber`{.docutils .literal .notranslate}]{.pre} if
    [`block_identifier`{.docutils .literal .notranslate}]{.pre} is an
    integer or one of the predefined block parameters
    [`'latest',`{.docutils .literal .notranslate}]{.pre}` `{.docutils
    .literal .notranslate}[`'earliest',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'pending',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'safe',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'finalized'`{.docutils .literal
    .notranslate}]{.pre} - otherwise delegates to
    [`eth_getBlockByHash`{.docutils .literal .notranslate}]{.pre}.
    Throws [`BlockNotFound`{.docutils .literal .notranslate}]{.pre}
    error if the block is not found.

    If [`full_transactions`{.docutils .literal .notranslate}]{.pre} is
    [`True`{.docutils .literal .notranslate}]{.pre} then the
    [`'transactions'`{.docutils .literal .notranslate}]{.pre} key will
    contain full transactions objects. Otherwise it will be an array of
    transaction hashes.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_block(2000000)
        AttributeDict({
            'difficulty': 49824742724615,
            'extraData': '0xe4b883e5bda9e7a59ee4bb99e9b1bc',
            'gasLimit': 4712388,
            'gasUsed': 21000,
            'hash': '0xc0f4906fea23cf6f3cce98cb44e8e1449e455b28d684dfa9ff65426495584de6',
            'logsBloom': '0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
            'miner': '0x61c808d82a3ac53231750dadc13c777b59310bd9',
            'nonce': '0x3b05c6d5524209f1',
            'number': 2000000,
            'parentHash': '0x57ebf07eb9ed1137d41447020a25e51d30a0c272b5896571499c82c33ecb7288',
            'receiptsRoot': '0x84aea4a7aad5c5899bd5cfc7f309cc379009d30179316a2a7baa4a2ea4a438ac',
            'sha3Uncles': '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',
            'size': 650,
            'stateRoot': '0x96dbad955b166f5119793815c36f11ffa909859bbfeb64b735cca37cbf10bef1',
            'timestamp': 1470173578,
            'totalDifficulty': 44010101827705409388,
            'transactions': ['0xc55e2b90168af6972193c1f86fa4d7d7b31a29c156665d15b9cd48618b5177ef'],
            'transactionsRoot': '0xb31f174d27b99cdae8e746bd138a01ce60d8dd7b224f7c60845914def05ecc58',
            'uncles': [],
        })
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_block_transaction_count]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[block_identifier]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_getBlockTransactionCountByNumber`{.docutils
        .literal .notranslate}]{.pre} or
        [`eth_getBlockTransactionCountByHash`{.docutils .literal
        .notranslate}]{.pre} RPC Methods

    Returns the number of transactions in the block specified by
    [`block_identifier`{.docutils .literal .notranslate}]{.pre}.
    Delegates to [`eth_getBlockTransactionCountByNumber`{.docutils
    .literal .notranslate}]{.pre} if [`block_identifier`{.docutils
    .literal .notranslate}]{.pre} is an integer or one of the predefined
    block parameters [`'latest',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'earliest',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'pending',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'safe',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'finalized'`{.docutils .literal .notranslate}]{.pre},
    otherwise delegates to
    [`eth_getBlockTransactionCountByHash`{.docutils .literal
    .notranslate}]{.pre}. Throws [`BlockNotFoundError`{.docutils
    .literal .notranslate}]{.pre} if transactions are not found.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_block_transaction_count(46147)
        1
        >>> web3.eth.get_block_transaction_count('0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd')  # block 46147
        1
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_uncle_by_block]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[block_identifier]{.pre}]{.n}*, *[[uncle_index]{.pre}]{.n}*[)]{.sig-paren}

:   ::: {.admonition .warning}
    Warning

    Deprecated. Will be removed in v8.
    :::

    -   Delegates to [`eth_getUncleByBlockHashAndIndex`{.docutils
        .literal .notranslate}]{.pre} or
        [`eth_getUncleByBlockNumberAndIndex`{.docutils .literal
        .notranslate}]{.pre} RPC methods

    Returns the uncle at the index specified by [`uncle_index`{.docutils
    .literal .notranslate}]{.pre} from the block specified by
    [`block_identifier`{.docutils .literal .notranslate}]{.pre}.
    Delegates to [`eth_getUncleByBlockNumberAndIndex`{.docutils .literal
    .notranslate}]{.pre} if [`block_identifier`{.docutils .literal
    .notranslate}]{.pre} is an integer or one of the predefined block
    parameters [`'latest',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'earliest',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'pending'`{.docutils .literal .notranslate}]{.pre},
    otherwise delegates to [`eth_getUncleByBlockHashAndIndex`{.docutils
    .literal .notranslate}]{.pre}. Throws [`BlockNotFound`{.docutils
    .literal .notranslate}]{.pre} if the block is not found.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_uncle_by_block(56160, 0)
        AttributeDict({
          'author': '0xbe4532e1b1db5c913cf553be76180c1777055403',
          'difficulty': '0x17dd9ca0afe',
          'extraData': '0x476574682f686261722f76312e302e312f6c696e75782f676f312e342e32',
          'gasLimit': '0x2fefd8',
          'gasUsed': '0x0',
          'hash': '0xc78c35720d930f9ef34b4e6fb9d02ffec936f9b02a8f0fa858456e4afd4d5614',
          'logsBloom':'0x000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
          'miner': '0xbe4532e1b1db5c913cf553be76180c1777055403',
          'mixHash': '0x041e14603f35a82f6023802fec96ef760433292434a39787514f140950597e5e',
          'nonce': '0x5d2b7e3f1af09995',
          'number': '0xdb5e',
          'parentHash': '0xcc30e8a9b15c548d5bf113c834143a8f0e1909fbfea96b2a208dc154293a78cf',
          'receiptsRoot': '0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421',
          'sealFields': ['0xa0041e14603f35a82f6023802fec96ef760433292434a39787514f140950597e5e', '0x885d2b7e3f1af09995'],
          'sha3Uncles': '0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347',
          'size': None, 'stateRoot': '0x8ce2b1bf8e25a06a8ca34c647ff5fd0fa48ac725cc07f657ae1645ab8ef68c91',
          'timestamp': '0x55c6a972',
          'totalDifficulty': '0xce4c4f0a0b810b',
          'transactions': [],
          'transactionsRoot': '0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421',
          'uncles': []
        })

        # You can also refer to the block by hash:
        >>> web3.eth.get_uncle_by_block('0x685b2226cbf6e1f890211010aa192bf16f0a0cba9534264a033b023d7367b845', 0)
        AttributeDict({
            ...
        })
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_uncle_count]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[block_identifier]{.pre}]{.n}*[)]{.sig-paren}

:   ::: {.admonition .warning}
    Warning

    Deprecated. Will be removed in v8.
    :::

    -   Delegates to [`eth_getUncleCountByBlockHash`{.docutils .literal
        .notranslate}]{.pre} or
        [`eth_getUncleCountByBlockNumber`{.docutils .literal
        .notranslate}]{.pre} RPC methods

    Returns the (integer) number of uncles associated with the block
    specified by [`block_identifier`{.docutils .literal
    .notranslate}]{.pre}. Delegates to
    [`eth_getUncleCountByBlockNumber`{.docutils .literal
    .notranslate}]{.pre} if [`block_identifier`{.docutils .literal
    .notranslate}]{.pre} is an integer or one of the predefined block
    parameters [`'latest',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'earliest',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'pending'`{.docutils .literal .notranslate}]{.pre},
    otherwise delegates to [`eth_getUncleCountByBlockHash`{.docutils
    .literal .notranslate}]{.pre}. Throws [`BlockNotFound`{.docutils
    .literal .notranslate}]{.pre} if the block is not found.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_uncle_count(56160)
        1

        # You can also refer to the block by hash:
        >>> web3.eth.get_uncle_count('0x685b2226cbf6e1f890211010aa192bf16f0a0cba9534264a033b023d7367b845')
        1
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction_hash]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_getTransactionByHash`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the transaction specified by [`transaction_hash`{.docutils
    .literal .notranslate}]{.pre}. If the transaction cannot be found
    throws [`web3.exceptions.TransactionNotFound`{.xref .py .py-class
    .docutils .literal .notranslate}]{.pre}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_transaction('0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060')
        AttributeDict({'blockHash': HexBytes('0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd'),
            'blockNumber': 46147,
            'from': '0xA1E4380A3B1f749673E270229993eE55F35663b4',
            'gas': 21000,
            'gasPrice': 50000000000000,
            'hash': HexBytes('0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060'),
            'input': HexBytes('0x'),
            'nonce': 0,
             'r': HexBytes('0x88ff6cf0fefd94db46111149ae4bfc179e9b94721fffd821d38d16464b3f71d0'),
             's': HexBytes('0x45e0aff800961cfce805daef7016b9b675c137a6a41a548f7b60a3484c06a33a'),
             'to': '0x5DF9B87991262F6BA471F09758CDE1c0FC1De734',
             'transactionIndex': 0,
             'type': 0,
             'v': 28,
             'value': 31337
        })
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_raw_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction_hash]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_getRawTransactionByHash`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the raw form of transaction specified by
    [`transaction_hash`{.docutils .literal .notranslate}]{.pre}.

    If no transaction is found, [`TransactionNotFound`{.docutils
    .literal .notranslate}]{.pre} is raised.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_raw_transaction('0x86fbfe56cce542ff0a2a2716c31675a0c9c43701725c4a751d20ee2ddf8a733d')
        HexBytes('0xf86907843b9aca0082520894dc544d1aa88ff8bbd2f2aec754b1f1e99e1812fd018086eecac466e115a0f9db4e25484b28f486b247a372708d4cd0643fc63e604133afac577f4cc1eab8a044841d84e799d4dc18ba146816a937e8a0be8bc296bd8bb8aea126de5e627e06')
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_transaction_by_block]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[block_identifier]{.pre}]{.n}*, *[[transaction_index]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to
        [`eth_getTransactionByBlockNumberAndIndex`{.docutils .literal
        .notranslate}]{.pre} or
        [`eth_getTransactionByBlockHashAndIndex`{.docutils .literal
        .notranslate}]{.pre} RPC Methods

    Returns the transaction at the index specified by
    [`transaction_index`{.docutils .literal .notranslate}]{.pre} from
    the block specified by [`block_identifier`{.docutils .literal
    .notranslate}]{.pre}. Delegates to
    [`eth_getTransactionByBlockNumberAndIndex`{.docutils .literal
    .notranslate}]{.pre} if [`block_identifier`{.docutils .literal
    .notranslate}]{.pre} is an integer or one of the predefined block
    parameters [`'latest',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'earliest',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'pending',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'safe',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'finalized'`{.docutils .literal .notranslate}]{.pre},
    otherwise delegates to
    [`eth_getTransactionByBlockHashAndIndex`{.docutils .literal
    .notranslate}]{.pre}. If a transaction is not found at specified
    arguments, throws [`web3.exceptions.TransactionNotFound`{.xref .py
    .py-class .docutils .literal .notranslate}]{.pre}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_transaction_by_block(46147, 0)
        AttributeDict({
            'blockHash': '0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd',
            'blockNumber': 46147,
            'from': '0xA1E4380A3B1f749673E270229993eE55F35663b4',
            'gas': 21000,
            'gasPrice': None,
            'hash': '0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060',
            'input': '0x',
            'maxFeePerGas': 2000000000,
            'maxPriorityFeePerGas': 1000000000,
            'nonce': 0,
            'to': '0x5DF9B87991262F6BA471F09758CDE1c0FC1De734',
            'transactionIndex': 0,
            'value': 31337,
        })
        >>> web3.eth.get_transaction_by_block('0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd', 0)
        AttributeDict({
            'blockHash': '0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd',
            'blockNumber': 46147,
            'from': '0xA1E4380A3B1f749673E270229993eE55F35663b4',
            'gas': 21000,
            'gasPrice': None,
            'hash': '0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060',
            'input': '0x',
            'maxFeePerGas': 2000000000,
            'maxPriorityFeePerGas': 1000000000,
            'nonce': 0,
            'to': '0x5DF9B87991262F6BA471F09758CDE1c0FC1De734',
            'transactionIndex': 0,
            'value': 31337,
        })
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_raw_transaction_by_block]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[block_identifier]{.pre}]{.n}*, *[[transaction_index]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to
        [`eth_getRawTransactionByBlockNumberAndIndex`{.docutils .literal
        .notranslate}]{.pre} or
        [`eth_getRawTransactionByBlockHashAndIndex`{.docutils .literal
        .notranslate}]{.pre} RPC Methods

    Returns the raw transaction at the index specified by
    [`transaction_index`{.docutils .literal .notranslate}]{.pre} from
    the block specified by [`block_identifier`{.docutils .literal
    .notranslate}]{.pre}. Delegates to
    [`eth_getRawTransactionByBlockNumberAndIndex`{.docutils .literal
    .notranslate}]{.pre} if [`block_identifier`{.docutils .literal
    .notranslate}]{.pre} is an integer or one of the predefined block
    parameters [`'latest',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'earliest',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'pending',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'safe',`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`'finalized'`{.docutils .literal .notranslate}]{.pre},
    otherwise delegates to
    [`eth_getRawTransactionByBlockHashAndIndex`{.docutils .literal
    .notranslate}]{.pre}. If a transaction is not found at specified
    arguments, throws [`web3.exceptions.TransactionNotFound`{.xref .py
    .py-class .docutils .literal .notranslate}]{.pre}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_raw_transaction_by_block('latest', 0)
        HexBytes('0x02f87582053901843b9aca00843b9aca008301d8a894e2dfcfa89a45abdc3de91f7a2844b276b8451d2e888ac7230489e8000080c001a028dcd2e11682288c00237f377280bc6a478a6b27e9c2d745262152add1b1dfcba04e7a33b7ce2a37fc3cd3af7bdc7d7beff721664d56508defa188df35afd77c2c')
        >>> web3.eth.get_raw_transaction_by_block(2, 0)
        HexBytes('0x02f87582053901843b9aca00843b9aca008301d8a894e2dfcfa89a45abdc3de91f7a2844b276b8451d2e888ac7230489e8000080c001a028dcd2e11682288c00237f377280bc6a478a6b27e9c2d745262152add1b1dfcba04e7a33b7ce2a37fc3cd3af7bdc7d7beff721664d56508defa188df35afd77c2c')
        >>> web3.eth.get_raw_transaction_by_block('0xca609fb606a04ce6aaec76415cd0b9d8c2bc83ad2a4d17db7fd403ee7d97bf40', 0)
        HexBytes('0x02f87582053901843b9aca00843b9aca008301d8a894e2dfcfa89a45abdc3de91f7a2844b276b8451d2e888ac7230489e8000080c001a028dcd2e11682288c00237f377280bc6a478a6b27e9c2d745262152add1b1dfcba04e7a33b7ce2a37fc3cd3af7bdc7d7beff721664d56508defa188df35afd77c2c')
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[wait_for_transaction_receipt]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction_hash]{.pre}]{.n}*, *[[timeout]{.pre}]{.n}[[=]{.pre}]{.o}[[120]{.pre}]{.default_value}*, *[[poll_latency]{.pre}]{.n}[[=]{.pre}]{.o}[[0.1]{.pre}]{.default_value}*[)]{.sig-paren}

:   Waits for the transaction specified by [`transaction_hash`{.docutils
    .literal .notranslate}]{.pre} to be included in a block, then
    returns its transaction receipt.

    Optionally, specify a [`timeout`{.docutils .literal
    .notranslate}]{.pre} in seconds. If timeout elapses before the
    transaction is added to a block, then
    [[`wait_for_transaction_receipt()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.wait_for_transaction_receipt "web3.eth.Eth.wait_for_transaction_receipt"){.reference
    .internal} raises a [`web3.exceptions.TimeExhausted`{.xref .py
    .py-class .docutils .literal .notranslate}]{.pre} exception.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.wait_for_transaction_receipt('0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060')
        # If transaction is not yet in a block, time passes, while the thread sleeps...
        # ...
        # Then when the transaction is added to a block, its receipt is returned:
        AttributeDict({
            'blockHash': HexBytes('0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd'),
            'blockNumber': 46147,
            'contractAddress': None,
            'cumulativeGasUsed': 21000,
            'from': '0xA1E4380A3B1f749673E270229993eE55F35663b4',
            'gasUsed': 21000,
            'logs': [],
            'logsBloom': HexBytes('0x000000000000000000000000000000000000000000000000...0000'),
            'status': 1,
            'to': '0x5DF9B87991262F6BA471F09758CDE1c0FC1De734',
            'transactionHash': HexBytes('0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060'),
            'transactionIndex': 0,
        })
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_transaction_receipt]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction_hash]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_getTransactionReceipt`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the transaction receipt specified by
    [`transaction_hash`{.docutils .literal .notranslate}]{.pre}. If the
    transaction cannot be found throws
    [`web3.exceptions.TransactionNotFound`{.xref .py .py-class .docutils
    .literal .notranslate}]{.pre}.

    If [`status`{.docutils .literal .notranslate}]{.pre} in response
    equals 1 the transaction was successful. If it is equals 0 the
    transaction was reverted by EVM.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_transaction_receipt('0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060')  # not yet mined
        Traceback # ... etc ...
        TransactionNotFound: Transaction with hash: 0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060 not found.

        # wait for it to be mined....
        >>> web3.eth.get_transaction_receipt('0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060')
        AttributeDict({
            'blockHash': '0x4e3a3754410177e6937ef1f84bba68ea139e8d1a2258c5f85db9f1cd715a1bdd',
            'blockNumber': 46147,
            'contractAddress': None,
            'cumulativeGasUsed': 21000,
            'from': '0xA1E4380A3B1f749673E270229993eE55F35663b4',
            'gasUsed': 21000,
            'logs': [],
            'logsBloom': '0x000000000000000000000000000000000000000000000000...0000',
            'status': 1, # 0 or 1
            'to': '0x5DF9B87991262F6BA471F09758CDE1c0FC1De734',
            'transactionHash': '0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060',
            'transactionIndex': 0,
        })
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_transaction_count]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[account]{.pre}]{.n}*, *[[block_identifier]{.pre}]{.n}[[=]{.pre}]{.o}[[web3.eth.default_block]{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`eth_getTransactionCount`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the number of transactions that have been sent from
    [`account`{.docutils .literal .notranslate}]{.pre} as of the block
    specified by [`block_identifier`{.docutils .literal
    .notranslate}]{.pre}.

    [`account`{.docutils .literal .notranslate}]{.pre} may be a checksum
    address or an ENS name

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.get_transaction_count('0xd3CdA913deB6f67967B99D67aCDFa1712C293601')
        340
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[send_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_sendTransaction`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Signs and sends the given [`transaction`{.docutils .literal
    .notranslate}]{.pre}

    The [`transaction`{.docutils .literal .notranslate}]{.pre} parameter
    should be a dictionary with the following fields.

    -   [`from`{.docutils .literal .notranslate}]{.pre}:
        [`bytes`{.docutils .literal .notranslate}]{.pre}` `{.docutils
        .literal .notranslate}[`or`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`text`{.docutils .literal .notranslate}]{.pre},
        checksum address or ENS name - (optional, default:
        [`web3.eth.defaultAccount`{.docutils .literal
        .notranslate}]{.pre}) The address the transaction is sent from.

    -   [`to`{.docutils .literal .notranslate}]{.pre}:
        [`bytes`{.docutils .literal .notranslate}]{.pre}` `{.docutils
        .literal .notranslate}[`or`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`text`{.docutils .literal .notranslate}]{.pre},
        checksum address or ENS name - (optional when creating new
        contract) The address the transaction is directed to.

    -   [`gas`{.docutils .literal .notranslate}]{.pre}:
        [`integer`{.docutils .literal .notranslate}]{.pre} - (optional)
        Integer of the gas provided for the transaction execution. It
        will return unused gas.

    -   [`maxFeePerGas`{.docutils .literal .notranslate}]{.pre}:
        [`integer`{.docutils .literal .notranslate}]{.pre}` `{.docutils
        .literal .notranslate}[`or`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`hex`{.docutils .literal .notranslate}]{.pre} -
        (optional) maximum amount you're willing to pay, inclusive of
        [`baseFeePerGas`{.docutils .literal .notranslate}]{.pre} and
        [`maxPriorityFeePerGas`{.docutils .literal .notranslate}]{.pre}.
        The difference between [`maxFeePerGas`{.docutils .literal
        .notranslate}]{.pre} and [`baseFeePerGas`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`+`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`maxPriorityFeePerGas`{.docutils .literal
        .notranslate}]{.pre} is refunded to the user.

    -   [`maxPriorityFeePerGas`{.docutils .literal .notranslate}]{.pre}:
        [`integer`{.docutils .literal .notranslate}]{.pre}` `{.docutils
        .literal .notranslate}[`or`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`hex`{.docutils .literal .notranslate}]{.pre} -
        (optional) the part of the fee that goes to the miner

    -   [`gasPrice`{.docutils .literal .notranslate}]{.pre}:
        [`integer`{.docutils .literal .notranslate}]{.pre} - Integer of
        the gasPrice used for each paid gas **LEGACY** - unless you have
        a good reason to use [`gasPrice`{.docutils .literal
        .notranslate}]{.pre}, use [`maxFeePerGas`{.docutils .literal
        .notranslate}]{.pre} and [`maxPriorityFeePerGas`{.docutils
        .literal .notranslate}]{.pre} instead.

    -   [`value`{.docutils .literal .notranslate}]{.pre}:
        [`integer`{.docutils .literal .notranslate}]{.pre} - (optional)
        Integer of the value send with this transaction

    -   [`data`{.docutils .literal .notranslate}]{.pre}:
        [`bytes`{.docutils .literal .notranslate}]{.pre}` `{.docutils
        .literal .notranslate}[`or`{.docutils .literal
        .notranslate}]{.pre}` `{.docutils .literal
        .notranslate}[`text`{.docutils .literal .notranslate}]{.pre} -
        The compiled code of a contract OR the hash of the invoked
        method signature and encoded parameters. For details see
        [Ethereum Contract
        ABI](https://github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI){.reference
        .external}[
        \[https://github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI\]]{.link-target}.

    -   [`nonce`{.docutils .literal .notranslate}]{.pre}:
        [`integer`{.docutils .literal .notranslate}]{.pre} - (optional)
        Integer of a nonce. This allows to overwrite your own pending
        transactions that use the same nonce.

    If the [`transaction`{.docutils .literal .notranslate}]{.pre}
    specifies a [`data`{.docutils .literal .notranslate}]{.pre} value
    but does not specify [`gas`{.docutils .literal .notranslate}]{.pre}
    then the [`gas`{.docutils .literal .notranslate}]{.pre} value will
    be populated using the [[`estimate_gas()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.estimate_gas "web3.eth.Eth.estimate_gas"){.reference
    .internal} function with an additional buffer of [`100000`{.docutils
    .literal .notranslate}]{.pre} gas up to the [`gasLimit`{.docutils
    .literal .notranslate}]{.pre} of the latest block. In the event that
    the value returned by [[`estimate_gas()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.estimate_gas "web3.eth.Eth.estimate_gas"){.reference
    .internal} method is greater than the [`gasLimit`{.docutils .literal
    .notranslate}]{.pre} a [`ValueError`{.docutils .literal
    .notranslate}]{.pre} will be raised.

    ::: {.highlight-python .notranslate}
    ::: highlight
        # simple example (web3.py and / or client determines gas and fees, typically defaults to a dynamic fee transaction post London fork)
        >>> web3.eth.send_transaction({
          'to': '0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD',
          'from': web3.eth.accounts[0],
          'value': 12345
        })

        # Dynamic fee transaction, introduced by EIP-1559:
        HexBytes('0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331')
        >>> web3.eth.send_transaction({
          'to': '0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD',
          'from': web3.eth.accounts[0],
          'value': 12345,
          'gas': 21000,
          'maxFeePerGas': web3.to_wei(250, 'gwei'),
          'maxPriorityFeePerGas': web3.to_wei(2, 'gwei'),
        })
        HexBytes('0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331')

        # Legacy transaction (less efficient)
        HexBytes('0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331')
        >>> web3.eth.send_transaction({
          'to': '0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD',
          'from': web3.eth.accounts[0],
          'value': 12345,
          'gas': 21000,
          'gasPrice': web3.to_wei(50, 'gwei'),
        })
        HexBytes('0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331')
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[sign_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_signTransaction`{.docutils .literal
        .notranslate}]{.pre} RPC Method.

    Returns a transaction that's been signed by the node's private key,
    but not yet submitted. The signed tx can be submitted with
    [`Eth.send_raw_transaction`{.docutils .literal .notranslate}]{.pre}

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> signed_txn = w3.eth.sign_transaction(dict(
            nonce=w3.eth.get_transaction_count(w3.eth.accounts[0]),
            maxFeePerGas=2000000000,
            maxPriorityFeePerGas=1000000000,
            gas=100000,
            to='0xd3CdA913deB6f67967B99D67aCDFa1712C293601',
            value=1,
            data=b'',
            )
        )
        b"\xf8d\x80\x85\x040\xe24\x00\x82R\x08\x94\xdcTM\x1a\xa8\x8f\xf8\xbb\xd2\xf2\xae\xc7T\xb1\xf1\xe9\x9e\x18\x12\xfd\x01\x80\x1b\xa0\x11\r\x8f\xee\x1d\xe5=\xf0\x87\x0en\xb5\x99\xed;\xf6\x8f\xb3\xf1\xe6,\x82\xdf\xe5\x97lF|\x97%;\x15\xa04P\xb7=*\xef \t\xf0&\xbc\xbf\tz%z\xe7\xa3~\xb5\xd3\xb7=\xc0v\n\xef\xad+\x98\xe3'"  # noqa: E501
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[send_raw_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[raw_transaction]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_sendRawTransaction`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Sends a signed and serialized transaction. Returns the transaction
    hash as a HexBytes object.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> signed_txn = w3.eth.account.sign_transaction(dict(
            nonce=w3.eth.get_transaction_count(public_address_of_senders_account),
            maxFeePerGas=3000000000,
            maxPriorityFeePerGas=2000000000,
            gas=100000,
            to='0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD',
            value=12345,
            data=b'',
            type=2,  # (optional) the type is now implicitly set based on appropriate transaction params
            chainId=1,
          ),
          private_key_for_senders_account,
        )
        >>> w3.eth.send_raw_transaction(signed_txn.raw_transaction)
        HexBytes('0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331')
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[replace_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction_hash]{.pre}]{.n}*, *[[new_transaction]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_sendTransaction`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Sends a transaction that replaces the transaction with
    [`transaction_hash`{.docutils .literal .notranslate}]{.pre}.

    The [`transaction_hash`{.docutils .literal .notranslate}]{.pre} must
    be the hash of a pending transaction.

    The [`new_transaction`{.docutils .literal .notranslate}]{.pre}
    parameter should be a dictionary with transaction fields as required
    by [[`send_transaction()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
    .internal}. It will be used to entirely replace the transaction of
    [`transaction_hash`{.docutils .literal .notranslate}]{.pre} without
    using any of the pending transaction's values.

    If the [`new_transaction`{.docutils .literal .notranslate}]{.pre}
    specifies a [`nonce`{.docutils .literal .notranslate}]{.pre} value,
    it must match the pending transaction's nonce.

    If the [`new_transaction`{.docutils .literal .notranslate}]{.pre}
    specifies [`maxFeePerGas`{.docutils .literal .notranslate}]{.pre}
    and [`maxPriorityFeePerGas`{.docutils .literal .notranslate}]{.pre}
    values, they must be greater than the pending transaction's values
    for each field, respectively.

    -   Legacy Transaction Support (Less Efficient - Not Recommended)

    If the pending transaction specified a [`gasPrice`{.docutils
    .literal .notranslate}]{.pre} value (legacy transaction), the
    [`gasPrice`{.docutils .literal .notranslate}]{.pre} value for the
    [`new_transaction`{.docutils .literal .notranslate}]{.pre} must be
    greater than the pending transaction's [`gasPrice`{.docutils
    .literal .notranslate}]{.pre}.

    If the [`new_transaction`{.docutils .literal .notranslate}]{.pre}
    does not specify any of [`gasPrice`{.docutils .literal
    .notranslate}]{.pre}, [`maxFeePerGas`{.docutils .literal
    .notranslate}]{.pre}, or [`maxPriorityFeePerGas`{.docutils .literal
    .notranslate}]{.pre} values, one of the following will happen:

    -   If the pending transaction has a [`gasPrice`{.docutils .literal
        .notranslate}]{.pre} value, this value will be used with a
        multiplier of 1.125 - This is typically the minimum
        [`gasPrice`{.docutils .literal .notranslate}]{.pre} increase a
        node requires before it accepts a replacement transaction.

    -   If a gas price strategy is set, the [`gasPrice`{.docutils
        .literal .notranslate}]{.pre} value from the gas price
        strategy(See [[Gas Price API]{.std
        .std-ref}](#gas_price.xhtml#gas-price){.reference .internal})
        will be used.

    -   If none of the above, the client will ultimately decide
        appropriate values for [`maxFeePerGas`{.docutils .literal
        .notranslate}]{.pre} and [`maxPriorityFeePerGas`{.docutils
        .literal .notranslate}]{.pre}. These will likely be default
        values and may result in an unsuccessful replacement of the
        pending transaction.

    This method returns the transaction hash of the replacement
    transaction as a HexBytes object.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> tx = web3.eth.send_transaction({
                'to': '0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD',
                'from': web3.eth.accounts[0],
                'value': 1000
            })
        HexBytes('0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331')
        >>> web3.eth.replace_transaction('0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331', {
                'to': '0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD',
                'from': web3.eth.accounts[0],
                'value': 2000
            })
        HexBytes('0x4177e670ec6431606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1528989')
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[modify_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction_hash]{.pre}]{.n}*, *[[\*\*]{.pre}]{.o}[[transaction_params]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_sendTransaction`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Sends a transaction that modifies the transaction with
    [`transaction_hash`{.docutils .literal .notranslate}]{.pre}.

    [`transaction_params`{.docutils .literal .notranslate}]{.pre} are
    keyword arguments that correspond to valid transaction parameters as
    required by [[`send_transaction()`{.xref .py .py-meth .docutils
    .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
    .internal}. The parameter values will override the pending
    transaction's values to create the replacement transaction to send.

    The same validation and defaulting rules of
    [[`replace_transaction()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.replace_transaction "web3.eth.Eth.replace_transaction"){.reference
    .internal} apply.

    This method returns the transaction hash of the newly modified
    transaction as a HexBytes object.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> tx = web3.eth.send_transaction({
                'to': '0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD',
                'from': web3.eth.accounts[0],
                'value': 1000
            })
        HexBytes('0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331')
        >>> web3.eth.modify_transaction('0xe670ec64341771606e55d6b4ca35a1a6b75ee3d5145a99d05921026d1527331', value=2000)
        HexBytes('0xec6434e6701771606e55d6b4ca35a1a6b75ee3d73315145a921026d15299d05')
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[sign]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[account]{.pre}]{.n}*, *[[data]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[hexstr]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[text]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`eth_sign`{.docutils .literal .notranslate}]{.pre}
        RPC Method

    Caller must specify exactly one of: [`data`{.docutils .literal
    .notranslate}]{.pre}, [`hexstr`{.docutils .literal
    .notranslate}]{.pre}, or [`text`{.docutils .literal
    .notranslate}]{.pre}.

    Signs the given data with the private key of the given
    [`account`{.docutils .literal .notranslate}]{.pre}. The account must
    be unlocked.

    [`account`{.docutils .literal .notranslate}]{.pre} may be a checksum
    address or an ENS name

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.sign(
              '0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD',
              text='some-text-tÃ¶-sign')
        '0x1a8bbe6eab8c72a219385681efefe565afd3accee35f516f8edf5ae82208fbd45a58f9f9116d8d88ba40fcd29076d6eada7027a3b412a9db55a0164547810cc401'

        >>> web3.eth.sign(
              '0x582AC4D8929f58c217d4a52aDD361AE470a8a4cD',
              data=b'some-text-t\xc3\xb6-sign')
        '0x1a8bbe6eab8c72a219385681efefe565afd3accee35f516f8edf5ae82208fbd45a58f9f9116d8d88ba40fcd29076d6eada7027a3b412a9db55a0164547810cc401'

        >>> web3.eth.sign(
              '0xd3CdA913deB6f67967B99D67aCDFa1712C293601',
              hexstr='0x736f6d652d746578742d74c3b62d7369676e')
        '0x1a8bbe6eab8c72a219385681efefe565afd3accee35f516f8edf5ae82208fbd45a58f9f9116d8d88ba40fcd29076d6eada7027a3b412a9db55a0164547810cc401'
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[sign_typed_data]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[account]{.pre}]{.n}*, *[[jsonMessage]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_signTypedData`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    ::: {.admonition .note}
    Note

    [`eth_signTypedData`{.docutils .literal .notranslate}]{.pre} is not
    currently supported by any major client (Besu, Erigon, Geth, or
    Nethermind)
    :::

    Please note that the [`jsonMessage`{.docutils .literal
    .notranslate}]{.pre} argument is the loaded JSON Object and **NOT**
    the JSON String itself.

    Signs the [`Structured`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`Data`{.docutils .literal .notranslate}]{.pre} (or
    [`Typed`{.docutils .literal .notranslate}]{.pre}` `{.docutils
    .literal .notranslate}[`Data`{.docutils .literal
    .notranslate}]{.pre}) with the private key of the given
    [`account`{.docutils .literal .notranslate}]{.pre}. The account must
    be unlocked.

    [`account`{.docutils .literal .notranslate}]{.pre} may be a checksum
    address or an ENS name

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[call]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*, *[[block_identifier]{.pre}]{.n}[[=]{.pre}]{.o}[[web3.eth.default_block]{.pre}]{.default_value}*, *[[state_override]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[ccip_read_enabled]{.pre}]{.n}[[=]{.pre}]{.o}[[True]{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`eth_call`{.docutils .literal .notranslate}]{.pre}
        RPC Method

    Executes the given transaction locally without creating a new
    transaction on the blockchain. Returns the return value of the
    executed contract.

    The [`transaction`{.docutils .literal .notranslate}]{.pre} parameter
    is handled in the same manner as the [[`send_transaction()`{.xref
    .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
    .internal} method.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> myContract.functions.setVar(1).transact()
        HexBytes('0x79af0c7688afba7588c32a61565fd488c422da7b5773f95b242ea66d3d20afda')
        >>> myContract.functions.getVar().call()
        1
        # The above call equivalent to the raw call:
        >>> web3.eth.call({'value': 0, 'gas': 21736, 'maxFeePerGas': 2000000000, 'maxPriorityFeePerGas': 1000000000, 'to': '0xc305c901078781C232A2a521C2aF7980f8385ee9', 'data': '0x477a5c98'})
        HexBytes('0x0000000000000000000000000000000000000000000000000000000000000001')
    :::
    :::

    In most cases it is better to make contract function call through
    the [[`web3.contract.Contract`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#web3.contract.xhtml#web3.contract.Contract "web3.contract.Contract"){.reference
    .internal} interface.

    Overriding state is a debugging feature available in Geth clients.
    View their [usage
    documentation](https://geth.ethereum.org/docs/rpc/ns-eth#3-object---state-override-set){.reference
    .external}[
    \[https://geth.ethereum.org/docs/rpc/ns-eth#3-object\-\--state-override-set\]]{.link-target}
    for a list of possible parameters.

    [EIP-3668](https://eips.ethereum.org/EIPS/eip-3668){.reference
    .external}[
    \[https://eips.ethereum.org/EIPS/eip-3668\]]{.link-target}
    introduced support for the [`OffchainLookup`{.docutils .literal
    .notranslate}]{.pre} revert / CCIP Read support. In order to
    properly handle a call to a contract function that reverts with an
    [`OffchainLookup`{.docutils .literal .notranslate}]{.pre} error for
    offchain data retrieval, the [`ccip_read_enabled`{.docutils .literal
    .notranslate}]{.pre} flag has been added to the
    [`eth_call`{.docutils .literal .notranslate}]{.pre} method.
    [`ccip_read_enabled`{.docutils .literal .notranslate}]{.pre} is
    optional, yielding the default value for CCIP Read on calls to a
    global [`global_ccip_read_enabled`{.docutils .literal
    .notranslate}]{.pre} flag on the provider which is set to
    [`True`{.docutils .literal .notranslate}]{.pre} by default. This
    means CCIP Read is enabled by default for calls, as is recommended
    in EIP-3668. Therefore, calls to contract functions that revert with
    an [`OffchainLookup`{.docutils .literal .notranslate}]{.pre} will be
    handled appropriately by default.

    The [`ccip_read_enabled`{.docutils .literal .notranslate}]{.pre}
    flag on the call will always override the value of the global flag
    on the provider for explicit control over specific calls. If the
    flag on the call is set to [`False`{.docutils .literal
    .notranslate}]{.pre}, the call will raise the
    [`OffchainLookup`{.docutils .literal .notranslate}]{.pre} instead of
    properly handling the exception according to EIP-3668. This may be
    useful for "preflighting" a transaction with a call (see [[CCIP Read
    support for offchain lookup]{.std
    .std-ref}](#web3.contract.xhtml#ccip-read-example){.reference
    .internal} within the examples section).

    If the function called results in a [`revert`{.docutils .literal
    .notranslate}]{.pre} error, a [`ContractLogicError`{.docutils
    .literal .notranslate}]{.pre} will be raised. If there is an error
    message with the error, web3.py attempts to parse the message that
    comes back and return it to the user as the error string. As of
    v6.3.0, the raw data is also returned and can be accessed via the
    [`data`{.docutils .literal .notranslate}]{.pre} attribute on
    [`ContractLogicError`{.docutils .literal .notranslate}]{.pre}.

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[simulateV1]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[payload]{.pre}]{.n}*, *[[block_identifier]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_simulateV1`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Executes a simulation for the given payload at the given block.
    Returns the simulation results.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> w3.eth.simulateV1(
        ...   {
        ...     "blockStateCalls": [
        ...       {
        ...         "blockOverrides": {
        ...           "baseFeePerGas": Wei(10),
        ...         },
        ...         "stateOverrides": {
        ...           "0xc100000000000000000000000000000000000000": {
        ...             "balance": Wei(500000000),
        ...           }
        ...         },
        ...         "calls": [
        ...           {
        ...             "from": "0xc100000000000000000000000000000000000000",
        ...             "to": "0xc100000000000000000000000000000000000000",
        ...             "maxFeePerGas": Wei(10),
        ...             "maxPriorityFeePerGas": Wei(10),
        ...           }
        ...         ],
        ...       }
        ...     ],
        ...     "validation": True,
        ...     "traceTransfers": True,
        ...   },
        ...   "latest",
        ... )
        [AttributeDict({
          'baseFeePerGas': 10,
          'blobGasUsed': 0,
          'calls': [AttributeDict({
            'returnData': HexBytes('0x'),
            'logs': [],
            'gasUsed': 21000,
            'status': 1
          })],
          'difficulty': 0,
          'excessBlobGas': 0,
          'extraData': HexBytes('0x'),
          'gasLimit': 983527531,
          'gasUsed': 21000,
          'hash': HexBytes('0xb2dba64c905dea42e940d67b8e0f44019f4a61c4833a9cba99c426b748d9e1a4'),
          'logsBloom': HexBytes('0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000'),
          'miner': '0x0000000000000000000000000000000000000000',
          'mixHash': HexBytes('0x0000000000000000000000000000000000000000000000000000000000000000'),
          'nonce': HexBytes('0x0000000000000000'),
          'number': 18,
          'parentBeaconBlockRoot': HexBytes('0x0000000000000000000000000000000000000000000000000000000000000000'),
          'parentHash': HexBytes('0x71d32db179a1291de86b5f7fa15224292ef9ee6ebb3fa62484896601d9f20d5f'),
          'receiptsRoot': HexBytes('0xf78dfb743fbd92ade140711c8bbc542b5e307f0ab7984eff35d751969fe57efa'),
          'sha3Uncles': HexBytes('0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347'),
          'size': 626,
          'stateRoot': HexBytes('0xbbbe846b616911d13780f58f500f8948e0878ba6f55cae7432da915cab3ba2b6'),
          'timestamp': 1739921487,
          'transactions': [HexBytes('0xfd801060af398c615f1ffb61586604aaf4fc688615cb1ff088531638a9b9e8e6')],
          'transactionsRoot': HexBytes('0xa6bc01d7707e94b62dccb8d097df1db25d6b44fad35463ecc99c9e5822e7aa5f'),
          'uncles': [],
          'withdrawals': [],
          'withdrawalsRoot': HexBytes('0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421')
        })]
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[create_access_list]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*, *[[block_identifier]{.pre}]{.n}[[=]{.pre}]{.o}[[web3.eth.default_block]{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`eth_createAccessList`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    This method creates an
    [EIP-2930](https://eips.ethereum.org/EIPS/eip-2930){.reference
    .external}[
    \[https://eips.ethereum.org/EIPS/eip-2930\]]{.link-target} type
    [`accessList`{.docutils .literal .notranslate}]{.pre} based on a
    given [`transaction`{.docutils .literal .notranslate}]{.pre}. The
    [`accessList`{.docutils .literal .notranslate}]{.pre} contains all
    storage slots and addresses read and written by the transaction,
    except for the sender account and the precompiles. This method uses
    the same [`transaction`{.docutils .literal .notranslate}]{.pre} call
    object and [`block_identifier`{.docutils .literal
    .notranslate}]{.pre} object as [[`call()`{.xref .py .py-meth
    .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.call "web3.eth.Eth.call"){.reference
    .internal}. An [`accessList`{.docutils .literal .notranslate}]{.pre}
    can be used to access contracts that became inaccessible due to gas
    cost increases.

    The [`transaction`{.docutils .literal .notranslate}]{.pre} parameter
    is handled in the same manner as the [[`send_transaction()`{.xref
    .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
    .internal} method. The optional [`block_identifier`{.docutils
    .literal .notranslate}]{.pre} parameter is a block_number or
    [`latest`{.docutils .literal .notranslate}]{.pre} or
    [`pending`{.docutils .literal .notranslate}]{.pre}. Default is
    [`latest`{.docutils .literal .notranslate}]{.pre}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> w3.eth.create_access_list(
        ...     {
        ...         "to": to_checksum_address("0xF0109fC8DF283027b6285cc889F5aA624EaC1F55"),
        ...         "gasPrice": 10**11,
        ...         "value": 0,
        ...         "data": "0x608060806080608155",
        ...     },
        ...     "pending",
        ... )
        AttributeDict({
            "accessList": [
                AttributeDict({
                    "address": "0xde0B295669a9FD93d5F28D9Ec85E40f4cb697BAe",
                    "storageKeys": [
                        "0x0000000000000000000000000000000000000000000000000000000000000003",
                        "0x0000000000000000000000000000000000000000000000000000000000000007",
                    ]
                }),
                AttributeDict({
                    "address": "0xBB9bc244D798123fDe783fCc1C72d3Bb8C189413",
                    "storageKeys": []
                }),
            ],
            "gasUsed": 21000
        })
    :::
    :::

    The method [`eth_createAccessList`{.docutils .literal
    .notranslate}]{.pre} returns a list of addresses and storage keys
    used by the transaction, plus the gas consumed when the
    [`accessList`{.docutils .literal .notranslate}]{.pre} is included.
    Like [`eth_estimateGas`{.docutils .literal .notranslate}]{.pre},
    this is an estimation; the list could change when the transaction is
    actually finalized. Adding an [`accessList`{.docutils .literal
    .notranslate}]{.pre} to your transaction does not necessarily result
    in lower gas usage compared to a transaction without an
    [`accessList`{.docutils .literal .notranslate}]{.pre}.

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[fee_history]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[block_count]{.pre}]{.n}*, *[[newest_block]{.pre}]{.n}*, *[[reward_percentiles]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`eth_feeHistory`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns transaction fee data for up to 1,024 blocks.

    Parameters[:]{.colon}

    :   -   **block_count**
            ([*int*](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/functions.html#int\]]{.link-target}
            *or* *hexstring*) -- The number of blocks in the requested
            range. Depending on the client, this value should be either
            a [[`int`{.xref .py .py-class .docutils .literal
            .notranslate}]{.pre}](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/functions.html#int\]]{.link-target}
            between 1 and 1024 or a hexstring. Less than requested may
            be returned if not all blocks are available.

        -   **newest_block**
            ([*int*](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/functions.html#int\]]{.link-target}
            *or* *BlockParams*) -- The newest, highest-numbered, block
            in the requested range. This value may be an [[`int`{.xref
            .py .py-class .docutils .literal
            .notranslate}]{.pre}](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/functions.html#int\]]{.link-target}
            or one of the predefined block parameters
            [`'latest'`{.docutils .literal .notranslate}]{.pre},
            [`'earliest'`{.docutils .literal .notranslate}]{.pre}, or
            [`'pending'`{.docutils .literal .notranslate}]{.pre}.

        -   **reward_percentiles**
            (*List\[*[*float*](https://docs.python.org/3/library/functions.html#float "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/functions.html#float\]]{.link-target}*\]
            or* *None*) -- *(optional)* A monotonically increasing list
            of percentile [[`float`{.xref .py .py-class .docutils
            .literal
            .notranslate}]{.pre}](https://docs.python.org/3/library/functions.html#float "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/functions.html#float\]]{.link-target}
            values to sample from each block's effective priority fees
            per gas in ascending order, weighted by gas used.

    Returns[:]{.colon}

    :   An [`AttributeDict`{.docutils .literal .notranslate}]{.pre}
        containing the following keys:

    -   **oldestBlock** *(int)* -- The oldest, lowest-numbered, block in
        the range requested as a [`BlockNumber`{.docutils .literal
        .notranslate}]{.pre} type with [[`int`{.xref .py .py-class
        .docutils .literal
        .notranslate}]{.pre}](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference
        .external}[
        \[https://docs.python.org/3/library/functions.html#int\]]{.link-target}
        value.

    -   **baseFeePerGas** *(List\[Wei\])* -- An array of block base fees
        per gas. This includes the next block after the newest of the
        returned range, because this value can be derived from the
        newest block. Zeroes are returned for pre-EIP-1559 blocks.

    -   **gasUsedRatio** *(List\[float\])* -- An array of
        [`gasUsed`{.docutils .literal
        .notranslate}]{.pre}/[`gasLimit`{.docutils .literal
        .notranslate}]{.pre} float values for the requested blocks.

    -   **reward** *(List\[List\[Wei\]\])* -- *(optional)* A
        two-dimensional array of effective priority fees per gas at the
        requested block percentiles.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> w3.eth.fee_history(4, 'latest', [10, 90])
        AttributeDict({
            'oldestBlock': 3,
            'reward': [[220, 7145389], [1000000, 6000213], [550, 550], [125, 12345678]],
            'baseFeePerGas': [202583058, 177634473, 155594425, 136217133, 119442408],
            'gasUsedRatio': [0.007390479689642084, 0.0036988514889990873, 0.0018512333048507866, 0.00741217041320997]
        })
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[estimate_gas]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction]{.pre}]{.n}*, *[[block_identifier]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[state_override]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`eth_estimateGas`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Executes the given transaction locally without creating a new
    transaction on the blockchain. Returns amount of gas consumed by
    execution which can be used as a gas estimate.

    The [`transaction`{.docutils .literal .notranslate}]{.pre} and
    [`block_identifier`{.docutils .literal .notranslate}]{.pre}
    parameters are handled in the same manner as the
    [[`send_transaction()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
    .internal} method.

    The [`state_override`{.docutils .literal .notranslate}]{.pre} is
    useful when there is a chain of transaction calls. It overrides
    state so that the gas estimate of a transaction is accurate in cases
    where prior calls produce side effects.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.estimate_gas({'to': '0xd3CdA913deB6f67967B99D67aCDFa1712C293601', 'from':web3.eth.accounts[0], 'value': 12345})
        21000
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[generate_gas_price]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction_params]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Uses the selected gas price strategy to calculate a gas price. This
    method returns the gas price denominated in wei.

    The [`transaction_params`{.docutils .literal .notranslate}]{.pre}
    argument is optional however some gas price strategies may require
    it to be able to produce a gas price.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.generate_gas_price()
        20000000000
    :::
    :::

    ::: {.admonition .note}
    Note

    For information about how gas price can be customized in web3 see
    [[Gas Price API]{.std
    .std-ref}](#gas_price.xhtml#gas-price){.reference .internal}.
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[set_gas_price_strategy]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[gas_price_strategy]{.pre}]{.n}*[)]{.sig-paren}

:   Set the selected gas price strategy. It must be a method of the
    signature [`(web3,`{.docutils .literal
    .notranslate}]{.pre}` `{.docutils .literal
    .notranslate}[`transaction_params)`{.docutils .literal
    .notranslate}]{.pre} and return a gas price denominated in wei.

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[subscribe]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[subscription_identifier]{.pre}]{.n}*, *[[subscription_params]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_subscribe`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Only available on persistent connection providers:
    [[`WebSocketProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.WebSocketProvider "web3.providers.persistent.WebSocketProvider"){.reference
    .internal} and [[`AsyncIPCProvider`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.AsyncIPCProvider "web3.providers.persistent.AsyncIPCProvider"){.reference
    .internal}.

    Returns a subscription ID that can be used to track a particular
    subscription to, or unsubscribe from, an event. For usage examples
    see the docs on [[Using Persistent Connection Providers]{.std
    .std-ref}](#providers.xhtml#subscription-examples){.reference
    .internal}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> subscription_id = await web3.eth.subscribe('newHeaders')
        >>> subscription_id
        '0xbd63bb89e7475591a0a6fc9014307bc4'
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[unsubscribe]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[subscription_id]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_unsubscribe`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Only available on persistent connection providers:
    [[`WebSocketProvider`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.WebSocketProvider "web3.providers.persistent.WebSocketProvider"){.reference
    .internal} and [[`AsyncIPCProvider`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#providers.xhtml#web3.providers.persistent.AsyncIPCProvider "web3.providers.persistent.AsyncIPCProvider"){.reference
    .internal}.

    Returns [`True`{.docutils .literal .notranslate}]{.pre} if
    successfully unsubscribed. For usage examples see the docs on
    [[Using Persistent Connection Providers]{.std
    .std-ref}](#providers.xhtml#subscription-examples){.reference
    .internal}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> result = await web3.eth.unsubscribe(subscription_id)
        >>> result
        True
    :::
    :::
:::

::: {#web3.eth.xhtml#filters .section}
## Filters

The following methods are available on the [`web3.eth`{.docutils
.literal .notranslate}]{.pre} object for interacting with the filtering
API.

[[Eth.]{.pre}]{.sig-prename .descclassname}[[filter]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[filter_params]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_newFilter`{.docutils .literal
        .notranslate}]{.pre}, [`eth_newBlockFilter`{.docutils .literal
        .notranslate}]{.pre}, and
        [`eth_newPendingTransactionFilter`{.docutils .literal
        .notranslate}]{.pre} RPC Methods.

    This method delegates to one of three RPC methods depending on the
    value of [`filter_params`{.docutils .literal .notranslate}]{.pre}.

    -   If [`filter_params`{.docutils .literal .notranslate}]{.pre} is
        the string [`'pending'`{.docutils .literal .notranslate}]{.pre}
        then a new filter is registered using the
        [`eth_newPendingTransactionFilter`{.docutils .literal
        .notranslate}]{.pre} RPC method. This will create a new filter
        that will be called for each new unmined transaction that the
        node receives.

    -   If [`filter_params`{.docutils .literal .notranslate}]{.pre} is
        the string [`'latest'`{.docutils .literal .notranslate}]{.pre}
        then a new filter is registered using the
        [`eth_newBlockFilter`{.docutils .literal .notranslate}]{.pre}
        RPC method. This will create a new filter that will be called
        each time the node receives a new block.

    -   If [`filter_params`{.docutils .literal .notranslate}]{.pre} is a
        dictionary then a new filter is registered using the
        [`eth_newFilter`{.docutils .literal .notranslate}]{.pre} RPC
        method. This will create a new filter that will be called for
        all log entries that match the provided
        [`filter_params`{.docutils .literal .notranslate}]{.pre}.

    This method returns a [`web3.utils.filters.Filter`{.docutils
    .literal .notranslate}]{.pre} object which can then be used to
    either directly fetch the results of the filter or to register
    callbacks which will be called with each result of the filter.

    When creating a new log filter, the [`filter_params`{.docutils
    .literal .notranslate}]{.pre} should be a dictionary with the
    following keys. Note that the keys are camel-cased strings, as is
    expected in a JSON-RPC request.

    -   [`fromBlock`{.docutils .literal .notranslate}]{.pre}:
        [`integer/tag`{.docutils .literal .notranslate}]{.pre} -
        (optional, default: "latest") Integer block number, or one of
        predefined block identifiers "latest", "pending", "earliest",
        "safe", or "finalized".

    -   [`toBlock`{.docutils .literal .notranslate}]{.pre}:
        [`integer/tag`{.docutils .literal .notranslate}]{.pre} -
        (optional, default: "latest") Integer block number, or one of
        predefined block identifiers "latest", "pending", "earliest",
        "safe", or "finalized".

    -   [`address`{.docutils .literal .notranslate}]{.pre}:
        [`string`{.docutils .literal .notranslate}]{.pre} or list of
        [`strings`{.docutils .literal .notranslate}]{.pre}, each 20
        Bytes - (optional) Contract address or a list of addresses from
        which logs should originate.

    -   [`topics`{.docutils .literal .notranslate}]{.pre}: list of 32
        byte [`strings`{.docutils .literal .notranslate}]{.pre} or
        [`null`{.docutils .literal .notranslate}]{.pre} - (optional)
        Array of topics that should be used for filtering. Topics are
        order-dependent. This parameter can also be a list of topic
        lists in which case filtering will match any of the provided
        topic arrays.

    ::: {.admonition .note}
    Note

    Though [`"latest"`{.docutils .literal .notranslate}]{.pre} and
    [`"safe"`{.docutils .literal .notranslate}]{.pre} block identifiers
    are not yet part of the specifications for
    [`eth_newFilter`{.docutils .literal .notranslate}]{.pre}, they are
    supported by web3.py and may or may not yield expected results
    depending on the node being accessed.
    :::

    See [[Events and Logs]{.doc}](#filters.xhtml){.reference .internal}
    for more information about filtering.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.eth.filter('latest')
        <BlockFilter at 0x10b72dc28>
        >>> web3.eth.filter('pending')
        <TransactionFilter at 0x10b780340>
        >>> web3.eth.filter({'fromBlock': 1000000, 'toBlock': 1000100, 'address': '0x6C8f2A135f6ed072DE4503Bd7C4999a1a17F824B'})
        <LogFilter at 0x10b7803d8>
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_filter_changes]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[self]{.pre}]{.n}*, *[[filter_id]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_getFilterChanges`{.docutils .literal
        .notranslate}]{.pre} RPC Method.

    Returns all new entries which occurred since the last call to this
    method for the given [`filter_id`{.docutils .literal
    .notranslate}]{.pre}

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> filter = web3.eth.filter()
        >>> web3.eth.get_filter_changes(filter.filter_id)
        [
            {
                'address': '0xDc3A9Db694BCdd55EBaE4A89B22aC6D12b3F0c24',
                'blockHash': '0xb72256286ca528e09022ffd408856a73ef90e7216ac560187c6e43b4c4efd2f0',
                'blockNumber': 2217196,
                'data': '0x0000000000000000000000000000000000000000000000000000000000000001',
                'logIndex': 0,
                'topics': ['0xe65b00b698ba37c614af350761c735c5f4a82b4ab365a1f1022d49d9dfc8e930',
                '0x000000000000000000000000754c50465885f1ed1fa1a55b95ee8ecf3f1f4324',
                '0x296c7fb6ccafa3e689950b947c2895b07357c95b066d5cdccd58c301f41359a3'],
                'transactionHash': '0xfe1289fd3915794b99702202f65eea2e424b2f083a12749d29b4dd51f6dce40d',
                'transactionIndex': 1,
            },
            ...
        ]
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_filter_logs]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[self]{.pre}]{.n}*, *[[filter_id]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_getFilterLogs`{.docutils .literal
        .notranslate}]{.pre} RPC Method.

    Returns all entries for the given [`filter_id`{.docutils .literal
    .notranslate}]{.pre}

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> filter = web3.eth.filter()
        >>> web3.eth.get_filter_logs(filter.filter_id)
        [
            {
                'address': '0xDc3A9Db694BCdd55EBaE4A89B22aC6D12b3F0c24',
                'blockHash': '0xb72256286ca528e09022ffd408856a73ef90e7216ac560187c6e43b4c4efd2f0',
                'blockNumber': 2217196,
                'data': '0x0000000000000000000000000000000000000000000000000000000000000001',
                'logIndex': 0,
                'topics': ['0xe65b00b698ba37c614af350761c735c5f4a82b4ab365a1f1022d49d9dfc8e930',
                '0x000000000000000000000000754c50465885f1ed1fa1a55b95ee8ecf3f1f4324',
                '0x296c7fb6ccafa3e689950b947c2895b07357c95b066d5cdccd58c301f41359a3'],
                'transactionHash': '0xfe1289fd3915794b99702202f65eea2e424b2f083a12749d29b4dd51f6dce40d',
                'transactionIndex': 1,
            },
            ...
        ]
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[uninstall_filter]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[self]{.pre}]{.n}*, *[[filter_id]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`eth_uninstallFilter`{.docutils .literal
        .notranslate}]{.pre} RPC Method.

    Uninstalls the filter specified by the given [`filter_id`{.docutils
    .literal .notranslate}]{.pre}. Returns boolean as to whether the
    filter was successfully uninstalled.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> filter = web3.eth.filter()
        >>> web3.eth.uninstall_filter(filter.filter_id)
        True
        >>> web3.eth.uninstall_filter(filter.filter_id)
        False  # already uninstalled.
    :::
    :::

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[get_logs]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[filter_params]{.pre}]{.n}*[)]{.sig-paren}

:   This is the equivalent of: creating a new filter, running
    [[`get_filter_logs()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.get_filter_logs "web3.eth.Eth.get_filter_logs"){.reference
    .internal}, and then uninstalling the filter. See [[`filter()`{.xref
    .py .py-meth .docutils .literal
    .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.filter "web3.eth.Eth.filter"){.reference
    .internal} for details on allowed filter parameters.
:::

::: {#web3.eth.xhtml#contracts .section}
## Contracts

[[Eth.]{.pre}]{.sig-prename .descclassname}[[contract]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[address]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[contract_name]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*, *[[ContractFactoryClass]{.pre}]{.n}[[=]{.pre}]{.o}[[Contract]{.pre}]{.default_value}*, *[[\*\*]{.pre}]{.o}[[contract_factory_kwargs]{.pre}]{.n}*[)]{.sig-paren}

:   If [`address`{.docutils .literal .notranslate}]{.pre} is provided,
    then this method will return an instance of the contract defined by
    [`abi`{.docutils .literal .notranslate}]{.pre}. The address may be a
    checksum string, or an ENS name like [`'mycontract.eth'`{.docutils
    .literal .notranslate}]{.pre}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        from web3 import Web3

        w3 = Web3(...)

        contract = w3.eth.contract(address='0x000000000000000000000000000000000000dEaD', abi=...)

        # alternatively:
        contract = w3.eth.contract(address='mycontract.eth', abi=...)
    :::
    :::

    ::: {.admonition .note}
    Note

    If you use an ENS name to initialize a contract, the contract will
    be looked up by name on each use. If the name could ever change
    maliciously, first [[Get the Address for an ENS Name]{.std
    .std-ref}](#ens_overview.xhtml#ens-get-address){.reference
    .internal}, and then create the contract with the checksum address.
    :::

    If [`address`{.docutils .literal .notranslate}]{.pre} is *not*
    provided, the newly created contract class will be returned. That
    class will then be initialized by supplying the address.

    ::: {.highlight-python .notranslate}
    ::: highlight
        from web3 import Web3

        w3 = Web3(...)

        Contract = w3.eth.contract(abi=...)

        # later, initialize contracts with the same metadata at different addresses:
        contract1 = Contract(address='0x000000000000000000000000000000000000dEaD')
        contract2 = Contract(address='mycontract.eth')
    :::
    :::

    [`contract_name`{.docutils .literal .notranslate}]{.pre} will be
    used as the name of the contract class. If it is [`None`{.docutils
    .literal .notranslate}]{.pre} then the name of the
    [`ContractFactoryClass`{.docutils .literal .notranslate}]{.pre} will
    be used.

    [`ContractFactoryClass`{.docutils .literal .notranslate}]{.pre} will
    be used as the base Contract class.

    The following arguments are accepted for contract class creation.

    Parameters[:]{.colon}

    :   -   **abi** (*ABI*) -- Application Binary Interface. Usually
            provided since an [`abi`{.docutils .literal
            .notranslate}]{.pre} is required to interact with any
            contract.

        -   **asm** -- Assembly code generated by the compiler

        -   **ast** -- Abstract Syntax Tree of the contract generated by
            the compiler

        -   **bytecode** -- Bytecode of the contract generated by the
            compiler

        -   **bytecode_runtime** -- Bytecode stored at the contract
            address, excludes the constructor and initialization code

        -   **clone_bin**

        -   **dev_doc**

        -   **decode_tuples** -- Optionally convert tuples/structs to
            named tuples

        -   **interface**

        -   **metadata** -- Contract Metadata generated by the compiler

        -   **opcodes** -- Opcodes for the contract generated by the
            compiler

        -   **src_map**

        -   **src_map_runtime**

        -   **user_doc**

    Returns[:]{.colon}

    :   Instance of the contract

    Return type[:]{.colon}

    :   [Contract](#web3.contract.xhtml#web3.contract.Contract "web3.contract.Contract"){.reference
        .internal}

    Raises[:]{.colon}

    :   -   [**TypeError**](https://docs.python.org/3/library/exceptions.html#TypeError "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/exceptions.html#TypeError\]]{.link-target}
            -- If the address is not provided

        -   [**AttributeError**](https://docs.python.org/3/library/exceptions.html#AttributeError "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/exceptions.html#AttributeError\]]{.link-target}
            -- If the contract class is not initialized

    See the [[Contracts]{.doc}](#web3.contract.xhtml){.reference
    .internal} documentation for more information about Contracts.

```{=html}
<!-- -->
```

[[Eth.]{.pre}]{.sig-prename .descclassname}[[set_contract_factory]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[contractFactoryClass]{.pre}]{.n}*[)]{.sig-paren}

:   Modify the default contract factory from [`Contract`{.docutils
    .literal .notranslate}]{.pre} to [`contractFactoryClass`{.docutils
    .literal .notranslate}]{.pre}. Future calls to
    [`Eth.contract()`{.docutils .literal .notranslate}]{.pre} will then
    default to [`contractFactoryClass`{.docutils .literal
    .notranslate}]{.pre}.
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#web3.beacon.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#web3.beacon.xhtml#beacon-api .section}
# Beacon API

::: {.admonition .warning}
Warning

This API Is experimental. Client support is incomplete and the API
itself is still evolving.
:::

To use this API, you'll need a beacon node running locally or remotely.
To set that up, refer to the documentation of your specific client.

Once you have a running beacon node, import and configure your beacon
instance:

::: {.highlight-python .notranslate}
::: highlight
    >>> from web3.beacon import Beacon
    >>> beacon = Beacon("http://localhost:5051")
:::
:::

::: {#web3.beacon.xhtml#methods .section}
## Methods

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_genesis]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_genesis()
        {
          'data': {
            'genesis_time': '1605700807',
            'genesis_validators_root': '0x9436e8a630e3162b7ed4f449b12b8a5a368a4b95bc46b941ae65c11613bfa4c1',
            'genesis_fork_version': '0x00002009'
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_hash_root]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[state_id]{.pre}]{.n}[[=]{.pre}]{.o}[[\'head\']{.pre}]{.default_value}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_hash_root()
        {
          "data": {
            "root":"0xbb399fda70617a6f198b3d9f1c1cdbd70077677231b84f34e58568c9dc903558"
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_fork_data]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[state_id]{.pre}]{.n}[[=]{.pre}]{.o}[[\'head\']{.pre}]{.default_value}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_fork_data()
        {
          'data': {
            'previous_version': '0x00002009',
            'current_version': '0x00002009',
            'epoch': '0'
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_finality_checkpoint]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[state_id]{.pre}]{.n}[[=]{.pre}]{.o}[[\'head\']{.pre}]{.default_value}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_finality_checkpoint()
        {
          'data': {
            'previous_justified': {
              'epoch': '5024',
              'root': '0x499ba555e8e8be639dd84be1be6d54409738facefc662f37d97065aa91a1a8d4'
            },
            'current_justified': {
              'epoch': '5025',
              'root': '0x34e8a230f11536ab2ec56a0956e1f3b3fd703861f96d4695877eaa48fbacc241'
            },
            'finalized': {
              'epoch': '5024',
              'root': '0x499ba555e8e8be639dd84be1be6d54409738facefc662f37d97065aa91a1a8d4'
            }
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_validators]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[state_id]{.pre}]{.n}[[=]{.pre}]{.o}[[\'head\']{.pre}]{.default_value}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_validators()
         {
           'data': [
             {
               'index': '110280',
               'balance': '32000000000',
               'status': 'pending_queued',
               'validator': {
                 'pubkey': '0x99d37d1f7dd15859995330f75c158346f86d298e2ffeedfbf1b38dcf3df89a7dbd1b34815f3bcd1b2a5588592a35b783',
                 'withdrawal_credentials': '0x00f338cfdb0c22bb85beed9042bd19fff58ad6421c8a833f8bc902b7cca06f5f',
                 'effective_balance': '32000000000',
                 'slashed': False,
                 'activation_eligibility_epoch': '5029',
                 'activation_epoch': '18446744073709551615',
                 'exit_epoch': '18446744073709551615',
                 'withdrawable_epoch': '18446744073709551615'
               }
             },
             ...
           ]
         }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_validator]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[validator_id]{.pre}]{.n}*, *[[state_id]{.pre}]{.n}[[=]{.pre}]{.o}[[\'head\']{.pre}]{.default_value}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_validator(110280)
        {
          'data': {
            'index': '110280',
            'balance': '32000000000',
            'status': 'pending_queued',
            'validator': {
              'pubkey': '0x99d37d1f7dd15859995330f75c158346f86d298e2ffeedfbf1b38dcf3df89a7dbd1b34815f3bcd1b2a5588592a35b783',
              'withdrawal_credentials': '0x00f338cfdb0c22bb85beed9042bd19fff58ad6421c8a833f8bc902b7cca06f5f',
              'effective_balance': '32000000000',
              'slashed': False,
              'activation_eligibility_epoch': '5029',
              'activation_epoch': '18446744073709551615',
              'exit_epoch': '18446744073709551615',
              'withdrawable_epoch': '18446744073709551615'
            }
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_validator_balances]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[state_id]{.pre}]{.n}[[=]{.pre}]{.o}[[\'head\']{.pre}]{.default_value}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_validator_balances()
        {
          'data': [
            {
              'index': '110278',
              'balance': '32000000000'
            },
            ...
          ]
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_epoch_committees]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[state_id]{.pre}]{.n}[[=]{.pre}]{.o}[[\'head\']{.pre}]{.default_value}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_epoch_committees()
        {
          'data': [
            {
              'slot': '162367',
              'index': '25',
              'validators': ['50233', '36829', '84635', ...],
            },
            ...
          ]
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_block_headers]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_block_headers()
        {
          'data': [
            {
              'root': '0xa3873e7b1e0bcc7c59013340cfea59dff16e42e79825e7b8ab6c243dbafd4fe0',
              'canonical': True,
              'header': {
                'message': {
                  'slot': '163587',
                  'proposer_index': '69198',
                  'parent_root': '0xc32558881dbb791ef045c48e3709a0978dc445abee4ae34d30df600eb5fbbb3d',
                  'state_root': '0x4dc0a72959803a84ee0231160b05dda76a91b8f8b77220b4cfc7db160840b8a8',
                  'body_root': '0xa3873e7b1e0bcc7c59013340cfea59dff16e42e79825e7b8ab6c243dbafd4fe0'
                },
                'signature': '0x87b549448d36e5e8b1783944b5511a05f34bb78ad3fcbf71a1adb346eed363d46e50d51ac53cd23bd03d0107d064e05913a6ef10f465f9171aba3b2b8a7a4d621c9e18d5f148813295a2d5aa5053029ccbd88cec72130833de2b4b7addf7faca'
              }
            }
          ]
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_block_header]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[block_id]{.pre}]{.n}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_block_header(1)
        {
          'data': {
            root': '0x30c04689dd4f6cd4d56eb78f72727d2d16d8b6346724e4a88f546875f11b750d',
            'canonical': True,
            'header': {
              'message': {
                'slot': '1',
                'proposer_index': '61090',
                'parent_root': '0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87',
                'state_root': '0x7773ed5a7e944c6238cd0a5c32170663ef2be9efc594fb43ad0f07ecf4c09d2b',
                'body_root': '0x30c04689dd4f6cd4d56eb78f72727d2d16d8b6346724e4a88f546875f11b750d'
              },
              'signature': '0xa30d70b3e62ff776fe97f7f8b3472194af66849238a958880510e698ec3b8a470916680b1a82f9d4753c023153fbe6db10c464ac532c1c9c8919adb242b05ef7152ba3e6cd08b730eac2154b9802203ead6079c8dfb87f1e900595e6c00b4a9a'
            }
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_block]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[block_id]{.pre}]{.n}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_block(1)
        {
          'data': {
            'message': {
              'slot': '1',
              'proposer_index': '61090',
              'parent_root': '0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87',
              'state_root': '0x7773ed5a7e944c6238cd0a5c32170663ef2be9efc594fb43ad0f07ecf4c09d2b',
              'body': {
                'randao_reveal': '0x8e245a52a0a680fcfe789013e123880c321f237de10cad108dc55dd47290d7cfe50cdaa003c6f783405efdac48cef44e152493abba40d9f9815a060dd6151cb0635906c9e3c1ad4859cada73ccd2d6b8747e4aeeada7d75d454bcc8672afa813',
                'eth1_data': {
                  'deposit_root': '0x4e910ac762815c13e316e72506141f5b6b441d58af8e0a049cd3341c25728752',
                  'deposit_count': '100596',
                  'block_hash': '0x89cb78044843805fb4dab8abd743fc96c2b8e955c58f9b7224d468d85ef57130'
                },
                'graffiti': '0x74656b752f76302e31322e31342b34342d673863656562663600000000000000',
                'proposer_slashings': [],
                'attester_slashings': [],
                'attestations': [
                  {
                    'aggregation_bits': '0x0080020004000000008208000102000905',
                    'data': {
                      'slot': '0',
                      'index': '7',
                      'beacon_block_root': '0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87',
                      'source': {
                        'epoch': '0',
                        'root': '0x0000000000000000000000000000000000000000000000000000000000000000'
                      },
                      'target': {
                        'epoch': '0',
                        'root': '0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87'
                      }
                    },
                    'signature': '0x967dd2946358db7e426ed19d4576bc75123520ef6a489ca50002222070ee4611f9cef394e5e3071236a93b825f18a4ad07f1d5a1405e6c984f1d71e03f535d13a2156d6ba22cb0c2b148df23a7b8a7293315d6e74b9a26b64283e8393f2ad4c5'
                  }
                ],
                'deposits': [],
                'voluntary_exits': []
              }
            },
            'signature': '0xa30d70b3e62ff776fe97f7f8b3472194af66849238a958880510e698ec3b8a470916680b1a82f9d4753c023153fbe6db10c464ac532c1c9c8919adb242b05ef7152ba3e6cd08b730eac2154b9802203ead6079c8dfb87f1e900595e6c00b4a9a'
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_block_root]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[block_id]{.pre}]{.n}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_block_root(1)
        {
          'data': {
            'root': '0x30c04689dd4f6cd4d56eb78f72727d2d16d8b6346724e4a88f546875f11b750d'
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_block_attestations]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[block_id]{.pre}]{.n}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_block_attestations(1)
        {
          'data': [
            {
              'aggregation_bits': '0x0080020004000000008208000102000905',
              'data': {
                'slot': '0',
                'index': '7',
                'beacon_block_root': '0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87',
                'source': {
                  'epoch': '0',
                  'root': '0x0000000000000000000000000000000000000000000000000000000000000000'
                },
                'target': {
                  'epoch': '0',
                  'root': '0x6a89af5df908893eedbed10ba4c13fc13d5653ce57db637e3bfded73a987bb87'
                }
              },
              'signature': '0x967dd2946358db7e426ed19d4576bc75123520ef6a489ca50002222070ee4611f9cef394e5e3071236a93b825f18a4ad07f1d5a1405e6c984f1d71e03f535d13a2156d6ba22cb0c2b148df23a7b8a7293315d6e74b9a26b64283e8393f2ad4c5'
            },
            ...
          ]
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_attestations]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_attestations()
        {'data': []}
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_attester_slashings]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_attester_slashings()
        {'data': []}
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_proposer_slashings]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_proposer_slashings()
        {'data': []}
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_voluntary_exits]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_voluntary_exits()
        {'data': []}
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_fork_schedule]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_fork_schedule()
        {
          'data': [
            {
              'previous_version': '0x00002009',
              'current_version': '0x00002009',
              'epoch': '0'
            }
          ]
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_spec]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_spec()
        {
          'data': {
            'DEPOSIT_CONTRACT_ADDRESS': '0x8c5fecdC472E27Bc447696F431E425D02dd46a8c',
            'MIN_ATTESTATION_INCLUSION_DELAY': '1',
            'SLOTS_PER_EPOCH': '32',
            'SHUFFLE_ROUND_COUNT': '90',
            'MAX_EFFECTIVE_BALANCE': '32000000000',
            'DOMAIN_BEACON_PROPOSER': '0x00000000',
            'MAX_ATTESTER_SLASHINGS': '2',
            'DOMAIN_SELECTION_PROOF': '0x05000000',
            ...
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_deposit_contract]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_deposit_contract()
        {
          'data': {
            'chain_id': '5',
            'address': '0x8c5fecdC472E27Bc447696F431E425D02dd46a8c'
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_beacon_state]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[state_id]{.pre}]{.n}[[=]{.pre}]{.o}[[\'head\']{.pre}]{.default_value}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_beacon_state()
        {
          'data': {
            'genesis_time': '1',
            'genesis_validators_root': '0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2',
            'slot': '1',
            'fork': {
              'previous_version': '0x00000000',
              'current_version': '0x00000000',
              'epoch': '1'
            },
            'latest_block_header': {
              'slot': '1',
              'proposer_index': '1',
              'parent_root': '0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2',
              'state_root': '0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2',
              'body_root': '0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2'
            },
            'block_roots': ['0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2'],
            'state_roots': ['0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2'],
            'historical_roots': ['0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2'],
            'eth1_data': {
              'deposit_root': '0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2',
              'deposit_count': '1',
              'block_hash': '0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2'
            },
            'eth1_data_votes': [...],
            'eth1_deposit_index': '1',
            'validators': [...],
            'balances': [...],
            'randao_mixes': [...],
            'slashings': [...],
            'previous_epoch_attestations': [...],
            'current_epoch_attestations': [...],
            'justification_bits': '0x0f',
            'previous_justified_checkpoint': {
              'epoch': '5736',
              'root': '0xec7ef54f1fd81bada8170dd0cb6be8216f8ee2f445e6936f95f5c6894a4a3b38'
            },
            'current_justified_checkpoint': {
              'epoch': '5737',
              'root': '0x781f0166e34c361ce2c88070c1389145abba2836edcb446338a2ca2b0054826e'
            },
            'finalized_checkpoint': {
              'epoch': '5736',
              'root': '0xec7ef54f1fd81bada8170dd0cb6be8216f8ee2f445e6936f95f5c6894a4a3b38'
            }
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_beacon_heads]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_beacon_heads()
        {
          'data': [
            {
              'slot': '221600',
              'root': '0x9987754077fe6100a60c75d81a51b1ef457d019404d1546a66f4f5d6c23fae45'
            }
          ]
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_blob_sidecars]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[block_id]{.pre}]{.n}*, *[[indices]{.pre}]{.n}[[=]{.pre}]{.o}[[\[\]]{.pre}]{.default_value}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_blob_sidecars(1, indices=[1])
        {
          "data": [
            {
              "index": "1",
              "blob": ..., # omitted
              "kzg_commitment": "0x93247f2209abcacf57b75a51dafae777f9dd38bc7053d1af526f220a7489a6d3a2753e5f3e8b1cfe39b56f43611df74a",
              "kzg_proof": "0x7FB0A12D11Ffe8A48c2fF80dCA17adbCC1da5F6aADaAEF2b338717dcDEECf6DaB9FD7C4e4265CfBc097cD31dCB19E836",
              "signed_block_header": {
                "message": {
                  "slot": "1",
                  "proposer_index": "1",
                  "parent_root": "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                  "state_root": "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                  "body_root": "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2"
                },
                "signature": "0x1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505cc411d61252fb6cb3fa0017b679f8bb2305b26a285fa2737f175668d0dff91cc1b66ac1fb663c9bc59509846d6ec05345bd908eda73e670af888da41af171505"
              },
              "kzg_commitment_inclusion_proof": [
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2",
                "0xcf8e0d4e9587369b2301d0790347320302cc0943d5a1884560367e8208d920f2"
              ]
            }
          ]
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_node_identity]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_node_identity()
        {
          'data': {
            'peer_id': '16Uiu2HAmLZ1CYVFKpa3wwn4cnknZqosum8HX3GHDhUpEULQc9ixE',
            'enr': 'enr:-KG4QCIp6eCZ6hG_fd93qsw12qmbfsl2rUTfQvwVP4FOTlWeNXYo0Gg9y3WVYIdF6FQC6R0E8CbK0Ywq_6TKMx1BpGlAhGV0aDKQOwiHlQAAIAn__________4JpZIJ2NIJpcIR_AAABiXNlY3AyNTZrMaEDdVT4g1gw86BfbrtLCq2fRBlG0AnMxsXtAQgA327S5FeDdGNwgiMog3VkcIIjKA',
            'p2p_addresses': ['/ip4/127.0.0.1/tcp/9000/p2p/16Uiu2HAmLZ1CYVFKpa3wwn4cnknZqosum8HX3GHDhUpEULQc9ixE'],
            'discovery_addresses': ['/ip4/127.0.0.1/udp/9000/p2p/16Uiu2HAmLZ1CYVFKpa3wwn4cnknZqosum8HX3GHDhUpEULQc9ixE'],
            'metadata': {'seq_number': '0', 'attnets': '0x0000000000000000'}
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_peers]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_peers()
        {
          'data': [
            {
              'peer_id': '16Uiu2HAkw1yVqF3RtMCBHMbkLZbNhfGcTUdD6Uo4X3wfzPhGVnqv',
              'address': '/ip4/3.127.23.51/tcp/9000',
              'state': 'connected',
              'direction': 'outbound'
            },
            {
              'peer_id': '16Uiu2HAmEJHiCzgS8GwiEYLyM3d148mzvZ9iZzsz8yqayWVPANMG',
              'address': '/ip4/3.88.7.240/tcp/9000',
              'state': 'connected',
              'direction': 'outbound'
            }
          ]
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_peer]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[peer_id]{.pre}]{.n}*[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_peer('16Uiu2HAkw1yVqF3RtMCBHMbkLZbNhfGcTUdD6Uo4X3wfzPhGVnqv')
        {
          'data': {
            'peer_id': '16Uiu2HAkw1yVqF3RtMCBHMbkLZbNhfGcTUdD6Uo4X3wfzPhGVnqv',
            'address': '/ip4/3.127.23.51/tcp/9000',
            'state': 'connected',
            'direction': 'outbound'
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_health]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_health()
        200
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_version]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_version()
        {
          'data': {
            'version': 'teku/v20.12.0+9-g9392008/osx-x86_64/adoptopenjdk-java-15'
          }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[Beacon.]{.pre}]{.sig-prename .descclassname}[[get_syncing]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   ::: {.highlight-python .notranslate}
    ::: highlight
        >>> beacon.get_syncing()
        {
          'data': {
            'head_slot': '222270',
            'sync_distance': '190861'
          }
        }
    :::
    :::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#web3.net.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#web3.net.xhtml#module-web3.net .section}
[]{#web3.net.xhtml#net-api}

# Net API

The [`web3.net`{.docutils .literal .notranslate}]{.pre} object exposes
methods to interact with the RPC APIs under the [`net_`{.docutils
.literal .notranslate}]{.pre} namespace.

::: {#web3.net.xhtml#properties .section}
## Properties

The following properties are available on the [`web3.net`{.docutils
.literal .notranslate}]{.pre} namespace.

[[web3.net.]{.pre}]{.sig-prename .descclassname}[[listening]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}\
[[..py:property::]{.pre}]{.sig-name .descname}

:   <div>
    >
    > -   Delegates to [`net_listening`{.docutils .literal
    >     .notranslate}]{.pre} RPC method
    >
    > Returns true if client is actively listening for network
    > connections.
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     >>> web3.net.listening
    >     True
    > :::
    > :::
    >
    > </div>

```{=html}
<!-- -->
```

[[web3.net.]{.pre}]{.sig-prename .descclassname}[[peer_count]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}\
[[..py:property::]{.pre}]{.sig-name .descname}

:   <div>
    >
    > -   Delegates to [`net_peerCount`{.docutils .literal
    >     .notranslate}]{.pre} RPC method
    >
    > Returns number of peers currently connected to the client.
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     >>> web3.net.peer_count
    >     1
    > :::
    > :::
    >
    > </div>

```{=html}
<!-- -->
```

[[web3.net.]{.pre}]{.sig-prename .descclassname}[[version]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}\
[[..py:property::]{.pre}]{.sig-name .descname}

:   <div>
    >
    > -   Delegates to [`net_version`{.docutils .literal
    >     .notranslate}]{.pre} RPC Method
    >
    > Returns the current network id.
    >
    > ::: {.highlight-python .notranslate}
    > ::: highlight
    >     >>> web3.net.version
    >     '8996'
    > :::
    > :::
    >
    > </div>
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#web3.geth.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#web3.geth.xhtml#module-web3.geth .section}
[]{#web3.geth.xhtml#geth-api}

# Geth API

The [`web3.geth`{.docutils .literal .notranslate}]{.pre} object exposes
modules that enable you to interact with the JSON-RPC endpoints
supported by
[Geth](https://github.com/ethereum/go-ethereum/wiki/Management-APIs){.reference
.external}[
\[https://github.com/ethereum/go-ethereum/wiki/Management-APIs\]]{.link-target}
that are not defined in the standard set of Ethereum JSONRPC endpoints
according to [EIP
1474](https://github.com/ethereum/EIPs/pull/1474){.reference .external}[
\[https://github.com/ethereum/EIPs/pull/1474\]]{.link-target}.

::: {#web3.geth.xhtml#gethadmin-api .section}
## GethAdmin API

The following methods are available on the [`web3.geth.admin`{.docutils
.literal .notranslate}]{.pre} namespace.

The [`web3.geth.admin`{.docutils .literal .notranslate}]{.pre} object
exposes methods to interact with the RPC APIs under the
[`admin_`{.docutils .literal .notranslate}]{.pre} namespace that are
supported by the Geth client.

[[web3.geth.admin.]{.pre}]{.sig-prename .descclassname}[[datadir]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   -   Delegates to [`admin_datadir`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the system path of the node's data directory.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.geth.admin.datadir()
        '/Users/snakecharmers/Library/Ethereum'
    :::
    :::

```{=html}
<!-- -->
```

[[web3.geth.admin.]{.pre}]{.sig-prename .descclassname}[[node_info]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   -   Delegates to [`admin_nodeInfo`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns information about the currently running node.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.geth.admin.node_info()
        {
            'enode': 'enode://e54eebad24dce1f6d246bea455ffa756d97801582420b9ed681a2ea84bf376d0bd87ae8dd6dc06cdb862a2ca89ecabe1be1050be35b4e70d62bc1a092cb7e2d3@[::]:30303',
            'id': 'e54eebad24dce1f6d246bea455ffa756d97801582420b9ed681a2ea84bf376d0bd87ae8dd6dc06cdb862a2ca89ecabe1be1050be35b4e70d62bc1a092cb7e2d3',
            'ip': '::',
            'listenAddr': '[::]:30303',
            'name': 'Geth/v1.4.11-stable-fed692f6/darwin/go1.7',
            'ports': {'discovery': 30303, 'listener': 30303},
            'protocols': {
                'eth': {
                    'difficulty': 57631175724744612603,
                    'genesis': '0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3',
                    'head': '0xaaef6b9dd0d34088915f4c62b6c166379da2ad250a88f76955508f7cc81fb796',
                    'network': 1,
                },
            },
        }
    :::
    :::

```{=html}
<!-- -->
```

[[web3.geth.admin.]{.pre}]{.sig-prename .descclassname}[[peers]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   -   Delegates to [`admin_peers`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the current peers the node is connected to.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.geth.admin.peers()
        [
            {
                'caps': ['eth/63'],
                'id': '146e8e3e2460f1e18939a5da37c4a79f149c8b9837240d49c7d94c122f30064e07e4a42ae2c2992d0f8e7e6f68a30e7e9ad31d524349ec9d17effd2426a37b40',
                'name': 'Geth/v1.4.10-stable/windows/go1.6.2',
                'network': {
                    'localAddress': '10.0.3.115:64478',
                    'remoteAddress': '72.208.167.127:30303',
                },
                'protocols': {
                    'eth': {
                        'difficulty': 17179869184,
                        'head': '0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3',
                        'version': 63,
                    },
                }
            },
            {
                'caps': ['eth/62', 'eth/63'],
                'id': '76cb6cd3354be081923a90dfd4cda40aa78b307cc3cf4d5733dc32cc171d00f7c08356e9eb2ea47eab5aad7a15a3419b859139e3f762e1e1ebf5a04f530dcef7',
                'name': 'Geth/v1.4.10-stable-5f55d95a/linux/go1.5.1',
                'network': {
                    'localAddress': '10.0.3.115:64784',
                    'remoteAddress': '60.205.92.119:30303',
                },
                'protocols': {
                    'eth': {
                        'difficulty': 57631175724744612603,
                        'head': '0xaaef6b9dd0d34088915f4c62b6c166379da2ad250a88f76955508f7cc81fb796',
                        'version': 63,
                    },
                },
            },
            ...
        ]
    :::
    :::

```{=html}
<!-- -->
```

[[web3.geth.admin.]{.pre}]{.sig-prename .descclassname}[[add_peer]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[node_url]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`admin_addPeer`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Requests adding a new remote node to the list of tracked static
    nodes.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.geth.admin.add_peer('enode://e54eebad24dce1f6d246bea455ffa756d97801582420b9ed681a2ea84bf376d0bd87ae8dd6dc06cdb862a2ca89ecabe1be1050be35b4e70d62bc1a092cb7e2d3@52.71.255.237:30303')
        True
    :::
    :::

```{=html}
<!-- -->
```

[[web3.geth.admin.]{.pre}]{.sig-prename .descclassname}[[start_http]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[host]{.pre}]{.n}[[=]{.pre}]{.o}[[\'localhost\']{.pre}]{.default_value}*, *[[port]{.pre}]{.n}[[=]{.pre}]{.o}[[8545]{.pre}]{.default_value}*, *[[cors]{.pre}]{.n}[[=]{.pre}]{.o}[[\'\']{.pre}]{.default_value}*, *[[apis]{.pre}]{.n}[[=]{.pre}]{.o}[[\'eth,net,web3\']{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`admin_startHTTP`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Starts the HTTP based JSON RPC API webserver on the specified
    [`host`{.docutils .literal .notranslate}]{.pre} and
    [`port`{.docutils .literal .notranslate}]{.pre}, with the
    [`rpccorsdomain`{.docutils .literal .notranslate}]{.pre} set to the
    provided [`cors`{.docutils .literal .notranslate}]{.pre} value and
    with the APIs specified by [`apis`{.docutils .literal
    .notranslate}]{.pre} enabled. Returns boolean as to whether the
    server was successfully started.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.geth.admin.start_http()
        True
    :::
    :::

```{=html}
<!-- -->
```

[[web3.geth.admin.]{.pre}]{.sig-prename .descclassname}[[start_ws]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[host]{.pre}]{.n}[[=]{.pre}]{.o}[[\'localhost\']{.pre}]{.default_value}*, *[[port]{.pre}]{.n}[[=]{.pre}]{.o}[[8546]{.pre}]{.default_value}*, *[[cors]{.pre}]{.n}[[=]{.pre}]{.o}[[\'\']{.pre}]{.default_value}*, *[[apis]{.pre}]{.n}[[=]{.pre}]{.o}[[\'eth,net,web3\']{.pre}]{.default_value}*[)]{.sig-paren}

:   -   Delegates to [`admin_startWS`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Starts the WebSocket based JSON RPC API webserver on the specified
    [`host`{.docutils .literal .notranslate}]{.pre} and
    [`port`{.docutils .literal .notranslate}]{.pre}, with the
    [`rpccorsdomain`{.docutils .literal .notranslate}]{.pre} set to the
    provided [`cors`{.docutils .literal .notranslate}]{.pre} value and
    with the APIs specified by [`apis`{.docutils .literal
    .notranslate}]{.pre} enabled. Returns boolean as to whether the
    server was successfully started.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.geth.admin.start_ws()
        True
    :::
    :::

```{=html}
<!-- -->
```

[[web3.geth.admin.]{.pre}]{.sig-prename .descclassname}[[stop_http]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   -   Delegates to [`admin_stopHTTP`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Stops the HTTP based JSON RPC server.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.geth.admin.stop_http()
        True
    :::
    :::

```{=html}
<!-- -->
```

[[web3.geth.admin.]{.pre}]{.sig-prename .descclassname}[[stop_ws]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   -   Delegates to [`admin_stopWS`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Stops the WebSocket based JSON RPC server.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.geth.admin.stop_ws()
        True
    :::
    :::
:::

::: {#web3.geth.xhtml#gethtxpool-api .section}
[]{#web3.geth.xhtml#module-web3.geth.txpool}

## GethTxPool API

The [`web3.geth.txpool`{.docutils .literal .notranslate}]{.pre} object
exposes methods to interact with the RPC APIs under the
[`txpool_`{.docutils .literal .notranslate}]{.pre} namespace. These
methods are only exposed under the [`geth`{.docutils .literal
.notranslate}]{.pre} namespace since they are not standard.

The following methods are available on the [`web3.geth.txpool`{.docutils
.literal .notranslate}]{.pre} namespace.

[[TxPool.]{.pre}]{.sig-prename .descclassname}[[inspect]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   -   Delegates to [`txpool_inspect`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns a textual summary of all transactions currently pending for
    inclusion in the next block(s) as well as ones that are scheduled
    for future execution.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.geth.txpool.inspect()
        {
            'pending': {
                '0x26588a9301b0428d95e6Fc3A5024fcE8BEc12D51': {
                  31813: ["0x3375Ee30428b2A71c428afa5E89e427905F95F7e: 0 wei + 500000 Ã— 20000000000 gas"]
                },
                '0x2a65Aca4D5fC5B5C859090a6c34d164135398226': {
                  563662: ["0x958c1Fa64B34db746925c6F8a3Dd81128e40355E: 1051546810000000000 wei + 90000 Ã— 20000000000 gas"],
                  563663: ["0x77517B1491a0299A44d668473411676f94e97E34: 1051190740000000000 wei + 90000 Ã— 20000000000 gas"],
                  563664: ["0x3E2A7Fe169c8F8eee251BB00d9fb6d304cE07d3A: 1050828950000000000 wei + 90000 Ã— 20000000000 gas"],
                  563665: ["0xAF6c4695da477F8C663eA2D8B768Ad82Cb6A8522: 1050544770000000000 wei + 90000 Ã— 20000000000 gas"],
                  563666: ["0x139B148094C50F4d20b01cAf21B85eDb711574dB: 1048598530000000000 wei + 90000 Ã— 20000000000 gas"],
                  563667: ["0x48B3Bd66770b0D1EeceFCe090daFeE36257538aE: 1048367260000000000 wei + 90000 Ã— 20000000000 gas"],
                  563668: ["0x468569500925D53e06Dd0993014aD166fD7Dd381: 1048126690000000000 wei + 90000 Ã— 20000000000 gas"],
                  563669: ["0x3DcB4C90477a4b8Ff7190b79b524773CbE3bE661: 1047965690000000000 wei + 90000 Ã— 20000000000 gas"],
                  563670: ["0x6DfeF5BC94b031407FFe71ae8076CA0FbF190963: 1047859050000000000 wei + 90000 Ã— 20000000000 gas"]
                },
                '0x9174E688d7dE157C5C0583Df424EAAB2676aC162': {
                  3: ["0xBB9bc244D798123fDe783fCc1C72d3Bb8C189413: 30000000000000000000 wei + 85000 Ã— 21000000000 gas"]
                },
                '0xb18F9d01323e150096650ab989CfecD39D757Aec': {
                  777: ["0xcD79c72690750F079ae6AB6ccd7e7aEDC03c7720: 0 wei + 1000000 Ã— 20000000000 gas"]
                },
                '0xB2916C870Cf66967B6510B76c07E9d13a5D23514': {
                  2: ["0x576f25199D60982A8f31A8DfF4da8aCB982e6ABa: 26000000000000000000 wei + 90000 Ã— 20000000000 gas"]
                },
                '0xBc0CA4f217E052753614d6B019948824d0d8688B': {
                  0: ["0x2910543Af39abA0Cd09dBb2D50200b3E800A63D2: 1000000000000000000 wei + 50000 Ã— 1171602790622 gas"]
                },
                '0xea674fdde714fd979de3edf0f56aa9716b898ec8': {
                  70148: ["0xe39c55ead9f997f7fa20ebe40fb4649943d7db66: 1000767667434026200 wei + 90000 Ã— 20000000000 gas"]
                }
              },
              'queued': {
                '0x0F6000De1578619320aBA5e392706b131FB1dE6f': {
                  6: ["0x8383534d0bcd0186d326C993031311c0Ac0D9B2d: 9000000000000000000 wei + 21000 Ã— 20000000000 gas"]
                },
                '0x5b30608c678e1ac464A8994C3B33E5CdF3497112': {
                  6: ["0x9773547e27f8303C87089dc42D9288aa2B9d8F06: 50000000000000000000 wei + 90000 Ã— 50000000000 gas"]
                },
                '0x976A3Fc5d6f7d259EBfb4cc2Ae75115475E9867C': {
                  3: ["0x346FB27dE7E7370008f5da379f74dd49F5f2F80F: 140000000000000000 wei + 90000 Ã— 20000000000 gas"]
                },
                '0x9B11bF0459b0c4b2f87f8CEBca4cfc26f294B63A': {
                  2: ["0x24a461f25eE6a318BDef7F33De634A67bb67Ac9D: 17000000000000000000 wei + 90000 Ã— 50000000000 gas"],
                  6: ["0x6368f3f8c2B42435D6C136757382E4A59436a681: 17990000000000000000 wei + 90000 Ã— 20000000000 gas", "0x8db7b4e0ecb095fbd01dffa62010801296a9ac78: 16998950000000000000 wei + 90000 Ã— 20000000000 gas"],
                  7: ["0x6368f3f8c2B42435D6C136757382E4A59436a681: 17900000000000000000 wei + 90000 Ã— 20000000000 gas"]
                }
              }
        }
    :::
    :::

```{=html}
<!-- -->
```

[[TxPool.]{.pre}]{.sig-prename .descclassname}[[status]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   -   Delegates to [`txpool_status`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns a textual summary of all transactions currently pending for
    inclusion in the next block(s) as well as ones that are scheduled
    for future execution.

    ::: {.highlight-python .notranslate}
    ::: highlight
        {
            pending: 10,
            queued: 7,
        }
    :::
    :::

```{=html}
<!-- -->
```

[[TxPool.]{.pre}]{.sig-prename .descclassname}[[content]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   -   Delegates to [`txpool_content`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the exact details of all transactions that are pending or
    queued.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.geth.txpool.content()
        {
          'pending': {
            '0x0216D5032f356960Cd3749C31Ab34eEFF21B3395': {
              806: [{
                'blockHash': "0x0000000000000000000000000000000000000000000000000000000000000000",
                'blockNumber': None,
                'from': "0x0216D5032f356960Cd3749C31Ab34eEFF21B3395",
                'gas': "0x5208",
                'gasPrice': None,
                'hash': "0xaf953a2d01f55cfe080c0c94150a60105e8ac3d51153058a1f03dd239dd08586",
                'input': "0x",
                'maxFeePerGas': '0x77359400',
                'maxPriorityFeePerGas': '0x3b9aca00',
                'nonce': "0x326",
                'to': "0x7f69a91A3CF4bE60020fB58B893b7cbb65376db8",
                'transactionIndex': None,
                'value': "0x19a99f0cf456000"
              }]
            },
            '0x24d407e5A0B506E1Cb2fae163100B5DE01F5193C': {
              34: [{
                'blockHash': "0x0000000000000000000000000000000000000000000000000000000000000000",
                'blockNumber': None,
                'from': "0x24d407e5A0B506E1Cb2fae163100B5DE01F5193C",
                'gas': "0x44c72",
                'gasPrice': None,
                'hash': "0xb5b8b853af32226755a65ba0602f7ed0e8be2211516153b75e9ed640a7d359fe",
                'input': "0xb61d27f600000000000000000000000024d407e5a0b506e1cb2fae163100b5de01f5193c00000000000000000000000000000000000000000000000053444835ec580000000000000000000000000000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
                'maxFeePerGas': '0x77359400',
                'maxPriorityFeePerGas': '0x3b9aca00',
                'nonce': "0x22",
                'to': "0x7320785200f74861B69C49e4ab32399a71b34f1a",
                'transactionIndex': None,
                'value': "0x0"
              }]
            }
          },
          'queued': {
            '0x976A3Fc5d6f7d259EBfb4cc2Ae75115475E9867C': {
              3: [{
                'blockHash': "0x0000000000000000000000000000000000000000000000000000000000000000",
                'blockNumber': None,
                'from': "0x976A3Fc5d6f7d259EBfb4cc2Ae75115475E9867C",
                'gas': "0x15f90",
                'gasPrice': None,
                'hash': "0x57b30c59fc39a50e1cba90e3099286dfa5aaf60294a629240b5bbec6e2e66576",
                'input': "0x",
                'maxFeePerGas': '0x77359400',
                'maxPriorityFeePerGas': '0x3b9aca00',
                'nonce': "0x3",
                'to': "0x346FB27dE7E7370008f5da379f74dd49F5f2F80F",
                'transactionIndex': None,
                'value': "0x1f161421c8e0000"
              }]
            },
            '0x9B11bF0459b0c4b2f87f8CEBca4cfc26f294B63A': {
              2: [{
                'blockHash': "0x0000000000000000000000000000000000000000000000000000000000000000",
                'blockNumber': None,
                'from': "0x9B11bF0459b0c4b2f87f8CEBca4cfc26f294B63A",
                'gas': "0x15f90",
                'gasPrice': None,
                'hash': "0x3a3c0698552eec2455ed3190eac3996feccc806970a4a056106deaf6ceb1e5e3",
                'input': "0x",
                'maxFeePerGas': '0x77359400',
                'maxPriorityFeePerGas': '0x3b9aca00',
                'nonce': "0x2",
                'to': "0x24a461f25eE6a318BDef7F33De634A67bb67Ac9D",
                'transactionIndex': None,
                'value': "0xebec21ee1da40000"
              }],
              6: [{
                'blockHash': "0x0000000000000000000000000000000000000000000000000000000000000000",
                'blockNumber': None,
                'from': "0x9B11bF0459b0c4b2f87f8CEBca4cfc26f294B63A",
                'gas': "0x15f90",
                'gasPrice': None,
                'hash': "0xbbcd1e45eae3b859203a04be7d6e1d7b03b222ec1d66dfcc8011dd39794b147e",
                'input': "0x",
                'maxFeePerGas': '0x77359400',
                'maxPriorityFeePerGas': '0x3b9aca00',
                'nonce': "0x6",
                'to': "0x6368f3f8c2B42435D6C136757382E4A59436a681",
                'transactionIndex': None,
                'value': "0xf9a951af55470000"
              }, {
                'blockHash': "0x0000000000000000000000000000000000000000000000000000000000000000",
                'blockNumber': None,
                'from': "0x9B11bF0459b0c4b2f87f8CEBca4cfc26f294B63A",
                'gas': "0x15f90",
                'gasPrice': None,
                'hash': "0x60803251d43f072904dc3a2d6a084701cd35b4985790baaf8a8f76696041b272",
                'input': "0x",
                'maxFeePerGas': '0x77359400',
                'maxPriorityFeePerGas': '0x3b9aca00',
                'nonce': "0x6",
                'to': "0x8DB7b4e0ECB095FBD01Dffa62010801296a9ac78",
                'transactionIndex': None,
                'value': "0xebe866f5f0a06000"
              }],
            }
          }
        }
    :::
    :::
:::

::: {#web3.geth.xhtml#gethdebug-api .section}
[]{#web3.geth.xhtml#module-web3.geth.debug}

## GethDebug API

The [`web3.geth.debug`{.docutils .literal .notranslate}]{.pre} object
exposes methods to interact with the RPC APIs under the
[`debug_`{.docutils .literal .notranslate}]{.pre} namespace. These
methods are only exposed under the [`geth`{.docutils .literal
.notranslate}]{.pre} namespace. Full documentation around options can be
found in the [Geth
docs](https://geth.ethereum.org/docs/developers/evm-tracing/built-in-tracers){.reference
.external}[
\[https://geth.ethereum.org/docs/developers/evm-tracing/built-in-tracers\]]{.link-target}.

[[Debug.]{.pre}]{.sig-prename .descclassname}[[trace_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[transaction_hash]{.pre}]{.n}*[)]{.sig-paren}

:   -   Delegates to [`debug_traceTransaction`{.docutils .literal
        .notranslate}]{.pre} RPC Method

    Returns the trace of the transaction with the given
    [`transaction_hash`{.docutils .literal .notranslate}]{.pre} and
    [`trace_config`{.docutils .literal .notranslate}]{.pre}.

    ::: {.highlight-python .notranslate}
    ::: highlight
        >>> web3.geth.debug.trace_transaction('0x96014f00980a25dc7275a5eb5ed25ce0dd79c9233628c421ae373601236949b3')
            AttributeDict({
              'gas': 21000,
              'failed': False,
              'returnValue': '',
              'structLogs': []
            })

        >>> web3.geth.debug.trace_transaction('0x96014f00980a25dc7275a5eb5ed25ce0dd79c9233628c421ae373601236949b3', {
                "tracer": "prestateTracer",
            })
            AttributeDict({
              '0x0000000000000000000000000000000000000000': AttributeDict({'balance': 0}),
              '0x7fE3e4C21bDE162214B715AabcE05391301e9F5B': AttributeDict({'balance': 115792089237316195423570985008687907853269984665640564039457584007913129639927}),
              '0x91fe3039271d43d3f8479f60Cc5293Bc8A461b75': AttributeDict({'balance': 0})
            })

        >>> web3.geth.debug.trace_transaction('0x96014f00980a25dc7275a5eb5ed25ce0dd79c9233628c421ae373601236949b3', {
                "tracer": "prestateTracer",
                "traceConfig": {"diffMode": True}
            })
            AttributeDict({
              'post': AttributeDict({
                '0x0000000000000000000000000000000000000000': AttributeDict({'balance': 63000}),
                '0xcF888Cc4FAe8a3D774e574Ef8C6a261958287d04': AttributeDict({
                  'balance': 115792089237316195423570985008687907853269984665640564039457583959368602105927,
                  'nonce': 3
                }),
                '0xD2593D3445a9F0f4c776715f5206FBf4CA6A0475': AttributeDict({'balance': 100000})}),
              'pre': AttributeDict({
                '0x0000000000000000000000000000000000000000': AttributeDict({'balance': 42000}),
                '0xcF888Cc4FAe8a3D774e574Ef8C6a261958287d04': AttributeDict({
                  'balance': 115792089237316195423570985008687907853269984665640564039457583973451623990927,
                  'nonce': 2
                }),
                '0xD2593D3445a9F0f4c776715f5206FBf4CA6A0475': AttributeDict({'balance': 0})
              })
            })

        >>> web3.geth.debug.trace_transaction('0x96014f00980a25dc7275a5eb5ed25ce0dd79c9233628c421ae373601236949b3', {
                "tracer": "callTracer",
                "tracerConfig": {"withLog": False},
            })
            AttributeDict({'calls': [AttributeDict({'from': '0xa0457775a08b175Cbb444eD923556Dc67Ec5Dc11',
              'gas': 154003,
              'gasUsed': 275,
              'input': HexBytes('0xad5c4648'),
              'output': HexBytes('0x000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2'),
              'to': '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D',
              'type': 'STATICCALL'}),
              AttributeDict({'from': '0xa0457775a08b175Cbb444eD923556Dc67Ec5Dc11',
              'gas': 150633,
              'gasUsed': 24678,
              'input': HexBytes('0x095ea7b30000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488d000000000000000000000000000000000000007e37be2022c0914b2680000000'),
              'output': HexBytes('0x0000000000000000000000000000000000000000000000000000000000000001'),
              'to': '0xec4cF8dCB526080792bC98E1Ef41fB4775777b6B',
              'type': 'CALL',
              'value': 0}),
              AttributeDict({'calls': [AttributeDict({'from': '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D',
                'gas': 121167,
                'gasUsed': 27504,
                'input': HexBytes('0x23b872dd000000000000000000000000a0457775a08b175cbb444ed923556dc67ec5dc1100000000000000000000000036f0548a77bfb1d5935483d25cc40633b46e2f4d000000000000000000000000000000000000007e37be2022c0914b2680000000'),
                'output': HexBytes('0x0000000000000000000000000000000000000000000000000000000000000001'),
                'to': '0xec4cF8dCB526080792bC98E1Ef41fB4775777b6B',
                'type': 'CALL',
                'value': 0}),
                AttributeDict({'from': '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D',
                'gas': 89911,
                'gasUsed': 2504,
                'input': HexBytes('0x0902f1ac'),
                'output': HexBytes('0x00000000000000000000000000000000000000000000000053f54ccde429ceb70000000000000000000000000000000000000000001635eb93ecdb339a7dc022000000000000000000000000000000000000000000000000000000006641f6cf'),
                'to': '0x36f0548a77BFb1d5935483D25cc40633b46e2f4d',
                'type': 'STATICCALL'}),
                AttributeDict({'from': '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D',
                'gas': 86926,
                'gasUsed': 621,
                'input': HexBytes('0x70a0823100000000000000000000000036f0548a77bfb1d5935483d25cc40633b46e2f4d'),
                'output': HexBytes('0x000000000000000000000000000000000000007e37d4560e547e265a1a7dc022'),
                'to': '0xec4cF8dCB526080792bC98E1Ef41fB4775777b6B',
                'type': 'STATICCALL'}),
                AttributeDict({'calls': [AttributeDict({'from': '0x36f0548a77BFb1d5935483D25cc40633b46e2f4d',
                  'gas': 70279,
                  'gasUsed': 29962,
                  'input': HexBytes('0xa9059cbb0000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488d00000000000000000000000000000000000000000000000053f53dfc545d56a6'),
                  'output': HexBytes('0x0000000000000000000000000000000000000000000000000000000000000001'),
                  'to': '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
                  'type': 'CALL',
                  'value': 0}),
                  AttributeDict({'from': '0x36f0548a77BFb1d5935483D25cc40633b46e2f4d',
                  'gas': 40164,
                  'gasUsed': 534,
                  'input': HexBytes('0x70a0823100000000000000000000000036f0548a77bfb1d5935483d25cc40633b46e2f4d'),
                  'output': HexBytes('0x00000000000000000000000000000000000000000000000000000ed18fcc7811'),
                  'to': '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
                  'type': 'STATICCALL'}),
                  AttributeDict({'from': '0x36f0548a77BFb1d5935483D25cc40633b46e2f4d',
                  'gas': 39233,
                  'gasUsed': 621,
                  'input': HexBytes('0x70a0823100000000000000000000000036f0548a77bfb1d5935483d25cc40633b46e2f4d'),
                  'output': HexBytes('0x000000000000000000000000000000000000007e37d4560e547e265a1a7dc022'),
                  'to': '0xec4cF8dCB526080792bC98E1Ef41fB4775777b6B',
                  'type': 'STATICCALL'})],
                'from': '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D',
                'gas': 84769,
                'gasUsed': 64940,
                'input': HexBytes('0x022c0d9f00000000000000000000000000000000000000000000000053f53dfc545d56a600000000000000000000000000000000000000000000000000000000000000000000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488d00000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000'),
                'to': '0x36f0548a77BFb1d5935483D25cc40633b46e2f4d',
                'type': 'CALL',
                'value': 0}),
                AttributeDict({'from': '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D',
                'gas': 20382,
                'gasUsed': 534,
                'input': HexBytes('0x70a082310000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488d'),
                'output': HexBytes('0x00000000000000000000000000000000000000000000000053f53dfc545d56a6'),
                'to': '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
                'type': 'STATICCALL'}),
                AttributeDict({'calls': [AttributeDict({'from': '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
                  'gas': 2300,
                  'gasUsed': 83,
                  'input': HexBytes('0x'),
                  'to': '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D',
                  'type': 'CALL',
                  'value': 6049809828398585510})],
                'from': '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D',
                'gas': 19432,
                'gasUsed': 9223,
                'input': HexBytes('0x2e1a7d4d00000000000000000000000000000000000000000000000053f53dfc545d56a6'),
                'to': '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2',
                'type': 'CALL',
                'value': 0}),
                AttributeDict({'from': '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D',
                'gas': 3353,
                'gasUsed': 0,
                'input': HexBytes('0x'),
                'to': '0xE11418f9961248da36b1008b1090235f680AE8f5',
                'type': 'CALL',
                'value': 6049809828398585510})],
              'from': '0xa0457775a08b175Cbb444eD923556Dc67Ec5Dc11',
              'gas': 125270,
              'gasUsed': 122013,
              'input': HexBytes('0x791ac947000000000000000000000000000000000000007e37be2022c0914b2680000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000a0000000000000000000000000e11418f9961248da36b1008b1090235f680ae8f5000000000000000000000000000000000000000000000000000000006641fe7f0000000000000000000000000000000000000000000000000000000000000002000000000000000000000000ec4cf8dcb526080792bc98e1ef41fb4775777b6b000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2'),
              'to': '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D',
              'type': 'CALL',
              'value': 0})],
            'from': '0xE11418f9961248da36b1008b1090235f680AE8f5',
            'gas': 185574,
            'gasUsed': 144300,
            'input': HexBytes('0x56feb11b000000000000000000000000ec4cf8dcb526080792bc98e1ef41fb4775777b6b000000000000000000000000000000000000007e37be2022c0914b2680000000'),
            'to': '0xa0457775a08b175Cbb444eD923556Dc67Ec5Dc11',
            'type': 'CALL',
            'value': 0})

            >>> w3.geth.debug.trace_transaction(tx_hash, {'tracer': '4byteTracer'})
    :::
    :::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#web3.tracing.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#web3.tracing.xhtml#module-web3.tracing .section}
[]{#web3.tracing.xhtml#tracing-api}

# Tracing API

The [`web3.tracing`{.docutils .literal .notranslate}]{.pre} object
exposes modules that enable you to interact with the JSON-RPC
[`trace_`{.docutils .literal .notranslate}]{.pre} endpoints supported by
Erigon and Nethermind.

The following methods are available on the [`web3.tracing`{.docutils
.literal .notranslate}]{.pre} namespace:

[[web3.tracing.]{.pre}]{.sig-prename .descclassname}[[trace_replay_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   

```{=html}
<!-- -->
```

[[web3.tracing.]{.pre}]{.sig-prename .descclassname}[[trace_replay_block_transactions]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   

```{=html}
<!-- -->
```

[[web3.tracing.]{.pre}]{.sig-prename .descclassname}[[trace_filter]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   

```{=html}
<!-- -->
```

[[web3.tracing.]{.pre}]{.sig-prename .descclassname}[[trace_block]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   

```{=html}
<!-- -->
```

[[web3.tracing.]{.pre}]{.sig-prename .descclassname}[[trace_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   

```{=html}
<!-- -->
```

[[web3.tracing.]{.pre}]{.sig-prename .descclassname}[[trace_call]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   

```{=html}
<!-- -->
```

[[web3.tracing.]{.pre}]{.sig-prename .descclassname}[[trace_raw_transaction]{.pre}]{.sig-name .descname}[(]{.sig-paren}[)]{.sig-paren}

:   
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#web3.utils.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#web3.utils.xhtml#module-web3.utils .section}
[]{#web3.utils.xhtml#utils}

# Utils

The [`utils`{.docutils .literal .notranslate}]{.pre} module houses
public utility functions and classes.

::: {#web3.utils.xhtml#module-web3.utils.abi .section}
[]{#web3.utils.xhtml#abi}

## ABI

[[web3.utils.abi.]{.pre}]{.sig-prename .descclassname}[[get_abi_element_info]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[abi]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Sequence]{.pre}](https://docs.python.org/3/library/typing.html#typing.Sequence "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Sequence\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[ABIFunction]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIConstructor]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIFallback]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIReceive]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIEvent]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIError]{.pre}[[\]]{.pre}]{.p}]{.n}*, *[[abi_element_identifier]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[Type]{.pre}](https://docs.python.org/3/library/typing.html#typing.Type "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Type\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[FallbackFn]{.pre}[[\]]{.pre}]{.p}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[Type]{.pre}](https://docs.python.org/3/library/typing.html#typing.Type "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Type\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[ReceiveFn]{.pre}[[\]]{.pre}]{.p}]{.n}*, *[[\*]{.pre}]{.o}[[args]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Sequence]{.pre}](https://docs.python.org/3/library/typing.html#typing.Sequence "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Sequence\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Any\]]{.pre}]{.link-target}[[\]]{.pre}]{.p}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}*, *[[abi_codec]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Any\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[\*\*]{.pre}]{.o}[[kwargs]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Dict]{.pre}](https://docs.python.org/3/library/typing.html#typing.Dict "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Dict\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Any\]]{.pre}]{.link-target}[[\]]{.pre}]{.p}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[ABIElementInfo]{.pre}]{.sig-return-typehint}]{.sig-return}

:   Information about the function ABI, selector and input arguments.

    Returns the ABI which matches the provided identifier, named
    arguments ([`args`{.docutils .literal .notranslate}]{.pre}) and
    keyword args ([`kwargs`{.docutils .literal .notranslate}]{.pre}).

    Parameters[:]{.colon}

    :   -   **abi** (`<cite>`{=html}ABI`</cite>`{=html}) -- Contract
            ABI.

        -   **abi_element_identifier**
            (`<cite>`{=html}ABIElementIdentifier`</cite>`{=html}) --
            Find an element ABI with matching identifier.

        -   **args**
            (`<cite>`{=html}Optional\[Sequence\[Any\]\]`</cite>`{=html})
            -- Find a function ABI with matching args.

        -   **abi_codec**
            (`<cite>`{=html}Optional\[Any\]`</cite>`{=html}) -- Codec
            used for encoding and decoding. Default with
            `<cite>`{=html}strict_bytes_type_checking`</cite>`{=html}
            enabled.

        -   **kwargs** (`<cite>`{=html}Optional\[Dict\[str,
            Any\]\]`</cite>`{=html}) -- Find an element ABI with
            matching kwargs.

    Returns[:]{.colon}

    :   Element information including the ABI, selector and args.

    Return type[:]{.colon}

    :   `<cite>`{=html}ABIElementInfo`</cite>`{=html}

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> from web3.utils.abi import get_abi_element_info
        >>> abi = [
        ...     {
        ...         "constant": False,
        ...         "inputs": [
        ...             {"name": "a", "type": "uint256"},
        ...             {"name": "b", "type": "uint256"},
        ...         ],
        ...         "name": "multiply",
        ...         "outputs": [{"name": "result", "type": "uint256"}],
        ...         "payable": False,
        ...         "stateMutability": "nonpayable",
        ...         "type": "function",
        ...     }
        ... ]
        >>> fn_info = get_abi_element_info(abi, "multiply", *[7, 3])
        >>> fn_info["abi"]
        {'constant': False, 'inputs': [{'name': 'a', 'type': 'uint256'}, {'name': 'b', 'type': 'uint256'}], 'name': 'multiply', 'outputs': [{'name': 'result', 'type': 'uint256'}], 'payable': False, 'stateMutability': 'nonpayable', 'type': 'function'}
        >>> fn_info["selector"]
        '0x165c4a16'
        >>> fn_info["arguments"]
        (7, 3)
    :::
    :::

```{=html}
<!-- -->
```

[[web3.utils.abi.]{.pre}]{.sig-prename .descclassname}[[get_abi_element]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[abi]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Sequence]{.pre}](https://docs.python.org/3/library/typing.html#typing.Sequence "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Sequence\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[ABIFunction]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIConstructor]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIFallback]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIReceive]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIEvent]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIError]{.pre}[[\]]{.pre}]{.p}]{.n}*, *[[abi_element_identifier]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[Type]{.pre}](https://docs.python.org/3/library/typing.html#typing.Type "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Type\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[FallbackFn]{.pre}[[\]]{.pre}]{.p}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[Type]{.pre}](https://docs.python.org/3/library/typing.html#typing.Type "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Type\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[ReceiveFn]{.pre}[[\]]{.pre}]{.p}]{.n}*, *[[\*]{.pre}]{.o}[[args]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Any\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}*, *[[abi_codec]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Any\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[\*\*]{.pre}]{.o}[[kwargs]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Any\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[ABIFunction]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIConstructor]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIFallback]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIReceive]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIEvent]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIError]{.pre}]{.sig-return-typehint}]{.sig-return}

:   Return the interface for an [`ABIElement`{.docutils .literal
    .notranslate}]{.pre} from the [`abi`{.docutils .literal
    .notranslate}]{.pre} that matches the provided identifier and
    arguments.

    [`abi`{.docutils .literal .notranslate}]{.pre} may be a list of all
    ABI elements in a contract or a subset of elements. Passing only
    functions or events can be useful when names are not deterministic.
    For example, if names overlap between functions and events.

    The [`ABIElementIdentifier`{.docutils .literal .notranslate}]{.pre}
    value may be a function name, signature, or a
    [`FallbackFn`{.docutils .literal .notranslate}]{.pre} or
    [`ReceiveFn`{.docutils .literal .notranslate}]{.pre}. When named
    arguments ([`args`{.docutils .literal .notranslate}]{.pre}) and/or
    keyword args ([`kwargs`{.docutils .literal .notranslate}]{.pre}) are
    provided, they are included in the search filters.

    The `<cite>`{=html}abi_codec`</cite>`{=html} may be overridden if
    custom encoding and decoding is required. The default is used if no
    codec is provided. More details about customizations are in the
    [eth-abi Codecs
    Doc](https://eth-abi.readthedocs.io/en/latest/codecs.html){.reference
    .external}[
    \[https://eth-abi.readthedocs.io/en/latest/codecs.html\]]{.link-target}.

    Parameters[:]{.colon}

    :   -   **abi** (`<cite>`{=html}ABI`</cite>`{=html}) -- Contract
            ABI.

        -   **abi_element_identifier**
            (`<cite>`{=html}ABIElementIdentifier`</cite>`{=html}) --
            Find an element ABI with matching identifier. The identifier
            may be a function name, signature, or
            [`FallbackFn`{.docutils .literal .notranslate}]{.pre} or
            [`ReceiveFn`{.docutils .literal .notranslate}]{.pre}. A
            function signature is in the form
            [`name(arg1Type,arg2Type,...)`{.docutils .literal
            .notranslate}]{.pre}.

        -   **args**
            (`<cite>`{=html}Optional\[Sequence\[Any\]\]`</cite>`{=html})
            -- Find an element ABI with matching args.

        -   **abi_codec**
            (`<cite>`{=html}Optional\[Any\]`</cite>`{=html}) -- Codec
            used for encoding and decoding. Default with
            `<cite>`{=html}strict_bytes_type_checking`</cite>`{=html}
            enabled.

        -   **kwargs** (`<cite>`{=html}Optional\[Dict\[str,
            Any\]\]`</cite>`{=html}) -- Find an element ABI with
            matching kwargs.

    Returns[:]{.colon}

    :   ABI element for the specific ABI element.

    Return type[:]{.colon}

    :   `<cite>`{=html}ABIElement`</cite>`{=html}

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> from web3.utils.abi import get_abi_element
        >>> abi = [
        ...     {
        ...         "constant": False,
        ...         "inputs": [
        ...             {"name": "a", "type": "uint256"},
        ...             {"name": "b", "type": "uint256"},
        ...         ],
        ...         "name": "multiply",
        ...         "outputs": [{"name": "result", "type": "uint256"}],
        ...         "payable": False,
        ...         "stateMutability": "nonpayable",
        ...         "type": "function",
        ...     }
        ... ]
        >>> get_abi_element(abi, "multiply", *[7, 3])
        {'constant': False, 'inputs': [{'name': 'a', 'type': 'uint256'}, {'name': 'b', 'type': 'uint256'}], 'name': 'multiply', 'outputs': [{'name': 'result', 'type': 'uint256'}], 'payable': False, 'stateMutability': 'nonpayable', 'type': 'function'}
    :::
    :::

```{=html}
<!-- -->
```

[[web3.utils.abi.]{.pre}]{.sig-prename .descclassname}[[check_if_arguments_can_be_encoded]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[abi_element]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ABIFunction]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIConstructor]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIFallback]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIReceive]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIEvent]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIError]{.pre}]{.n}*, *[[\*]{.pre}]{.o}[[args]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Sequence]{.pre}](https://docs.python.org/3/library/typing.html#typing.Sequence "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Sequence\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Any\]]{.pre}]{.link-target}[[\]]{.pre}]{.p}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}*, *[[abi_codec]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Any\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[\*\*]{.pre}]{.o}[[kwargs]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Dict]{.pre}](https://docs.python.org/3/library/typing.html#typing.Dict "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Dict\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}[[,]{.pre}]{.p}[ ]{.w}[[Any]{.pre}](https://docs.python.org/3/library/typing.html#typing.Any "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Any\]]{.pre}]{.link-target}[[\]]{.pre}]{.p}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[bool]{.pre}](https://docs.python.org/3/library/functions.html#bool "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/functions.html#bool\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

:   Check if the provided arguments can be encoded with the element ABI.

    Parameters[:]{.colon}

    :   -   **abi_element** (`<cite>`{=html}ABIElement`</cite>`{=html})
            -- The ABI element.

        -   **args**
            (`<cite>`{=html}Optional\[Sequence\[Any\]\]`</cite>`{=html})
            -- Positional arguments.

        -   **abi_codec**
            (`<cite>`{=html}Optional\[Any\]`</cite>`{=html}) -- Codec
            used for encoding and decoding. Default with
            `<cite>`{=html}strict_bytes_type_checking`</cite>`{=html}
            enabled.

        -   **kwargs** (`<cite>`{=html}Optional\[Dict\[str,
            Any\]\]`</cite>`{=html}) -- Keyword arguments.

    Returns[:]{.colon}

    :   True if the arguments can be encoded, False otherwise.

    Return type[:]{.colon}

    :   `<cite>`{=html}bool`</cite>`{=html}

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> from web3.utils.abi import check_if_arguments_can_be_encoded
        >>> abi = {
        ...     "constant": False,
        ...     "inputs": [
        ...         {"name": "a", "type": "uint256"},
        ...         {"name": "b", "type": "uint256"},
        ...     ],
        ...     "name": "multiply",
        ...     "outputs": [{"name": "result", "type": "uint256"}],
        ...     "payable": False,
        ...     "stateMutability": "nonpayable",
        ...     "type": "function",
        ... }
        >>> check_if_arguments_can_be_encoded(abi, *[7, 3], **{})
        True
    :::
    :::

```{=html}
<!-- -->
```

[[web3.utils.abi.]{.pre}]{.sig-prename .descclassname}[[get_event_abi]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[abi]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Sequence]{.pre}](https://docs.python.org/3/library/typing.html#typing.Sequence "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Sequence\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[ABIFunction]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIConstructor]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIFallback]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIReceive]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIEvent]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[ABIError]{.pre}[[\]]{.pre}]{.p}]{.n}*, *[[event_name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[argument_names]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Sequence]{.pre}](https://docs.python.org/3/library/typing.html#typing.Sequence "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Sequence\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}[[\]]{.pre}]{.p}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[ABIEvent]{.pre}]{.sig-return-typehint}]{.sig-return}

:   ::: {.admonition .warning}
    Warning

    This function is deprecated. It is unable to distinguish between
    overloaded events. Use [`get_abi_element`{.docutils .literal
    .notranslate}]{.pre} instead.
    :::

    Find the event interface with the given name and/or arguments.

    Parameters[:]{.colon}

    :   -   **abi** (`<cite>`{=html}ABI`</cite>`{=html}) -- Contract
            ABI.

        -   **event_name** (`<cite>`{=html}str`</cite>`{=html}) -- Find
            an event abi with matching event name.

        -   **argument_names**
            (`<cite>`{=html}Optional\[Sequence\[str\]\]`</cite>`{=html})
            -- Find an event abi with matching arguments.

    Returns[:]{.colon}

    :   ABI for the event interface.

    Return type[:]{.colon}

    :   `<cite>`{=html}ABIEvent`</cite>`{=html}

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> from web3.utils import get_event_abi
        >>> abi = [
        ...   {"type": "function", "name": "myFunction", "inputs": [], "outputs": []},
        ...   {"type": "function", "name": "myFunction2", "inputs": [], "outputs": []},
        ...   {"type": "event", "name": "MyEvent", "inputs": []}
        ... ]
        >>> get_event_abi(abi, 'MyEvent')
        {'type': 'event', 'name': 'MyEvent', 'inputs': []}
    :::
    :::

```{=html}
<!-- -->
```

[[web3.utils.abi.]{.pre}]{.sig-prename .descclassname}[[get_event_log_topics]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[event_abi]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ABIEvent]{.pre}]{.n}*, *[[topics]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Sequence]{.pre}](https://docs.python.org/3/library/typing.html#typing.Sequence "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Sequence\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[[HexBytes]{.pre}](https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes "(in HexBytes v2.0)"){.reference .external}[ [\[https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes\]]{.pre}]{.link-target}[[\]]{.pre}]{.p}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[Sequence]{.pre}](https://docs.python.org/3/library/typing.html#typing.Sequence "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Sequence\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[[HexBytes]{.pre}](https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes "(in HexBytes v2.0)"){.reference .external}[ [\[https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes\]]{.pre}]{.link-target}[[\]]{.pre}]{.p}]{.sig-return-typehint}]{.sig-return}

:   Return topics for an event ABI.

    Parameters[:]{.colon}

    :   -   **event_abi** (`<cite>`{=html}ABIEvent`</cite>`{=html}) --
            Event ABI.

        -   **topics**
            (`<cite>`{=html}Sequence\[HexBytes\]`</cite>`{=html}) --
            Transaction topics from a
            `<cite>`{=html}LogReceipt`</cite>`{=html}.

    Returns[:]{.colon}

    :   Event topics for the event ABI.

    Return type[:]{.colon}

    :   `<cite>`{=html}Sequence\[HexBytes\]`</cite>`{=html}

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> from web3.utils import get_event_log_topics
        >>> abi = {
        ...   'type': 'event',
        ...   'anonymous': False,
        ...   'name': 'MyEvent',
        ...   'inputs': [
        ...     {
        ...       'name': 's',
        ...       'type': 'uint256'
        ...     }
        ...   ]
        ... }
        >>> keccak_signature = b'l+Ff\xba\x8d\xa5\xa9W\x17b\x1d\x87\x9aw\xder_=\x81g\t\xb9\xcb\xe9\xf0Y\xb8\xf8u\xe2\x84'  # noqa: E501
        >>> get_event_log_topics(abi, [keccak_signature, '0x1', '0x2'])
        ['0x1', '0x2']
    :::
    :::

```{=html}
<!-- -->
```

[[web3.utils.abi.]{.pre}]{.sig-prename .descclassname}[[log_topic_to_bytes]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[log_topic]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[bytes]{.pre}](https://docs.python.org/3/library/stdtypes.html#bytes "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#bytes\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[int]{.pre}](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/functions.html#int\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[bool]{.pre}](https://docs.python.org/3/library/functions.html#bool "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/functions.html#bool\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[HexStr]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[bytes]{.pre}](https://docs.python.org/3/library/stdtypes.html#bytes "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#bytes\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

:   Return topic signature as bytes.

    Parameters[:]{.colon}

    :   **log_topic** (`<cite>`{=html}Union\[Primitives, HexStr,
        str\]`</cite>`{=html}) -- Event topic from a
        `<cite>`{=html}LogReceipt`</cite>`{=html}.

    Returns[:]{.colon}

    :   Topic signature as bytes.

    Return type[:]{.colon}

    :   `<cite>`{=html}bytes`</cite>`{=html}

    ::: {.highlight-pycon .notranslate}
    ::: highlight
        >>> from web3.utils import log_topic_to_bytes
        >>> log_topic_to_bytes('0xa12fd1')
        b'\xa1/\xd1'
    :::
    :::
:::

::: {#web3.utils.xhtml#address .section}
## Address

[[utils.]{.pre}]{.sig-prename .descclassname}[[get_create_address]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[sender]{.pre}]{.n}*, *[[nonce]{.pre}]{.n}*[)]{.sig-paren}

:   Return the checksummed contract address generated by using the
    [`CREATE`{.docutils .literal .notranslate}]{.pre} opcode by a sender
    address with a given nonce.

```{=html}
<!-- -->
```

[[utils.]{.pre}]{.sig-prename .descclassname}[[get_create2_address]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[sender]{.pre}]{.n}*, *[[salt]{.pre}]{.n}*, *[[init_code]{.pre}]{.n}*[)]{.sig-paren}

:   Return the checksummed contract address generated by using the
    [`CREATE2`{.docutils .literal .notranslate}]{.pre} opcode by a
    sender address with a given salt and contract bytecode. See
    [EIP-1014](https://eips.ethereum.org/EIPS/eip-1014){.reference
    .external}[
    \[https://eips.ethereum.org/EIPS/eip-1014\]]{.link-target}.
:::

::: {#web3.utils.xhtml#caching .section}
## Caching

*[class]{.pre}[ ]{.w}*[[utils.]{.pre}]{.sig-prename .descclassname}[[SimpleCache]{.pre}]{.sig-name .descname}

:   The main cache class being used internally by web3.py. In some
    cases, it may prove useful to set your own cache size and pass in
    your own instance of this class where supported.
:::

::: {#web3.utils.xhtml#exception-handling .section}
## Exception Handling

[[utils.]{.pre}]{.sig-prename .descclassname}[[handle_offchain_lookup]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[offchain_lookup_payload]{.pre}]{.n}*, *[[transaction]{.pre}]{.n}*[)]{.sig-paren}

:   Handle [`OffchainLookup`{.docutils .literal .notranslate}]{.pre}
    reverts on contract function calls manually. For an example, see
    [[CCIP Read support for offchain lookup]{.std
    .std-ref}](#web3.contract.xhtml#ccip-read-example){.reference
    .internal} within the examples section.

```{=html}
<!-- -->
```

[[utils.]{.pre}]{.sig-prename .descclassname}[[async_handle_offchain_lookup]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[offchain_lookup_payload]{.pre}]{.n}*, *[[transaction]{.pre}]{.n}*[)]{.sig-paren}

:   The async version of the [`handle_offchain_lookup()`{.docutils
    .literal .notranslate}]{.pre} utility method described above.
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#gas_price.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#gas_price.xhtml#gas-price-api .section}
[]{#gas_price.xhtml#gas-price}

# Gas Price API

::: {.admonition .warning}
Warning

Gas price strategy is only supported for legacy transactions. The London
fork introduced [`maxFeePerGas`{.docutils .literal .notranslate}]{.pre}
and [`maxPriorityFeePerGas`{.docutils .literal .notranslate}]{.pre}
transaction parameters which should be used over [`gasPrice`{.docutils
.literal .notranslate}]{.pre} whenever possible.
:::

For Ethereum (legacy) transactions, gas price is a delicate property.
For this reason, Web3 includes an API for configuring it.

The Gas Price API allows you to define Web3's behaviour for populating
the gas price. This is done using a "Gas Price Strategy" - a method
which takes the Web3 object and a transaction dictionary and returns a
gas price (denominated in wei).

::: {#gas_price.xhtml#retrieving-gas-price .section}
## Retrieving gas price

To retrieve the gas price using the selected strategy simply call
[[`generate_gas_price()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.generate_gas_price "web3.eth.Eth.generate_gas_price"){.reference
.internal}

::: {.highlight-python .notranslate}
::: highlight
    >>> web3.eth.generate_gas_price()
    20000000000
:::
:::
:::

::: {#gas_price.xhtml#creating-a-gas-price-strategy .section}
## Creating a gas price strategy

A gas price strategy is implemented as a python method with the
following signature:

::: {.highlight-python .notranslate}
::: highlight
    def gas_price_strategy(web3, transaction_params=None):
    ...
:::
:::

The method must return a positive integer representing the gas price in
wei.

To demonstrate, here is a rudimentary example of a gas price strategy
that returns a higher gas price when the value of the transaction is
higher than 1 Ether.

::: {.highlight-python .notranslate}
::: highlight
    from web3 import Web3

    def value_based_gas_price_strategy(web3, transaction_params):
        if transaction_params['value'] > Web3.to_wei(1, 'ether'):
            return Web3.to_wei(20, 'gwei')
        else:
            return Web3.to_wei(5, 'gwei')
:::
:::
:::

::: {#gas_price.xhtml#selecting-the-gas-price-strategy .section}
## Selecting the gas price strategy

The gas price strategy can be set by calling
[[`set_gas_price_strategy()`{.xref .py .py-meth .docutils .literal
.notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.set_gas_price_strategy "web3.eth.Eth.set_gas_price_strategy"){.reference
.internal}.

::: {.highlight-python .notranslate}
::: highlight
    from web3 import Web3

    def value_based_gas_price_strategy(web3, transaction_params):
        ...

    w3 = Web3(...)
    w3.eth.set_gas_price_strategy(value_based_gas_price_strategy)
:::
:::
:::

::: {#gas_price.xhtml#module-web3.gas_strategies.rpc .section}
[]{#gas_price.xhtml#available-gas-price-strategies}

## Available gas price strategies

[[web3.gas_strategies.rpc.]{.pre}]{.sig-prename .descclassname}[[rpc_gas_price_strategy]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[web3]{.pre}]{.n}*, *[[transaction_params]{.pre}]{.n}[[=]{.pre}]{.o}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Makes a call to the [JSON-RPC eth_gasPrice
    method](https://ethereum.org/en/developers/docs/apis/json-rpc#eth_gasprice){.reference
    .external}[
    \[https://ethereum.org/en/developers/docs/apis/json-rpc#eth_gasprice\]]{.link-target}
    which returns the gas price configured by the connected Ethereum
    node.

```{=html}
<!-- -->
```

[[web3.gas_strategies.time_based.]{.pre}]{.sig-prename .descclassname}[[construct_time_based_gas_price_strategy]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[max_wait_seconds]{.pre}]{.n}*, *[[sample_size]{.pre}]{.n}[[=]{.pre}]{.o}[[120]{.pre}]{.default_value}*, *[[probability]{.pre}]{.n}[[=]{.pre}]{.o}[[98]{.pre}]{.default_value}*, *[[weighted]{.pre}]{.n}[[=]{.pre}]{.o}[[False]{.pre}]{.default_value}*[)]{.sig-paren}

:   Constructs a strategy which will compute a gas price such that the
    transaction will be mined within a number of seconds defined by
    [`max_wait_seconds`{.docutils .literal .notranslate}]{.pre} with a
    probability defined by [`probability`{.docutils .literal
    .notranslate}]{.pre}. The gas price is computed by sampling
    [`sample_size`{.docutils .literal .notranslate}]{.pre} of the most
    recently mined blocks. If [`weighted=True`{.docutils .literal
    .notranslate}]{.pre}, the block time will be weighted towards more
    recently mined blocks.

    -   [`max_wait_seconds`{.docutils .literal .notranslate}]{.pre} The
        desired maximum number of seconds the transaction should take to
        mine.

    -   [`sample_size`{.docutils .literal .notranslate}]{.pre} The
        number of recent blocks to sample

    -   [`probability`{.docutils .literal .notranslate}]{.pre} An
        integer representation of the desired probability that the
        transaction will be mined within [`max_wait_seconds`{.docutils
        .literal .notranslate}]{.pre}. 0 means 0% and 100 means 100%.

    The following ready to use versions of this strategy are available.

    -   [`web3.gas_strategies.time_based.fast_gas_price_strategy`{.docutils
        .literal .notranslate}]{.pre}: Transaction mined within 60
        seconds.

    -   [`web3.gas_strategies.time_based.medium_gas_price_strategy`{.docutils
        .literal .notranslate}]{.pre}: Transaction mined within 5
        minutes.

    -   [`web3.gas_strategies.time_based.slow_gas_price_strategy`{.docutils
        .literal .notranslate}]{.pre}: Transaction mined within 1 hour.

    -   [`web3.gas_strategies.time_based.glacial_gas_price_strategy`{.docutils
        .literal .notranslate}]{.pre}: Transaction mined within 24
        hours.

    ::: {.admonition .warning}
    Warning

    Due to the overhead of sampling the recent blocks it is recommended
    that a caching solution be used to reduce the amount of chain data
    that needs to be re-fetched for each request.
    :::

    ::: {.highlight-python .notranslate}
    ::: highlight
        from web3 import Web3
        from web3.gas_strategies.time_based import medium_gas_price_strategy

        w3 = Web3(...)
        w3.eth.set_gas_price_strategy(medium_gas_price_strategy)

        w3.provider.cache_allowed_requests = True
    :::
    :::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#ens.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#ens.xhtml#ens-api .section}
[]{#ens.xhtml#module-ens}

# ENS API

[[Ethereum Name Service (ENS)]{.doc}](#ens_overview.xhtml){.reference
.internal} has a friendly overview.

Continue below for the detailed specs on each method and class in the
ens module.

::: {#ens.xhtml#module-ens.ens .section}
[]{#ens.xhtml#ens-ens-module}

## ens.ens module

*[class]{.pre}[ ]{.w}*[[ens.ens.]{.pre}]{.sig-prename .descclassname}[[ENS]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[provider]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[BaseProvider]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[addr]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ChecksumAddress]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[middleware]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Sequence]{.pre}](https://docs.python.org/3/library/typing.html#typing.Sequence "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Sequence\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[[Tuple]{.pre}](https://docs.python.org/3/library/typing.html#typing.Tuple "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Tuple\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[Middleware]{.pre}[[,]{.pre}]{.p}[ ]{.w}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Quick access to common Ethereum Name Service functions, like getting
    the address for a name.

    Unless otherwise specified, all addresses are assumed to be a
    `<cite>`{=html}str`</cite>`{=html} in [checksum
    format](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md){.reference
    .external}[
    \[https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md\]]{.link-target},
    \# blocklint: pragma \# noqa: E501 like:
    [`"0x314159265dD8dbb310642f98f50C066173C1259b"`{.docutils .literal
    .notranslate}]{.pre}

    *[classmethod]{.pre}[ ]{.w}*[[from_web3]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[w3]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Web3]{.pre}](#web3.main.xhtml#web3.Web3 "web3.Web3"){.reference .internal}]{.n}*, *[[addr]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ChecksumAddress]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[ENS]{.pre}](#ens.xhtml#ens.ens.ENS "ens.ens.ENS"){.reference .internal}]{.sig-return-typehint}]{.sig-return}

    :   Generate an ENS instance from a Web3 instance

        Parameters[:]{.colon}

        :   -   **w3**
                ([*web3.Web3*](#web3.main.xhtml#web3.Web3 "web3.Web3"){.reference
                .internal}) -- to infer connection, middleware, and
                codec information

            -   **addr** (*hex-string*) -- the address of the ENS
                registry on-chain. If not provided, defaults to the
                mainnet ENS registry address.

    [[address]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[coin_type]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[int]{.pre}](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/functions.html#int\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[ChecksumAddress]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Look up the Ethereum address that
        `<cite>`{=html}name`</cite>`{=html} currently points to.

        Parameters[:]{.colon}

        :   -   **name**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- an ENS name to look up

            -   **coin_type**
                ([*int*](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/functions.html#int\]]{.link-target})
                -- if provided, look up the address for this coin type

        Raises[:]{.colon}

        :   -   [**InvalidName**](#ens.xhtml#ens.exceptions.InvalidName "ens.exceptions.InvalidName"){.reference
                .internal} -- if `<cite>`{=html}name`</cite>`{=html} has
                invalid syntax

            -   [**ResolverNotFound**](#ens.xhtml#ens.exceptions.ResolverNotFound "ens.exceptions.ResolverNotFound"){.reference
                .internal} -- if no resolver found for
                `<cite>`{=html}name`</cite>`{=html}

            -   [**UnsupportedFunction**](#ens.xhtml#ens.exceptions.UnsupportedFunction "ens.exceptions.UnsupportedFunction"){.reference
                .internal} -- if the resolver does not support the
                [`addr()`{.docutils .literal .notranslate}]{.pre}
                function

    [[setup_address]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name:]{.pre} [str]{.pre}]{.n}*, *[[address:]{.pre} [\~eth_typing.evm.Address]{.pre} [\|]{.pre} [\~eth_typing.evm.ChecksumAddress]{.pre} [\|]{.pre} [\~eth_typing.evm.HexAddress]{.pre} [=]{.pre} [\<object]{.pre} [object\>]{.pre}]{.n}*, *[[coin_type:]{.pre} [int]{.pre} [\|]{.pre} [None]{.pre} [=]{.pre} [None]{.pre}]{.n}*, *[[transact:]{.pre} [TxParams]{.pre} [\|]{.pre} [None]{.pre} [=]{.pre} [None]{.pre}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[HexBytes]{.pre}](https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes "(in HexBytes v2.0)"){.reference .external}[ [\[https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Set up the name to point to the supplied address. The sender of
        the transaction must own the name, or its parent name.

        Example: If the caller owns [`parentname.eth`{.docutils .literal
        .notranslate}]{.pre} with no subdomains and calls this method
        with [`sub.parentname.eth`{.docutils .literal
        .notranslate}]{.pre}, then [`sub`{.docutils .literal
        .notranslate}]{.pre} will be created as part of this call.

        Parameters[:]{.colon}

        :   -   **name**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- ENS name to set up

            -   **address**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- name will point to this address, in checksum format.
                If [`None`{.docutils .literal .notranslate}]{.pre},
                erase the record. If not specified, name will point to
                the owner's address.

            -   **coin_type**
                ([*int*](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/functions.html#int\]]{.link-target})
                -- if provided, set up the address for this coin type

            -   **transact**
                ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#dict\]]{.link-target})
                -- the transaction configuration, like in
                [[`send_transaction()`{.xref .py .py-meth .docutils
                .literal
                .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
                .internal}

        Raises[:]{.colon}

        :   -   [**InvalidName**](#ens.xhtml#ens.exceptions.InvalidName "ens.exceptions.InvalidName"){.reference
                .internal} -- if [`name`{.docutils .literal
                .notranslate}]{.pre} has invalid syntax

            -   [**UnauthorizedError**](#ens.xhtml#ens.exceptions.UnauthorizedError "ens.exceptions.UnauthorizedError"){.reference
                .internal} -- if [`'from'`{.docutils .literal
                .notranslate}]{.pre} in
                `<cite>`{=html}transact`</cite>`{=html} does not own
                `<cite>`{=html}name`</cite>`{=html}

    [[name]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[address]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ChecksumAddress]{.pre}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Look up the name that the address points to, using a reverse
        lookup. Reverse lookup is opt-in for name owners.

        Parameters[:]{.colon}

        :   **address** (*hex-string*)

    [[setup_name]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[address]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ChecksumAddress]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[transact]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[TxParams]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[HexBytes]{.pre}](https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes "(in HexBytes v2.0)"){.reference .external}[ [\[https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Set up the address for reverse lookup, aka "caller ID". After
        successful setup, the method [`name()`{.xref .py .py-meth
        .docutils .literal .notranslate}]{.pre} will return
        `<cite>`{=html}name`</cite>`{=html} when supplied with
        `<cite>`{=html}address`</cite>`{=html}.

        Parameters[:]{.colon}

        :   -   **name**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- ENS name that address will point to

            -   **address**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- address to set up, in checksum format

            -   **transact**
                ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#dict\]]{.link-target})
                -- the transaction configuration, like in
                [`send_transaction()`{.xref .py .py-meth .docutils
                .literal .notranslate}]{.pre}

        Raises[:]{.colon}

        :   -   [**AddressMismatch**](#ens.xhtml#ens.exceptions.AddressMismatch "ens.exceptions.AddressMismatch"){.reference
                .internal} -- if the name does not already point to the
                address

            -   [**InvalidName**](#ens.xhtml#ens.exceptions.InvalidName "ens.exceptions.InvalidName"){.reference
                .internal} -- if `<cite>`{=html}name`</cite>`{=html} has
                invalid syntax

            -   [**UnauthorizedError**](#ens.xhtml#ens.exceptions.UnauthorizedError "ens.exceptions.UnauthorizedError"){.reference
                .internal} -- if [`'from'`{.docutils .literal
                .notranslate}]{.pre} in
                `<cite>`{=html}transact`</cite>`{=html} does not own
                `<cite>`{=html}name`</cite>`{=html}

            -   [**UnownedName**](#ens.xhtml#ens.exceptions.UnownedName "ens.exceptions.UnownedName"){.reference
                .internal} -- if no one owns
                `<cite>`{=html}name`</cite>`{=html}

    [[owner]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[ChecksumAddress]{.pre}]{.sig-return-typehint}]{.sig-return}

    :   Get the owner of a name. Note that this may be different from
        the deed holder in the '.eth' registrar. Learn more about the
        difference between deed and name ownership in the ENS [Managing
        Ownership
        docs](http://docs.ens.domains/en/latest/userguide.html#managing-ownership){.reference
        .external}[
        \[http://docs.ens.domains/en/latest/userguide.html#managing-ownership\]]{.link-target}

        Parameters[:]{.colon}

        :   **name**
            ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
            -- ENS name to look up

        Returns[:]{.colon}

        :   owner address

        Return type[:]{.colon}

        :   [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target}

    [[setup_owner]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[new_owner]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ChecksumAddress]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[transact]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[TxParams]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[ChecksumAddress]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Set the owner of the supplied name to
        `<cite>`{=html}new_owner`</cite>`{=html}.

        For typical scenarios, you'll never need to call this method
        directly, simply call [[`setup_name()`{.xref .py .py-meth
        .docutils .literal
        .notranslate}]{.pre}](#ens.xhtml#ens.ens.ENS.setup_name "ens.ens.ENS.setup_name"){.reference
        .internal} or [[`setup_address()`{.xref .py .py-meth .docutils
        .literal
        .notranslate}]{.pre}](#ens.xhtml#ens.ens.ENS.setup_address "ens.ens.ENS.setup_address"){.reference
        .internal}. This method does *not* set up the name to point to
        an address.

        If `<cite>`{=html}new_owner`</cite>`{=html} is not supplied,
        then this will assume you want the same owner as the parent
        domain.

        If the caller owns [`parentname.eth`{.docutils .literal
        .notranslate}]{.pre} with no subdomains and calls this method
        with [`sub.parentname.eth`{.docutils .literal
        .notranslate}]{.pre}, then [`sub`{.docutils .literal
        .notranslate}]{.pre} will be created as part of this call.

        Parameters[:]{.colon}

        :   -   **name**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- ENS name to set up

            -   **new_owner** -- account that will own
                `<cite>`{=html}name`</cite>`{=html}. If
                [`None`{.docutils .literal .notranslate}]{.pre}, set
                owner to empty addr. If not specified, name will point
                to the parent domain owner's address.

            -   **transact**
                ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#dict\]]{.link-target})
                -- the transaction configuration, like in
                [[`send_transaction()`{.xref .py .py-meth .docutils
                .literal
                .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
                .internal}

        Raises[:]{.colon}

        :   -   [**InvalidName**](#ens.xhtml#ens.exceptions.InvalidName "ens.exceptions.InvalidName"){.reference
                .internal} -- if `<cite>`{=html}name`</cite>`{=html} has
                invalid syntax

            -   [**UnauthorizedError**](#ens.xhtml#ens.exceptions.UnauthorizedError "ens.exceptions.UnauthorizedError"){.reference
                .internal} -- if [`'from'`{.docutils .literal
                .notranslate}]{.pre} in
                `<cite>`{=html}transact`</cite>`{=html} does not own
                `<cite>`{=html}name`</cite>`{=html}

        Returns[:]{.colon}

        :   the new owner's address

    [[resolver]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[Contract]{.pre}](#web3.contract.xhtml#web3.contract.Contract "web3.contract.Contract"){.reference .internal}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Get the resolver for an ENS name.

        Parameters[:]{.colon}

        :   **name**
            ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
            -- The ENS name

    [[get_text]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[key]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Get the value of a text record by key from an ENS name.

        Parameters[:]{.colon}

        :   -   **name**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- ENS name to look up

            -   **key**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- ENS name's text record key

        Returns[:]{.colon}

        :   ENS name's text record value

        Return type[:]{.colon}

        :   [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target}

        Raises[:]{.colon}

        :   -   [**UnsupportedFunction**](#ens.xhtml#ens.exceptions.UnsupportedFunction "ens.exceptions.UnsupportedFunction"){.reference
                .internal} -- If the resolver does not support the
                "0x59d1d43c" interface id

            -   [**ResolverNotFound**](#ens.xhtml#ens.exceptions.ResolverNotFound "ens.exceptions.ResolverNotFound"){.reference
                .internal} -- If no resolver is found for the provided
                name

    [[set_text]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[key]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[value]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[transact]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[TxParams]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[HexBytes]{.pre}](https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes "(in HexBytes v2.0)"){.reference .external}[ [\[https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Set the value of a text record of an ENS name.

        Parameters[:]{.colon}

        :   -   **name**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- ENS name

            -   **key**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- Name of the attribute to set

            -   **value**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- Value to set the attribute to

            -   **transact**
                ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#dict\]]{.link-target})
                -- The transaction configuration, like in
                [[`send_transaction()`{.xref .py .py-meth .docutils
                .literal
                .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
                .internal}

        Returns[:]{.colon}

        :   Transaction hash

        Return type[:]{.colon}

        :   HexBytes

        Raises[:]{.colon}

        :   -   [**UnsupportedFunction**](#ens.xhtml#ens.exceptions.UnsupportedFunction "ens.exceptions.UnsupportedFunction"){.reference
                .internal} -- If the resolver does not support the
                "0x59d1d43c" interface id

            -   [**ResolverNotFound**](#ens.xhtml#ens.exceptions.ResolverNotFound "ens.exceptions.ResolverNotFound"){.reference
                .internal} -- If no resolver is found for the provided
                name
:::

::: {#ens.xhtml#module-ens.async_ens .section}
[]{#ens.xhtml#ens-async-ens-module}

## ens.async_ens module

*[class]{.pre}[ ]{.w}*[[ens.async_ens.]{.pre}]{.sig-prename .descclassname}[[AsyncENS]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[provider]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[AsyncBaseProvider]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[addr]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ChecksumAddress]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[middleware]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[Sequence]{.pre}](https://docs.python.org/3/library/typing.html#typing.Sequence "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Sequence\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[[Tuple]{.pre}](https://docs.python.org/3/library/typing.html#typing.Tuple "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/typing.html#typing.Tuple\]]{.pre}]{.link-target}[[\[]{.pre}]{.p}[Middleware]{.pre}[[,]{.pre}]{.p}[ ]{.w}[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}[[\]]{.pre}]{.p}[[\]]{.pre}]{.p}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren}

:   Quick access to common Ethereum Name Service functions, like getting
    the address for a name.

    Unless otherwise specified, all addresses are assumed to be a
    `<cite>`{=html}str`</cite>`{=html} in [checksum
    format](https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md){.reference
    .external}[
    \[https://github.com/ethereum/EIPs/blob/master/EIPS/eip-155.md\]]{.link-target},
    \# blocklint: pragma \# noqa: E501 like:
    [`"0x314159265dD8dbb310642f98f50C066173C1259b"`{.docutils .literal
    .notranslate}]{.pre}

    *[classmethod]{.pre}[ ]{.w}*[[from_web3]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[w3]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[AsyncWeb3]{.pre}[[\[]{.pre}]{.p}[Any]{.pre}[[\]]{.pre}]{.p}]{.n}*, *[[addr]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ChecksumAddress]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[AsyncENS]{.pre}](#ens.xhtml#ens.async_ens.AsyncENS "ens.async_ens.AsyncENS"){.reference .internal}]{.sig-return-typehint}]{.sig-return}

    :   Generate an AsyncENS instance with web3

        Parameters[:]{.colon}

        :   -   **w3**
                ([*web3.Web3*](#web3.main.xhtml#web3.Web3 "web3.Web3"){.reference
                .internal}) -- to infer connection information

            -   **addr** (*hex-string*) -- the address of the ENS
                registry on-chain. If not provided, defaults to the
                mainnet ENS registry address.

    *[async]{.pre}[ ]{.w}*[[address]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[coin_type]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[int]{.pre}](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/functions.html#int\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[ChecksumAddress]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Look up the Ethereum address that
        `<cite>`{=html}name`</cite>`{=html} currently points to.

        Parameters[:]{.colon}

        :   -   **name**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- an ENS name to look up

            -   **coin_type**
                ([*int*](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/functions.html#int\]]{.link-target})
                -- if provided, look up the address for this coin type

        Raises[:]{.colon}

        :   [**InvalidName**](#ens.xhtml#ens.exceptions.InvalidName "ens.exceptions.InvalidName"){.reference
            .internal} -- if `<cite>`{=html}name`</cite>`{=html} has
            invalid syntax

    *[async]{.pre}[ ]{.w}*[[setup_address]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name:]{.pre} [str]{.pre}]{.n}*, *[[address:]{.pre} [\~eth_typing.evm.Address]{.pre} [\|]{.pre} [\~eth_typing.evm.ChecksumAddress]{.pre} [\|]{.pre} [\~eth_typing.evm.HexAddress]{.pre} [=]{.pre} [\<object]{.pre} [object\>]{.pre}]{.n}*, *[[coin_type:]{.pre} [int]{.pre} [\|]{.pre} [None]{.pre} [=]{.pre} [None]{.pre}]{.n}*, *[[transact:]{.pre} [TxParams]{.pre} [\|]{.pre} [None]{.pre} [=]{.pre} [None]{.pre}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[HexBytes]{.pre}](https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes "(in HexBytes v2.0)"){.reference .external}[ [\[https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Set up the name to point to the supplied address. The sender of
        the transaction must own the name, or its parent name.

        Example: If the caller owns [`parentname.eth`{.docutils .literal
        .notranslate}]{.pre} with no subdomains and calls this method
        with [`sub.parentname.eth`{.docutils .literal
        .notranslate}]{.pre}, then [`sub`{.docutils .literal
        .notranslate}]{.pre} will be created as part of this call.

        Parameters[:]{.colon}

        :   -   **name**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- ENS name to set up

            -   **address**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- name will point to this address, in checksum format.
                If [`None`{.docutils .literal .notranslate}]{.pre},
                erase the record. If not specified, name will point to
                the owner's address.

            -   **coin_type**
                ([*int*](https://docs.python.org/3/library/functions.html#int "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/functions.html#int\]]{.link-target})
                -- if provided, set up the address for this coin type

            -   **transact**
                ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#dict\]]{.link-target})
                -- the transaction configuration, like in
                [[`send_transaction()`{.xref .py .py-meth .docutils
                .literal
                .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
                .internal}

        Raises[:]{.colon}

        :   -   [**InvalidName**](#ens.xhtml#ens.exceptions.InvalidName "ens.exceptions.InvalidName"){.reference
                .internal} -- if [`name`{.docutils .literal
                .notranslate}]{.pre} has invalid syntax

            -   [**UnauthorizedError**](#ens.xhtml#ens.exceptions.UnauthorizedError "ens.exceptions.UnauthorizedError"){.reference
                .internal} -- if [`'from'`{.docutils .literal
                .notranslate}]{.pre} in
                `<cite>`{=html}transact`</cite>`{=html} does not own
                `<cite>`{=html}name`</cite>`{=html}

    *[async]{.pre}[ ]{.w}*[[name]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[address]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ChecksumAddress]{.pre}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Look up the name that the address points to, using a reverse
        lookup. Reverse lookup is opt-in for name owners.

        Parameters[:]{.colon}

        :   **address** (*hex-string*)

    *[async]{.pre}[ ]{.w}*[[setup_name]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[address]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ChecksumAddress]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[transact]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[TxParams]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[HexBytes]{.pre}](https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes "(in HexBytes v2.0)"){.reference .external}[ [\[https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Set up the address for reverse lookup, aka "caller ID". After
        successful setup, the method [`name()`{.xref .py .py-meth
        .docutils .literal .notranslate}]{.pre} will return
        `<cite>`{=html}name`</cite>`{=html} when supplied with
        `<cite>`{=html}address`</cite>`{=html}.

        Parameters[:]{.colon}

        :   -   **name**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- ENS name that address will point to

            -   **address**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- address to set up, in checksum format

            -   **transact**
                ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#dict\]]{.link-target})
                -- the transaction configuration, like in
                [`send_transaction()`{.xref .py .py-meth .docutils
                .literal .notranslate}]{.pre}

        Raises[:]{.colon}

        :   -   [**AddressMismatch**](#ens.xhtml#ens.exceptions.AddressMismatch "ens.exceptions.AddressMismatch"){.reference
                .internal} -- if the name does not already point to the
                address

            -   [**InvalidName**](#ens.xhtml#ens.exceptions.InvalidName "ens.exceptions.InvalidName"){.reference
                .internal} -- if `<cite>`{=html}name`</cite>`{=html} has
                invalid syntax

            -   [**UnauthorizedError**](#ens.xhtml#ens.exceptions.UnauthorizedError "ens.exceptions.UnauthorizedError"){.reference
                .internal} -- if [`'from'`{.docutils .literal
                .notranslate}]{.pre} in
                `<cite>`{=html}transact`</cite>`{=html} does not own
                `<cite>`{=html}name`</cite>`{=html}

            -   [**UnownedName**](#ens.xhtml#ens.exceptions.UnownedName "ens.exceptions.UnownedName"){.reference
                .internal} -- if no one owns
                `<cite>`{=html}name`</cite>`{=html}

    *[async]{.pre}[ ]{.w}*[[owner]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[ChecksumAddress]{.pre}]{.sig-return-typehint}]{.sig-return}

    :   Get the owner of a name. Note that this may be different from
        the deed holder in the '.eth' registrar. Learn more about the
        difference between deed and name ownership in the ENS [Managing
        Ownership
        docs](http://docs.ens.domains/en/latest/userguide.html#managing-ownership){.reference
        .external}[
        \[http://docs.ens.domains/en/latest/userguide.html#managing-ownership\]]{.link-target}

        Parameters[:]{.colon}

        :   **name**
            ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
            -- ENS name to look up

        Returns[:]{.colon}

        :   owner address

        Return type[:]{.colon}

        :   [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target}

    *[async]{.pre}[ ]{.w}*[[setup_owner]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[new_owner]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[ChecksumAddress]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*, *[[transact]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[TxParams]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[ChecksumAddress]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Set the owner of the supplied name to
        `<cite>`{=html}new_owner`</cite>`{=html}.

        For typical scenarios, you'll never need to call this method
        directly, simply call [[`setup_name()`{.xref .py .py-meth
        .docutils .literal
        .notranslate}]{.pre}](#ens.xhtml#ens.async_ens.AsyncENS.setup_name "ens.async_ens.AsyncENS.setup_name"){.reference
        .internal} or [[`setup_address()`{.xref .py .py-meth .docutils
        .literal
        .notranslate}]{.pre}](#ens.xhtml#ens.async_ens.AsyncENS.setup_address "ens.async_ens.AsyncENS.setup_address"){.reference
        .internal}. This method does *not* set up the name to point to
        an address.

        If `<cite>`{=html}new_owner`</cite>`{=html} is not supplied,
        then this will assume you want the same owner as the parent
        domain.

        If the caller owns [`parentname.eth`{.docutils .literal
        .notranslate}]{.pre} with no subdomains and calls this method
        with [`sub.parentname.eth`{.docutils .literal
        .notranslate}]{.pre}, then [`sub`{.docutils .literal
        .notranslate}]{.pre} will be created as part of this call.

        Parameters[:]{.colon}

        :   -   **name**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- ENS name to set up

            -   **new_owner** -- account that will own
                `<cite>`{=html}name`</cite>`{=html}. If
                [`None`{.docutils .literal .notranslate}]{.pre}, set
                owner to empty addr. If not specified, name will point
                to the parent domain owner's address.

            -   **transact**
                ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#dict\]]{.link-target})
                -- the transaction configuration, like in
                [[`send_transaction()`{.xref .py .py-meth .docutils
                .literal
                .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
                .internal}

        Raises[:]{.colon}

        :   -   [**InvalidName**](#ens.xhtml#ens.exceptions.InvalidName "ens.exceptions.InvalidName"){.reference
                .internal} -- if `<cite>`{=html}name`</cite>`{=html} has
                invalid syntax

            -   [**UnauthorizedError**](#ens.xhtml#ens.exceptions.UnauthorizedError "ens.exceptions.UnauthorizedError"){.reference
                .internal} -- if [`'from'`{.docutils .literal
                .notranslate}]{.pre} in
                `<cite>`{=html}transact`</cite>`{=html} does not own
                `<cite>`{=html}name`</cite>`{=html}

        Returns[:]{.colon}

        :   the new owner's address

    *[async]{.pre}[ ]{.w}*[[resolver]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[AsyncContract]{.pre}[ ]{.w}[[\|]{.pre}]{.p}[ ]{.w}[[None]{.pre}](https://docs.python.org/3/library/constants.html#None "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/constants.html#None\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Get the resolver for an ENS name.

        Parameters[:]{.colon}

        :   **name**
            ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
            -- The ENS name

    *[async]{.pre}[ ]{.w}*[[get_text]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[key]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Get the value of a text record by key from an ENS name.

        Parameters[:]{.colon}

        :   -   **name**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- ENS name to look up

            -   **key**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- ENS name's text record key

        Returns[:]{.colon}

        :   ENS name's text record value

        Return type[:]{.colon}

        :   [str](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
            .external}[
            \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target}

        Raises[:]{.colon}

        :   -   [**UnsupportedFunction**](#ens.xhtml#ens.exceptions.UnsupportedFunction "ens.exceptions.UnsupportedFunction"){.reference
                .internal} -- If the resolver does not support the
                "0x59d1d43c" interface id

            -   [**ResolverNotFound**](#ens.xhtml#ens.exceptions.ResolverNotFound "ens.exceptions.ResolverNotFound"){.reference
                .internal} -- If no resolver is found for the provided
                name

    *[async]{.pre}[ ]{.w}*[[set_text]{.pre}]{.sig-name .descname}[(]{.sig-paren}*[[name]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[key]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[value]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[[str]{.pre}](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference .external}[ [\[https://docs.python.org/3/library/stdtypes.html#str\]]{.pre}]{.link-target}]{.n}*, *[[transact]{.pre}]{.n}[[:]{.pre}]{.p}[ ]{.w}[[TxParams]{.pre}]{.n}[ ]{.w}[[=]{.pre}]{.o}[ ]{.w}[[None]{.pre}]{.default_value}*[)]{.sig-paren} [[â†’]{.sig-return-icon} [[[HexBytes]{.pre}](https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes "(in HexBytes v2.0)"){.reference .external}[ [\[https://hexbytes.readthedocs.io/en/latest/hexbytes.html#hexbytes.main.HexBytes\]]{.pre}]{.link-target}]{.sig-return-typehint}]{.sig-return}

    :   Set the value of a text record of an ENS name.

        Parameters[:]{.colon}

        :   -   **name**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- ENS name

            -   **key**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- The name of the attribute to set

            -   **value**
                ([*str*](https://docs.python.org/3/library/stdtypes.html#str "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#str\]]{.link-target})
                -- Value to set the attribute to

            -   **transact**
                ([*dict*](https://docs.python.org/3/library/stdtypes.html#dict "(in Python v3.14)"){.reference
                .external}[
                \[https://docs.python.org/3/library/stdtypes.html#dict\]]{.link-target})
                -- The transaction configuration, like in
                [[`send_transaction()`{.xref .py .py-meth .docutils
                .literal
                .notranslate}]{.pre}](#web3.eth.xhtml#web3.eth.Eth.send_transaction "web3.eth.Eth.send_transaction"){.reference
                .internal}

        Returns[:]{.colon}

        :   Transaction hash

        Return type[:]{.colon}

        :   HexBytes

        Raises[:]{.colon}

        :   -   [**UnsupportedFunction**](#ens.xhtml#ens.exceptions.UnsupportedFunction "ens.exceptions.UnsupportedFunction"){.reference
                .internal} -- If the resolver does not support the
                "0x59d1d43c" interface id

            -   [**ResolverNotFound**](#ens.xhtml#ens.exceptions.ResolverNotFound "ens.exceptions.ResolverNotFound"){.reference
                .internal} -- If no resolver is found for the provided
                name
:::

::: {#ens.xhtml#module-ens.exceptions .section}
[]{#ens.xhtml#ens-exceptions-module}

## ens.exceptions module

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[ENSException]{.pre}]{.sig-name .descname}

:   Bases: [[`Exception`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](https://docs.python.org/3/library/exceptions.html#Exception "(in Python v3.14)"){.reference
    .external}[
    \[https://docs.python.org/3/library/exceptions.html#Exception\]]{.link-target}

    Base class for all ENS Errors

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[ENSValueError]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}, [[`ValueError`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](https://docs.python.org/3/library/exceptions.html#ValueError "(in Python v3.14)"){.reference
    .external}[
    \[https://docs.python.org/3/library/exceptions.html#ValueError\]]{.link-target}

    An ENS exception wrapper for
    `<cite>`{=html}ValueError`</cite>`{=html}, for better control over
    exception handling.

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[ENSTypeError]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}, [[`TypeError`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](https://docs.python.org/3/library/exceptions.html#TypeError "(in Python v3.14)"){.reference
    .external}[
    \[https://docs.python.org/3/library/exceptions.html#TypeError\]]{.link-target}

    An ENS exception wrapper for
    `<cite>`{=html}TypeError`</cite>`{=html}, for better control over
    exception handling.

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[AddressMismatch]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}

    In order to set up reverse resolution correctly, the ENS name should
    first point to the address. This exception is raised if the name
    does not currently point to the address.

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[InvalidName]{.pre}]{.sig-name .descname}

:   Bases: [`IDNAError`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}, [[`ENSException`{.xref .py .py-class .docutils
    .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}

    Raised if the provided name does not meet the normalization
    standards specified in `<cite>`{=html}ENSIP-15`</cite>`{=html}
    \<[https://docs.ens.domains/ens-improvement-proposals/ensip-15-normalization-standard](https://docs.ens.domains/ens-improvement-proposals/ensip-15-normalization-standard){.reference
    .external}\>\`\_.

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[UnauthorizedError]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}

    Raised if the sending account is not the owner of the name you are
    trying to modify. Make sure to set [`from`{.docutils .literal
    .notranslate}]{.pre} in the [`transact`{.docutils .literal
    .notranslate}]{.pre} keyword argument to the owner of the name.

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[UnownedName]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}

    Raised if you are trying to modify a name that no one owns.

    If working on a subdomain, make sure the subdomain gets created
    first with [`setup_address()`{.xref .py .py-meth .docutils .literal
    .notranslate}]{.pre}.

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[ResolverNotFound]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}

    Raised if no resolver was found for the name you are trying to
    resolve.

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[UnsupportedFunction]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}

    Raised if a resolver does not support a particular method.

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[BidTooLow]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}

    Raised if you bid less than the minimum amount

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[InvalidBidHash]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}

    Raised if you supply incorrect data to generate the bid hash.

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[InvalidLabel]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}

    Raised if you supply an invalid label

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[OversizeTransaction]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}

    Raised if a transaction you are trying to create would cost so much
    gas that it could not fit in a block.

    For example: when you try to start too many auctions at once.

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[UnderfundedBid]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}

    Raised if you send less wei with your bid than you declared as your
    intent to bid.

```{=html}
<!-- -->
```

*[exception]{.pre}[ ]{.w}*[[ens.exceptions.]{.pre}]{.sig-prename .descclassname}[[ENSValidationError]{.pre}]{.sig-name .descname}

:   Bases: [[`ENSException`{.xref .py .py-class .docutils .literal
    .notranslate}]{.pre}](#ens.xhtml#ens.exceptions.ENSException "ens.exceptions.ENSException"){.reference
    .internal}

    Raised if there is a validation error
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#constants.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#constants.xhtml#constants .section}
[]{#constants.xhtml#id1}

# Constants

The web3.constants module contains commonly used values.

::: {#constants.xhtml#strings .section}
## Strings

::: {.highlight-python .notranslate}
::: highlight
    #The Address Zero, which is 20 bytes (40 nibbles) of zero.
    web3.constants.ADDRESS_ZERO

    #The hexadecimal version of Max uint256.
    web3.constants.MAX_INT

    #The Hash Zero, which is 32 bytes (64 nibbles) of zero.
    web3.constants.HASH_ZERO
:::
:::
:::

::: {#constants.xhtml#int .section}
## Int

::: {.highlight-python .notranslate}
::: highlight
    #The amount of Wei in one Ether
    web3.constants.WEI_PER_ETHER
:::
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#resources.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#resources.xhtml#resources-and-learning-material .section}
[]{#resources.xhtml#resources}

# Resources and Learning Material

web3.py and the Ethereum Python ecosystem have an active community of
developers and educators. Here you'll find libraries, tutorials,
examples, courses and other learning material.

::: {.admonition .warning}
Warning

Links on this page are community submissions and are not vetted by the
team that maintains web3.py. As always, DYOR (Do Your Own Research).
:::

::: {#resources.xhtml#first-steps .section}
## First Steps

Resources for those brand new to Ethereum:

-   [A Developer's Guide to Ethereum, Pt.
    1](https://snakecharmers.ethereum.org/a-developers-guide-to-ethereum-pt-1/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/a-developers-guide-to-ethereum-pt-1/\]]{.link-target}

-   [Ethereum Python Ecosystem
    Tour](https://snakecharmers.ethereum.org/python-ecosystem/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/python-ecosystem/\]]{.link-target}
:::

::: {#resources.xhtml#courses .section}
## Courses

-   [freeCodeCamp Solidity and Python Course
    (2022)](https://www.youtube.com/watch?v=umg2fWQX6jM){.reference
    .external}[
    \[https://www.youtube.com/watch?v=umg2fWQX6jM\]]{.link-target}

-   [Blockchain Python Programming Tutorial
    (2019)](https://www.youtube.com/watch?v=pZSegEXtgAE){.reference
    .external}[
    \[https://www.youtube.com/watch?v=pZSegEXtgAE\]]{.link-target}
:::

::: {#resources.xhtml#tutorials .section}
## Tutorials

-   Intro to [Ape development
    framework](https://snakecharmers.ethereum.org/intro-to-ape/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/intro-to-ape/\]]{.link-target}

-   Intro to
    [websockets](https://snakecharmers.ethereum.org/websocketprovider/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/websocketprovider/\]]{.link-target}
    and web3.py

-   Intro to [asynchronous
    web3.py](https://snakecharmers.ethereum.org/web3-py-patterns-intro-async/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/web3-py-patterns-intro-async/\]]{.link-target}

-   Intro to [threaded
    web3.py](https://snakecharmers.ethereum.org/web3-py-patterns-multithreading/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/web3-py-patterns-multithreading/\]]{.link-target}

-   Sign [typed data
    messages](https://snakecharmers.ethereum.org/typed-data-message-signing/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/typed-data-message-signing/\]]{.link-target}
    (EIP 712)

-   Look up offchain data via [CCIP
    Read](https://snakecharmers.ethereum.org/web3-py-patterns-off-chain-lookups/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/web3-py-patterns-off-chain-lookups/\]]{.link-target}

-   Configure and [customize
    web3.py](https://snakecharmers.ethereum.org/web3-py-patterns-customizations/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/web3-py-patterns-customizations/\]]{.link-target}

-   [Decode a signed
    transaction](https://snakecharmers.ethereum.org/web3-py-patterns-decoding-signed-transactions/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/web3-py-patterns-decoding-signed-transactions/\]]{.link-target}

-   Find a historical contract [revert
    reason](https://snakecharmers.ethereum.org/web3py-revert-reason-parsing/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/web3py-revert-reason-parsing/\]]{.link-target}

-   Generate a [vanity
    address](https://snakecharmers.ethereum.org/web3-py-patterns-mining-addresses/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/web3-py-patterns-mining-addresses/\]]{.link-target}

-   Simulate transactions with [call state
    overrides](https://snakecharmers.ethereum.org/web3-py-patterns-eth_call-overrides/){.reference
    .external}[
    \[https://snakecharmers.ethereum.org/web3-py-patterns-eth_call-overrides/\]]{.link-target}

-   Configure web3 for [JSON-RPC fallback and MEV blocker
    providers](https://web3-ethereum-defi.readthedocs.io/tutorials/mev-blocker.html#mev-protection-and-multiple-json-rpcs-configuration){.reference
    .external}[
    \[https://web3-ethereum-defi.readthedocs.io/tutorials/mev-blocker.html#mev-protection-and-multiple-json-rpcs-configuration\]]{.link-target}
:::

::: {#resources.xhtml#conference-presentations-and-videos .section}
## Conference Presentations and Videos

-   [Web3.Py - Now And Near Future by Marc Garreau (2022, 15
    mins)](https://www.youtube.com/watch?v=hj6ubyyE_TY){.reference
    .external}[
    \[https://www.youtube.com/watch?v=hj6ubyyE_TY\]]{.link-target}

-   [Python and DeFi by Curve Finance (2022, 15
    mins)](https://www.youtube.com/watch?v=4HOU3z0LoDg){.reference
    .external}[
    \[https://www.youtube.com/watch?v=4HOU3z0LoDg\]]{.link-target}

-   [Working with MetaMask in Python by Rishab Kattimani (2022, 15
    mins)](https://www.youtube.com/watch?v=cFB1BGeCpn0){.reference
    .external}[
    \[https://www.youtube.com/watch?v=cFB1BGeCpn0\]]{.link-target}
:::

::: {#resources.xhtml#smart-contract-programming-languages .section}
## Smart Contract Programming Languages

-   [Vyper](https://docs.vyperlang.org/en/stable/){.reference
    .external}[
    \[https://docs.vyperlang.org/en/stable/\]]{.link-target} -
    Contract-oriented, pythonic programming language that targets EVM
:::

::: {#resources.xhtml#frameworks-and-tooling .section}
## Frameworks and Tooling

-   [Ape](https://www.apeworx.io/){.reference .external}[
    \[https://www.apeworx.io/\]]{.link-target} - The Ethereum
    development framework for Python Developers, Data Scientists, and
    Security Professionals

-   [Titanoboa](https://github.com/vyperlang/titanoboa){.reference
    .external}[
    \[https://github.com/vyperlang/titanoboa\]]{.link-target} - A Vyper
    interpreter and testing framework

-   [Wake](https://github.com/Ackee-Blockchain/wake){.reference
    .external}[
    \[https://github.com/Ackee-Blockchain/wake\]]{.link-target} - A
    Python-based development and testing framework for Solidity

-   [Brownie](https://github.com/eth-brownie/brownie){.reference
    .external}[
    \[https://github.com/eth-brownie/brownie\]]{.link-target} - \[No
    longer actively maintained\] A Python-based development and testing
    framework for smart contracts targeting EVM
:::

::: {#resources.xhtml#libraries .section}
## Libraries

-   [Web3 Ethereum
    DeFi](https://github.com/tradingstrategy-ai/web3-ethereum-defi){.reference
    .external}[
    \[https://github.com/tradingstrategy-ai/web3-ethereum-defi\]]{.link-target} -
    Library for DeFi trading and protocols (Uniswap, PancakeSwap, Sushi,
    Aave, Chainlink)

-   [lighter-v1-python](https://github.com/elliottech/lighter-v1-python){.reference
    .external}[
    \[https://github.com/elliottech/lighter-v1-python\]]{.link-target} -
    Lighter.xyz DEX client for Python

-   [uniswap-python](https://uniswap-python.com/){.reference .external}[
    \[https://uniswap-python.com/\]]{.link-target} - Library lets you
    easily retrieve prices and make trades on all Uniswap versions.

-   [pyWalletConnect](https://github.com/bitlogik/pyWalletConnect){.reference
    .external}[
    \[https://github.com/bitlogik/pyWalletConnect\]]{.link-target} -
    WalletConnect implementation for wallets in Python

-   [dydx-v3-python](https://github.com/dydxprotocol/dydx-v3-python){.reference
    .external}[
    \[https://github.com/dydxprotocol/dydx-v3-python\]]{.link-target} -
    Python client for dYdX v3

-   [Lido Python
    SDK](https://github.com/lidofinance/lido-python-sdk){.reference
    .external}[
    \[https://github.com/lidofinance/lido-python-sdk\]]{.link-target} -
    Library with which you can get all Lido validator's signatures and
    check their validity
:::

::: {#resources.xhtml#applications .section}
## Applications

-   [Curve
    Finance](https://github.com/curvefi?q=&type=all&language=python&sort=){.reference
    .external}[
    \[https://github.com/curvefi?q=&type=all&language=python&sort=\]]{.link-target}

-   [Yearn
    Finance](https://github.com/yearn?q=&type=all&language=python&sort=){.reference
    .external}[
    \[https://github.com/yearn?q=&type=all&language=python&sort=\]]{.link-target}

-   [StakeWise Oracle](https://github.com/stakewise/oracle/){.reference
    .external}[ \[https://github.com/stakewise/oracle/\]]{.link-target}
:::

::: {#resources.xhtml#hackathon-helpers .section}
## Hackathon Helpers

-   [ape-hackathon-kit](https://github.com/wolovim/ape-hackathon-kit){.reference
    .external}[
    \[https://github.com/wolovim/ape-hackathon-kit\]]{.link-target} -
    Ape project template with a web front-end (Next.js, Tailwind,
    RainbowKit, wagmi)

-   [eth-flogger](https://github.com/wolovim/eth-flogger){.reference
    .external}[
    \[https://github.com/wolovim/eth-flogger\]]{.link-target} - Sample
    web app utilizing async web3.py, Flask, SQLite, Sourcify

-   [Temo](https://github.com/wolovim/temo){.reference .external}[
    \[https://github.com/wolovim/temo\]]{.link-target} - Sample terminal
    app utilizing async web3py, Textual, Anvil

-   [web3py-discord-bot](https://github.com/wolovim/web3py-discord-bot){.reference
    .external}[
    \[https://github.com/wolovim/web3py-discord-bot\]]{.link-target} -
    Sample Discord bot utilizing websockets, [`eth_subscribe`{.docutils
    .literal .notranslate}]{.pre}, and discord.py

-   [py-signer](https://github.com/wolovim/py-signer){.reference
    .external}[
    \[https://github.com/wolovim/py-signer\]]{.link-target} - Demo of
    typed data message signing (EIP-712) with eth-account and Ape
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#contributing.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#contributing.xhtml#contributing .section}
[]{#contributing.xhtml#id1}

# Contributing

Thanks for your interest in contributing to web3.py! Read on to learn
what would be helpful and how to go about it. If you get stuck along the
way, reach for help in the [Python Discord
server](https://discord.gg/GHryRvPB84){.reference .external}[
\[https://discord.gg/GHryRvPB84\]]{.link-target}.

::: {#contributing.xhtml#how-to-help .section}
## How to Help

Without code:

-   Answer user questions within GitHub issues, Stack Overflow, or the
    [Python Discord server](https://discord.gg/GHryRvPB84){.reference
    .external}[ \[https://discord.gg/GHryRvPB84\]]{.link-target}.

-   Write or record tutorial content.

-   Improve our documentation (including typo fixes).

-   [Open an
    issue](https://github.com/ethereum/web3.py/issues/new){.reference
    .external}[
    \[https://github.com/ethereum/web3.py/issues/new\]]{.link-target} on
    GitHub to document a bug. Include as much detail as possible, e.g.,
    how to reproduce the issue and any exception messages.

With code:

-   Fix a bug that has been reported in an issue.

-   Add a feature that has been documented in an issue.

-   Add a missing test case.

::: {.admonition .warning}
Warning

**Before you start:** always ask if a change would be desirable or let
us know that you plan to work on something! We don't want to waste your
time on changes we can't accept or duplicated effort.
:::
:::

::: {#contributing.xhtml#your-development-environment .section}
## Your Development Environment

::: {.admonition .note}
Note

Use of a virtual environment is strongly advised for minimizing
dependency issues. See [this
article](https://realpython.com/effective-python-environment/#virtual-environments){.reference
.external}[
\[https://realpython.com/effective-python-environment/#virtual-environments\]]{.link-target}
for usage patterns.
:::

All pull requests are made from a fork of the repository; use the GitHub
UI to create a fork. web3.py depends on
[submodules](https://gist.github.com/gitaarik/8735255){.reference
.external}[ \[https://gist.github.com/gitaarik/8735255\]]{.link-target},
so when you clone your fork to your local machine, include the
[`--recursive`{.docutils .literal .notranslate}]{.pre} flag:

::: {.highlight-sh .notranslate}
::: highlight
    $ git clone --recursive https://github.com/<your-github-username>/web3.py.git
    $ cd web3.py
:::
:::

Finally, install all development dependencies:

::: {.highlight-sh .notranslate}
::: highlight
    $ python -m pip install -e ".[dev]"
    $ pre-commit install
:::
:::

::: {#contributing.xhtml#using-docker .section}
### Using Docker

Developing within Docker is not required, but if you prefer that
workflow, use the *sandbox* container provided in the
**docker-compose.yml** file.

To start up the test environment, run:

::: {.highlight-sh .notranslate}
::: highlight
    $ docker compose up -d
:::
:::

This will build a Docker container set up with an environment to run the
Python test code.

To run the core tests from your local machine:

::: {.highlight-sh .notranslate}
::: highlight
    $ docker compose exec sandbox bash -c 'pytest tests/core'
:::
:::

The container does not have [`go-ethereum`{.docutils .literal
.notranslate}]{.pre} installed, so you can exclude those tests by using
the [`-k`{.docutils .literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`"not`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`goethereum"`{.docutils .literal .notranslate}]{.pre}
flag.

::: {.highlight-sh .notranslate}
::: highlight
    $ docker compose exec sandbox bash -c 'pytest tests/integration -k "not goethereum"'
:::
:::

You can run arbitrary commands inside the Docker container by using the
[`bash`{.docutils .literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`-c`{.docutils .literal .notranslate}]{.pre} prefix.

::: {.highlight-sh .notranslate}
::: highlight
    $ docker compose exec sandbox bash -c 'pwd && ls'
:::
:::

Or, if you would like to open a session to the container, run:

::: {.highlight-sh .notranslate}
::: highlight
    $ docker compose exec sandbox bash
:::
:::
:::
:::

::: {#contributing.xhtml#running-the-tests .section}
## Running The Tests

A great way to explore the code base is to run the tests.

First, install the test dependencies:

::: {.highlight-sh .notranslate}
::: highlight
    $ python -m pip install -e ".[test]"
:::
:::

You can run all tests with:

::: {.highlight-sh .notranslate}
::: highlight
    $ pytest
:::
:::

However, running the entire test suite takes a very long time and is
generally impractical. Typically, you'll just want to run a subset
instead, like:

::: {.highlight-sh .notranslate}
::: highlight
    $ pytest tests/core/eth-module/test_accounts.py
:::
:::

Linting is also performed by the CI and locally with each commit. You
can save yourself some time by checking for linting errors manually:

::: {.highlight-sh .notranslate}
::: highlight
    $ make lint
:::
:::

It is important to understand that each pull request must pass the full
test suite as part of the CI check. This test suite will run in the CI
anytime a pull request is opened or updated.
:::

::: {#contributing.xhtml#writing-tests .section}
## Writing Tests

We strongly encourage contributors to write good tests for their code as
part of the code review process. This helps ensure that your code is
doing what it should be doing.

We strongly encourage you to use our existing tests for both guidance
and homogeneity / consistency across our tests. We use
[`pytest`{.docutils .literal .notranslate}]{.pre} for our tests. For
more specific pytest guidance, please refer to the [pytest
documentation](https://docs.pytest.org/en/latest){.reference .external}[
\[https://docs.pytest.org/en/latest\]]{.link-target}.

Within the [`pytest`{.docutils .literal .notranslate}]{.pre} scope,
[`conftest.py`{.file .docutils .literal .notranslate}]{.pre} files are
used for common code shared between modules that exist within the same
directory as that particular [`conftest.py`{.file .docutils .literal
.notranslate}]{.pre} file.

::: {#contributing.xhtml#unit-testing-and-eth-tester-tests .section}
### Unit Testing and eth-tester Tests

Our unit tests are grouped together with tests against the
[`eth-tester`{.docutils .literal .notranslate}]{.pre} library, using the
[`py-evm`{.docutils .literal .notranslate}]{.pre} library as a backend,
via the [`EthereumTesterProvider`{.docutils .literal
.notranslate}]{.pre}.

These tests live under appropriately named child directories within the
[`/tests`{.docutils .literal .notranslate}]{.pre} directory. The core of
these tests live under [`/tests/core`{.docutils .literal
.notranslate}]{.pre}. Do your best to follow the existing structure when
adding a test and make sure that its location makes sense.
:::

::: {#contributing.xhtml#integration-testing .section}
### Integration Testing

Our integration test suite setup lives under the
[`/tests/integration`{.docutils .literal .notranslate}]{.pre} directory.
The integration test suite is dependent on what we call "fixtures" (not
to be confused with pytest fixtures). These zip file fixtures, which
also live in the [`/tests/integration`{.docutils .literal
.notranslate}]{.pre} directory, are configured to run the specific
client we are testing against along with a genesis configuration that
gives our tests some pre-determined useful objects (like unlocked,
pre-loaded accounts) to be able to interact with the client when we run
our tests.

The parent [`/integration`{.docutils .literal .notranslate}]{.pre}
directory houses some common configuration shared across all client
tests, whereas the [`/go_ethereum`{.docutils .literal
.notranslate}]{.pre} directory houses common code to be shared across
geth-specific provider tests. Though the setup and run configurations
exist across the different files within [`/tests/integration`{.docutils
.literal .notranslate}]{.pre}, our integration module tests are written
across different files within [`/web3/_utils/module_testing`{.docutils
.literal .notranslate}]{.pre}.

-   [`common.py`{.file .docutils .literal .notranslate}]{.pre} files
    within the client directories contain code that is shared across all
    provider tests (http, ipc, and ws). This is mostly used to override
    tests that span across all providers.

-   [`conftest.py`{.file .docutils .literal .notranslate}]{.pre} files
    within each of these directories contain mostly code that can be
    *used* by all test files that exist within the same directory or
    subdirectories of the [`conftest.py`{.file .docutils .literal
    .notranslate}]{.pre} file. This is mostly used to house pytest
    fixtures to be shared among our tests. Refer to the [pytest
    documentation on
    fixtures](https://docs.pytest.org/en/latest/how-to/fixtures.html){.reference
    .external}[
    \[https://docs.pytest.org/en/latest/how-to/fixtures.html\]]{.link-target}
    for more information.

-   [`test_{client}_{provider}.py`{.docutils .literal
    .notranslate}]{.pre} files (e.g. [`test_goethereum_http.py`{.file
    .docutils .literal .notranslate}]{.pre}) are where
    client-and-provider-specific test configurations exist. This is
    mostly used to override tests specific to the provider type for the
    respective client.

The integration tests are each run in insolation to prevent muddied
contexts. Because they are run in isolation, they can be parallelized
with [`pytest-xdist`{.docutils .literal .notranslate}]{.pre} in order to
speed up the test suite. To run the tests in parallel, you can use the
[`-n`{.docutils .literal .notranslate}]{.pre} flag with
[`pytest`{.docutils .literal .notranslate}]{.pre}. For example, to run
the tests in parallel with 4 workers, you can use the following command:

::: {.highlight-sh .notranslate}
::: highlight
    $ pytest tests/integration/go_ethereum/path/to/module/or/test -n 4
:::
:::
:::

::: {#contributing.xhtml#working-with-test-contracts .section}
### Working With Test Contracts

Contracts used for testing exist under
[`web3/_utils/contract_sources`{.docutils .literal .notranslate}]{.pre}.
These contracts get compiled via the [`compile_contracts.py`{.docutils
.literal .notranslate}]{.pre} script in the same directory. To use this
script, simply pass the Solidity version to be used to compile the
contracts as an argument at the command line.

Arguments for the script are:

:   

    -v or --version Solidity version to be used to compile the contracts. If

    :   blank, the script uses the latest available version from solcx.

    -f or --filename If left blank, all .sol files will be compiled and the

    :   respective contract data will be generated. Pass in a specific
        [`.sol`{.docutils .literal .notranslate}]{.pre} filename here to
        compile just one file.

To run the script, you will need the [`py-solc-x`{.docutils .literal
.notranslate}]{.pre} library for compiling the files as well as
[`black`{.docutils .literal .notranslate}]{.pre} for code formatting.
You can install those with:

::: {.highlight-sh .notranslate}
::: highlight
    $ python -m pip install py-solc-x black
:::
:::

The following example compiles all the contracts and generates their
respective contract data that is used across our test files for the test
suites. This data gets generated within the [`contract_data`{.docutils
.literal .notranslate}]{.pre} subdirectory within the
[`contract_sources`{.docutils .literal .notranslate}]{.pre} folder.

::: {.highlight-bash .notranslate}
::: highlight
    $ cd ../web3.py/web3/_utils/contract_sources
    $ python compile_contracts.py -v 0.8.17
    Compiling OffchainLookup
    ...
    ...
    reformatted ...
:::
:::

To compile and generate contract data for only one [`.sol`{.docutils
.literal .notranslate}]{.pre} file, specify using the filename with the
[`-f`{.docutils .literal .notranslate}]{.pre} (or
[`--filename`{.docutils .literal .notranslate}]{.pre}) argument flag.

::: {.highlight-bash .notranslate}
::: highlight
    $ cd ../web3.py/web3/_utils/contract_sources
    $ python compile_contracts.py -v 0.8.17 -f OffchainLookup.sol
    Compiling OffchainLookup.sol
    reformatted ...
:::
:::

If there is any contract data that is not generated via the script but
is important to pass on to the integration tests, the
[`_custom_contract_data.py`{.docutils .literal .notranslate}]{.pre} file
within the [`contract_data`{.docutils .literal .notranslate}]{.pre}
subdirectory can be used to store that information when appropriate.

Be sure to re-generate the integration test fixture after running the
script to update the contract bytecodes for the integration test suite -
see the [[Generating New Fixtures]{.std
.std-ref}](#contributing.xhtml#generating-fixtures){.reference
.internal} section below.
:::
:::

::: {#contributing.xhtml#manual-testing .section}
## Manual Testing

To import and test an unreleased version of web3.py in another context,
you can install it from your development directory:

::: {.highlight-sh .notranslate}
::: highlight
    $ python -m pip install -e ../path/to/web3py
:::
:::
:::

::: {#contributing.xhtml#code-style .section}
## Code Style

We use [pre-commit](https://pre-commit.com/){.reference .external}[
\[https://pre-commit.com/\]]{.link-target} to enforce a consistent code
style across the library. This tool runs automatically with every
commit, but you can also run it manually with:

::: {.highlight-sh .notranslate}
::: highlight
    $ make lint
:::
:::

If you need to make a commit that skips the [`pre-commit`{.docutils
.literal .notranslate}]{.pre} checks, you can do so with
[`git`{.docutils .literal .notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`commit`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`--no-verify`{.docutils .literal .notranslate}]{.pre}.

We use Black as part of our linting. To ignore the commits that
introduced Black in git history, you can configure your git environment
like so:

::: {.highlight-sh .notranslate}
::: highlight
    $ git config blame.ignoreRevsFile .git-blame-ignore-revs
:::
:::

This library uses [type
hints](https://www.python.org/dev/peps/pep-0484/){.reference .external}[
\[https://www.python.org/dev/peps/pep-0484/\]]{.link-target}, which are
enforced by the [`mypy`{.docutils .literal .notranslate}]{.pre} tool
(part of the [`pre-commit`{.docutils .literal .notranslate}]{.pre}
checks). All new code is required to land with type hints, with the
exception of code within the [`tests`{.docutils .literal
.notranslate}]{.pre} directory.
:::

::: {#contributing.xhtml#documentation .section}
## Documentation

Good documentation will lead to quicker adoption and happier users.
Please check out our guide on [how to create
documentation](https://github.com/ethereum/snake-charmers-tactical-manual/blob/main/documentation.md){.reference
.external}[
\[https://github.com/ethereum/snake-charmers-tactical-manual/blob/main/documentation.md\]]{.link-target}
for the Python Ethereum ecosystem.

Pull requests generate their own preview of the latest documentation at
[`https://web3py--<pr-number>.org.readthedocs.build/en/<pr-number>/`{.docutils
.literal .notranslate}]{.pre}.
:::

::: {#contributing.xhtml#pull-requests .section}
## Pull Requests

It's a good idea to make pull requests early on. A pull request
represents the start of a discussion, and doesn't necessarily need to be
the final, finished submission.

See GitHub's documentation for [working on pull
requests](https://help.github.com/articles/about-pull-requests/){.reference
.external}[
\[https://help.github.com/articles/about-pull-requests/\]]{.link-target}.

Once you've made a pull request take a look at the Circle CI build
status in the GitHub interface and make sure all tests are passing. In
general, pull requests that do not pass the CI build yet won't get
reviewed unless explicitly requested.

If the pull request introduces changes that should be reflected in the
release notes, please add a **newsfragment** file as explained
[here](https://github.com/ethereum/web3.py/blob/main/newsfragments/README.md){.reference
.external}[
\[https://github.com/ethereum/web3.py/blob/main/newsfragments/README.md\]]{.link-target}.

If possible, the change to the release notes file should be included in
the commit that introduces the feature or bugfix.
:::

::: {#contributing.xhtml#generating-new-fixtures .section}
[]{#contributing.xhtml#generating-fixtures}

## Generating New Fixtures

Our integration tests make use of Geth private networks. When new
versions of the client software are introduced, new fixtures should be
generated.

Before generating new fixtures, make sure you have the test dependencies
installed:

::: {.highlight-sh .notranslate}
::: highlight
    $ python -m pip install -e ".[test]"
:::
:::

::: {.admonition .note}
Note

A "fixture" is a pre-synced network. It's the result of configuring and
running a client, deploying the test contracts, and saving the resulting
state for testing web3.py functionality against.
:::

::: {#contributing.xhtml#geth-fixtures .section}
### Geth Fixtures

1.  Install the desired Geth version on your machine locally. We
    recommend [py-geth](https://github.com/ethereum/py-geth){.reference
    .external}[ \[https://github.com/ethereum/py-geth\]]{.link-target}
    for this purpose, because it enables you to easily manage multiple
    versions of Geth.

    Note that [`py-geth`{.docutils .literal .notranslate}]{.pre} will
    need updating to support each new Geth version as well. Adding newer
    Geth versions to py-geth is straightforward; see past commits for a
    template.

    If py-geth has the Geth version you need, install that version
    locally. For example:

    ::: {.highlight-sh .notranslate}
    ::: highlight
        $ python -m geth.install v1.16.7
    :::
    :::

2.  Specify the Geth binary and run the fixture creation script (from
    within the web3.py directory):

    ::: {.highlight-sh .notranslate}
    ::: highlight
        $ GETH_BINARY=~/.py-geth/geth-v1.16.7/bin/geth python ./tests/integration/generate_fixtures/go_ethereum.py
    :::
    :::

3.  The output of this script is your fixture, a zip file, which is now
    stored in [`/tests/integration/`{.docutils .literal
    .notranslate}]{.pre}. The
    [`/tests/integration/go_ethereum/conftest.py`{.docutils .literal
    .notranslate}]{.pre} and [`/web3/tools/benchmark/node.py`{.docutils
    .literal .notranslate}]{.pre} files should be updated automatically
    to point to this new fixture. Delete the old fixture.

4.  Run the tests. To ensure that the tests run with the correct Geth
    version locally, you may again include the [`GETH_BINARY`{.docutils
    .literal .notranslate}]{.pre} environment variable.

5.  The [`geth_version`{.docutils .literal .notranslate}]{.pre} and
    [`pygeth_version`{.docutils .literal .notranslate}]{.pre} parameter
    defaults in [`/.circleci/config.yml`{.docutils .literal
    .notranslate}]{.pre} should be automatically updated to match the
    [`go-ethereum`{.docutils .literal .notranslate}]{.pre} version used
    to generate the test fixture and the [`py-geth`{.docutils .literal
    .notranslate}]{.pre} version that supports installing it.
:::

::: {#contributing.xhtml#ci-testing-with-a-nightly-geth-build .section}
### CI Testing With a Nightly Geth Build

Occasionally you'll want to have CI run the test suite against an
unreleased version of Geth - e.g. to test upcoming hard fork changes.
The workflow described below is for testing only, as updates will only
be merged into main once the Geth release is published and the test runs
are updated to use the new stable version.

1.  Configure
    [`tests/integration/generate_fixtures/go_ethereum/common.py`{.docutils
    .literal .notranslate}]{.pre} as needed.

2.  Geth automagically compiles new builds for every commit that gets
    merged into the codebase. Download the desired build from the
    [develop builds](https://geth.ethereum.org/downloads/){.reference
    .external}[ \[https://geth.ethereum.org/downloads/\]]{.link-target}.

3.  Build your test fixture, passing in the binary you just downloaded
    via [`GETH_BINARY`{.docutils .literal .notranslate}]{.pre}. Don't
    forget to update the
    [`/tests/integration/go_ethereum/conftest.py`{.docutils .literal
    .notranslate}]{.pre} file to point to your new fixture.

4.  Our CI runs on Ubuntu, so download the corresponding 64-bit Linux
    [develop build](https://geth.ethereum.org/downloads/){.reference
    .external}[ \[https://geth.ethereum.org/downloads/\]]{.link-target},
    then add it to the root of your web3.py directory. Rename the binary
    [`custom_geth`{.docutils .literal .notranslate}]{.pre}.

5.  In [`.circleci/config.yml`{.docutils .literal .notranslate}]{.pre},
    update the [`geth_version`{.docutils .literal .notranslate}]{.pre}
    pipeline parameter to "custom". This will trigger the custom Geth
    build to be used in the CI test suite.

6.  Create a PR and let CI do its thing.
:::
:::

::: {#contributing.xhtml#releasing .section}
## Releasing

Releases are typically done from the [`main`{.docutils .literal
.notranslate}]{.pre} branch, except when releasing a beta (in which case
the beta is released from [`main`{.docutils .literal
.notranslate}]{.pre}, and the previous stable branch is released from
said branch).

::: {#contributing.xhtml#final-test-before-each-release .section}
### Final test before each release

Before releasing a new version, build and test the package that will be
released:

::: {.highlight-sh .notranslate}
::: highlight
    $ git checkout main && git pull
    $ make package-test
:::
:::

This will build the package and install it in a temporary virtual
environment. Follow the instructions to activate the venv and test
whatever you think is important.

Review the documentation that will get published:

::: {.highlight-sh .notranslate}
::: highlight
    $ make docs
:::
:::

Validate and preview the release notes:

::: {.highlight-sh .notranslate}
::: highlight
    $ make validate-newsfragments
:::
:::
:::

::: {#contributing.xhtml#build-the-release-notes .section}
### Build the release notes

Before bumping the version number, build the release notes. You must
include the part of the version to bump (see below), which changes how
the version number will show in the release notes.

::: {.highlight-sh .notranslate}
::: highlight
    $ make notes bump=$$VERSION_PART_TO_BUMP$$
:::
:::

If there are any errors, be sure to re-run make notes until it works.
:::

::: {#contributing.xhtml#push-the-release-to-github-pypi .section}
### Push the release to github & pypi

After confirming that the release package looks okay, release a new
version:

::: {.highlight-sh .notranslate}
::: highlight
    $ make release bump=$$VERSION_PART_TO_BUMP$$
:::
:::

This command will:

-   Bump the version number as specified in [`.pyproject.toml`{.docutils
    .literal .notranslate}]{.pre} and [`setup.py`{.docutils .literal
    .notranslate}]{.pre}.

-   Create a git commit and tag for the new version.

-   Build the package.

-   Push the commit and tag to github.

-   Push the new package files to pypi.
:::

::: {#contributing.xhtml#which-version-part-to-bump .section}
### Which version part to bump

[`$$VERSION_PART_TO_BUMP$$`{.docutils .literal .notranslate}]{.pre} must
be one of: [`major`{.docutils .literal .notranslate}]{.pre},
[`minor`{.docutils .literal .notranslate}]{.pre}, [`patch`{.docutils
.literal .notranslate}]{.pre}, [`stage`{.docutils .literal
.notranslate}]{.pre}, or [`devnum`{.docutils .literal
.notranslate}]{.pre}.

The version format for this repo is [`{major}.{minor}.{patch}`{.docutils
.literal .notranslate}]{.pre} for stable, and
[`{major}.{minor}.{patch}-{stage}.{devnum}`{.docutils .literal
.notranslate}]{.pre} for unstable ([`stage`{.docutils .literal
.notranslate}]{.pre} can be alpha or beta).

If you are in a beta version, [`make`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`release`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`bump=stage`{.docutils .literal .notranslate}]{.pre} will
switch to a stable.

To issue an unstable version when the current version is stable, specify
the new version explicitly, like [`make`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`release`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`bump="--new-version`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`4.0.0-alpha.1"`{.docutils .literal .notranslate}]{.pre}.

You can see what the result of bumping any particular version part would
be with [`bump-my-version`{.docutils .literal
.notranslate}]{.pre}` `{.docutils .literal
.notranslate}[`show-bump`{.docutils .literal .notranslate}]{.pre}.
:::
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#code_of_conduct.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
::: {#code_of_conduct.xhtml#code-of-conduct .section}
# Code of Conduct

::: {#code_of_conduct.xhtml#our-pledge .section}
## Our Pledge

In the interest of fostering an open and welcoming environment, we as
contributors and maintainers pledge to make participation in our project
and our community a harassment-free experience for everyone, regardless
of age, body size, disability, ethnicity, gender identity and
expression, level of experience, education, socio-economic status,
nationality, personal appearance, race, religion, or sexual identity and
orientation.
:::

::: {#code_of_conduct.xhtml#our-standards .section}
## Our Standards

Examples of behavior that contributes to creating a positive environment
include:

-   Using welcoming and inclusive language

-   Being respectful of differing viewpoints and experiences

-   Gracefully accepting constructive criticism

-   Focusing on what is best for the community

-   Showing empathy towards other community members

Examples of unacceptable behavior by participants include:

-   The use of sexualized language or imagery and unwelcome sexual
    attention or advances

-   Trolling, insulting/derogatory comments, and personal or political
    attacks

-   Public or private harassment

-   Publishing others' private information, such as a physical or
    electronic address, without explicit permission

-   Other conduct which could reasonably be considered inappropriate in
    a professional setting
:::

::: {#code_of_conduct.xhtml#our-responsibilities .section}
## Our Responsibilities

Project maintainers are responsible for clarifying the standards of
acceptable behavior and are expected to take appropriate and fair
corrective action in response to any instances of unacceptable behavior.

Project maintainers have the right and responsibility to remove, edit,
or reject comments, commits, code, wiki edits, issues, and other
contributions that are not aligned to this Code of Conduct, or to ban
temporarily or permanently any contributor for other behaviors that they
deem inappropriate, threatening, offensive, or harmful.
:::

::: {#code_of_conduct.xhtml#scope .section}
## Scope

This Code of Conduct applies both within project spaces and in public
spaces when an individual is representing the project or its community.
Examples of representing a project or community include using an
official project e-mail address, posting via an official social media
account, or acting as an appointed representative at an online or
offline event. Representation of a project may be further defined and
clarified by project maintainers.
:::

::: {#code_of_conduct.xhtml#enforcement .section}
## Enforcement

Instances of abusive, harassing, or otherwise unacceptable behavior may
be reported by contacting the project team at
[snakecharmers@ethereum.org](mailto:snakecharmers%40ethereum.org){.reference
.external}. All complaints will be reviewed and investigated and will
result in a response that is deemed necessary and appropriate to the
circumstances. The project team is obligated to maintain confidentiality
with regard to the reporter of an incident. Further details of specific
enforcement policies may be posted separately.

Project maintainers who do not follow or enforce the Code of Conduct in
good faith may face temporary or permanent repercussions as determined
by other members of the project's leadership.
:::

::: {#code_of_conduct.xhtml#attribution .section}
## Attribution

This Code of Conduct is adapted from the [Contributor
Covenant](https://www.contributor-covenant.org){.reference .external}[
\[https://www.contributor-covenant.org\]]{.link-target}, version 1.4,
available at
[https://www.contributor-covenant.org/version/1/4/code-of-conduct.html](https://www.contributor-covenant.org/version/1/4/code-of-conduct.html){.reference
.external}
:::
:::

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#py-modindex.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
# Python Module Index

::: modindex-jumpbox
[**e**](#py-modindex.xhtml#cap-e) \| [**w**](#py-modindex.xhtml#cap-w)
:::

  --------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------- --
                                                                        Â                                                                                                        
                                                                        **e**                                                                                                   
  ![-](./_static/minus.png){#toggle-1 .toggler style="display: none"}   [`ens`{.xref}](#ens.xhtml#module-ens)                                                                   
                                                                        Â Â Â  [`ens.async_ens`{.xref}](#ens.xhtml#module-ens.async_ens)                                           
                                                                        Â Â Â  [`ens.ens`{.xref}](#ens.xhtml#module-ens.ens)                                                       
                                                                        Â Â Â  [`ens.exceptions`{.xref}](#ens.xhtml#module-ens.exceptions)                                         
                                                                        Â                                                                                                        
                                                                        **w**                                                                                                   
  ![-](./_static/minus.png){#toggle-2 .toggler style="display: none"}   [`web3`{.xref}](#web3.main.xhtml#module-web3)                                                           
                                                                        Â Â Â  [`web3.contract`{.xref}](#web3.contract.xhtml#module-web3.contract)                                 
                                                                        Â Â Â  [`web3.eth`{.xref}](#web3.eth.xhtml#module-web3.eth)                                                
                                                                        Â Â Â  [`web3.gas_strategies.rpc`{.xref}](#gas_price.xhtml#module-web3.gas_strategies.rpc)                 
                                                                        Â Â Â  [`web3.gas_strategies.time_based`{.xref}](#gas_price.xhtml#module-web3.gas_strategies.time_based)   
                                                                        Â Â Â  [`web3.geth`{.xref}](#web3.geth.xhtml#module-web3.geth)                                             
                                                                        Â Â Â  [`web3.geth.admin`{.xref}](#web3.geth.xhtml#module-web3.geth.admin)                                 
                                                                        Â Â Â  [`web3.geth.debug`{.xref}](#web3.geth.xhtml#module-web3.geth.debug)                                 
                                                                        Â Â Â  [`web3.geth.txpool`{.xref}](#web3.geth.xhtml#module-web3.geth.txpool)                               
                                                                        Â Â Â  [`web3.net`{.xref}](#web3.net.xhtml#module-web3.net)                                                
                                                                        Â Â Â  [`web3.tracing`{.xref}](#web3.tracing.xhtml#module-web3.tracing)                                    
                                                                        Â Â Â  [`web3.utils`{.xref}](#web3.utils.xhtml#module-web3.utils)                                          
                                                                        Â Â Â  [`web3.utils.abi`{.xref}](#web3.utils.xhtml#module-web3.utils.abi)                                  
                                                                        Â Â Â  [`web3.utils.filters`{.xref}](#filters.xhtml#module-web3.utils.filters)                             
  --------------------------------------------------------------------- ------------------------------------------------------------------------------------------------------- --

::: clearer
:::
:::
:::

::: clearer
:::
:::

[]{#genindex.xhtml}

::: document
::: documentwrapper
::: {.body role="main"}
# Index {#genindex.xhtml#index}

::: genindex-jumpbox
[**A**](#genindex.xhtml#A) \| [**B**](#genindex.xhtml#B) \|
[**C**](#genindex.xhtml#C) \| [**D**](#genindex.xhtml#D) \|
[**E**](#genindex.xhtml#E) \| [**F**](#genindex.xhtml#F) \|
[**G**](#genindex.xhtml#G) \| [**H**](#genindex.xhtml#H) \|
[**I**](#genindex.xhtml#I) \| [**K**](#genindex.xhtml#K) \|
[**L**](#genindex.xhtml#L) \| [**M**](#genindex.xhtml#M) \|
[**N**](#genindex.xhtml#N) \| [**O**](#genindex.xhtml#O) \|
[**P**](#genindex.xhtml#P) \| [**R**](#genindex.xhtml#R) \|
[**S**](#genindex.xhtml#S) \| [**T**](#genindex.xhtml#T) \|
[**U**](#genindex.xhtml#U) \| [**V**](#genindex.xhtml#V) \|
[**W**](#genindex.xhtml#W)
:::

## A {#genindex.xhtml#A}

+-----------------------------------+-----------------------------------+
| -   [abi (web3.contract.Contract  | -   [AddressMismatch](#ens.xhtm   |
|     attribute)](#web3.contract.   | l#ens.exceptions.AddressMismatch) |
| xhtml#web3.contract.Contract.abi) | -   [all_events()                 |
| -   [accounts (web3.eth.Eth       |     (web3.contract.Contract class |
|     attribute)](#web3             |                                   |
| .eth.xhtml#web3.eth.Eth.accounts) |   method)](#web3.contract.xhtml#w |
| -   [add() (Web3.middleware_onion | eb3.contract.Contract.all_events) |
|     method)](#middleware          | -   [all_functions()              |
| .xhtml#Web3.middleware_onion.add) |     (web3.contract.Contract class |
| -   [add_peer() (in module        |     m                             |
|     web3.geth.admin)](#web3.get   | ethod)](#web3.contract.xhtml#web3 |
| h.xhtml#web3.geth.admin.add_peer) | .contract.Contract.all_functions) |
| -   [address                      | -   [api (web3.Web3               |
|     (web3.contract.Contract       |     attribute)                    |
|                                   | ](#web3.main.xhtml#web3.Web3.api) |
|   attribute)](#web3.contract.xhtm | -                                 |
| l#web3.contract.Contract.address) |   [async_handle_offchain_lookup() |
| -   [address()                    |     (web3.utils.abi.utils         |
|     (ens.async_ens.AsyncENS       |     method)](#w                   |
|     method)](#ens.xhtm            | eb3.utils.xhtml#web3.utils.abi.ut |
| l#ens.async_ens.AsyncENS.address) | ils.async_handle_offchain_lookup) |
|     -   [(ens.ens.ENS             | -   [AsyncENS (class in           |
|         method)                   |     ens.async_ens)](#             |
| ](#ens.xhtml#ens.ens.ENS.address) | ens.xhtml#ens.async_ens.AsyncENS) |
|                                   | -   [AsyncEthereumTesterProvider  |
|                                   |     (class in                     |
|                                   |                                   |
|                                   | web3.providers.eth_tester)](#prov |
|                                   | iders.xhtml#web3.providers.eth_te |
|                                   | ster.AsyncEthereumTesterProvider) |
|                                   | -   [attach_modules() (web3.w3    |
|                                   |     method)](#web3.m              |
|                                   | ain.xhtml#web3.w3.attach_modules) |
+-----------------------------------+-----------------------------------+

## B {#genindex.xhtml#B}

+-----------------------------------+-----------------------------------+
| -   [backoff_factor               | -   [BlockFilter (class in        |
|     (web3.providers.rpc.          |     w                             |
| utils.ExceptionRetryConfiguration | eb3.utils.filters)](#filters.xhtm |
|                                   | l#web3.utils.filters.BlockFilter) |
|   attribute)](#internals.xhtml#we | -   [build_filter()               |
| b3.providers.rpc.utils.ExceptionR |     (web3.contrac                 |
| etryConfiguration.backoff_factor) | t.Contract.events.your_event_name |
| -   [batch_requests() (web3.Web3  |     class                         |
|     method)](#web3.mai            |     method)](#web3.contract       |
| n.xhtml#web3.Web3.batch_requests) | .xhtml#web3.contract.Contract.eve |
| -   [BidTooLow](#en               | nts.your_event_name.build_filter) |
| s.xhtml#ens.exceptions.BidTooLow) | -   [build_transaction()          |
| -   [blob_base_fee()              |                                   |
|     (web3.eth.Eth                 |  (web3.contract.Contract.fallback |
|     method)](#web3.eth.           |     method)](#web3                |
| xhtml#web3.eth.Eth.blob_base_fee) | .contract.xhtml#web3.contract.Con |
| -   [block_number (web3.eth.Eth   | tract.fallback.build_transaction) |
|     attribute)](#web3.eth         |     -                             |
| .xhtml#web3.eth.Eth.block_number) |  [(web3.contract.ContractFunction |
|                                   |         method)](#web             |
|                                   | 3.contract.xhtml#web3.contract.Co |
|                                   | ntractFunction.build_transaction) |
|                                   | -   [bytecode                     |
|                                   |     (web3.contract.Contract       |
|                                   |                                   |
|                                   |  attribute)](#web3.contract.xhtml |
|                                   | #web3.contract.Contract.bytecode) |
|                                   | -   [bytecode_runtime             |
|                                   |     (web3.contract.Contract       |
|                                   |     attribu                       |
|                                   | te)](#web3.contract.xhtml#web3.co |
|                                   | ntract.Contract.bytecode_runtime) |
+-----------------------------------+-----------------------------------+

## C {#genindex.xhtml#C}

+-----------------------------------+-----------------------------------+
| -   [call()                       | -   [constructor()                |
|                                   |     (web3.contract.Contract class |
|  (web3.contract.Contract.fallback |                                   |
|     m                             |  method)](#web3.contract.xhtml#we |
| ethod)](#web3.contract.xhtml#web3 | b3.contract.Contract.constructor) |
| .contract.Contract.fallback.call) | -   [content()                    |
|     -                             |     (web3.geth.txpool.TxPool      |
|  [(web3.contract.ContractFunction |     method)](#web3.geth.xhtml     |
|                                   | #web3.geth.txpool.TxPool.content) |
| method)](#web3.contract.xhtml#web | -   [Contract (class in           |
| 3.contract.ContractFunction.call) |     web3.contract)](#web3.contr   |
|     -   [(web3.eth.Eth            | act.xhtml#web3.contract.Contract) |
|         method)](#                | -   [contract() (web3.eth.Eth     |
| web3.eth.xhtml#web3.eth.Eth.call) |     method)](#web3                |
| -   [chain_id (web3.eth.Eth       | .eth.xhtml#web3.eth.Eth.contract) |
|     attribute)](#web3             | -   [ContractCaller (class in     |
| .eth.xhtml#web3.eth.Eth.chain_id) |                                   |
| -   [ch                           | web3.contract)](#web3.contract.xh |
| eck_if_arguments_can_be_encoded() | tml#web3.contract.ContractCaller) |
|     (in module                    | -   [ContractEvent (class in      |
|     web3.utils.abi)](#            |                                   |
| web3.utils.xhtml#web3.utils.abi.c |  web3.contract)](#web3.contract.x |
| heck_if_arguments_can_be_encoded) | html#web3.contract.ContractEvent) |
| -   [clear()                      | -   [ContractFunction (class in   |
|     (Web3.middleware_onion        |     we                            |
|     method)](#middleware.x        | b3.contract)](#web3.contract.xhtm |
| html#Web3.middleware_onion.clear) | l#web3.contract.ContractFunction) |
| -   [client_version (web3.Web3    | -   [create_access_list()         |
|     attribute)](#web3.mai         |     (web3.eth.Eth                 |
| n.xhtml#web3.Web3.client_version) |     method)](#web3.eth.xhtml      |
| -   [construc                     | #web3.eth.Eth.create_access_list) |
| t_time_based_gas_price_strategy() | -   [create_filter()              |
|     (in module                    |     (web3.contrac                 |
|     web3.gas_strategies.ti        | t.Contract.events.your_event_name |
| me_based)](#gas_price.xhtml#web3. |     class                         |
| gas_strategies.time_based.constru |     method)](#web3.contract.      |
| ct_time_based_gas_price_strategy) | xhtml#web3.contract.Contract.even |
|                                   | ts.your_event_name.create_filter) |
+-----------------------------------+-----------------------------------+

## D {#genindex.xhtml#D}

+-----------------------------------+-----------------------------------+
| -   [datadir() (in module         | -   [decode_tuples                |
|     web3.geth.admin)](#web3.ge    |     (web3.contract.Contract       |
| th.xhtml#web3.geth.admin.datadir) |     attr                          |
| -   [decode_function_input()      | ibute)](#web3.contract.xhtml#web3 |
|     (web3.contract.Contract class | .contract.Contract.decode_tuples) |
|     method)](                     | -   [default_account              |
| #web3.contract.xhtml#web3.contrac |     (web3.eth.Eth                 |
| t.Contract.decode_function_input) |     attribute)](#web3.eth.xh      |
|                                   | tml#web3.eth.Eth.default_account) |
|                                   | -   [default_block (web3.eth.Eth  |
|                                   |     attribute)](#web3.eth.        |
|                                   | xhtml#web3.eth.Eth.default_block) |
+-----------------------------------+-----------------------------------+

## E {#genindex.xhtml#E}

+-----------------------------------+-----------------------------------+
| -   [encode_abi()                 | -   [ENSTypeError](#ens.x         |
|     (web3.contract.Contract class | html#ens.exceptions.ENSTypeError) |
|                                   | -                                 |
|   method)](#web3.contract.xhtml#w | [ENSValidationError](#ens.xhtml#e |
| eb3.contract.Contract.encode_abi) | ns.exceptions.ENSValidationError) |
| -   ens                           | -   [ENSValueError](#ens.xh       |
|     -                             | tml#ens.exceptions.ENSValueError) |
|   [module](#ens.xhtml#module-ens) | -   [errors                       |
| -   [ENS (class in                |     (web3.providers.rpc.          |
|                                   | utils.ExceptionRetryConfiguration |
| ens.ens)](#ens.xhtml#ens.ens.ENS) |     attribute)](#internals.       |
| -   ens.async_ens                 | xhtml#web3.providers.rpc.utils.Ex |
|     -   [module]                  | ceptionRetryConfiguration.errors) |
| (#ens.xhtml#module-ens.async_ens) | -   [estimate_gas()               |
| -   ens.ens                       |                                   |
|     -   [m                        |  (web3.contract.Contract.fallback |
| odule](#ens.xhtml#module-ens.ens) |     method)](                     |
| -   ens.exceptions                | #web3.contract.xhtml#web3.contrac |
|     -   [module](                 | t.Contract.fallback.estimate_gas) |
| #ens.xhtml#module-ens.exceptions) |     -                             |
| -   [ENSException](#ens.x         |  [(web3.contract.ContractFunction |
| html#ens.exceptions.ENSException) |         method)]                  |
|                                   | (#web3.contract.xhtml#web3.contra |
|                                   | ct.ContractFunction.estimate_gas) |
|                                   |     -   [(web3.eth.Eth            |
|                                   |         method)](#web3.eth        |
|                                   | .xhtml#web3.eth.Eth.estimate_gas) |
|                                   | -   [Eth (class in                |
|                                   |     web3.et                       |
|                                   | h)](#web3.eth.xhtml#web3.eth.Eth) |
|                                   | -   [eth (web3.Web3               |
|                                   |     attribute)                    |
|                                   | ](#web3.main.xhtml#web3.Web3.eth) |
|                                   | -   [EthereumTesterProvider       |
|                                   |     (class in                     |
|                                   |     web3.providers.eth_tester)](  |
|                                   | #providers.xhtml#web3.providers.e |
|                                   | th_tester.EthereumTesterProvider) |
|                                   | -   [events                       |
|                                   |     (web3.contract.Contract       |
|                                   |                                   |
|                                   |    attribute)](#web3.contract.xht |
|                                   | ml#web3.contract.Contract.events) |
+-----------------------------------+-----------------------------------+

## F {#genindex.xhtml#F}

+-----------------------------------+-----------------------------------+
| -   [fee_history() (web3.eth.Eth  | -   [find_functions_by_args()     |
|     method)](#web3.et             |     (web3.contract.Contract class |
| h.xhtml#web3.eth.Eth.fee_history) |     method)](#                    |
| -   [Filter (class in             | web3.contract.xhtml#web3.contract |
|     web3.utils.filters)](#filters | .Contract.find_functions_by_args) |
| .xhtml#web3.utils.filters.Filter) | -   [find_functions_by_name()     |
| -   [filter() (web3.eth.Eth       |     (web3.contract.Contract class |
|     method)](#we                  |     method)](#                    |
| b3.eth.xhtml#web3.eth.Eth.filter) | web3.contract.xhtml#web3.contract |
| -   [filter_id                    | .Contract.find_functions_by_name) |
|     (web3.utils.filters.Filter    | -   [format_entry()               |
|                                   |     (web3.utils.filters.Filter    |
|    attribute)](#filters.xhtml#web |                                   |
| 3.utils.filters.Filter.filter_id) |    method)](#filters.xhtml#web3.u |
| -   [find_events_by_name()        | tils.filters.Filter.format_entry) |
|     (web3.contract.Contract class | -   [from_web3()                  |
|     method)                       |     (ens.async_ens.AsyncENS class |
| ](#web3.contract.xhtml#web3.contr |     method)](#ens.xhtml#          |
| act.Contract.find_events_by_name) | ens.async_ens.AsyncENS.from_web3) |
| -   [find_events_by_selector()    |     -   [(ens.ens.ENS class       |
|     (web3.contract.Contract class |         method)](                 |
|     method)](#w                   | #ens.xhtml#ens.ens.ENS.from_web3) |
| eb3.contract.xhtml#web3.contract. | -   [from_wei() (web3.Web3        |
| Contract.find_events_by_selector) |     method)](#we                  |
| -   [find_events_by_topic()       | b3.main.xhtml#web3.Web3.from_wei) |
|     (web3.contract.Contract class | -   [functions                    |
|     method)]                      |     (web3.contract.Contract       |
| (#web3.contract.xhtml#web3.contra |                                   |
| ct.Contract.find_events_by_topic) | attribute)](#web3.contract.xhtml# |
|                                   | web3.contract.Contract.functions) |
+-----------------------------------+-----------------------------------+

## G {#genindex.xhtml#G}

+-----------------------------------+-----------------------------------+
| -   [gas_price (web3.eth.Eth      | -   [get_fork_schedule() (Beacon  |
|     attribute)](#web3.            |     method)](#web3.beaco          |
| eth.xhtml#web3.eth.Eth.gas_price) | n.xhtml#Beacon.get_fork_schedule) |
| -   [generate_gas_price()         | -   [get_function_by_args()       |
|     (web3.eth.Eth                 |     (web3.contract.Contract class |
|     method)](#web3.eth.xhtml      |     method)]                      |
| #web3.eth.Eth.generate_gas_price) | (#web3.contract.xhtml#web3.contra |
| -   [get_abi_element() (in module | ct.Contract.get_function_by_args) |
|                                   | -   [get_function_by_name()       |
| web3.utils.abi)](#web3.utils.xhtm |     (web3.contract.Contract class |
| l#web3.utils.abi.get_abi_element) |     method)]                      |
| -   [get_abi_element_info() (in   | (#web3.contract.xhtml#web3.contra |
|     module                        | ct.Contract.get_function_by_name) |
|     web3.                         | -   [get_function_by_selector()   |
| utils.abi)](#web3.utils.xhtml#web |     (web3.contract.Contract class |
| 3.utils.abi.get_abi_element_info) |     method)](#we                  |
| -   [get_all_entries()            | b3.contract.xhtml#web3.contract.C |
|     (web3.utils.filters.Filter    | ontract.get_function_by_selector) |
|                                   | -   [get_function_by_signature()  |
| method)](#filters.xhtml#web3.util |     (web3.contract.Contract class |
| s.filters.Filter.get_all_entries) |     method)](#web                 |
| -   [get_attestations() (Beacon   | 3.contract.xhtml#web3.contract.Co |
|     method)](#web3.beac           | ntract.get_function_by_signature) |
| on.xhtml#Beacon.get_attestations) | -   [get_genesis() (Beacon        |
| -   [get_attester_slashings()     |     method)](#web3                |
|     (Beacon                       | .beacon.xhtml#Beacon.get_genesis) |
|     method)](#web3.beacon.xht     | -   [get_hash_root() (Beacon      |
| ml#Beacon.get_attester_slashings) |     method)](#web3.b              |
| -   [get_balance() (web3.eth.Eth  | eacon.xhtml#Beacon.get_hash_root) |
|     method)](#web3.et             | -   [get_health() (Beacon         |
| h.xhtml#web3.eth.Eth.get_balance) |     method)](#web                 |
| -   [get_beacon_heads() (Beacon   | 3.beacon.xhtml#Beacon.get_health) |
|     method)](#web3.beac           | -   [get_logs() (web3.eth.Eth     |
| on.xhtml#Beacon.get_beacon_heads) |     method)](#web3                |
| -   [get_beacon_state() (Beacon   | .eth.xhtml#web3.eth.Eth.get_logs) |
|     method)](#web3.beac           | -   [get_new_entries()            |
| on.xhtml#Beacon.get_beacon_state) |     (web3.utils.filters.Filter    |
| -   [get_blob_sidecars() (Beacon  |                                   |
|     method)](#web3.beaco          | method)](#filters.xhtml#web3.util |
| n.xhtml#Beacon.get_blob_sidecars) | s.filters.Filter.get_new_entries) |
| -   [get_block() (Beacon          | -   [get_node_identity() (Beacon  |
|     method)](#we                  |     method)](#web3.beaco          |
| b3.beacon.xhtml#Beacon.get_block) | n.xhtml#Beacon.get_node_identity) |
|     -   [(web3.eth.Eth            | -   [get_peer() (Beacon           |
|         method)](#web3.           |     method)](#w                   |
| eth.xhtml#web3.eth.Eth.get_block) | eb3.beacon.xhtml#Beacon.get_peer) |
| -   [get_block_attestations()     | -   [get_peers() (Beacon          |
|     (Beacon                       |     method)](#we                  |
|     method)](#web3.beacon.xht     | b3.beacon.xhtml#Beacon.get_peers) |
| ml#Beacon.get_block_attestations) | -   [get_proof() (web3.eth.Eth    |
| -   [get_block_header() (Beacon   |     method)](#web3.               |
|     method)](#web3.beac           | eth.xhtml#web3.eth.Eth.get_proof) |
| on.xhtml#Beacon.get_block_header) | -   [get_proposer_slashings()     |
| -   [get_block_headers() (Beacon  |     (Beacon                       |
|     method)](#web3.beaco          |     method)](#web3.beacon.xht     |
| n.xhtml#Beacon.get_block_headers) | ml#Beacon.get_proposer_slashings) |
| -   [get_block_number()           | -   [get_raw_transaction()        |
|     (web3.eth.Eth                 |     (web3.eth.Eth                 |
|     method)](#web3.eth.xht        |     method)](#web3.eth.xhtml#     |
| ml#web3.eth.Eth.get_block_number) | web3.eth.Eth.get_raw_transaction) |
| -   [get_block_root() (Beacon     | -                                 |
|     method)](#web3.be             |   [get_raw_transaction_by_block() |
| acon.xhtml#Beacon.get_block_root) |     (web3.eth.Eth                 |
| -                                 |     m                             |
|    [get_block_transaction_count() | ethod)](#web3.eth.xhtml#web3.eth. |
|     (web3.eth.Eth                 | Eth.get_raw_transaction_by_block) |
|                                   | -   [get_spec() (Beacon           |
| method)](#web3.eth.xhtml#web3.eth |     method)](#w                   |
| .Eth.get_block_transaction_count) | eb3.beacon.xhtml#Beacon.get_spec) |
| -   [get_code() (web3.eth.Eth     | -   [get_storage_at()             |
|     method)](#web3                |     (web3.eth.Eth                 |
| .eth.xhtml#web3.eth.Eth.get_code) |     method)](#web3.eth.x          |
| -   [get_create2_address()        | html#web3.eth.Eth.get_storage_at) |
|     (web3.utils.abi.utils         | -   [get_syncing() (Beacon        |
|     me                            |     method)](#web3                |
| thod)](#web3.utils.xhtml#web3.uti | .beacon.xhtml#Beacon.get_syncing) |
| ls.abi.utils.get_create2_address) | -   [get_text()                   |
| -   [get_create_address()         |     (ens.async_ens.AsyncENS       |
|     (web3.utils.abi.utils         |     method)](#ens.xhtml           |
|     m                             | #ens.async_ens.AsyncENS.get_text) |
| ethod)](#web3.utils.xhtml#web3.ut |     -   [(ens.ens.ENS             |
| ils.abi.utils.get_create_address) |         method)]                  |
| -   [get_deposit_contract()       | (#ens.xhtml#ens.ens.ENS.get_text) |
|     (Beacon                       | -   [get_transaction()            |
|     method)](#web3.beacon.x       |     (web3.eth.Eth                 |
| html#Beacon.get_deposit_contract) |     method)](#web3.eth.xh         |
| -   [get_epoch_committees()       | tml#web3.eth.Eth.get_transaction) |
|     (Beacon                       | -   [get_transaction_by_block()   |
|     method)](#web3.beacon.x       |     (web3.eth.Eth                 |
| html#Beacon.get_epoch_committees) |                                   |
| -   [get_event_abi() (in module   |    method)](#web3.eth.xhtml#web3. |
|                                   | eth.Eth.get_transaction_by_block) |
|   web3.utils.abi)](#web3.utils.xh | -   [get_transaction_count()      |
| tml#web3.utils.abi.get_event_abi) |     (web3.eth.Eth                 |
| -   [get_event_by_name()          |     method)](#web3.eth.xhtml#we   |
|     (web3.contract.Contract class | b3.eth.Eth.get_transaction_count) |
|     metho                         | -   [get_transaction_receipt()    |
| d)](#web3.contract.xhtml#web3.con |     (web3.eth.Eth                 |
| tract.Contract.get_event_by_name) |     method)](#web3.eth.xhtml#web3 |
| -   [get_event_by_selector()      | .eth.Eth.get_transaction_receipt) |
|     (web3.contract.Contract class | -   [get_uncle_by_block()         |
|     method)](                     |     (web3.eth.Eth                 |
| #web3.contract.xhtml#web3.contrac |     method)](#web3.eth.xhtml      |
| t.Contract.get_event_by_selector) | #web3.eth.Eth.get_uncle_by_block) |
| -   [get_event_by_signature()     | -   [get_uncle_count()            |
|     (web3.contract.Contract class |     (web3.eth.Eth                 |
|     method)](#                    |     method)](#web3.eth.xh         |
| web3.contract.xhtml#web3.contract | tml#web3.eth.Eth.get_uncle_count) |
| .Contract.get_event_by_signature) | -   [get_validator() (Beacon      |
| -   [get_event_by_topic()         |     method)](#web3.b              |
|     (web3.contract.Contract class | eacon.xhtml#Beacon.get_validator) |
|     method                        | -   [get_validator_balances()     |
| )](#web3.contract.xhtml#web3.cont |     (Beacon                       |
| ract.Contract.get_event_by_topic) |     method)](#web3.beacon.xht     |
| -   [get_event_log_topics() (in   | ml#Beacon.get_validator_balances) |
|     module                        | -   [get_validators() (Beacon     |
|     web3.                         |     method)](#web3.be             |
| utils.abi)](#web3.utils.xhtml#web | acon.xhtml#Beacon.get_validators) |
| 3.utils.abi.get_event_log_topics) | -   [get_version() (Beacon        |
| -   [get_filter_changes()         |     method)](#web3                |
|     (web3.eth.Eth                 | .beacon.xhtml#Beacon.get_version) |
|     method)](#web3.eth.xhtml      | -   [get_voluntary_exits()        |
| #web3.eth.Eth.get_filter_changes) |     (Beacon                       |
| -   [get_filter_logs()            |     method)](#web3.beacon.        |
|     (web3.eth.Eth                 | xhtml#Beacon.get_voluntary_exits) |
|     method)](#web3.eth.xh         | -   [geth (web3.Web3              |
| tml#web3.eth.Eth.get_filter_logs) |     attribute)]                   |
| -   [get_finality_checkpoint()    | (#web3.main.xhtml#web3.Web3.geth) |
|     (Beacon                       |                                   |
|     method)](#web3.beacon.xhtm    |                                   |
| l#Beacon.get_finality_checkpoint) |                                   |
| -   [get_fork_data() (Beacon      |                                   |
|     method)](#web3.b              |                                   |
| eacon.xhtml#Beacon.get_fork_data) |                                   |
+-----------------------------------+-----------------------------------+

## H {#genindex.xhtml#H}

+-----------------------------------+-----------------------------------+
| -   [handle_offchain_lookup()     | -   [HTTPProvider (web3.Web3      |
|     (web3.utils.abi.utils         |     attribute)](#web3.m           |
|     metho                         | ain.xhtml#web3.Web3.HTTPProvider) |
| d)](#web3.utils.xhtml#web3.utils. |                                   |
| abi.utils.handle_offchain_lookup) |                                   |
+-----------------------------------+-----------------------------------+

## I {#genindex.xhtml#I}

+-----------------------------------+-----------------------------------+
| -   [inject()                     | -   [IPCProvider (web3.Web3       |
|     (Web3.middleware_onion        |     attribute)](#web3.            |
|     method)](#middleware.xh       | main.xhtml#web3.Web3.IPCProvider) |
| tml#Web3.middleware_onion.inject) | -   [is_address() (web3.Web3      |
| -   [inspect()                    |     method)](#web3                |
|     (web3.geth.txpool.TxPool      | .main.xhtml#web3.Web3.is_address) |
|     method)](#web3.geth.xhtml     | -   [is_checksum_address()        |
| #web3.geth.txpool.TxPool.inspect) |     (web3.Web3                    |
| -   [InvalidBidHash](#ens.xht     |     method)](#web3.main.xht       |
| ml#ens.exceptions.InvalidBidHash) | ml#web3.Web3.is_checksum_address) |
| -   [InvalidLabel](#ens.x         | -   [is_connected() (BaseProvider |
| html#ens.exceptions.InvalidLabel) |     method)](#internals           |
| -   [InvalidName](#ens.           | .xhtml#BaseProvider.is_connected) |
| xhtml#ens.exceptions.InvalidName) | -   [is_encodable() (web3.w3      |
|                                   |     method)](#web3                |
|                                   | .main.xhtml#web3.w3.is_encodable) |
|                                   | -   [is_valid_entry()             |
|                                   |     (web3.utils.filters.Filter    |
|                                   |                                   |
|                                   |  method)](#filters.xhtml#web3.uti |
|                                   | ls.filters.Filter.is_valid_entry) |
+-----------------------------------+-----------------------------------+

## K {#genindex.xhtml#K}

+-----------------------------------------------------------------------+
| -   [keccak() (web3.Web3 class                                        |
|     method)](#web3.main.xhtml#web3.Web3.keccak)                       |
+-----------------------------------------------------------------------+

## L {#genindex.xhtml#L}

+-----------------------------------+-----------------------------------+
| -   [listening() (in module       | -   [log_topic_to_bytes() (in     |
|     web3.net)](#w                 |     module                        |
| eb3.net.xhtml#web3.net.listening) |     web                           |
| -   [LocalFilterMiddleware()      | 3.utils.abi)](#web3.utils.xhtml#w |
|     (web3.middleware              | eb3.utils.abi.log_topic_to_bytes) |
|                                   | -   [LogFilter (class in          |
|  method)](#middleware.xhtml#web3. |                                   |
| middleware.LocalFilterMiddleware) |  web3.utils.filters)](#filters.xh |
|                                   | tml#web3.utils.filters.LogFilter) |
+-----------------------------------+-----------------------------------+

## M {#genindex.xhtml#M}

+-----------------------------------------------------------------------+
| -   [make_request() (BaseProvider                                     |
|     method)](#internals.xhtml#BaseProvider.make_request)              |
|     -   [                                                             |
| (web3.providers.persistent.persistent_connection.PersistentConnection |
|         method)](#providers.xhtml#web3.provider                       |
| s.persistent.persistent_connection.PersistentConnection.make_request) |
| -   [max_priority_fee (web3.eth.Eth                                   |
|     attribute)](#web3.eth.xhtml#web3.eth.Eth.max_priority_fee)        |
| -   [method (web3.\_utils.caching.RequestInformation                  |
|     attrib                                                            |
| ute)](#internals.xhtml#web3._utils.caching.RequestInformation.method) |
| -   [method_allowlist                                                 |
|     (web3.providers.rpc.utils.ExceptionRetryConfiguration             |
|     attribute)](#internals.xhtml#w                                    |
| eb3.providers.rpc.utils.ExceptionRetryConfiguration.method_allowlist) |
| -   [middleware (BaseProvider                                         |
|     attribute)](#internals.xhtml#BaseProvider.middleware)             |
|     -   [(Web3.middleware_onion                                       |
|                                                                       |
|       attribute)](#middleware.xhtml#Web3.middleware_onion.middleware) |
| -   [middleware_response_processors                                   |
|     (web3.\_utils.caching.RequestInformation                          |
|     attribute)](#internals.xhtml#w                                    |
| eb3._utils.caching.RequestInformation.middleware_response_processors) |
| -   [modify_transaction() (web3.eth.Eth                               |
|     method)](#web3.eth.xhtml#web3.eth.Eth.modify_transaction)         |
| -   module                                                            |
|     -   [ens](#ens.xhtml#module-ens)                                  |
|     -   [ens.async_ens](#ens.xhtml#module-ens.async_ens)              |
|     -   [ens.ens](#ens.xhtml#module-ens.ens)                          |
|     -   [ens.exceptions](#ens.xhtml#module-ens.exceptions)            |
|     -   [web3](#web3.main.xhtml#module-web3)                          |
|     -   [web3.contract](#web3.contract.xhtml#module-web3.contract)    |
|     -   [web3.eth](#web3.eth.xhtml#module-web3.eth)                   |
|     -   [web3                                                         |
| .gas_strategies.rpc](#gas_price.xhtml#module-web3.gas_strategies.rpc) |
|     -   [web3.gas_strategie                                           |
| s.time_based](#gas_price.xhtml#module-web3.gas_strategies.time_based) |
|     -   [web3.geth](#web3.geth.xhtml#module-web3.geth)                |
|     -   [web3.geth.admin](#web3.geth.xhtml#module-web3.geth.admin)    |
|     -   [web3.geth.debug](#web3.geth.xhtml#module-web3.geth.debug)    |
|     -   [web3.geth.txpool](#web3.geth.xhtml#module-web3.geth.txpool)  |
|     -   [web3.net](#web3.net.xhtml#module-web3.net)                   |
|     -   [web3.tracing](#web3.tracing.xhtml#module-web3.tracing)       |
|     -   [web3.utils](#web3.utils.xhtml#module-web3.utils)             |
|     -   [web3.utils.abi](#web3.utils.xhtml#module-web3.utils.abi)     |
|                                                                       |
|    -   [web3.utils.filters](#filters.xhtml#module-web3.utils.filters) |
+-----------------------------------------------------------------------+

## N {#genindex.xhtml#N}

+-----------------------------------+-----------------------------------+
| -   [name()                       | -   [node_info() (in module       |
|     (ens.async_ens.AsyncENS       |     web3.geth.admin)](#web3.geth  |
|     method)](#ens.x               | .xhtml#web3.geth.admin.node_info) |
| html#ens.async_ens.AsyncENS.name) |                                   |
|     -   [(ens.ens.ENS             |                                   |
|         meth                      |                                   |
| od)](#ens.xhtml#ens.ens.ENS.name) |                                   |
+-----------------------------------+-----------------------------------+

## O {#genindex.xhtml#O}

+-----------------------------------+-----------------------------------+
| -   [O                            | -   [owner()                      |
| versizeTransaction](#ens.xhtml#en |     (ens.async_ens.AsyncENS       |
| s.exceptions.OversizeTransaction) |     method)](#ens.xh              |
|                                   | tml#ens.async_ens.AsyncENS.owner) |
|                                   |     -   [(ens.ens.ENS             |
|                                   |         metho                     |
|                                   | d)](#ens.xhtml#ens.ens.ENS.owner) |
+-----------------------------------+-----------------------------------+

## P {#genindex.xhtml#P}

+-----------------------------------+-----------------------------------+
| -   [params                       | -   [peers() (in module           |
|     (web3.\                       |     web3.geth.admin)](#web3.      |
| _utils.caching.RequestInformation | geth.xhtml#web3.geth.admin.peers) |
|     attribute                     | -   [process_log()                |
| )](#internals.xhtml#web3._utils.c |     (web3.contract.ContractEvent  |
| aching.RequestInformation.params) |     meth                          |
| -   [peer_count() (in module      | od)](#web3.contract.xhtml#web3.co |
|     web3.net)](#we                | ntract.ContractEvent.process_log) |
| b3.net.xhtml#web3.net.peer_count) | -   [process_subscriptions()      |
|                                   |     (we                           |
|                                   | b3.providers.persistent.persisten |
|                                   | t_connection.PersistentConnection |
|                                   |     method)](#provider            |
|                                   | s.xhtml#web3.providers.persistent |
|                                   | .persistent_connection.Persistent |
|                                   | Connection.process_subscriptions) |
+-----------------------------------+-----------------------------------+

## R {#genindex.xhtml#R}

+-----------------------------------+-----------------------------------+
| -   [recv()                       | -   [ResolverNotFound](#ens.xhtml |
|     (we                           | #ens.exceptions.ResolverNotFound) |
| b3.providers.persistent.persisten | -   [response_formatters          |
| t_connection.PersistentConnection |     (web3.\                       |
|     m                             | _utils.caching.RequestInformation |
| ethod)](#providers.xhtml#web3.pro |     attribute)](#internals        |
| viders.persistent.persistent_conn | .xhtml#web3._utils.caching.Reques |
| ection.PersistentConnection.recv) | tInformation.response_formatters) |
| -   [remove()                     | -   [retries                      |
|     (Web3.middleware_onion        |     (web3.providers.rpc.          |
|     method)](#middleware.xh       | utils.ExceptionRetryConfiguration |
| tml#Web3.middleware_onion.remove) |     attribute)](#internals.x      |
| -   [replace()                    | html#web3.providers.rpc.utils.Exc |
|     (Web3.middleware_onion        | eptionRetryConfiguration.retries) |
|     method)](#middleware.xht      | -   [rpc_gas_price_strategy() (in |
| ml#Web3.middleware_onion.replace) |     module                        |
| -   [replace_transaction()        |     web3.gas_strategies.rpc)      |
|     (web3.eth.Eth                 | ](#gas_price.xhtml#web3.gas_strat |
|     method)](#web3.eth.xhtml#     | egies.rpc.rpc_gas_price_strategy) |
| web3.eth.Eth.replace_transaction) |                                   |
| -   [resolver()                   |                                   |
|     (ens.async_ens.AsyncENS       |                                   |
|     method)](#ens.xhtml           |                                   |
| #ens.async_ens.AsyncENS.resolver) |                                   |
|     -   [(ens.ens.ENS             |                                   |
|         method)]                  |                                   |
| (#ens.xhtml#ens.ens.ENS.resolver) |                                   |
+-----------------------------------+-----------------------------------+

## S {#genindex.xhtml#S}

+-----------------------------------+-----------------------------------+
| -   [send()                       | -   [sign_typed_data()            |
|     (we                           |     (web3.eth.Eth                 |
| b3.providers.persistent.persisten |     method)](#web3.eth.xh         |
| t_connection.PersistentConnection | tml#web3.eth.Eth.sign_typed_data) |
|     m                             | -   [                             |
| ethod)](#providers.xhtml#web3.pro | SignAndSendRawMiddlewareBuilder() |
| viders.persistent.persistent_conn |     (web3.middleware              |
| ection.PersistentConnection.send) |     method)](                     |
| -   [send_raw_transaction()       | #middleware.xhtml#web3.middleware |
|     (web3.eth.Eth                 | .SignAndSendRawMiddlewareBuilder) |
|     method)](#web3.eth.xhtml#w    | -   [simulateV1() (web3.eth.Eth   |
| eb3.eth.Eth.send_raw_transaction) |     method)](#web3.e              |
| -   [send_transaction()           | th.xhtml#web3.eth.Eth.simulateV1) |
|     (web3.eth.Eth                 | -                                 |
|     method)](#web3.eth.xht        | [socket](#providers.xhtml#socket) |
| ml#web3.eth.Eth.send_transaction) | -   [solidity_keccak() (web3.Web3 |
| -   [set_contract_factory()       |     class                         |
|     (web3.eth.Eth                 |     method)](#web3.main           |
|     method)](#web3.eth.xhtml#w    | .xhtml#web3.Web3.solidity_keccak) |
| eb3.eth.Eth.set_contract_factory) | -                                 |
| -   [set_data_filters()           |    [StalecheckMiddlewareBuilder() |
|     (web3.utils.filters.LogFilter |     (web3.middleware              |
|     meth                          |     metho                         |
| od)](#filters.xhtml#web3.utils.fi | d)](#middleware.xhtml#web3.middle |
| lters.LogFilter.set_data_filters) | ware.StalecheckMiddlewareBuilder) |
| -   [set_gas_price_strategy()     | -   [start_http() (in module      |
|     (web3.eth.Eth                 |     web3.geth.admin)](#web3.geth. |
|     method)](#web3.eth.xhtml#web  | xhtml#web3.geth.admin.start_http) |
| 3.eth.Eth.set_gas_price_strategy) | -   [start_ws() (in module        |
| -   [set_text()                   |     web3.geth.admin)](#web3.get   |
|     (ens.async_ens.AsyncENS       | h.xhtml#web3.geth.admin.start_ws) |
|     method)](#ens.xhtml           | -   [status()                     |
| #ens.async_ens.AsyncENS.set_text) |     (web3.geth.txpool.TxPool      |
|     -   [(ens.ens.ENS             |     method)](#web3.geth.xhtm      |
|         method)]                  | l#web3.geth.txpool.TxPool.status) |
| (#ens.xhtml#ens.ens.ENS.set_text) | -   [stop_http() (in module       |
| -   [setup_address()              |     web3.geth.admin)](#web3.geth  |
|     (ens.async_ens.AsyncENS       | .xhtml#web3.geth.admin.stop_http) |
|     method)](#ens.xhtml#ens.      | -   [stop_ws() (in module         |
| async_ens.AsyncENS.setup_address) |     web3.geth.admin)](#web3.ge    |
|     -   [(ens.ens.ENS             | th.xhtml#web3.geth.admin.stop_ws) |
|         method)](#ens             | -   [strict_bytes_type_checking   |
| .xhtml#ens.ens.ENS.setup_address) |     (ens                          |
| -   [setup_name()                 |                                   |
|     (ens.async_ens.AsyncENS       |    attribute)](#ens_overview.xhtm |
|     method)](#ens.xhtml#e         | l#ens.strict_bytes_type_checking) |
| ns.async_ens.AsyncENS.setup_name) |     -   [(web3.w3                 |
|     -   [(ens.ens.ENS             |                                   |
|         method)](#                |   attribute)](#web3.main.xhtml#we |
| ens.xhtml#ens.ens.ENS.setup_name) | b3.w3.strict_bytes_type_checking) |
| -   [setup_owner()                | -   [subscribe() (web3.eth.Eth    |
|     (ens.async_ens.AsyncENS       |     method)](#web3.               |
|     method)](#ens.xhtml#en        | eth.xhtml#web3.eth.Eth.subscribe) |
| s.async_ens.AsyncENS.setup_owner) | -   [subscription_id              |
|     -   [(ens.ens.ENS             |     (web3.\                       |
|         method)](#e               | _utils.caching.RequestInformation |
| ns.xhtml#ens.ens.ENS.setup_owner) |     attribute)](#inter            |
| -   [sign() (web3.eth.Eth         | nals.xhtml#web3._utils.caching.Re |
|     method)](#                    | questInformation.subscription_id) |
| web3.eth.xhtml#web3.eth.Eth.sign) | -   [subscriptions                |
| -   [sign_transaction()           |     (we                           |
|     (web3.eth.Eth                 | b3.providers.persistent.persisten |
|     method)](#web3.eth.xht        | t_connection.PersistentConnection |
| ml#web3.eth.Eth.sign_transaction) |     attribute)](#                 |
|                                   | providers.xhtml#web3.providers.pe |
|                                   | rsistent.persistent_connection.Pe |
|                                   | rsistentConnection.subscriptions) |
|                                   | -   [syncing (web3.eth.Eth        |
|                                   |     attribute)](#web              |
|                                   | 3.eth.xhtml#web3.eth.Eth.syncing) |
+-----------------------------------+-----------------------------------+

## T {#genindex.xhtml#T}

+-----------------------------------+-----------------------------------+
| -   [to_bytes() (web3.Web3        | -   [trace_filter() (in module    |
|     method)](#we                  |     web3.tracing)](#web3.tracing  |
| b3.main.xhtml#web3.Web3.to_bytes) | .xhtml#web3.tracing.trace_filter) |
| -   [to_checksum_address()        | -   [trace_raw_transaction() (in  |
|     (web3.Web3                    |     module                        |
|     method)](#web3.main.xht       |     web3                          |
| ml#web3.Web3.to_checksum_address) | .tracing)](#web3.tracing.xhtml#we |
| -   [to_hex() (web3.Web3          | b3.tracing.trace_raw_transaction) |
|     method)](#                    | -   [                             |
| web3.main.xhtml#web3.Web3.to_hex) | trace_replay_block_transactions() |
| -   [to_int() (web3.Web3          |     (in module                    |
|     method)](#                    |     web3.tracing)]                |
| web3.main.xhtml#web3.Web3.to_int) | (#web3.tracing.xhtml#web3.tracing |
| -   [to_json() (web3.Web3         | .trace_replay_block_transactions) |
|     method)](#w                   | -   [trace_replay_transaction()   |
| eb3.main.xhtml#web3.Web3.to_json) |     (in module                    |
| -   [to_text() (web3.Web3         |     web3.tr                       |
|     method)](#w                   | acing)](#web3.tracing.xhtml#web3. |
| eb3.main.xhtml#web3.Web3.to_text) | tracing.trace_replay_transaction) |
| -   [to_wei() (web3.Web3          | -   [trace_transaction() (in      |
|     method)](#                    |     module                        |
| web3.main.xhtml#web3.Web3.to_wei) |                                   |
| -   [trace_block() (in module     | web3.tracing)](#web3.tracing.xhtm |
|     web3.tracing)](#web3.tracin   | l#web3.tracing.trace_transaction) |
| g.xhtml#web3.tracing.trace_block) |     -   [(web3.geth.debug.Debug   |
| -   [trace_call() (in module      |                                   |
|     web3.tracing)](#web3.traci    | method)](#web3.geth.xhtml#web3.ge |
| ng.xhtml#web3.tracing.trace_call) | th.debug.Debug.trace_transaction) |
|                                   | -   [transact()                   |
|                                   |                                   |
|                                   |  (web3.contract.Contract.fallback |
|                                   |     metho                         |
|                                   | d)](#web3.contract.xhtml#web3.con |
|                                   | tract.Contract.fallback.transact) |
|                                   |     -                             |
|                                   |  [(web3.contract.ContractFunction |
|                                   |         meth                      |
|                                   | od)](#web3.contract.xhtml#web3.co |
|                                   | ntract.ContractFunction.transact) |
|                                   | -   [TransactionFilter (class in  |
|                                   |     web3.ut                       |
|                                   | ils.filters)](#filters.xhtml#web3 |
|                                   | .utils.filters.TransactionFilter) |
+-----------------------------------+-----------------------------------+

## U {#genindex.xhtml#U}

+-----------------------------------+-----------------------------------+
| -                                 | -   [UnownedName](#ens.           |
|   [UnauthorizedError](#ens.xhtml# | xhtml#ens.exceptions.UnownedName) |
| ens.exceptions.UnauthorizedError) | -   [unsubscribe() (web3.eth.Eth  |
| -   [UnderfundedBid](#ens.xht     |     method)](#web3.et             |
| ml#ens.exceptions.UnderfundedBid) | h.xhtml#web3.eth.Eth.unsubscribe) |
| -   [uninstall_filter()           | -   [U                            |
|     (web3.eth.Eth                 | nsupportedFunction](#ens.xhtml#en |
|     method)](#web3.eth.xht        | s.exceptions.UnsupportedFunction) |
| ml#web3.eth.Eth.uninstall_filter) | -   [utils.SimpleCache (class in  |
|                                   |     we                            |
|                                   | b3.utils.abi)](#web3.utils.xhtml# |
|                                   | web3.utils.abi.utils.SimpleCache) |
+-----------------------------------+-----------------------------------+

## V {#genindex.xhtml#V}

+-----------------------------------------------------------------------+
| -   [version() (in module                                             |
|     web3.net)](#web3.net.xhtml#web3.net.version)                      |
+-----------------------------------------------------------------------+

## W {#genindex.xhtml#W}

+-----------------------------------+-----------------------------------+
| -                                 | -   [web3.midd                    |
|   [wait_for_transaction_receipt() | leware.ENSNameToAddressMiddleware |
|     (web3.eth.Eth                 |     (built-in                     |
|     m                             |     cla                           |
| ethod)](#web3.eth.xhtml#web3.eth. | ss)](#middleware.xhtml#web3.middl |
| Eth.wait_for_transaction_receipt) | eware.ENSNameToAddressMiddleware) |
| -   web3                          | -   [web3.mi                      |
|     -   [modu                     | ddleware.ExtraDataToPOAMiddleware |
| le](#web3.main.xhtml#module-web3) |     (built-in                     |
| -   [Web3 (class in               |     c                             |
|     w                             | lass)](#middleware.xhtml#web3.mid |
| eb3)](#web3.main.xhtml#web3.Web3) | dleware.ExtraDataToPOAMiddleware) |
| -   [web3.\                       | -   [web3.midd                    |
| _utils.caching.RequestInformation | leware.GasPriceStrategyMiddleware |
|     (built-in                     |     (built-in                     |
|                                   |     cla                           |
|   class)](#internals.xhtml#web3._ | ss)](#middleware.xhtml#web3.middl |
| utils.caching.RequestInformation) | eware.GasPriceStrategyMiddleware) |
| -   web3.contract                 | -   [web                          |
|     -   [module](#web3.con        | 3.middleware.ValidationMiddleware |
| tract.xhtml#module-web3.contract) |     (built-in                     |
| -   web3.eth                      |                                   |
|     -   [module]                  |    class)](#middleware.xhtml#web3 |
| (#web3.eth.xhtml#module-web3.eth) | .middleware.ValidationMiddleware) |
| -   web3.gas_strategies.rpc       | -   web3.net                      |
|     -   [module](#gas_price.xhtm  |     -   [module]                  |
| l#module-web3.gas_strategies.rpc) | (#web3.net.xhtml#module-web3.net) |
| -                                 | -                                 |
|    web3.gas_strategies.time_based |   [web3.providers.ipc.IPCProvider |
|     -                             |     (built-in                     |
|   [module](#gas_price.xhtml#modul |     class)](#providers.xhtm       |
| e-web3.gas_strategies.time_based) | l#web3.providers.ipc.IPCProvider) |
| -   web3.geth                     | -   [web3.providers.legacy_       |
|     -   [module](#                | websocket.LegacyWebSocketProvider |
| web3.geth.xhtml#module-web3.geth) |     (built-in                     |
| -   web3.geth.admin               |     class)](#provid               |
|     -   [module](#web3.g          | ers.xhtml#web3.providers.legacy_w |
| eth.xhtml#module-web3.geth.admin) | ebsocket.LegacyWebSocketProvider) |
| -   web3.geth.debug               | -   [web3.prov                    |
|     -   [module](#web3.g          | iders.persistent.AsyncIPCProvider |
| eth.xhtml#module-web3.geth.debug) |     (built-in                     |
| -   web3.geth.txpool              |     cl                            |
|     -   [module](#web3.ge         | ass)](#providers.xhtml#web3.provi |
| th.xhtml#module-web3.geth.txpool) | ders.persistent.AsyncIPCProvider) |
| -   [web3.m                       | -   [we                           |
| iddleware.AttributeDictMiddleware | b3.providers.persistent.persisten |
|     (built-in                     | t_connection.PersistentConnection |
|                                   |     (built-in                     |
| class)](#middleware.xhtml#web3.mi |     class)](#providers.xhtml#web  |
| ddleware.AttributeDictMiddleware) | 3.providers.persistent.persistent |
| -   [web3.middlew                 | _connection.PersistentConnection) |
| are.BufferedGasEstimateMiddleware | -   [web3.providers.persis        |
|     (built-in                     | tent.PersistentConnectionProvider |
|     class)                        |     (built-in                     |
| ](#middleware.xhtml#web3.middlewa |     class)](#provi                |
| re.BufferedGasEstimateMiddleware) | ders.xhtml#web3.providers.persist |
|                                   | ent.PersistentConnectionProvider) |
|                                   | -   [web3.providers.persistent.r  |
|                                   | equest_processor.RequestProcessor |
|                                   |     (built-in                     |
|                                   |     class)](#internals.x          |
|                                   | html#web3.providers.persistent.re |
|                                   | quest_processor.RequestProcessor) |
|                                   | -   [web3.provi                   |
|                                   | ders.persistent.WebSocketProvider |
|                                   |     (built-in                     |
|                                   |     cla                           |
|                                   | ss)](#providers.xhtml#web3.provid |
|                                   | ers.persistent.WebSocketProvider) |
|                                   | -   [web                          |
|                                   | 3.providers.rpc.AsyncHTTPProvider |
|                                   |     (built-in                     |
|                                   |     class)](#providers.xhtml#web3 |
|                                   | .providers.rpc.AsyncHTTPProvider) |
|                                   | -                                 |
|                                   |  [web3.providers.rpc.HTTPProvider |
|                                   |     (built-in                     |
|                                   |     class)](#providers.xhtml      |
|                                   | #web3.providers.rpc.HTTPProvider) |
|                                   | -   [web3.providers.rpc.          |
|                                   | utils.ExceptionRetryConfiguration |
|                                   |     (built-in                     |
|                                   |     class)](#int                  |
|                                   | ernals.xhtml#web3.providers.rpc.u |
|                                   | tils.ExceptionRetryConfiguration) |
|                                   | -   web3.tracing                  |
|                                   |     -   [module](#web3.t          |
|                                   | racing.xhtml#module-web3.tracing) |
|                                   | -   web3.utils                    |
|                                   |     -   [module](#we              |
|                                   | b3.utils.xhtml#module-web3.utils) |
|                                   | -   web3.utils.abi                |
|                                   |     -   [module](#web3.u          |
|                                   | tils.xhtml#module-web3.utils.abi) |
|                                   | -   web3.utils.filters            |
|                                   |     -   [module](#filters         |
|                                   | .xhtml#module-web3.utils.filters) |
+-----------------------------------+-----------------------------------+

::: clearer
:::
:::
:::

::: clearer
:::
:::
